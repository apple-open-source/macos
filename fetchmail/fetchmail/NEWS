Fetchmail Release Notes
=======================

This file is in Unicode charset with UTF-8 encoding.
All dates are in Universal Time unless otherwise noted.

(The `lines' figures total .c, .h, .l, and .y files under version control.
Abbreviations in parentheses are the maintainers who committed the respective
change.  MA = Matthias Andree, ESR = Eric S. Raymond, RF = Rob Funk.)

# DEPRECATED FEATURES AND MAJOR INCOMPATIBLE CHANGE ADVANCE WARNINGS
* The MX and host alias DNS lookups that fetchmail performs in multidrop mode
  are obsolete, deprecated and may be removed from a future fetchmail version.
  They have never supported IPv6 (including IPv6-mapped IPv4) anyhow.
* The monitor and interface options may be removed from a future fetchmail
  version as they are not sufficiently portable.
* POP2 is obsolete.
  Support for POP2 may be removed from a future fetchmail version.
* RPOP is obsolete, support may be removed from a future fetchmail release.
* --sslcertck may become a default setting in a future fetchmail version.
* The multidrop To/Cc guessing code along with the fragile duplicate suppressor
  is deprecated and may be removed from a future release.
* The --enable-fallback (fall back to MDA if MTA unavailable) may be removed
  from a future fetchmail release.
* The "protocol auto" default inside fetchmail may be removed from a future
  fetchmail release. Explicit configuration of the protocol is recommended.

--------------------------------------------------------------------------------

fetchmail 6.3.4 (released 2006-04-14):

# KNOWN BUGS AND WORKAROUNDS:
  (this section floats upwards through the NEWS to be on top of the list)
* fetchmail does not handle messages without Message-ID header well
  (See sourceforge.net bug #780933)
* Sun Workshop 6 (SPARC) is known to miscompile the lexer in 64-bit mode.
  Either compile 32-bit code or use GCC to compile 64-bit fetchmail.
  Note that fetchmail doesn't take advantage of 64-bit code anyways,
  so compiling 32-bit SPARC code should be fine.
* The code still isn't 100% ISO-C compliant, some configurations attempt to
  compile files that are empty after preprocessing, which can cause compiler
  diagnostics and perhaps jam the compilation on strict compilers.

# BUG FIXES:
* configure: detect res_* functions properly with newer glibc ABIs.
  Patch by Miloslav Trmac.
* tracepolls: add folder information if available. Reported by Terry Brown.
* lexer: add %option noyywrap to avoid link errors about missing yywrap().
* a few more type fixes for report/snprintf, patch by Miloslav Trmac.
* bouncing: fetchmail would still send "General SMTP/ESMTP error." bounces
  in spite of "no bouncemail" configuration.
* SSL/TLS: if, for a certain server, an sslfingerprint is specified and
  sslcertck is NOT set, suppress printing SSL certificate mismatch errors.
  (Reported by Hannes Erven.)
* SSL/TLS: always print if the sslfingerprint mismatches, even in silent
  mode.  (This is for consistency with certificate verification errors.)

# TRANSLATION UPDATES:
* German/de (Matthias Andree), French/fr (Matthias Andree), Spanish/es (Héctor
  García), Polish/pl (Jakub Bogusz), Japanese/ja (Takeshi Hamasaki)
* New Vietnamese/vi translation (Clytie Siddall).
* Updated French descriptions for the .spec file (Stéphane Schildknecht,
  Luc Pionchon, Matthias Andree).

# CHANGES:
* pidfile: there is a new command-line (--pidfile PATH) and global option for
  the rcfile (set pidfile [=] "/path/to/pidfile") option to allow overriding
  the default location of the PID file.
  Requested by Héctor García, Debian maintainer.
* specgen.sh: Converted to UTF-8 to support translated texts better.

fetchmail 6.3.3 (released 2006-03-30):

# BUG FIXES:
* SEGFAULT: Do not attempt to overwrite the netrc password if none has been
  specified.  This fixes a segmentation fault bug introduced into 6.3.2.
  Fixes BerliOS bug #6234.  BerliOS patch #804 by Craig Leres.
  The patch, as accepted into fetchmail, was available separately from
  <http://download.berlios.de/fetchmail/patch-6.3.2.1-fix-netrc-SIGSEGV.diff>
* SEGFAULT: Work around C libraries that return a NULL in getaddrinfo()'s
  ai_canonname record, to avoid a segfault. Affects for instance FreeBSD 4.10,
  4.11 and 5.3 when dotted quads are given as server names.
  Analysis and fix by Vladimir Olegovich Ravodin (Владимир Олегович Раводин).
* IMAP: fix hangs in NOOP-based IDLE emulation. Reported by Casper Gripenberg
  and Brendan Lynch, fix by Sunil Shetye (his patch was merged) and Brendan Lynch.
* IMAP: Handle other clients concurrently accessing IMAP mailboxes better.
  Fetchmail quits the poll if the EXPUNGE count does not match expectations, and
  servers not updating RECENT counts after EXPUNGE are handled in a better way.
  (Patch by Sunil Shetye.)
* IMAP: Stop sending EXPUNGE after NOOP-idling (patch by Sunil Shetye).
* POP3: fetchmail can now use UIDL in fetchall keep mode, to avoid re-fetching
  the same messages again when the fetchall keyword is removed. Patch by
  Sunil Shetye. For details, please see
  <http://lists.berlios.de/pipermail/fetchmail-users/2006-March/000308.html>
* LMTP: fix bug in LMTP port validation (patch by Miloslav Trmac).
* SDPS: fetchmail no longer replaces the local user ID for an empty envelope
  sender when using the proprietary SDPS extension for POP3.
  Fixes Debian Bug#353575, reported by Roger Lynn.
* SDPS: Warn and disable SDPS if POP3 is disabled to avoid compilation errors.
* fetchmail no longer prints empty lines in verbose mode when using syslog.
* fetchmail no longer prints UID lists in verbose mode when using syslog.
* ./configure --quiet is now quieter (no SSL and fallback-related output).
* Miloslav Trmac's patch (with minor changes) to fix char * sign consistency,
  unused arguments and variables.
* More signedness, unused argument/variable and other warning fixes.

# CHANGES:
* --idle can now be specified on the command line, too.
* --fetchall is now supported on the command-line.
* POP3: Lower default fastuidl span to 4 (i. e. every 4th run fetches the
  whole UIDL list), patch by Sunil Shetye.

# DOCUMENTATION:
* "ssl" is a user option rather than a server option. Patch by Nico Golde.
  Fixes Debian Bug#354661, reported by Keith Hellman.
* The manual page now suggests "--" before the addresses in the sendmail MDA
  example, for safety.
* The FAQ item X9, Domino IMAP omits Content-Transfer-Encoding header, was
  added. Information provided by Anthony Kim on the fetchmail-friends list
  in March 2006.
* Credit Chris Boyle with the NOOP emulation code for IDLE in fetchmail 6.2.4.
  Eric forgot to credit Chris, thanks to Sunil Shetye for providing these links:
  http://lists.ccil.org/pipermail/fetchmail-friends/2003-July/007705.html
  http://lists.ccil.org/pipermail/fetchmail-friends/2003-July/007713.html
* Added a section about RETR vs. TOP to the manual page.
* Changed section/subsection levels in some areas.

fetchmail 6.3.2 (released 2006-01-22):

Unless otherwise noted, changes to this release were made by Matthias Andree.

# SECURITY FIX IN THIS RELEASE
* CVE-2006-0321: Fix segfault or bus error after bouncing a message.  This bug
  was introduced into 6.3.0 when removing alloca(); it caused fetchmail to free
  random memory.  Reported by Nathaniel W. Turner, Debian Bug#348747.
  See fetchmail-SA-2006-01.txt

# INCOMPATIBLE CHANGE:
* Automatically disable the POP3 TOP command if the greeting string contains
  "Maillennium POP3/PROXY server", which is used by comcast and known to
  truncate messages after 80 kByte. Fall back to RETR, and complain if we had
  used TOP otherwise (the warning is printed only once per server in daemon
  mode).  Suggested by Ed Wilts.
  *Note* that this means messages are marked read on these servers, which is a
  deviation from how 6.3.1 behaved, but we have no alternative, comcast haven't
  fixed this bug in years.  Preventing the loss of the remainder of the message
  justifies this incompatible fix.
* fetchmail, since 6.3.0, requires write permission to the directory holding the
  idfile. See the amendment in the 6.3.0 MAJOR INCOMPATIBLE CHANGES section
  below for details. The manual page was updated.

# CHANGES RELEVANT TO PACKAGERS:
* The outdated BUGS document was removed from the distribution.
* Added fetchmail-SA-2006-01.txt to the distribution.

# BUG FIXES:
* SMTP/LMTP cleanup to fix these two bugs:
  - switch back to SMTP after having tried LMTP hosts (multiple smtphost hosts)
  - switch back to LMTP after sending a bounce.
  The patch removes the global state variable that was the root of this problem.
  Patch by Sunil Shetye. (MA)
* Don't complain about fetchall keep in --configdump mode. Bug introduced in
  6.3.0.
* fetchmailconf.py: Fix novice help for Poll interval and fetchall.
  Reported by Justin Pryzby, Debian Bug #344978.
* Some verbose output disappeared in debug mode. Adding further -v options would
  alternate between verbose and debug mode. debug mode now comprises all verbose
  output, and adding more -v options does not switch back from debug to verbose
  mode.
* fetchmail.man: Fix accented characters in Héctor García's name. Merged from
  downstream debian/patches/01_man_page.dpatch.
* Add missing --help text for "--sslcertck" option.
* fetchmailconf.py: Accept --help and --version.
* fetchmail --version  now prints the copyright notice.
* don't complain about READ-ONLY IMAP folders in --fetchall --keep mode.
  Reported Alexander Zangerl, Debian Bug#348964.
* the RPM .spec file now generates a -debuginfo package on newer RPM versions.

fetchmail 6.3.1 (released 2005-12-19):

# SECURITY FIX IN THIS RELEASE
* CVE-2005-4348 Fix segmentation fault (null pointer dereference) in
  multidrop mode with headerless email.  See fetchmail-SA-2005-03.txt.
  Reported by Daniel Drake, patch by Sunil Shetye. (MA)

# OTHER BUG FIXES, DOCUMENTATION AND TRANSLATION UPDATES
* Fix broken default port in POP2. Patch by Stanislav Brabec, SUSE [CZ]. (MA)
* Fix manual page, some lines starting with ' were escaped by \&.
  Reported by Simon Barner. (MA)
* Ship with gettext-0.14.3 again, as 6.2.9-rc10 did. Found by Sunil Shetye. (MA)
* Actually set default SSL certificate path if --sslcertpath is unset.
  Reported by Heino Tiedemann and Rob MacGregor. (MA)
* Remove bogus Netscape IMAP4rev1 Service >= 3.6 warning about BODY[TEXT]
  that we are not using. Patch by Sunil Shetye. (MA)
* Plug potential memory and socket leak when polling multiple folders or when
  the upstream sends bogus message sizes.  Patch by Sunil Shetye. (MA)
* Update Catalan translation, by Ernest Adrogué Calveras. (MA)
* Fix segfault (null pointer dereference) on some operating systems with
  fetchmail's obsolete DNS MX/host alias lookups in multidrop mode.
  Patch by Dr.-Ing. Andreas Haakh. (MA)
* Close SMTP sockets early, to reduce resource usage, trigger earlier delivery
  with some MTAs and avoid SIGPIPE (SIG 13) when the SMTP listener gets bored
  and drops the connection after timeout.  Patch by Sunil Shetye. (MA)
* Don't treat hitting a fetch limit as error.  Patch by Sunil Shetye. (MA)
* Fix negative "messages left on server" on idle/repoll with fetchlimit.
  Patch by Sunil Shetye. (MA)
* Properly track logout stage.  Patch by Sunil Shetye. (MA)
* Preserve error conditions across postconnect script.  Sunil Shetye. (MA)
* Do not trash destination domain if multiple messages are forwarded into the
  same SMTP/LMTP connection. Reported by Joachim Feise, Berlios Bug #5849. (MA)
* Manual page: Add "-md5" to "openssl x509" example in --sslfingerprint
  documentation, since OpenSSL 0.9.8 changed the default to SHA1.
  Suggested by Jason White. (MA)
* Cope with servers that return UID information in response to non-UID
  RFC822.{SIZE|HEADER} requests. Reported by Jason White.
  Patch suggestion by by Sunil Shetye, simplified by MA.

fetchmail 6.3.0 (released 2005-11-30):

# SECURITY FIXES IN THIS RELEASE
* CVE-2005-2335: The POP3 UIDL code doesn't sufficiently validate/truncate the
  input length, so a (malicious or compromised) server that sends UIDs longer
  than 128 bytes can corrupt fetchmail's stack and crash fetchmail.
  This vulnerability is remotely exploitable to inject code run in a
  root shell. Edward J. Shornock, Ludwig Nussel. fetchmail-SA-2005-01.txt
* CVE-2005-3088: fetchmailconf now changes the output file to mode 0600 BEFORE
  writing to it, so there is no window where passwords could be read by the
  world. Matthias Andree. fetchmail-SA-2005-02.txt

# MAJOR INCOMPATIBLE CHANGES
* Remove support for --netsec/-T options, the required inet6_apps library is no
  longer available.
  http://www.inner.net/pub/ipv6/ states, as of 2005-07-03: "/pub/ipv6
  Our IPv6 software is now long defunct. Please find a more modern source."
  I haven't been able to find a more modern source.  Matthias Andree
* Operating systems that do not conform to the Single Unix Specification v2
  (1997) or v3 (2001, aka IEEE Std 1003.1-2001) are no longer supported. They
  may continue to work and non-intrusive patches to support them may be
  accepted.  Matthias Andree
* The default for --smtphost is now always "localhost" regardless of
  authentication types and protocols, so as to simplify configurations for
  workstations where the SMTP daemon only listens on the loopback interface.
  Sunil Shetye & Matthias Andree
Amendment, 2006-01-04:
* fetchmail's idfile (.fetchids) is no longer written directly, but the ids are
  written to a temporary file which is renamed into place after being written
  completely. This is to avoid writing incomplete idfiles when running out of
  space, which would cause excessive duplicate refetches of messages, this might
  make matters even worse. This means that fetchmail requires write permission
  on the directory holding the idfile. This will usually affect system-global
  daemons only, for instance, Debian. Found by Dan Jacobson. Matthias Andree.
Escalated to "incompatible", 2006-01-13:
* Try to obtain FQDN as our own host by default, rather than using "localhost".
  If hostname cannot be qualified, complain noisily and continue, unless
  Kerberos, ODMR or ETRN are used (these have always required an FQDN).
  Partial fix of Debian Bug#150137. Fixes Debian Bug#316454.  Matthias Andree

# CHANGES RELEVANT TO PACKAGERS AND USERS
* fetchmailconf is now a shell wrapper that calls the byte-compiled
  fetchmailconf.py script, which is now installed in the regular python
  directory. Matthias Andree.
* The --enable-inet6 configure option was removed. The code is mostly protocol
  agnostic, a fully IPv6 aware OS is expected to provide getaddrinfo(),
  getnameinfo() and the macro AF_INET6.  Matthias Andree.
* gettext (intl/) has been removed from the fetchmail package. Install GNU
  gettext 0.14 separately for NLS (i18n).  Matthias Andree
* Added Russian translation, courtesy of Pavel Maryanov of the
  Russian translation team. (MA)
* Updated and re-enabled Czech translation, by Miloslav Trmac (MA).
* Dropped da=Danish, el=Greek and tr=Turkish translations which have more than
  10% (61+) untranslated or fuzzy messages.  Matthias Andree.

# OTHER USER-VISIBLE CHANGES
* Sunil Shetye's fix to force fetchsizelimit to 1 for APOP and RPOP. (ESR)
* PopDel.py removed from contrib at author's request. (ESR)
* Matthias Andree's fix for Sunil Shetye's fetch-split patch. (ESR)
* Include James Stone's moldremover.py script. (ESR)
* Enable .fetchmailrc permissions checking under Cygwin. (ESR)
* Nalin Dahyabai's fix for POP3 strong authentication. (ESR)
* Revised Nalin Dahyabai's fix for POP3 strong authentication (the
  original version would go into an infinite loop when CAPA failed;
  found by David Greaves.) (MA)
* HOME_ETC patch for PLD Linux. (ESR)
* Sunil Shetye's fix for SSL configuration. (ESR)
* Simon Josefsson's patch for GSS library support. (ESR)
* Added Andrey Lelikov's recipe for Hotmail and Lycos Webmail. (ESR)
* Remove blank between MAIL FROM: and <, which causes Cyrus to complain.
  Patch by Phil Endecott. (RF)
* Build fixes for HESIOD and resolv.h trouble on FreeBSD. (MA)
* Fabrice Bellet's fix for Red Hat bug #113492, fetchmail hangs in IMAP
  mode after EXPUNGE when the server (Dovecot 0.99.10) doesn't update
  RECENT and EXISTS counts. (MA)
* Holger Mauermann's bounce patch, to use a NULL envelope from, not
  write a Return-Path header (both to meet RFC-2821), changed From,
  added Subject header, rewording the human readable part.  Fixes Debian
  bug #316446. (MA)
* Merge Sunil Shetye's time.h handling fix. (MA)
* Merge Gerd von Egidy's patch to avoid a segfault in multidrop/received
  mode when the Received: headers are malformatted. (MA)
* MIME-encode bodies and Subject headers of warning messages, limiting
  the header to 7 bits. (MA)
* Normalize most locale codesets to IANA codesets, based on
  norm_charmap.c by Markus Kuhn. (MA)
* Remove sleep(3) after POP3 login, patch by Brian Candler. (MA)
* Fix option parsing bug that trashes the showdots setting when more
  than one server is configured. Patch by Brian Candler. (MA)
* Honor sslcertpath setting even if sslcertck is unset. Patch by Brian
  Candler. (MA)
* SSL certificate checking fixes, don't display same error message twice
  in succession, make sure that Common Name and fingerprint checking are
  only done once. Print all validation warnings/errors even if not in
  verbose mode. Patch by Brian Candler. (MA)
* Import Bjorn Reese and Daniel Stenberg's MIT-licensed Trio 1.10 from
  http://daniel.haxx.se/projects/trio/ for systems that do not support
  snprintf or vsnprintf. (MA)
* Clean up the horrible #ifdef HAVE_[V]SNPRINTF that made the code
  unreadable. Use Trio where [v]snprintf is/are missing. (MA)
* Default to Linux 2.2 /proc/net/dev format, and use uname(2) to determine the
  kernel version instead of calling uname(1). Thanks to Paul Slootman.  (MA)
* Be more careful when swapping UID lists or writing the .fetchids file,
  requested by Manfred Weihs. (MA)
* Print a warning if multidrop configuration is attempted without
  envelope option. (MA)
* Split information on fetchmail versions before 6.0.0 to a separate
  OLDNEWS file. (MA)
* Merge SuSE patches: (sent by Stanislav Brabec, merged by Matthias Andree)
  - fetchmail-6.2.5-declaration.patch (double sigint_handler decl/getpass.c)
  - fetchmail-6.2.5-implicit-declaration.patch (missing #include)
  - fetchmail-6.2.5-random-result.patch (uninitialized variable/opie.c)
* Revised some bogus assertions about POP3 LAST and UIDL use in the
  manual page. UIDL isn't flaky as the man page suggested, but a
  reliability feature. In fact, IMAP4 code is flaky in that it relies on
  the upstream seen flags. (MA)
* Miloslav Trmac's patch for fetchmailconf to support string-type values
  of the "port" variable, avoiding "port None" corruption in .fetchmailrc.
  To fix Redhat Bug #55623 (MA)
* de.po fixes from Nico Golde (MA)
* es.po fixes from Jesus Roncero, Debian bug #286044 (MA)
* sink.c fix from Cesar Eduardo Barros, to avoid double @ in address
  when username contains an @ and the envelope sender is null, Debian
  bug #272289 (MA)
* configure.ac cleanups by Miloslav Trmac (MA)
* Miloslav Trmac's fix to reply_hack() type, for systems where
  sizeof(int) != sizeof(size_t). (MA)
* Nalin Dahyabhai's fix for driver.c to not call the private Kerberos
  krb5_init_ets() function. Sent by Miloslav Trmac. (MA)
* Nalin Dahyabhai's fix for sink.c/transact.c to reserve sufficient
  space for \r\n trailers in snprintf calls. Sent by Miloslav Trmac,
  possibly fixing Red Hat bug #114470. (MA).
* Nalin Dahyabhai's patch to use the krb5-config script, if present.
  Sent by Miloslav Trmac. (MA)
* Nalin Dahyabhai's fix to make rpa.c compile. Sent by Miloslav Trmac. (MA)
* Trivial fetchmailconf.man to redirect to fetchmail.1.
  Reported by Miloslav Trmac. (MA)
* Internationalization (i18n) updates by Miloslav Trmac. (MA)
* Fix "couldn't find canonical DNS name of NN (MM)" for hosts that have
  only IPv6 addresses. Matthias Andree.
* Revised INSTALL after question from Brian Candler, inet6-apps is no
  longer available: remove inet6-apps hints for IPv6, and add some
  apologetic message for IPsec. Note the code may be removed in a future
  version. Matthias Andree.
* Brian Candler's FAQ update about SSL certificate verification. (MA)
* Nico Golde's patch to support "proto RPOP" in the configuration file,
  reported by Dr. Andreas Krüger, Debian bug #242384 (MA)
* Skip sending POP3 PASS command when USER command failed. Matthias Andree.
* Run fetchmail.man through automatic spell checker. Matthias Andree.
* Major fetchmail(1) manual page overhaul by R. Hannes Beinert, to
  clarify singledrop vs. multidrop operation. (MA)
* Make tracepolls a server option, as documented. Fixes Debian bug
  #156094. Matthias Andree.
* Fix some minor inaccuracies (RFC-1893 related, grammar/spelling) in
  the manual page.
* Rename ESR's design notes to esrs-design-notes.html and add a new
  design-notes.html document. The NOTES file will contain both of them.
  Matthias Andree.
* Fix Debian bug #301964, fetchmail leaks sockets when SSL negotiation
  fails. Fix suggested by Goswin Brederlow. (MA)
* Really fix Debian Bug#207919 (garbage in Received: lines when smtphost set),
  patch by Tobias Diedrich.  The 6.2.5 NEWS claimed Gregan's patch had fixed
  #207919 but it had fixed #212484 instead and #207919 remained unfixed in
  6.2.5. The entry below has been corrected to read #212484 now. (MA)
* When writing the PID file, write a FHS 2.3 compliant PID file.
  Fixes Debian bug #230615. Matthias Andree.
* Make ODMR really silent, suppress "fetchmail: receiving message
  data". Fixes Debian Bug#296163. Matthias Andree.
* Add From: header to warning emails. Debian Bug#244828. Matthias Andree.
* Fix IMAP code to use password of arbitrary length from configuration
  file (although not when read interactively). Debian Bug#276424.
  Matthias Andree
* Document that fetchmail may automatically enable UIDL option.
  Debian Bug#304701. Matthias Andree.
* Put *BOLD* text into the manual page near --mda to state unmistakably that
  the --mda %T and %F substitutions add single quotes, hoping to avoid bogus
  bug reports such as Debian Bug #224564. Matthias Andree
* Rename lock_release to fm_lock_release, to avoid namespace collision on
  Darwin. NetBSD PR#28543 (pkg/28543). Matthias Andree.
* The RFC-822 parser no longer strips the last character of bare addresses.
  Matthias Andree
* The IP address matching code was broken and 
  1. didn't search exhaustively, but matched only the first IP address of the
  server's queryname against the IP addresses of the server name to match.
  2. didn't match IP aliases versus MX hosts.  Matthias Andree
* The "port" option, while still understood, is being replaced by the "service"
  option, which is now supported even without --enable-inet6. Matthias Andree.
* The default distribution format is now bzip2. Matthias Andree.
* fetchmailconf redirects fetchmail's input from /dev/null so it doesn't
  wait for the user to enter a password when the user doesn't even see
  the prompt. Reported by Michal Marek. Matthias Andree.
* Write RFC-compliant BSMTP envelopes. Reported by Nico Golde. Matthias Andree.
* Fix --with-gssapi compilation problem. Simon Josefsson. (MA)
* Foster protocol-independence to support IPv6 better, for instance, providing
  IPv6 addresses in Received: headers. Matthias Andree.
* Received: headers now enclose the for <...> destination address in angle
  brackets for consistency with Postfix.  Matthias Andree.
* Operating systems that do not support at least one of gethostbyname,
  gethostbyname_r, getipnodebyname are no longer supported.  Matthias Andree.
* Fixes to --with-hesiod option. Sunil Shetye. (MA)
* Delete oversized messages with the new --limitflush option. Debian
  Bug#212240. Sunil Shetye. (MA)
* Fix MacOS X compilation failures in sink.c (ru_*time has incomplete type).
  Berlios Bug #4725. Matthias Andree.
* Fix "auth ntlm" to send AUTH NTLM (rather than AUTH MSN). Add "auth msn"
  officially. Reported by Yves Boisjoly. Matthias Andree
* Expunge between IMAP folders when polling multiple folders.
  Sunil Shetye. (MA)
* Fix IMAP expunged message counting. Sunil Shetye. (MA)
* Add full support for --service option. Matthias Andree
* When getaddrinfo() fails resolving a service, log getaddrinfo() error. (MA)
* Fix bogus "cannot resolve service * to port number" error. Simon Barner. (MA)
* Failure to set up SSL connections now results in PS_SOCKET. Suggested by
  Thomas Wolff. Matthias Andree.
* Kerberos IV detection fix for FreeBSD 4. Simon Barner. (MA)
* Fix display and documentation of --envelope option. Matthias Andree
* Make "envelope 'Delivered-To'" work with dropdelivered. Timothy Lee. (MA)
* Add -DBIND_8_COMPAT to Darwin (MacOS X) compiles, to fix build problems on
  newer Darwin versions. Matthias Andree.
* fetchmail should now automatically detect if OpenSSL requires -ldl.
  Matthias Andree.
* Fix Solaris build with --disable-nls (blastwave.org). Matthias Andree.
* Missed --port/--service/--ssl cleanups in the manual. Reminder from Thomas
  Wolff. (MA)
* Complain in POP3 if NTLM/MSN auth is requested but had not been enabled at
  compile time. This configuration mismatch now causes an error message and
  authentication failure. Found by Yves Boisjoly.  Matthias Andree
* fetchmailconf now allows expert users to choose the authorization type and
  also offers MSN and NTLM, suggested by Yves Boisjoly. Matthias Andree
* fetchmailconf now (as of 1.49) writes its version to the comment of the
  saved run control file. Matthias Andree
* Properly shut down SSL connections. Berlios Patch #647 by Arkadiusz
  Miśkiewicz. (MA)
* Global variable cleanup, to fix daemon mode reinitialization problems. Patch
  by Sunil Shetye. (MA)
* fetchmailconf -h documents the fetchmailconf -h option. Matthias Andree
* fetchmailconf -V now prints the fetchmailconf version. Matthias Andree
* Add support for SubjectAltName (RFC-2595 or 2818), to avoid bogus certificate
  mismatch errors. Patch by Roland Stigge, Debian Bug#201113. (MA)
* make fetchmail --silent --quit really silent, Debian Bug #229014 by Dr.
  Andreas Krüger.  Matthias Andree
* cleanup --quit handling again (so that --silent --quit just kills the
  existing daemon, rather than continue running), and document it more clearly.
  Matthias Andree
* Print an error message if multiple "defaults" records are found in the
  configuration file.  Matthias Andree
* Bury on_exit officially - the necessary code had been missing from 6.0.0,
  6.2.0, 6.2.5.  Matthias Andree
* Exit with error if the lock file cannot be read.  Matthias Andree
* Exit with error if the lock file cannot be created exclusively, this got
  broken in a 6.2.6-pre, 6.2.5.2 and older were fine.  Matthias Andree
* Do not break some other process's lockfile in "-q" mode, but wait for the
  other process's exit.  Matthias Andree
* Man page: --sslfingerprint points user to x509(1ssl) and gives an example
  how to use it. Debian Bug#213484, Eduard Bloch. (MA)
* fetchmailconf now sets the service properly after autoprobe. Fixes Debian
  Bug#320645.  Matthias Andree
* Man page: Fix Debian Bug#241883, making global options more clear. Matt
  Swift, Matthias Andree.
* When eating IMAP message trailer, don't see any line containing "OK" as the
  end of the trailer, but wait for the proper tagged OK line. To work around
  the qmail + Courier-IMAP problem in Debian Bug#338007. Matthias Andree
* Fix Debian Bug#317761: when trying to send a bounce message, don't bail out
  if we cannot qualify our own hostname, so we aren't losing the bounce.
  Instead, pass the buck on to the SMTP server and use our own unqualified
  hostname. Matthias Andree
* Revise some error messages so they are less confusing. Sunil Shetye.
* Man page: update --smtphost documentation. Sunil Shetye, Matthias Andree.
* Man page: clarify --loghost works only while detached. Matthias Andree
* Man page: update --smtpaddress documentation. Sunil Shetye.
* Fix several memory leaks and bugs in the SMTP/LMTP retry logic where
  fetchmail confused UNIX and Internet domain sockets. Sunil Shetye.
* Man page (BUGS): document that passwords are length limited. Matthias Andree
* Man page: Document that quoted strings that run across line boundaries
  contain the control characters (CR or LF). Document explicitly the backslash
  escape sequences and their differences from the escape sequences used in the
  C programming language.  Matthias Andree
* Fix segfault when run control file ends with a backslash inside an
  unterminated quoted string. Matthias Andree.
* In quoted strings, support backslash as last character on a line to join the
  following line to the current. Matthias Andree.
* Parsing untagged IMAP responses is more robust now. Matthias Andree.
* Man page: Remove some procmail praises in --mda documentation, suggest
  maildrop instead, warn of procmail fallthrough behavior. Matthias Andree.
* Man page: Revise AUTHORS and SEE ALSO sections. Matthias Andree.
* Updated translations: Albanian [sq] (Besnik Bleta), Catalan [ca] (Ernest
  Adrogué Calveras), Czech [cs] (Miloslav Trmac), German [de] (MA),
  Spanish (Castilian) [es] (Javier Kohen), French [fr] (MA),
  Polish [pl] (Jakub Bogusz), Russian [ru] (Pavel Maryanov).
* In oversized warning messages, print the account name, too. Fixes Debian
  Bug#213299. Sunil Shetye (MA).
* Fix installation without Python. Sunil Shetye, reported by Peter Church. (MA)
* Update Japanese translation. Fixes Debian Bug#329342, Takeshi Hamasaki. (MA)
* Fix imap.c size safeguard that broke on x86_64 architecture. Matthias Andree
* The FAQ is now available for duplex DIN A4 printing in PDF format.
  Don't bother to ask for a Letter version, I don't care.  Matthias Andree
* Man page: Use \- in the manual page where appropriate so that copy & paste
  works.  I hope we got them all.  Héctor García, Matthias Andree.

# INTERNAL CHANGES
* Switched to automake. Matthias Andree.
* Got rid of alloca() in fetchmail proper.  Matthias Andree
* Got rid of ipv6-connect, inner_connect and thereabouts.  Matthias Andree

--------------------------------------------------------------------------------

fetchmail-6.2.5 (Wed Oct 15 18:39:22 EDT 2003), 23079 lines:

* Updated Spanish, Turkish, and German translation files.
* Matthew Gregan's patch to handle garbage lengths from dbmail;
  closes Debian bug #212484.
* Fix IMAP query so new-message count doesn't include deleted messages.
* Man page typo fix, closes Debian bug #205892.
* OpenSSL cleanup patches from levinedl@acm.org.
* Benjamin Drieu's patch to fix Debian bug #212240, no oversized-message
  flushing if both "flush" and "limit" were specified.
* Benjamin Drieu's patch for Debian bug #156592, incorrect handing of 
  host/port option.
* Smash all NULs out of headers right after the socket read.
* Dup-killer code now keys on an MD5 hash of the raw headers.
* Sunil Shetye's patches to break up fetching of sizes and UIDLs.

There are 599 people on fetchmail-friends and 748 on fetchmail-announce.

fetchmail-6.2.4 (Wed Aug 13 04:27:35 EDT 2003), 22625 lines:

* Updated German, Spanish, Catalan, and Turkish translations.
* IDLE is now supported using NOOP commands even if the server doesn't support
  the IMAP IDLE extension. Patch by Chris Boyle.
* Sunil Shetye's patch to do better password shrouding.
* Sunil Shetye's bug-fix rollup patch.
* Introduce a translation item for the word "seen".
* Back out the hack to deal with lack of byte stuffing on some POP3 servers.
* Thomas Steudten's patch to improve SMTP handling of 550 errors.

There are 585 people on fetchmail-friends and 745 on fetchmail-announce.

fetchmail-6.2.3 (Thu Jul 17 14:53:00 EDT 2003), 22490 lines:

* French, German, Danish, Spanish, and Turkish translations updated.
* Brian Sammon's patch to deal with malformed message lines containing NULs.
* Fai's patch to ignore all but the first Return-Path (some spams have
  more than one of these).
* Benjamin Drieu's patch to properly byte-stuff when talking to BSMTP.
  Fixes Debian bug #184469.
* Benjamin Drieu's patch to enable auth=cram-md5.
  Fixes Debian bug #185232.
* Sunil Shetye's configure.in patch to avoid spurious search order messages
  from GCC.
* Header-reading code now copes better with lines ending in \n only.
* Elias Israel's patches for POP3 NTLM support and dealing with byte-
  stuffing failures at socket level.

There are 580 people on fetchmail-friends and 750 on fetchmail-announce.

fetchmail-6.2.2 (Fri Feb 28 21:34:26 EST 2003), 22345 lines:

* Sunil Shetye's patch to improve behavior on empty messages.
* Conform to RFC2595; reissue capability probes after successful 
  STARTTLS negotiation.
* Sunil's patch to make handling of failed STARTTLS more graceful.
* Sunil's JF2 fix patch for .fetchmailrc security.
* Christophe GIAUME <christophe@giaume.com> finished the implementation
  of RFC2177 IDLE.
* Jason Tishler's fix patch for Cygwin.
* Support ssh-style authentication in POP3
* Fix for Debian bug #108977, clean up config file evaluation,
  by Benjamin Drieu.

There are 554 people on fetchmail-friends and 727 on fetchmail-announce.

fetchmail-6.2.1 (Tue Jan 14 08:17:19 EST 2003), 22219 lines:

* Updated German, Turkish, Spanish, and Danish translation files.
* Integrated Sunil Shetye's patch to make mark_seen an explicit method.
* Removed FAQ warning about GMX and associated fetchmailconf check, 
  we have a report that its servers are conformant now.
* Another Sunil patch to fix a minor bug in bouncemail generation.

There are 536 people on fetchmail-friends and 716 on fetchmail-announce.

fetchmail-6.2.0 (Fri Dec 13 00:10:07 EST 2002), 22235 lines:

* Applied Steffen Esser's fix for a buffer-overflow bug in rfc822.c
* Updated Danish, German, and Turkish translation files.
* Sunil Shetye's SMTP timeout patch.

There are 538 people on fetchmail-friends and 701 on fetchmail-announce.

--------------------------------------------------------------------------------

fetchmail-6.1.3 (Thu Nov 28 05:35:15 EST 2002), 22203 lines:

* Updated Turkish, Danish, German, Spanish, Catalan po files.
* Added Slovak support.
* Configure.in update for autoconf 2.5 (Art Haas). 
* Be case-insensitive when looking for IMAP responses.
* Fix logout-after-idle-delivery bug (Sunil Shetye).
* Sunil Shetye's patch to bulletproof end-of-header detection.
* Sunil's fix for the STARTTLS problem -- repoll if TLS nabdshake
  fails.  The attempt to set up STARTTLS can be suppressed with 'sslproto ""'.

There are 540 people on fetchmail-friends and 701 on fetchmail-announce.

fetchmail-6.1.2 (Thu Oct 31 11:41:02 EST 2002), 22135 lines:

* Jan Klaverstijn's verbosity-lowering patch.
* Updated Turkish, German, Catalan, and Danish translation files.
* Fix processing of POP3 messages with missing bodies.
* Minor fixes by Sunil Shetye: fix generation of auth fail note, handle
  unexpected SIGALRM, plug memory leak, handle lines beginning with '\0',
  try to bulletproof error handling against read failures.

There are 535 people on fetchmail-friends and 696 on fetchmail-announce.

fetchmail-6.1.1 (Fri Oct 18 14:53:51 EDT 2002), 22087 lines:

* OTP fix patches from Stanislav Brabec <utx@penguin.cz>
* fix patch for writing antispam capability correctly in conf.c.
* Fix patches for Debian bugs #162571, #156592.
* Correction to manpage re -b and qmail.
* Patch to disable use of STLS if auth passwd is specified.
* Fix specfile generation to handle SSL correctly.
* New Danish, Turkish, and Catalan translation files.
* Improved ODMR debug messages.
* IMAP efficiency hack; don't fetch sizes unless needed.
* Detect and rewrite invalid return paths beginning with @.
* Fix for subtle freeing bug that suppressed information in some bounce msgs.
* Newline fix patches for internationalization files.
* Fix reversed test guarding authentication-failure warnings.
* Fix POP3 breakage starting at 5.9.14.

There are 529 people on fetchmail-friends and 693 on fetchmail-announce.

fetchmail-6.1.0 (Sun Sep 22 18:31:23 EDT 2002), 21999 lines:

* Updated French translation.
* Stefan Esser's fix for potential remote vulnerability in multidrop mode.
  This is an important security fix!

There are 519 people on fetchmail-friends and 680 on fetchmail-announce.

--------------------------------------------------------------------------------

fetchmail-6.0.0 (Tue Sep 17 19:48:25 EDT 2002), 21972 lines:

* Applied Matt Kraai's fix for minor Debian bug #144539.
* Nerijus Baliunas's patch to support STARTTLS over IMAP.
* More cleanups and minor bugfixes from Sunil Shetye.
* Default antispam-response list is now empty.
* Updated de and po translations.

--------------------------------------------------------------------------------

There are 520 people on fetchmail-friends and 683 on fetchmail-announce.

--------------------------------------------------------------------------------

 vim:tw=80 com=bf\:* ts=8 sts=8 sw=8 ai:
