Fetchmail Release Notes
=======================

This file is in Unicode charset with UTF-8 encoding.
All dates are in Universal Time unless otherwise noted.

(The `lines' figures total .c, .h, .l, and .y files under version control.
Abbreviations in parentheses are the maintainers who committed the respective
change.  MA = Matthias Andree, ESR = Eric S. Raymond, RF = Rob Funk.)

# ADVANCE WARNING OF FEATURES TO BE REMOVED OR CHANGED IN FUTURE VERSIONS
(There are no plans to remove features from a 6.3.X release, but they may be
removed from a 6.4.0 or newer release.)
* The MX and host alias DNS lookups that fetchmail performs in multidrop mode
  are based on assumptions that are rarely met in practice, somewhat defective,
  deprecated and may be removed from a future fetchmail version.
  They have never supported IPv6 (including IPv6-mapped IPv4).
  Non-DNS based alias keywords such as "aka" will remain in fetchmail.
* The monitor and interface options may be removed from a future fetchmail
  version as they are not reasonably portable across operating systems.
* POP2 is obsolete, support will be removed from a future fetchmail version.
* RPOP is obsolete, support will be removed from a future fetchmail release.
* --sslcertck will become a default setting in a future fetchmail version.
* --sslfingerprint may be removed from a future fetchmail version, because it's
  just too easily abused to create a false sense of security.
* The multidrop To/Cc guessing code along with the fragile duplicate suppressor
  is deprecated and may be removed from a future release.
* The "envelope Received" option may be removed from a future release, because
  the Received header was never meant to be machine-readable, the format varies
  widely, and various other differences in behavior make parsing Received an
  unreliable undertaking. The envelope option as such will remain though, in
  order to support Delivered-To, X-Envelope-To, X-Original-To and similar.
  See also <http://home.pages.de/~mandree/mail/multidrop>.
* The --enable-fallback (fall back to MDA if MTA unavailable) will be removed
  from a future fetchmail release, because it makes fetchmail's behavior
  inconsistent and confusing.
* The "protocol auto" default inside fetchmail may be removed from a future
  fetchmail release. Explicit configuration of the protocol is recommended.
* Kerberos IV support may be removed from a future fetchmail release.
* SIGHUP wakeup support may be removed from a future fetchmail release and
  cause fetchmail to terminate - it was broken for many years.
* Support for operating systems that are not sufficiently POSIX compliant may be
  removed or operation on such systems may be suboptimal for future releases.
  This means that fetchmail may only continue to work on C99 and POSIX 2001
  based systems.
* The maintainer may migrate fetchmail to C++ with STL or C#, and impose further
  requirements (dependencies), such as Boost or other class libraries.
* The softbounce option default will change to "false" in the next release.

--------------------------------------------------------------------------------

fetchmail 6.3.11 (released 2009-08-06):

# SECURITY BUGFIXES
* CVE-2009-2666: SSL NUL prefix impersonation attack through NULs in a
  part of a X.509 certificate's CommonName and subjectAltName fields. These
  fields use opaque strings with a separate length field, so that the NUL
  character isn't a special character inside the certificate. Fetchmail, being
  written in the C language, used to treat these strings as C strings
  nonetheless, so that the domain comparison would end at the first embedded NUL
  character, rather than at the real end of the string.
    Fetchmail will now abort certificate verification as failed if NULs are
  encountered inside either of these fields regardless of their position, and
  drop the connection even if --sslcertck is not used, because NUL is not a
  valid character in legitimate DNS names.
  See fetchmail-SA-2009-01.txt for details, including a minimal patch.

# BUGFIXES
* Remove the spurious message "message delimiter found while scanning headers".
  RFC-5322 syntax states that the delimiter is part of the body, and the body is
  optional.
* Convert all non-printable characters in certificate Subject/Issuer
  Common Name or Subject Alternative Name fields to ANSI-C hex escapes (\xnn,
  where nn are hex digits).

# TRANSLATION UPDATES AND ADDITIONS (ordered by language name):
* [zh_CN] Chinese/Simplified (Ji ZhengYu)
* [es]    Spanish/Castilian (Francisco Molinero)


fetchmail 6.3.10 (released 2009-07-02):

# INCOMPATIBLE BUGFIXES AND CHANGES
* Fetchmail no longer drops permanently undelivered messages by default, to
  match historic documentation.  It does this by adding a new "softbounce"
  option, see below.
  Fixes Debian Bug#471283, demotes Debian Bug#494418 to wishlist.
* There is a new "softbounce" global option that prevents the deletion of
  messages that have not been forwarded. It defaults to "true" for fetchmail
  6.3.X in order to match historic documentation. This may change its default
  in the next major release.

# BUGFIXES
* Fix misuse of canonical autoconf target as _TARGET when it should have been
  _HOST. Report and patch courtesy of Diego E. "Flameeyes" Pettenò.
  Details: http://blog.flameeyes.eu/2009/01/01/the-canonical-target
* Do not lose PS_MAXFETCH (13) exit status when hitting maxpoll. Reported by
  Michelle Konzack, Debian Bug#508667.
* Do not overlap source and destination fields in snprintf() in interface.c.
  Courtesy of Nico Golde, Debian.
* When a pre- or post-connect command fails, now report the exit status or
  termination signal properly through sys/wait.h macros.
* When acquiring a body, understand NIL ("no such data item"), as returned by
  some MS Exchange versions. Fixes BerliOS Bug #11980 by KB Sriram.
* Make progress tickers (-v/--showdots) consistent, and update documentation 
  accordingly ("." for each 1024 octets read, "#" for a header written, and "*" 
  for each body line written.)
  The conditions under which these had been printed were inconsistent,
  illogical, and documentation hadn't matched real behaviour for long.
* For NTLM authentication, use dynamically allocated buffers.
  Fixes Debian Bug#449179, reported by Stepan Golosunov.
* Non-delivery notice ("bounce mail") now mentions the original reason again,
  before the address list. This fixes a regression introduced in 6.3.0.
* Several compiler warnings were fixed.
* The minimum recommended SMTP (RFC-5321) timeouts are enforced to leave
  sufficient time for the listener to respond. Some synchronous listeners,
  particularly when used with spam filtering and other policy enforcement
  services, take extended amounts of time to process messages after the sender,
  recipient, or data block and EOM line. This can cause fetchmail to not wait
  long enough for the "250 Ok" and make fetchmail believe the message wasn't
  properly delivered when in fact it was; fetchmail would then retry the
  download next time and never make progress.
  Fixes Berlios Bug #10972, reported by Viktor Binzberger.
* The ESMTP/LMTP client will now apply an application-specific timeout while
  waiting for the EHLO/LHLO response, rather than wait for the server or TCP
  connection timeout.
* Treat 530 errors as temporary, so as not to delete messages on configuration
  errors. Partially taken from Petr Cerny's patch in Novell Bugzilla #246829.
  The 501 part of said patch was not added, as the maintainer is not convinced
  501 is a temporary condition, and softbounce takes care of this anyways.

# CHANGES
* Make the comparison of the SSL fingerprints case insensitive, to
  ease its use. Suggested by Daniel Richard G.
* Proper precedence ordering for the syslog and logfile options. If the logfile
  option is effective (i. e. we're in daemon mode and nodetach isn't used),
  reset the syslog option. If logfile is ineffective (we're not in daemon mode,
  or nodetach is set), syslog takes precedence.
* The sleeping at/awakened at messages appear in logfiles and syslog only if
  verbose mode is enabled.  On the console, they will still appear without
  verbose mode.  Fixes Debian Bug#282259.
* fetchmail only requests IPv6 addresses via name service if at least one is
  configured on the local host, likewise for IPv4.  (AI_ADDRCONFIG flag to
  getaddrinfo()) Extended version of Redhat's patch.
* If the server name contains "yahoo.com", offers the "ID" capability, and we're
  polling via IMAP, send an ID ("guid" "1") transaction first, ignoring its
  result. This appears needed to be able to log into Yahoo's Zimbra servers, but
  there are open issues (such as being only able to download one message and
  server certificate mismatches).

# CHANGES TO CONTRIB
* Fix bashism in contrib/fetchsetup. Fixes Debian Bug#530081.

# DOCUMENTATION
* Some parts of the the manual page were revised for clarity, accuracy, and
  updated recommendations (particularly SSL/TLS) and formatting conventions from
  man-pages(7).
* The README and README.SSL documents were updated.
* A document, README.SSL-SERVER, was added to describe server-side requirements
  for proper SSL and/or TLS service offerings. These are not specific to
  fetchmail.
* Documentation on how to make "NOMAIL" (exit code 1) not treated an error has
  been added to the EXIT CODES section of the manpage and to the FAQ as item C8.
  The suggested solution uses a tiny POSIX shell script fragment.
  Fixes Debian Bug #530749, filed by Reuben Thomas.

# TRANSLATION UPDATES AND ADDITIONS (ordered by language name):
* [cs]    Czech (Petr Pisar)
* [en_GB] English/British
* [de]    German
* [id]    Indonesian (Andhika Padmawan)
* [it]    Italian (Vincenzo Campanella)
* [ja]    Japanese (Takeshi Hamasaki)
* [pl]    Polish (Jakub Bogusz)
* [ru]    Russian (Pavel Maryanov), fixing Debian Bug #531925
* [es]    Spanish/Castilian (Francisco Molinero)
* [zh_CN] Chinese/Simplified (Ji ZhengYu)


fetchmail 6.3.9 (released 2008-11-16):

# SECURITY AND CRITICAL BUG FIXES:
* CVE-2007-4565: Denial of service: When fetchmail tries to inject a warning
  message it created itself, and the message is refused by the SMTP listener,
  fetchmail dereferences a NULL pointer and crashes. Report & fix by Earl Chew.
  Note while this is theoretically a remote denial of service attack vector,
  fetchmail by default talks SMTP to the localhost, so the overall risk is
  rather low.
  This bug was apparently introduced on 1998-11-27 when the bouncemail facility
  was modularized. The bug then made its appearance in fetchmail release 4.6.8.
  See also fetchmail-SA-2007-02.txt.
* CVE-2008-2711: Denial of service: When fetchmail logs data blobs
  (for instance, a To: header in -v -v verbose mode) in excess of 2048
  bytes, it will crash, because it hands an uninitialized argument
  pointer (not the format string though) to vsnprintf and reads a
  random memory location (it calls va_arg() too often without
  resetting it with va_start()). Based on a patch (BerliOS patch #2492)
  by Petr Uzel, fixes Novell Bug #354291.
  Note 6.3.9-rc1 did not completely fix this issue, so it was redrawn a few 
  hours after its release.
  See also fetchmail-SA-2008-01.txt.
* When expunging, mark the right messages as seen to avoid message loss in "keep
  flush" configurations.  Workaround for previous versions: "expunge 0".
  Report and patch by Alexander Cherepanov - thanks a lot, Berlios Bug #11797,
  "imap_mark_seen doesn't consider expunged messages".
* SSL fix: close memory leak when SSL connection fails; fetchmail used to forget
  calling SSL_free() on the SSL context, leaking in excess of 500 kB RAM on a
  x86_64 system per failed SSL connection attempt.
  Bug reported and patch provided by Seiichi Ikarashi, Fujitsu.

# BUG FIXES:
* The configure script will additionally check for 'dn_skipname', to fix build
  failures with µClibc. The new check still recognizes the resolver libraries on
  Ubuntu 7.04, openSUSE 10.2, Solaris 8, NetBSD 4.0_BETA2 and FreeBSD 6.2.
  Fixes Gentoo bug #134187.
  NOTE: this is a bit of a hack, since we twist the HAVE_RES_SEARCH result, but
  res_search() and dn_skipname() are only used together and scheduled for
  removal in future versions, so this is probably fine.
* No longer complain about invalid sslproto "" when POP3 CAPA probe fails.
  Fixes Debian Bug#421446 (Holger Leskien), Novell Bug #247233 (Jon Nelson).
  Thanks to Matthias Strauß for a configuration to reproduce the issue.
* Allow .fetchmailrc and .fetchids to be symlinks, as the manpage does not
  document they aren't allowed - fixes Debian Bug #452907 (Roger Leigh).
  TOCTOU race persists.
* fetchmailconf quotes mailbox (folder) names when writing the configuration.
  Fixes BerliOS Bug #13207 (reported + fix suggested by Terry Brown).
* Only print "Deleting fetchids file" if there actually is one.
  Fixes Debian Bug#374514, reported by Dan Jacobson.
* SSL fix: check and report if SSL_set_fd fails.

# CHANGES:
* autoconf 2.60 is now required to build fetchmail; it uses
  AC_USE_SYSTEM_EXTENSIONS to replace AC_AIX, AC_MINIX, and the like.
* Removed dead FETCHMAIL_DEBUG code from fetchmail.h that was disabled by 
  default with no switches in configure to enable it. However, the macro would 
  have been prone to a symlink attack. Found by Nico Golde.
* Removed dead FORCE_STUFFING code from socket.c that was disabled by default
  with no switches in configure to enable it.
* Include the typedef for int16 in the #ifndef _AIX in smbencrypt.c (Peter
  O'Gorman)
* Correct check for u_int32_t in configure.ac (seems to be typedef'ed in
  namser.h on some platforms.) (Peter O'Gorman)
* In configure.ac change all CPFLAGS to CPPFLAGS, CEFLAGS to CFLAGS and LDEFLAGS
  to LDFLAGS otherwise the results of some tests (additional -L and -I flags) do
  not get used for later tests causing incorrect configure results. Makefile.am
  was also changed to reflect this. (Peter O'Gorman)
* m4/gethostbyname_r.m4 does AC_TRY_COMPILE, which unfortunately can pass even
  if there is no gethostbyname_r. Changed to AC_TRY_LINK. (Peter O'Gorman)
* Revise getnameinfo check to ensure NULL is defined and the result is properly
  evaluated, to avoid bogus results on for instance FreeBSD and redefinitions of
  NI_* at compile time. (Matthias Andree).
* __attribute__ ((unused)) is a gccism, removed from libesmtp/gethostbyname.c.
  (Peter O'Gorman)
* In KAME/getnameinfo.c it's best to use the correct argument to inet_ntoa.
  (Peter O'Gorman)
* In verbose mode, log if --check mode is enabled.
* Add sslcommonname option (rcfile and commandline) as a way to work around
  misconfigured upstream SSL servers that use the wrong certificate name. It
  specifies which CommonName fetchmail expects and logs. (Daniel Richard G.)
* Changed CRLF to LF line endings in contrib/delete-later (reporter: Petr Uzel)
* SSL change: enable all workarounds with SSL_CTX_set_options(ctx,SSL_OP_ALL)
* All translations have been re-enabled, in an attempt to rekindle translator or
  user interest.

# DOCUMENTATION:
* Add fetchmail-SA-2007-02.txt and fetchmail-SA-2008-01.txt.
* Re-add two lines to the manual page that had accidentally become comments 
  to nroff. One was part of the --sslproto documentation, and one in the 
  "Awakening the background daemon" section.
* The manual page no longer asserts that .fetchids were for exclusive POP3 use, 
  since it is planned to use the file with IMAP4 later.
* Add grammar fixes from Dan Jacobson to fetchmail.man. Debian Bug #461642.
* The manual page now mentions that user descriptions need to come before user
  options. Reported by Francensco Pontortì, to fix Debian Bug #467010.
* The manual page no longer hints that multi-user declarations per server were
  only useful in daemon mode running as root, to avoid hinting people to doing
  that.
* Several manual page rcfile examples now include "ssl".
* The manual page hints that option arguments beginning with numbers can be
  enclosed in quotes.
* The manual page now mentions that the --logfile must already exist before
  fetchmail is run.
* The FAQ now recommends (#I9) not to use Google Mail for their disregard to the
  protocols they claim to support.
* Documentation and program output now /consistently/ claim that the rcfile must
  not have more than 0700 (u=rwx,g=,o=) permissions, but fetchmail will still
  silently accept additional g=x permissions for compatibility with previous
  6.2.X and 6.3.X versions.
  Inconsistency (program 0710, manpage 0600) reported by Petr Uzel.
* The --logfile documentation is now clearer about requiring detached daemon 
  mode.

# TRANSLATION UPDATES AND ADDITIONS (ordered by language name):
* [sq]    Albanian (Besnik Bleta)
* [zh_CN] Chinese, simplified (Ji Zheng-Yu)
* [cs]    Czech (Petr Pisar)
* [da]    Danish (Byrial Ole Jensen) - outdated, but newer than in 6.3.8
* [nl]    Dutch (Tony Vroon, Benno Schulenberg)
* [en_GB] English, British
* [fi]    Finnish (Lauri Nurmi)
* [de]    German
* [id]    Indonesian (Andhika Padmawan)
* [ja]    Japanese (Takeshi Hamasaki)
* [pl]    Polish (Jakub Bogusz)
* [ru]    Russian (Pavel Maryanov)
* [es]    Spanish (Javier Fernández-Sanguino Peña, Matthias Andree)
* [tr]    Turkish (Engin Gündüz) - outdated, but newer than in 6.3.8
* [vi]    Vietnamese (Clytie Siddall)



fetchmail 6.3.8 (released 2007-04-06):

# SECURITY STRENGTHENING:
* Make the APOP challenge parser more distrustful and have it reject challenges
  that do not conform to RFC-822 msg-id format, in the hope to make mounting
  man-in-the-middle attacks (MITM) against APOP a bit more difficult.
  (CVE-2007-1558, reported by Gaëtan Leurent, published 2007-04-02 on Bugtraq)

  APOP is claimed insecure by Gaëtan Leurent for MITM scenarios for typical
  setups: based on MD5 collisions, it is purportedly possible to recover the
  first three characters of the shared secret (password), which would then make
  recovery of the shared secret a matter of hours or minutes; this would then
  enable the attacker to impersonate the client vis-à-vis the server.

  For further details, check
  * Gaëtan Leurent, "Message Freedom in MD4 and MD5 Collisions: Application
  to APOP", Fast Software Encryption 2007, Luxembourg. (Proceedings to appear in
  Springer's Lecture Notes on Computer Science.)
  * The mailing list discussion thread at
  <http://lists.berlios.de/pipermail/fetchmail-devel/2007-March/000887.html>

# BUG FIXES:
* Fix pluralization of oversized-message warning mails.
* Fix manual page: --sslcheck -> --sslcertck, and do not set trailing 
  "recommended:" in bold. Fixes Debian Bug #413059, reported by Rafal Czlonka.
* Repoll immediately if a protocol error happens during the authentication 
  attempt after a failed opportunistic TLS upgrade.
  Fixes comment #9 in Gentoo Bug #163782, reported by Takuto Matsuu.
* Fix rendering of the "24 - 26, 28, 29" paragraph in the exit codes section. 
  Reported by Nico Golde.
* If SOCKS support was compiled in, add 'socks' to the feature_options Python
  list emitted in --configdump. Reported by Rob MacGregor.
* Do not crash with a null pointer dereference when opening the BSMTP file 
  fails. Improve error checking and reporting. Reported by Reto Schüttel,
  Debian Bug#416625. Fix based on a patch by Nico Golde.
* Make BSMTP output actually work, it would persistently fail with SOCKET error
  after writing the first header. Bug independently found and reported in
  excellent detail by Reto Schüttel, Debian Bug#416812.

# DOCUMENTATION:
* Add fetchmail-SA-2007-01.txt
* Extend --mda documentation, discourage use of qmail-inject.
  Based on a patch by Rob MacGregor.
* Document SOCKS configuration facility (SOCKS_CONF environment variable).
  Thanks to Jochen Hayek, Michael Shuldman and Rob MacGregor.
* Use envelope option in multidrop example. Patch by Rob MacGregor.
* Document expected Received: line format when parsing for envelope addressees.
* Stripped option documentation from sample.rcfile, since this is bound to go
  out of synch with the manual page, which is the only reference on options.
* Mention that --limit default is 0 bytes, which is special for "no limit".
* Corrected Robert M. Funk's name that I misspelled. My sincere apologies
  -- Matthias Andree.

# CONTRIB:
* Add delete-later and delete-later.README, a script and documentation for
  a MySQL/Tcl-based client-side "delete-after" feature.
  Kindly donated by Yoo GmbH, Großvoigtsberg, Germany (Carsten Ralle).

# KNOWN BUGS AND WORKAROUNDS:
  (this section floats upwards through the NEWS file so it stays with the
  current release information)
* fetchmail does not handle messages without Message-ID header well
  (See sourceforge.net bug #780933)
* BSMTP is mostly untested and errors can cause corrupt output.
* Sun Workshop 6 (SPARC) is known to miscompile the configuration file lexer in
  64-bit mode.  Either compile 32-bit code or use GCC to compile 64-bit
  fetchmail.  Note that fetchmail doesn't take advantage of 64-bit code,
  so compiling 32-bit SPARC code should not cause any difficulties.
* fetchmail does not track pending deletes over crashes
* the command line interface is a bit narrow-minded sometimes, for instance,
  fetchmail -s doesn't work with a running daemon
* some of the logging output is not very helpful
* some of the documentation is still not up to date



fetchmail 6.3.7 (released 2007-02-18):

# FIXES FOR REGRESSIONS IN 6.3.6
* Fix KPOP. Patch by Miloslav Trmac.
* Fix repoll when server disconnects after opportunistic TLS failed for POP3.
  Berlios Bug #10133 = Gentoo Bug #163782 reported by Andrej Kacian.

# TRANSLATION UPDATES
* Japanese (Takeshi Hamasaki), Polish (Jakub Bogusz)

# CHANGES
* Consider getaddrinfo() on Darwin 9 (Mac OS X 10.5 "Leopard") thread-safe.
  Reported by Uli Zappe.


fetchmail 6.3.6 (released 2007-01-04):

# SECURITY FIXES:
* CVE-2006-5867, fetchmail-SA-2006-02.txt:
  Password disclosure vulnerability fixed. This has several aspects:

  - Fetchmail now implies sslproto 'tls1' if the sslfingerprint or sslcertck
    options are used and the ssl option is not used, in order to be sure that
    fetchmail gets a certificate from the mail server.

  - Fetchmail breaks the connection if the TLS negotiation (or verification, if
    requested) fails with sslproto 'tls1', sslfingerprint or sslcheck enabled.

  - POP3 connections now use STLS reliably. They used to ignore STLS altogether
    for serveral values of the "auth" option, when fetchmail forget to probe
    server capabilities - see fetchmail-SA-2006-02.txt for details.

  - POP3 connections will no longer fall back USER/PASS authentication if
    strong challenge-response authenticators such as CRAM-MD5 are configured
    but the server does not advertise these in its CAPA response.

  - POP2 is obsolete and does not support STLS or anything beyond password-based
    authentication. The attempt to use STLS or strong authenticators now causes
    connection abort.

  Configurations using both ssl and sslcertck however have been semi-safe in
  that they would send the password in the clear. The USER/PASS fallback
  problem however applies to these too, so that the password was only safe on
  trustworthy servers.

* CVE-2006-5974, fetchmail-SA-2006-03.txt:
  Repairs a regression in 6.3.5 that crashes fetchmail when a message with
  invalid headers is found while fetchmail's mda option is in use. BerliOS bugs
  #9364, #9412, #9449. Stack backtrace provided by Neil Hoggarth - thanks.

# REGRESSION FIXES (recently introduced bugs)
* Repair --logfile, broken in 6.3.5. BerliOS Bug #9059,
  reported by Brian Harring.
* Repair --user, broken in 6.3.5 (as a side effect of the authenticate external
  patch): using SSL certificate/key authentication overrode the --user option.
  Now the latter takes precedence, and only defaults to the certificate's common
  name.  Debian Bug #400950, reported by Jorgen Schaefer <forcer@debian.org>.

# BUG FIXES (long-standing bugs):
* RPOP: used to log the password locally rather than an asterisk as the other
  protocols do. The password is now shrouded in the local logs.
* POP3: Probes capabilities now when Kerberos V5 is enabled, so that we can
  actually detect if the server supports it.
* Robustness: If a stale lockfile cannot be deleted, truncate it so that
  fetchmail doesn't later believe itself to be running if the PID is recycled
  by a non-fetchmail process.
* DNS: Detect /etc/resolv.conf changes: On systems that have res_search(),
  assume we also have res_init() and call it (suggested by Ulrich Drepper,
  glibc bug #3675) in order to make libc or libresolv reread the resolver
  configuration at the beginning of a poll cycle.  This is important when
  fetchmail is in daemon mode and /etc/resolv.conf is changed later by dhcpcd,
  dhclient, pppd, openvpn or other ip-up/ipchange scripts.  Should fix Debian
  Bug#389270, Bug#391698.
* Robustness: Fix crash on systems that do not provide strdup(), the crash
  happens only in out-of-memory conditions when fetchmail cannot proceed
  anyways.  Patch by Andreas Krennmair.
* Robustness: When HOME and FETCHMAILHOME are unset, be sure to copy user
  database information, so it is not trashed later. Patch by Jim Correia.

# CHANGES:
* Workaround: Improve handling of IMAP IDLE, some servers do not reset their
  time counters after sending information asynchronously. Patch by Sunil
  Shetye, after report from Andrew Baumann.
* Usability: When requesting Kerberos or GSSAPI, complain and exit with syntax
  error if any of these requested features has not been compiled in.  This is
  to fail early and with precise error message. Reported by Isaac Wilcox.
* --version will now add +KRB4 or +KRB5 if Kerberos v4 or v5, respectively, have
  been compiled in. Reported missing by Isaac Wilcox.

# TRANSLATIONS:
* New en_GB (British English) translation by David Lodge.
* Update Japanese (Takeshi Hamasaki), Polish (Jakub Bogusz), Russian (Pavel
  Maryanov) and Vietnamese (Clytie Siddall) translations.
! Note that not all these translations are complete -- this isn't the
  translators' fault though, but due to delays at the BerliOS hosting site and
  the translation project handlers. You may see a few untranslated messages.

# DOCUMENTATION:
* Dropped exit status 15 from manual page, it's not used by fetchmail.
  Reported by Isaac Wilcox.
* Documented exit codes 24 - 29 as internal.

fetchmail 6.3.5 (released 2006-10-09):

# BUG FIXES:
* For protocols such as IMAP that are not delimited by "." lines, truncate the
  input buffer when the message has been completely read, to avoid taking
  trailing garbage into the message if the terminal CRLF is missing. Fixes
  Debian Bug#312415. (Patch suggested by Mike Jones, Manchester Univ.).
* When using NTLM authentication, use regular IMAP response code handler after
  completing NTLM handshake, for robustness and consistency.
  (Taken from the NetBSD portable packages collection, patch-ac.)
* Support Kerberos installations where krb5.h and perhaps roken.h are in
  .../include/krb5.  Taken from NetBSD portable packages collection patch-ae.
* On NetBSD, link against -lroken -lcom_err if --with-kerberos is enabled.
* Drop #include <com_err.h> from Kerberos 5 header file, fixes compile error on
  SUSE Linux 10.0.
* Fix des_pcbc_encrypt compile warnings in kerberos.c line 246.
* If krb5-config provides gssapi library information, use that rather than
  guessing.
* Improve --with-gssapi auto detection for /usr-based GSSAPI installs.
* Fix --with-gssapi builds for NetBSD 3.0.
* Improve KAME/getnameinfo.c portability to Linux libc5 systems.
  Based on a patch by Dan Fandrich.
* Provide INET6 to KAME/getnameinfo.c (only useful on IPv6-enabled systems that
  lack getnameinfo, and there only visible in some Received: headers).
  Found by Dan Fandrich.
* POP3: some UID flags may not be set properly on UIDL lists. (Sunil Shetye)
* Make IMAP4 IDLE work on servers that do not update RECENT counts.
  Reported by Lars Tewes.
* IMAP4 patch by Sunil Shetye:
  - do not depend on server updating RECENT counts at all
  - also enter IDLE loop when messages are present on the server.
* Fix --flush description in the manual page, fetchmail does not mark messages
  seen unless it has successfully delivered them. Suggested by Frederic Marchal.
* Fetchmail no longer attempts to stat the "-" file in daemon mode -- this is a
  special name to read the RC file from stdin, and cannot always be re-read
  anyways. BerliOS bug #7858.
* When looking up ports for a service, the lookup succeeds and the returned
  address family isn't IPv4 or IPv6, properly free the allocated memory from the
  service lookup. Found by Uli Zappe.
* When looking up ports for a service, only look up TCP ports.
* Avoid compiling empty files, to avoid diagnostics from strict compilers.
* If the lockfile ends before the process ID, treat it as stale and unlink it.
  Reported by Justin Pryzby, Debian Bug #376603.
* SIGHUP wake-up behavior was broken since 5.9.13's Cygwin changes, in that for
  non-root users, SIGHUP would abort the first poll and subsequently interfere
  with new polls, and SIGHUP would be ignored for root users. SIGHUP now matches
  documented behavior. SIGUSR1 has always been a wakeup signal for both root
  (undocumented) and non-root users. See also the deprecation warning above.
* Track getaddrinfo() results to properly free them after timeouts and make sure
  that getaddrinfo() isn't interrupted by a timeout (which breaks on MacOS X),
  reported by Uli Zappe.  This should fix Debian Bug#294547 and Bug#377135.
* --logfile is now handled more carefully, errors opening the logfile are
  now reported to the TTY where fetchmail was started from.
* fetchmail now complains and aborts when it cannot properly daemonize itself.
* fix compilation on systems that don't know struct addrinfo (Solaris 2.6).
* ignore SIGPIPE signals and rely on functions to return EPIPE instead. This is
  necessary because the former longjmp() from the signal handler is unsafe and
  makes the whole fetchmail behavior undefined after the event.
* Avoid crash in env.c/host_fqdn if we cannot canonicalize our own hostname.
  Reported by Alexander Holler.
* SSL fix by Miloslav Trmac (Red Hat): free the SSL contexts after the
  connection, to avoid from growing SSL certpaths without bounds, avoid using
  SSL contexts for unrelated connections, and to fix Red Hat Bug #206346.

# CHANGES:
* Rename all fetchmail-internal lock_* functions to fm_lock_*. Obsoletes
  NetBSD portable packages collection patch-ah, patch-ai and patch-aj.
* Configure prints a warning (but proceeds) if Kerberos IV support is enabled.
* In verbose mode, log every IP fetchmail tries to connect to, to avoid
  misleading the user. Suppress EAFNOSUPPORT errors from socket() call, too.
  Fixes Debian Bug #361825, reported by Daniel Baur.
* In idle mode, fetchmail complains about the fetchall option.
* When a connection fails, log not only the IP address, but also host and
  service name and the port number. Log the latter when trying to connect in
  verbose mode, too.
* Keep syslog output at one line per message (this works if no errors occur).
* Fetchmail in verbose mode now logs if it opportunistically upgrades a POP3
  or IMAP connection to TLS security with STLS/STARTTLS.
* fetchmail now supports foo@example.org=bar user mappings for multidrop boxes.
* switch setjmp/longjmp to sigsetjmp/siglongjmp
* IMAP now supports the EXTERNAL authentication method, courtesy of
  Götz 'nimrill' Babin-Ebell, BerliOS patch #1095 with minor changes.
  Note that this change causes --sslcert to override --user.
* The sslproto keywords are now case insensitive, courtesy of
  Götz 'nimrill' Babin-Ebell, BerliOS patch #1095.
* When going to sleep, log for how long.  Suggested by Claudia Ludwig.
* When the server name cannot be canonicalized, log the gai_strerror value.

# TRANSLATION UPDATES:
* Catalan/ca (Ernest Adrogué Calveras), Japanese/ja (Takeshi Hamasaki) - also
  made gettext 0.15 ready, Polish/pl (Jakub Bogusz), Russian/ru (Pavel
  Maryanov), Spanish/es (Héctor García Álvarez), Vietnamese/vi (Clytie Siddall)

# CONTRIBUTED SCRIPTS:
* PopDel.py was revised by Joshua Crawford to display the From: address and
  list every email, even if it has no Subject: header; and not delete the wrong
  message in the presence of mail without Subject: headers.

fetchmail 6.3.4 (released 2006-04-14):

# BUG FIXES:
* configure: detect res_* functions properly with newer glibc ABIs.
  Patch by Miloslav Trmac.
* tracepolls: add folder information if available. Reported by Terry Brown.
* lexer: add %option noyywrap to avoid link errors about missing yywrap().
* a few more type fixes for report/snprintf, patch by Miloslav Trmac.
* bouncing: fetchmail would still send "General SMTP/ESMTP error." bounces
  in spite of "no bouncemail" configuration.
* SSL/TLS: if, for a certain server, an sslfingerprint is specified and
  sslcertck is NOT set, suppress printing SSL certificate mismatch errors.
  (Reported by Hannes Erven.)
* SSL/TLS: always print if the sslfingerprint mismatches, even in silent
  mode.  (This is for consistency with certificate verification errors.)

# TRANSLATION UPDATES:
* German/de (Matthias Andree), French/fr (Matthias Andree), Spanish/es (Héctor
  García), Polish/pl (Jakub Bogusz), Japanese/ja (Takeshi Hamasaki)
* New Vietnamese/vi translation (Clytie Siddall).
* Updated French descriptions for the .spec file (Stéphane Schildknecht,
  Luc Pionchon, Matthias Andree).

# CHANGES:
* pidfile: there is a new command-line (--pidfile PATH) and global option for
  the rcfile (set pidfile [=] "/path/to/pidfile") option to allow overriding
  the default location of the PID file.
  Requested by Héctor García, Debian maintainer.
* specgen.sh: Converted to UTF-8 to support translated texts better.

fetchmail 6.3.3 (released 2006-03-30):

# BUG FIXES:
* SEGFAULT: Do not attempt to overwrite the netrc password if none has been
  specified.  This fixes a segmentation fault bug introduced into 6.3.2.
  Fixes BerliOS bug #6234.  BerliOS patch #804 by Craig Leres.
  The patch, as accepted into fetchmail, was available separately from
  <http://download.berlios.de/fetchmail/patch-6.3.2.1-fix-netrc-SIGSEGV.diff>
* SEGFAULT: Work around C libraries that return a NULL in getaddrinfo()'s
  ai_canonname record, to avoid a segfault. Affects for instance FreeBSD 4.10,
  4.11 and 5.3 when dotted quads are given as server names.
  Analysis and fix by Vladimir Olegovich Ravodin (Владимир Олегович Раводин).
* IMAP: fix hangs in NOOP-based IDLE emulation. Reported by Casper Gripenberg
  and Brendan Lynch, fix by Sunil Shetye (his patch was merged) and Brendan Lynch.
* IMAP: Handle other clients concurrently accessing IMAP mailboxes better.
  Fetchmail quits the poll if the EXPUNGE count does not match expectations, and
  servers not updating RECENT counts after EXPUNGE are handled in a better way.
  (Patch by Sunil Shetye.)
* IMAP: Stop sending EXPUNGE after NOOP-idling (patch by Sunil Shetye).
* POP3: fetchmail can now use UIDL in fetchall keep mode, to avoid re-fetching
  the same messages again when the fetchall keyword is removed. Patch by
  Sunil Shetye. For details, please see
  <http://lists.berlios.de/pipermail/fetchmail-users/2006-March/000308.html>
* LMTP: fix bug in LMTP port validation (patch by Miloslav Trmac).
* SDPS: fetchmail no longer replaces the local user ID for an empty envelope
  sender when using the proprietary SDPS extension for POP3.
  Fixes Debian Bug#353575, reported by Roger Lynn.
* SDPS: Warn and disable SDPS if POP3 is disabled to avoid compilation errors.
* fetchmail no longer prints empty lines in verbose mode when using syslog.
* fetchmail no longer prints UID lists in verbose mode when using syslog.
* ./configure --quiet is now quieter (no SSL and fallback-related output).
* Miloslav Trmac's patch (with minor changes) to fix char * sign consistency,
  unused arguments and variables.
* More signedness, unused argument/variable and other warning fixes.

# CHANGES:
* --idle can now be specified on the command line, too.
* --fetchall is now supported on the command-line.
* POP3: Lower default fastuidl span to 4 (i. e. every 4th run fetches the
  whole UIDL list), patch by Sunil Shetye.

# DOCUMENTATION:
* "ssl" is a user option rather than a server option. Patch by Nico Golde.
  Fixes Debian Bug#354661, reported by Keith Hellman.
* The manual page now suggests "--" before the addresses in the sendmail MDA
  example, for safety.
* The FAQ item X9, Domino IMAP omits Content-Transfer-Encoding header, was
  added. Information provided by Anthony Kim on the fetchmail-friends list
  in March 2006.
* Credit Chris Boyle with the NOOP emulation code for IDLE in fetchmail 6.2.4.
  Eric forgot to credit Chris, thanks to Sunil Shetye for providing these links:
  http://lists.ccil.org/pipermail/fetchmail-friends/2003-July/007705.html
  http://lists.ccil.org/pipermail/fetchmail-friends/2003-July/007713.html
* Added a section about RETR vs. TOP to the manual page.
* Changed section/subsection levels in some areas.

fetchmail 6.3.2 (released 2006-01-22):

Unless otherwise noted, changes to this release were made by Matthias Andree.

# SECURITY FIX IN THIS RELEASE
* CVE-2006-0321: Fix segfault or bus error after bouncing a message.  This bug
  was introduced into 6.3.0 when removing alloca(); it caused fetchmail to free
  random memory.  Reported by Nathaniel W. Turner, Debian Bug#348747.
  See fetchmail-SA-2006-01.txt

# INCOMPATIBLE CHANGE:
* Automatically disable the POP3 TOP command if the greeting string contains
  "Maillennium POP3/PROXY server", which is used by comcast and known to
  truncate messages after 80 kByte. Fall back to RETR, and complain if we had
  used TOP otherwise (the warning is printed only once per server in daemon
  mode).  Suggested by Ed Wilts.
  *Note* that this means messages are marked read on these servers, which is a
  deviation from how 6.3.1 behaved, but we have no alternative, comcast haven't
  fixed this bug in years.  Preventing the loss of the remainder of the message
  justifies this incompatible fix.
* fetchmail, since 6.3.0, requires write permission to the directory holding the
  idfile. See the amendment in the 6.3.0 MAJOR INCOMPATIBLE CHANGES section
  below for details. The manual page was updated.

# CHANGES RELEVANT TO PACKAGERS:
* The outdated BUGS document was removed from the distribution.
* Added fetchmail-SA-2006-01.txt to the distribution.

# BUG FIXES:
* SMTP/LMTP cleanup to fix these two bugs:
  - switch back to SMTP after having tried LMTP hosts (multiple smtphost hosts)
  - switch back to LMTP after sending a bounce.
  The patch removes the global state variable that was the root of this problem.
  Patch by Sunil Shetye. (MA)
* Don't complain about fetchall keep in --configdump mode. Bug introduced in
  6.3.0.
* fetchmailconf.py: Fix novice help for Poll interval and fetchall.
  Reported by Justin Pryzby, Debian Bug #344978.
* Some verbose output disappeared in debug mode. Adding further -v options would
  alternate between verbose and debug mode. debug mode now comprises all verbose
  output, and adding more -v options does not switch back from debug to verbose
  mode.
* fetchmail.man: Fix accented characters in Héctor García's name. Merged from
  downstream debian/patches/01_man_page.dpatch.
* Add missing --help text for "--sslcertck" option.
* fetchmailconf.py: Accept --help and --version.
* fetchmail --version  now prints the copyright notice.
* don't complain about READ-ONLY IMAP folders in --fetchall --keep mode.
  Reported Alexander Zangerl, Debian Bug#348964.
* the RPM .spec file now generates a -debuginfo package on newer RPM versions.

fetchmail 6.3.1 (released 2005-12-19):

# SECURITY FIX IN THIS RELEASE
* CVE-2005-4348 Fix segmentation fault (null pointer dereference) in
  multidrop mode with headerless email.  See fetchmail-SA-2005-03.txt.
  Reported by Daniel Drake, patch by Sunil Shetye. (MA)

# OTHER BUG FIXES, DOCUMENTATION AND TRANSLATION UPDATES
* Fix broken default port in POP2. Patch by Stanislav Brabec, SUSE [CZ]. (MA)
* Fix manual page, some lines starting with ' were escaped by \&.
  Reported by Simon Barner. (MA)
* Ship with gettext-0.14.3 again, as 6.2.9-rc10 did. Found by Sunil Shetye. (MA)
* Actually set default SSL certificate path if --sslcertpath is unset.
  Reported by Heino Tiedemann and Rob MacGregor. (MA)
* Remove bogus Netscape IMAP4rev1 Service >= 3.6 warning about BODY[TEXT]
  that we are not using. Patch by Sunil Shetye. (MA)
* Plug potential memory and socket leak when polling multiple folders or when
  the upstream sends bogus message sizes.  Patch by Sunil Shetye. (MA)
* Update Catalan translation, by Ernest Adrogué Calveras. (MA)
* Fix segfault (null pointer dereference) on some operating systems with
  fetchmail's obsolete DNS MX/host alias lookups in multidrop mode.
  Patch by Dr.-Ing. Andreas Haakh. (MA)
* Close SMTP sockets early, to reduce resource usage, trigger earlier delivery
  with some MTAs and avoid SIGPIPE (SIG 13) when the SMTP listener gets bored
  and drops the connection after timeout.  Patch by Sunil Shetye. (MA)
* Don't treat hitting a fetch limit as error.  Patch by Sunil Shetye. (MA)
* Fix negative "messages left on server" on idle/repoll with fetchlimit.
  Patch by Sunil Shetye. (MA)
* Properly track logout stage.  Patch by Sunil Shetye. (MA)
* Preserve error conditions across postconnect script.  Sunil Shetye. (MA)
* Do not trash destination domain if multiple messages are forwarded into the
  same SMTP/LMTP connection. Reported by Joachim Feise, Berlios Bug #5849. (MA)
* Manual page: Add "-md5" to "openssl x509" example in --sslfingerprint
  documentation, since OpenSSL 0.9.8 changed the default to SHA1.
  Suggested by Jason White. (MA)
* Cope with servers that return UID information in response to non-UID
  RFC822.{SIZE|HEADER} requests. Reported by Jason White.
  Patch suggestion by by Sunil Shetye, simplified by MA.

fetchmail 6.3.0 (released 2005-11-30):

# SECURITY FIXES IN THIS RELEASE
* CVE-2005-2335: The POP3 UIDL code doesn't sufficiently validate/truncate the
  input length, so a (malicious or compromised) server that sends UIDs longer
  than 128 bytes can corrupt fetchmail's stack and crash fetchmail.
  This vulnerability is remotely exploitable to inject code run in a
  root shell. Edward J. Shornock, Ludwig Nussel. fetchmail-SA-2005-01.txt
* CVE-2005-3088: fetchmailconf now changes the output file to mode 0600 BEFORE
  writing to it, so there is no window where passwords could be read by the
  world. Matthias Andree. fetchmail-SA-2005-02.txt

# MAJOR INCOMPATIBLE CHANGES
* Remove support for --netsec/-T options, the required inet6_apps library is no
  longer available.
  http://www.inner.net/pub/ipv6/ states, as of 2005-07-03: "/pub/ipv6
  Our IPv6 software is now long defunct. Please find a more modern source."
  I haven't been able to find a more modern source.  Matthias Andree
* Operating systems that do not conform to the Single Unix Specification v2
  (1997) or v3 (2001, aka IEEE Std 1003.1-2001) are no longer supported. They
  may continue to work and non-intrusive patches to support them may be
  accepted.  Matthias Andree
* The default for --smtphost is now always "localhost" regardless of
  authentication types and protocols, so as to simplify configurations for
  workstations where the SMTP daemon only listens on the loopback interface.
  Sunil Shetye & Matthias Andree
Amendment, 2006-01-04:
* fetchmail's idfile (.fetchids) is no longer written directly, but the ids are
  written to a temporary file which is renamed into place after being written
  completely. This is to avoid writing incomplete idfiles when running out of
  space, which would cause excessive duplicate refetches of messages, this might
  make matters even worse. This means that fetchmail requires write permission
  on the directory holding the idfile. This will usually affect system-global
  daemons only, for instance, Debian. Found by Dan Jacobson. Matthias Andree.
Escalated to "incompatible", 2006-01-13:
* Try to obtain FQDN as our own host by default, rather than using "localhost".
  If hostname cannot be qualified, complain noisily and continue, unless
  Kerberos, ODMR or ETRN are used (these have always required an FQDN).
  Partial fix of Debian Bug#150137. Fixes Debian Bug#316454.  Matthias Andree

# CHANGES RELEVANT TO PACKAGERS AND USERS
* fetchmailconf is now a shell wrapper that calls the byte-compiled
  fetchmailconf.py script, which is now installed in the regular python
  directory. Matthias Andree.
* The --enable-inet6 configure option was removed. The code is mostly protocol
  agnostic, a fully IPv6 aware OS is expected to provide getaddrinfo(),
  getnameinfo() and the macro AF_INET6.  Matthias Andree.
* gettext (intl/) has been removed from the fetchmail package. Install GNU
  gettext 0.14 separately for NLS (i18n).  Matthias Andree
* Added Russian translation, courtesy of Pavel Maryanov of the
  Russian translation team. (MA)
* Updated and re-enabled Czech translation, by Miloslav Trmac (MA).
* Dropped da=Danish, el=Greek and tr=Turkish translations which have more than
  10% (61+) untranslated or fuzzy messages.  Matthias Andree.

# OTHER USER-VISIBLE CHANGES
* Sunil Shetye's fix to force fetchsizelimit to 1 for APOP and RPOP. (ESR)
* PopDel.py removed from contrib at author's request. (ESR)
* Matthias Andree's fix for Sunil Shetye's fetch-split patch. (ESR)
* Include James Stone's moldremover.py script. (ESR)
* Enable .fetchmailrc permissions checking under Cygwin. (ESR)
* Nalin Dahyabai's fix for POP3 strong authentication. (ESR)
* Revised Nalin Dahyabai's fix for POP3 strong authentication (the
  original version would go into an infinite loop when CAPA failed;
  found by David Greaves.) (MA)
* HOME_ETC patch for PLD Linux. (ESR)
* Sunil Shetye's fix for SSL configuration. (ESR)
* Simon Josefsson's patch for GSS library support. (ESR)
* Added Andrey Lelikov's recipe for Hotmail and Lycos Webmail. (ESR)
* Remove blank between MAIL FROM: and <, which causes Cyrus to complain.
  Patch by Phil Endecott. (RF)
* Build fixes for HESIOD and resolv.h trouble on FreeBSD. (MA)
* Fabrice Bellet's fix for Red Hat bug #113492, fetchmail hangs in IMAP
  mode after EXPUNGE when the server (Dovecot 0.99.10) doesn't update
  RECENT and EXISTS counts. (MA)
* Holger Mauermann's bounce patch, to use a NULL envelope from, not
  write a Return-Path header (both to meet RFC-2821), changed From,
  added Subject header, rewording the human readable part.  Fixes Debian
  bug #316446. (MA)
* Merge Sunil Shetye's time.h handling fix. (MA)
* Merge Gerd von Egidy's patch to avoid a segfault in multidrop/received
  mode when the Received: headers are malformatted. (MA)
* MIME-encode bodies and Subject headers of warning messages, limiting
  the header to 7 bits. (MA)
* Normalize most locale codesets to IANA codesets, based on
  norm_charmap.c by Markus Kuhn. (MA)
* Remove sleep(3) after POP3 login, patch by Brian Candler. (MA)
* Fix option parsing bug that trashes the showdots setting when more
  than one server is configured. Patch by Brian Candler. (MA)
* Honor sslcertpath setting even if sslcertck is unset. Patch by Brian
  Candler. (MA)
* SSL certificate checking fixes, don't display same error message twice
  in succession, make sure that Common Name and fingerprint checking are
  only done once. Print all validation warnings/errors even if not in
  verbose mode. Patch by Brian Candler. (MA)
* Import Bjorn Reese and Daniel Stenberg's MIT-licensed Trio 1.10 from
  http://daniel.haxx.se/projects/trio/ for systems that do not support
  snprintf or vsnprintf. (MA)
* Clean up the horrible #ifdef HAVE_[V]SNPRINTF that made the code
  unreadable. Use Trio where [v]snprintf is/are missing. (MA)
* Default to Linux 2.2 /proc/net/dev format, and use uname(2) to determine the
  kernel version instead of calling uname(1). Thanks to Paul Slootman.  (MA)
* Be more careful when swapping UID lists or writing the .fetchids file,
  requested by Manfred Weihs. (MA)
* Print a warning if multidrop configuration is attempted without
  envelope option. (MA)
* Split information on fetchmail versions before 6.0.0 to a separate
  OLDNEWS file. (MA)
* Merge SuSE patches: (sent by Stanislav Brabec, merged by Matthias Andree)
  - fetchmail-6.2.5-declaration.patch (double sigint_handler decl/getpass.c)
  - fetchmail-6.2.5-implicit-declaration.patch (missing #include)
  - fetchmail-6.2.5-random-result.patch (uninitialized variable/opie.c)
* Revised some bogus assertions about POP3 LAST and UIDL use in the
  manual page. UIDL isn't flaky as the man page suggested, but a
  reliability feature. In fact, IMAP4 code is flaky in that it relies on
  the upstream seen flags. (MA)
* Miloslav Trmac's patch for fetchmailconf to support string-type values
  of the "port" variable, avoiding "port None" corruption in .fetchmailrc.
  To fix Redhat Bug #55623 (MA)
* de.po fixes from Nico Golde (MA)
* es.po fixes from Jesus Roncero, Debian bug #286044 (MA)
* sink.c fix from Cesar Eduardo Barros, to avoid double @ in address
  when username contains an @ and the envelope sender is null, Debian
  bug #272289 (MA)
* configure.ac cleanups by Miloslav Trmac (MA)
* Miloslav Trmac's fix to reply_hack() type, for systems where
  sizeof(int) != sizeof(size_t). (MA)
* Nalin Dahyabhai's fix for driver.c to not call the private Kerberos
  krb5_init_ets() function. Sent by Miloslav Trmac. (MA)
* Nalin Dahyabhai's fix for sink.c/transact.c to reserve sufficient
  space for \r\n trailers in snprintf calls. Sent by Miloslav Trmac,
  possibly fixing Red Hat bug #114470. (MA).
* Nalin Dahyabhai's patch to use the krb5-config script, if present.
  Sent by Miloslav Trmac. (MA)
* Nalin Dahyabhai's fix to make rpa.c compile. Sent by Miloslav Trmac. (MA)
* Trivial fetchmailconf.man to redirect to fetchmail.1.
  Reported by Miloslav Trmac. (MA)
* Internationalization (i18n) updates by Miloslav Trmac. (MA)
* Fix "couldn't find canonical DNS name of NN (MM)" for hosts that have
  only IPv6 addresses. Matthias Andree.
* Revised INSTALL after question from Brian Candler, inet6-apps is no
  longer available: remove inet6-apps hints for IPv6, and add some
  apologetic message for IPsec. Note the code may be removed in a future
  version. Matthias Andree.
* Brian Candler's FAQ update about SSL certificate verification. (MA)
* Nico Golde's patch to support "proto RPOP" in the configuration file,
  reported by Dr. Andreas Krüger, Debian bug #242384 (MA)
* Skip sending POP3 PASS command when USER command failed. Matthias Andree.
* Run fetchmail.man through automatic spell checker. Matthias Andree.
* Major fetchmail(1) manual page overhaul by R. Hannes Beinert, to
  clarify singledrop vs. multidrop operation. (MA)
* Make tracepolls a server option, as documented. Fixes Debian bug
  #156094. Matthias Andree.
* Fix some minor inaccuracies (RFC-1893 related, grammar/spelling) in
  the manual page.
* Rename ESR's design notes to esrs-design-notes.html and add a new
  design-notes.html document. The NOTES file will contain both of them.
  Matthias Andree.
* Fix Debian bug #301964, fetchmail leaks sockets when SSL negotiation
  fails. Fix suggested by Goswin Brederlow. (MA)
* Really fix Debian Bug#207919 (garbage in Received: lines when smtphost set),
  patch by Tobias Diedrich.  The 6.2.5 NEWS claimed Gregan's patch had fixed
  #207919 but it had fixed #212484 instead and #207919 remained unfixed in
  6.2.5. The entry below has been corrected to read #212484 now. (MA)
* When writing the PID file, write a FHS 2.3 compliant PID file.
  Fixes Debian bug #230615. Matthias Andree.
* Make ODMR really silent, suppress "fetchmail: receiving message
  data". Fixes Debian Bug#296163. Matthias Andree.
* Add From: header to warning emails. Debian Bug#244828. Matthias Andree.
* Fix IMAP code to use password of arbitrary length from configuration
  file (although not when read interactively). Debian Bug#276424.
  Matthias Andree
* Document that fetchmail may automatically enable UIDL option.
  Debian Bug#304701. Matthias Andree.
* Put *BOLD* text into the manual page near --mda to state unmistakably that
  the --mda %T and %F substitutions add single quotes, hoping to avoid bogus
  bug reports such as Debian Bug #224564. Matthias Andree
* Rename lock_release to fm_lock_release, to avoid namespace collision on
  Darwin. NetBSD PR#28543 (pkg/28543). Matthias Andree.
* The RFC-822 parser no longer strips the last character of bare addresses.
  Matthias Andree
* The IP address matching code was broken and 
  1. didn't search exhaustively, but matched only the first IP address of the
  server's queryname against the IP addresses of the server name to match.
  2. didn't match IP aliases versus MX hosts.  Matthias Andree
* The "port" option, while still understood, is being replaced by the "service"
  option, which is now supported even without --enable-inet6. Matthias Andree.
* The default distribution format is now bzip2. Matthias Andree.
* fetchmailconf redirects fetchmail's input from /dev/null so it doesn't
  wait for the user to enter a password when the user doesn't even see
  the prompt. Reported by Michal Marek. Matthias Andree.
* Write RFC-compliant BSMTP envelopes. Reported by Nico Golde. Matthias Andree.
* Fix --with-gssapi compilation problem. Simon Josefsson. (MA)
* Foster protocol-independence to support IPv6 better, for instance, providing
  IPv6 addresses in Received: headers. Matthias Andree.
* Received: headers now enclose the for <...> destination address in angle
  brackets for consistency with Postfix.  Matthias Andree.
* Operating systems that do not support at least one of gethostbyname,
  gethostbyname_r, getipnodebyname are no longer supported.  Matthias Andree.
* Fixes to --with-hesiod option. Sunil Shetye. (MA)
* Delete oversized messages with the new --limitflush option. Debian
  Bug#212240. Sunil Shetye. (MA)
* Fix MacOS X compilation failures in sink.c (ru_*time has incomplete type).
  Berlios Bug #4725. Matthias Andree.
* Fix "auth ntlm" to send AUTH NTLM (rather than AUTH MSN). Add "auth msn"
  officially. Reported by Yves Boisjoly. Matthias Andree
* Expunge between IMAP folders when polling multiple folders.
  Sunil Shetye. (MA)
* Fix IMAP expunged message counting. Sunil Shetye. (MA)
* Add full support for --service option. Matthias Andree
* When getaddrinfo() fails resolving a service, log getaddrinfo() error. (MA)
* Fix bogus "cannot resolve service * to port number" error. Simon Barner. (MA)
* Failure to set up SSL connections now results in PS_SOCKET. Suggested by
  Thomas Wolff. Matthias Andree.
* Kerberos IV detection fix for FreeBSD 4. Simon Barner. (MA)
* Fix display and documentation of --envelope option. Matthias Andree
* Make "envelope 'Delivered-To'" work with dropdelivered. Timothy Lee. (MA)
* Add -DBIND_8_COMPAT to Darwin (MacOS X) compiles, to fix build problems on
  newer Darwin versions. Matthias Andree.
* fetchmail should now automatically detect if OpenSSL requires -ldl.
  Matthias Andree.
* Fix Solaris build with --disable-nls (blastwave.org). Matthias Andree.
* Missed --port/--service/--ssl cleanups in the manual. Reminder from Thomas
  Wolff. (MA)
* Complain in POP3 if NTLM/MSN auth is requested but had not been enabled at
  compile time. This configuration mismatch now causes an error message and
  authentication failure. Found by Yves Boisjoly.  Matthias Andree
* fetchmailconf now allows expert users to choose the authorization type and
  also offers MSN and NTLM, suggested by Yves Boisjoly. Matthias Andree
* fetchmailconf now (as of 1.49) writes its version to the comment of the
  saved run control file. Matthias Andree
* Properly shut down SSL connections. Berlios Patch #647 by Arkadiusz
  Miśkiewicz. (MA)
* Global variable cleanup, to fix daemon mode reinitialization problems. Patch
  by Sunil Shetye. (MA)
* fetchmailconf -h documents the fetchmailconf -h option. Matthias Andree
* fetchmailconf -V now prints the fetchmailconf version. Matthias Andree
* Add support for SubjectAltName (RFC-2595 or 2818), to avoid bogus certificate
  mismatch errors. Patch by Roland Stigge, Debian Bug#201113. (MA)
* make fetchmail --silent --quit really silent, Debian Bug #229014 by Dr.
  Andreas Krüger.  Matthias Andree
* cleanup --quit handling again (so that --silent --quit just kills the
  existing daemon, rather than continue running), and document it more clearly.
  Matthias Andree
* Print an error message if multiple "defaults" records are found in the
  configuration file.  Matthias Andree
* Bury on_exit officially - the necessary code had been missing from 6.0.0,
  6.2.0, 6.2.5.  Matthias Andree
* Exit with error if the lock file cannot be read.  Matthias Andree
* Exit with error if the lock file cannot be created exclusively, this got
  broken in a 6.2.6-pre, 6.2.5.2 and older were fine.  Matthias Andree
* Do not break some other process's lockfile in "-q" mode, but wait for the
  other process's exit.  Matthias Andree
* Man page: --sslfingerprint points user to x509(1ssl) and gives an example
  how to use it. Debian Bug#213484, Eduard Bloch. (MA)
* fetchmailconf now sets the service properly after autoprobe. Fixes Debian
  Bug#320645.  Matthias Andree
* Man page: Fix Debian Bug#241883, making global options more clear. Matt
  Swift, Matthias Andree.
* When eating IMAP message trailer, don't see any line containing "OK" as the
  end of the trailer, but wait for the proper tagged OK line. To work around
  the qmail + Courier-IMAP problem in Debian Bug#338007. Matthias Andree
* Fix Debian Bug#317761: when trying to send a bounce message, don't bail out
  if we cannot qualify our own hostname, so we aren't losing the bounce.
  Instead, pass the buck on to the SMTP server and use our own unqualified
  hostname. Matthias Andree
* Revise some error messages so they are less confusing. Sunil Shetye.
* Man page: update --smtphost documentation. Sunil Shetye, Matthias Andree.
* Man page: clarify --loghost works only while detached. Matthias Andree
* Man page: update --smtpaddress documentation. Sunil Shetye.
* Fix several memory leaks and bugs in the SMTP/LMTP retry logic where
  fetchmail confused UNIX and Internet domain sockets. Sunil Shetye.
* Man page (BUGS): document that passwords are length limited. Matthias Andree
* Man page: Document that quoted strings that run across line boundaries
  contain the control characters (CR or LF). Document explicitly the backslash
  escape sequences and their differences from the escape sequences used in the
  C programming language.  Matthias Andree
* Fix segfault when run control file ends with a backslash inside an
  unterminated quoted string. Matthias Andree.
* In quoted strings, support backslash as last character on a line to join the
  following line to the current. Matthias Andree.
* Parsing untagged IMAP responses is more robust now. Matthias Andree.
* Man page: Remove some procmail praises in --mda documentation, suggest
  maildrop instead, warn of procmail fallthrough behavior. Matthias Andree.
* Man page: Revise AUTHORS and SEE ALSO sections. Matthias Andree.
* Updated translations: Albanian [sq] (Besnik Bleta), Catalan [ca] (Ernest
  Adrogué Calveras), Czech [cs] (Miloslav Trmac), German [de] (MA),
  Spanish (Castilian) [es] (Javier Kohen), French [fr] (MA),
  Polish [pl] (Jakub Bogusz), Russian [ru] (Pavel Maryanov).
* In oversized warning messages, print the account name, too. Fixes Debian
  Bug#213299. Sunil Shetye (MA).
* Fix installation without Python. Sunil Shetye, reported by Peter Church. (MA)
* Update Japanese translation. Fixes Debian Bug#329342, Takeshi Hamasaki. (MA)
* Fix imap.c size safeguard that broke on x86_64 architecture. Matthias Andree
* The FAQ is now available for duplex DIN A4 printing in PDF format.
  Don't bother to ask for a Letter version, I don't care.  Matthias Andree
* Man page: Use \- in the manual page where appropriate so that copy & paste
  works.  I hope we got them all.  Héctor García, Matthias Andree.

# INTERNAL CHANGES
* Switched to automake. Matthias Andree.
* Got rid of alloca() in fetchmail proper.  Matthias Andree
* Got rid of ipv6-connect, inner_connect and thereabouts.  Matthias Andree

--------------------------------------------------------------------------------

fetchmail-6.2.5 (Wed Oct 15 18:39:22 EDT 2003), 23079 lines:

* Updated Spanish, Turkish, and German translation files.
* Matthew Gregan's patch to handle garbage lengths from dbmail;
  closes Debian bug #212484.
* Fix IMAP query so new-message count doesn't include deleted messages.
* Man page typo fix, closes Debian bug #205892.
* OpenSSL cleanup patches from levinedl@acm.org.
* Benjamin Drieu's patch to fix Debian bug #212240, no oversized-message
  flushing if both "flush" and "limit" were specified.
* Benjamin Drieu's patch for Debian bug #156592, incorrect handing of 
  host/port option.
* Smash all NULs out of headers right after the socket read.
* Dup-killer code now keys on an MD5 hash of the raw headers.
* Sunil Shetye's patches to break up fetching of sizes and UIDLs.

There are 599 people on fetchmail-friends and 748 on fetchmail-announce.

fetchmail-6.2.4 (Wed Aug 13 04:27:35 EDT 2003), 22625 lines:

* Updated German, Spanish, Catalan, and Turkish translations.
* IDLE is now supported using NOOP commands even if the server doesn't support
  the IMAP IDLE extension. Patch by Chris Boyle.
* Sunil Shetye's patch to do better password shrouding.
* Sunil Shetye's bug-fix rollup patch.
* Introduce a translation item for the word "seen".
* Back out the hack to deal with lack of byte stuffing on some POP3 servers.
* Thomas Steudten's patch to improve SMTP handling of 550 errors.

There are 585 people on fetchmail-friends and 745 on fetchmail-announce.

fetchmail-6.2.3 (Thu Jul 17 14:53:00 EDT 2003), 22490 lines:

* French, German, Danish, Spanish, and Turkish translations updated.
* Brian Sammon's patch to deal with malformed message lines containing NULs.
* Fai's patch to ignore all but the first Return-Path (some spams have
  more than one of these).
* Benjamin Drieu's patch to properly byte-stuff when talking to BSMTP.
  Fixes Debian bug #184469.
* Benjamin Drieu's patch to enable auth=cram-md5.
  Fixes Debian bug #185232.
* Sunil Shetye's configure.in patch to avoid spurious search order messages
  from GCC.
* Header-reading code now copes better with lines ending in \n only.
* Elias Israel's patches for POP3 NTLM support and dealing with byte-
  stuffing failures at socket level.

There are 580 people on fetchmail-friends and 750 on fetchmail-announce.

fetchmail-6.2.2 (Fri Feb 28 21:34:26 EST 2003), 22345 lines:

* Sunil Shetye's patch to improve behavior on empty messages.
* Conform to RFC2595; reissue capability probes after successful 
  STARTTLS negotiation.
* Sunil's patch to make handling of failed STARTTLS more graceful.
* Sunil's JF2 fix patch for .fetchmailrc security.
* Christophe GIAUME <christophe@giaume.com> finished the implementation
  of RFC2177 IDLE.
* Jason Tishler's fix patch for Cygwin.
* Support ssh-style authentication in POP3
* Fix for Debian bug #108977, clean up config file evaluation,
  by Benjamin Drieu.

There are 554 people on fetchmail-friends and 727 on fetchmail-announce.

fetchmail-6.2.1 (Tue Jan 14 08:17:19 EST 2003), 22219 lines:

* Updated German, Turkish, Spanish, and Danish translation files.
* Integrated Sunil Shetye's patch to make mark_seen an explicit method.
* Removed FAQ warning about GMX and associated fetchmailconf check, 
  we have a report that its servers are conformant now.
* Another Sunil patch to fix a minor bug in bouncemail generation.

There are 536 people on fetchmail-friends and 716 on fetchmail-announce.

fetchmail-6.2.0 (Fri Dec 13 00:10:07 EST 2002), 22235 lines:

* Applied Steffen Esser's fix for a buffer-overflow bug in rfc822.c
* Updated Danish, German, and Turkish translation files.
* Sunil Shetye's SMTP timeout patch.

There are 538 people on fetchmail-friends and 701 on fetchmail-announce.

--------------------------------------------------------------------------------

fetchmail-6.1.3 (Thu Nov 28 05:35:15 EST 2002), 22203 lines:

* Updated Turkish, Danish, German, Spanish, Catalan po files.
* Added Slovak support.
* Configure.in update for autoconf 2.5 (Art Haas). 
* Be case-insensitive when looking for IMAP responses.
* Fix logout-after-idle-delivery bug (Sunil Shetye).
* Sunil Shetye's patch to bulletproof end-of-header detection.
* Sunil's fix for the STARTTLS problem -- repoll if TLS nabdshake
  fails.  The attempt to set up STARTTLS can be suppressed with 'sslproto ""'.

There are 540 people on fetchmail-friends and 701 on fetchmail-announce.

fetchmail-6.1.2 (Thu Oct 31 11:41:02 EST 2002), 22135 lines:

* Jan Klaverstijn's verbosity-lowering patch.
* Updated Turkish, German, Catalan, and Danish translation files.
* Fix processing of POP3 messages with missing bodies.
* Minor fixes by Sunil Shetye: fix generation of auth fail note, handle
  unexpected SIGALRM, plug memory leak, handle lines beginning with '\0',
  try to bulletproof error handling against read failures.

There are 535 people on fetchmail-friends and 696 on fetchmail-announce.

fetchmail-6.1.1 (Fri Oct 18 14:53:51 EDT 2002), 22087 lines:

* OTP fix patches from Stanislav Brabec <utx@penguin.cz>
* fix patch for writing antispam capability correctly in conf.c.
* Fix patches for Debian bugs #162571, #156592.
* Correction to manpage re -b and qmail.
* Patch to disable use of STLS if auth passwd is specified.
* Fix specfile generation to handle SSL correctly.
* New Danish, Turkish, and Catalan translation files.
* Improved ODMR debug messages.
* IMAP efficiency hack; don't fetch sizes unless needed.
* Detect and rewrite invalid return paths beginning with @.
* Fix for subtle freeing bug that suppressed information in some bounce msgs.
* Newline fix patches for internationalization files.
* Fix reversed test guarding authentication-failure warnings.
* Fix POP3 breakage starting at 5.9.14.

There are 529 people on fetchmail-friends and 693 on fetchmail-announce.

fetchmail-6.1.0 (Sun Sep 22 18:31:23 EDT 2002), 21999 lines:

* Updated French translation.
* Stefan Esser's fix for potential remote vulnerability in multidrop mode.
  This is an important security fix!

There are 519 people on fetchmail-friends and 680 on fetchmail-announce.

--------------------------------------------------------------------------------

fetchmail-6.0.0 (Tue Sep 17 19:48:25 EDT 2002), 21972 lines:

* Applied Matt Kraai's fix for minor Debian bug #144539.
* Nerijus Baliunas's patch to support STARTTLS over IMAP.
* More cleanups and minor bugfixes from Sunil Shetye.
* Default antispam-response list is now empty.
* Updated de and po translations.

--------------------------------------------------------------------------------

There are 520 people on fetchmail-friends and 683 on fetchmail-announce.

--------------------------------------------------------------------------------

 vim:tw=80 com=bf\:* ts=8 sts=8 sw=8 ai:
