Index: Makefile.in
===================================================================
RCS file: /cvsroot/tclxml/tcldom/Makefile.in,v
retrieving revision 1.23
diff -u -p -r1.23 Makefile.in
--- Makefile.in	31 Oct 2002 19:03:49 -0000	1.23
+++ Makefile.in	2 Jun 2004 11:21:16 -0000
@@ -143,6 +143,7 @@ MAKE_STATIC_LIB	= @MAKE_STATIC_LIB@
 MAKE_STUB_LIB	= @MAKE_STUB_LIB@
 OBJEXT		= @OBJEXT@
 RANLIB		= @RANLIB@
+RANLIB_STUB	= @RANLIB_STUB@
 SHLIB_CFLAGS	= @SHLIB_CFLAGS@
 SHLIB_LD	= @SHLIB_LD@
 SHLIB_LDFLAGS	= @SHLIB_LDFLAGS@
@@ -166,6 +167,7 @@ TCL_LIBS	= @TCL_LIBS@
 EXTRA_PATH	= $(top_builddir):$(TCL_BIN_DIR)
 TCLSH_ENV	= TCL_LIBRARY=`@CYGPATH@ $(TCL_SRC_DIR)/library` \
 		  LD_LIBRARY_PATH="$(EXTRA_PATH):$(LD_LIBRARY_PATH)" \
+		  DYLD_LIBRARY_PATH="$(EXTRA_PATH):$(DYLD_LIBRARY_PATH)" \
 		  LIBPATH="$(EXTRA_PATH):${LIBPATH}" \
 		  SHLIB_PATH="$(EXTRA_PATH):${SHLIB_PATH}" \
 		  PATH="$(EXTRA_PATH):$(PATH)"
@@ -235,7 +237,7 @@ install-libraries: libraries
 	@for p in $(GENERIC_SCRIPTS); do \
 	  if test -f $$p; then \
 	    echo "Installing $$p"; \
-	    $(INSTALL_DATA) $$p $(pkglibdir); \
+	    $(INSTALL_DATA) $$p $(DESTDIR)$(pkglibdir); \
 	  else :; fi; \
 	done
 	@echo "libraries done"
@@ -287,7 +289,7 @@ $($(PACKAGE)_LIB_FILE): $($(PACKAGE)_OBJ
 $($(PACKAGE)stub_LIB_FILE): $($(PACKAGE)stub_OBJECTS)
 	-rm -f $($(PACKAGE)stub_LIB_FILE)
 	${MAKE_STUB_LIB}
-	$(RANLIB) $($(PACKAGE)stub_LIB_FILE)
+	$(RANLIB_STUB) $($(PACKAGE)stub_LIB_FILE)
 
 #========================================================================
 # We need to enumerate the list of .c to .o lines here.
@@ -423,8 +425,14 @@ install-lib-binaries:
 	  if test -f $$p; then \
 	    echo " $(INSTALL_PROGRAM) $$p $(DESTDIR)$(pkglibdir)/$$p"; \
 	    $(INSTALL_PROGRAM) $$p $(DESTDIR)$(pkglibdir)/$$p; \
+	    stub=`echo $$p|sed -e "s/.*\(stub\).*/\1/"`; \
+	    if test "x$$stub" = "xstub"; then \
+	    echo " $(RANLIB_STUB) $(DESTDIR)$(pkglibdir)/$$p"; \
+	    $(RANLIB_STUB) $(DESTDIR)$(pkglibdir)/$$p; \
+	    else \
 	    echo " $(RANLIB) $(DESTDIR)$(pkglibdir)/$$p"; \
 	    $(RANLIB) $(DESTDIR)$(pkglibdir)/$$p; \
+	    fi; \
 	    ext=`echo $$p|sed -e "s/.*\.//"`; \
 	    if test "x$$ext" = "xdll"; then \
 		lib=`basename $$p|sed -e 's/.[^.]*$$//'`.lib; \
Index: configure
===================================================================
RCS file: configure
diff -N configure
--- /dev/null	1 Jan 1970 00:00:00 -0000
+++ configure	2 Jun 2004 11:21:16 -0000
@@ -0,0 +1,6507 @@
+#! /bin/sh
+# From configure.in Id: configure.in.
+# Guess values for system-dependent variables and create Makefiles.
+# Generated by Autoconf 2.52.
+#
+# Copyright 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001
+# Free Software Foundation, Inc.
+# This configure script is free software; the Free Software Foundation
+# gives unlimited permission to copy, distribute and modify it.
+
+# Avoid depending upon Character Ranges.
+as_cr_letters='abcdefghijklmnopqrstuvwxyz'
+as_cr_LETTERS='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
+as_cr_Letters=$as_cr_letters$as_cr_LETTERS
+as_cr_digits='0123456789'
+as_cr_alnum=$as_cr_Letters$as_cr_digits
+
+# Sed expression to map a string onto a valid variable name.
+as_tr_sh="sed y%*+%pp%;s%[^_$as_cr_alnum]%_%g"
+
+# Sed expression to map a string onto a valid CPP name.
+as_tr_cpp="sed y%*$as_cr_letters%P$as_cr_LETTERS%;s%[^_$as_cr_alnum]%_%g"
+
+# Be Bourne compatible
+if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
+  emulate sh
+  NULLCMD=:
+elif test -n "${BASH_VERSION+set}" && (set -o posix) >/dev/null 2>&1; then
+  set -o posix
+fi
+
+# Name of the executable.
+as_me=`echo "$0" |sed 's,.*[\\/],,'`
+
+if expr a : '\(a\)' >/dev/null 2>&1; then
+  as_expr=expr
+else
+  as_expr=false
+fi
+
+rm -f conf$$ conf$$.exe conf$$.file
+echo >conf$$.file
+if ln -s conf$$.file conf$$ 2>/dev/null; then
+  # We could just check for DJGPP; but this test a) works b) is more generic
+  # and c) will remain valid once DJGPP supports symlinks (DJGPP 2.04).
+  if test -f conf$$.exe; then
+    # Don't use ln at all; we don't have any links
+    as_ln_s='cp -p'
+  else
+    as_ln_s='ln -s'
+  fi
+elif ln conf$$.file conf$$ 2>/dev/null; then
+  as_ln_s=ln
+else
+  as_ln_s='cp -p'
+fi
+rm -f conf$$ conf$$.exe conf$$.file
+
+as_executable_p="test -f"
+
+# Support unset when possible.
+if (FOO=FOO; unset FOO) >/dev/null 2>&1; then
+  as_unset=unset
+else
+  as_unset=false
+fi
+
+# NLS nuisances.
+$as_unset LANG || test "${LANG+set}" != set || { LANG=C; export LANG; }
+$as_unset LC_ALL || test "${LC_ALL+set}" != set || { LC_ALL=C; export LC_ALL; }
+$as_unset LC_TIME || test "${LC_TIME+set}" != set || { LC_TIME=C; export LC_TIME; }
+$as_unset LC_CTYPE || test "${LC_CTYPE+set}" != set || { LC_CTYPE=C; export LC_CTYPE; }
+$as_unset LANGUAGE || test "${LANGUAGE+set}" != set || { LANGUAGE=C; export LANGUAGE; }
+$as_unset LC_COLLATE || test "${LC_COLLATE+set}" != set || { LC_COLLATE=C; export LC_COLLATE; }
+$as_unset LC_NUMERIC || test "${LC_NUMERIC+set}" != set || { LC_NUMERIC=C; export LC_NUMERIC; }
+$as_unset LC_MESSAGES || test "${LC_MESSAGES+set}" != set || { LC_MESSAGES=C; export LC_MESSAGES; }
+
+# IFS
+# We need space, tab and new line, in precisely that order.
+as_nl='
+'
+IFS=" 	$as_nl"
+
+# CDPATH.
+$as_unset CDPATH || test "${CDPATH+set}" != set || { CDPATH=:; export CDPATH; }
+
+# Name of the host.
+# hostname on some systems (SVR3.2, Linux) returns a bogus exit status,
+# so uname gets run too.
+ac_hostname=`(hostname || uname -n) 2>/dev/null | sed 1q`
+
+exec 6>&1
+
+#
+# Initializations.
+#
+ac_default_prefix=/usr/local
+cross_compiling=no
+subdirs=
+MFLAGS= MAKEFLAGS=
+SHELL=${CONFIG_SHELL-/bin/sh}
+
+# Maximum number of lines to put in a shell here document.
+# This variable seems obsolete.  It should probably be removed, and
+# only ac_max_sed_lines should be used.
+: ${ac_max_here_lines=38}
+
+ac_unique_file="./tcldom.c"
+
+# Initialize some variables set by options.
+ac_init_help=
+ac_init_version=false
+# The variables have the same names as the options, with
+# dashes changed to underlines.
+cache_file=/dev/null
+exec_prefix=NONE
+no_create=
+no_recursion=
+prefix=NONE
+program_prefix=NONE
+program_suffix=NONE
+program_transform_name=s,x,x,
+silent=
+site=
+srcdir=
+verbose=
+x_includes=NONE
+x_libraries=NONE
+
+# Installation directory options.
+# These are left unexpanded so users can "make install exec_prefix=/foo"
+# and all the variables that are supposed to be based on exec_prefix
+# by default will actually change.
+# Use braces instead of parens because sh, perl, etc. also accept them.
+bindir='${exec_prefix}/bin'
+sbindir='${exec_prefix}/sbin'
+libexecdir='${exec_prefix}/libexec'
+datadir='${prefix}/share'
+sysconfdir='${prefix}/etc'
+sharedstatedir='${prefix}/com'
+localstatedir='${prefix}/var'
+libdir='${exec_prefix}/lib'
+includedir='${prefix}/include'
+oldincludedir='/usr/include'
+infodir='${prefix}/info'
+mandir='${prefix}/man'
+
+# Identity of this package.
+PACKAGE_NAME=
+PACKAGE_TARNAME=
+PACKAGE_VERSION=
+PACKAGE_STRING=
+PACKAGE_BUGREPORT=
+
+ac_prev=
+for ac_option
+do
+  # If the previous option needs an argument, assign it.
+  if test -n "$ac_prev"; then
+    eval "$ac_prev=\$ac_option"
+    ac_prev=
+    continue
+  fi
+
+  ac_optarg=`expr "x$ac_option" : 'x[^=]*=\(.*\)'`
+
+  # Accept the important Cygnus configure options, so we can diagnose typos.
+
+  case $ac_option in
+
+  -bindir | --bindir | --bindi | --bind | --bin | --bi)
+    ac_prev=bindir ;;
+  -bindir=* | --bindir=* | --bindi=* | --bind=* | --bin=* | --bi=*)
+    bindir=$ac_optarg ;;
+
+  -build | --build | --buil | --bui | --bu)
+    ac_prev=build_alias ;;
+  -build=* | --build=* | --buil=* | --bui=* | --bu=*)
+    build_alias=$ac_optarg ;;
+
+  -cache-file | --cache-file | --cache-fil | --cache-fi \
+  | --cache-f | --cache- | --cache | --cach | --cac | --ca | --c)
+    ac_prev=cache_file ;;
+  -cache-file=* | --cache-file=* | --cache-fil=* | --cache-fi=* \
+  | --cache-f=* | --cache-=* | --cache=* | --cach=* | --cac=* | --ca=* | --c=*)
+    cache_file=$ac_optarg ;;
+
+  --config-cache | -C)
+    cache_file=config.cache ;;
+
+  -datadir | --datadir | --datadi | --datad | --data | --dat | --da)
+    ac_prev=datadir ;;
+  -datadir=* | --datadir=* | --datadi=* | --datad=* | --data=* | --dat=* \
+  | --da=*)
+    datadir=$ac_optarg ;;
+
+  -disable-* | --disable-*)
+    ac_feature=`expr "x$ac_option" : 'x-*disable-\(.*\)'`
+    # Reject names that are not valid shell variable names.
+    expr "x$ac_feature" : ".*[^-_$as_cr_alnum]" >/dev/null &&
+      { echo "$as_me: error: invalid feature name: $ac_feature" >&2
+   { (exit 1); exit 1; }; }
+    ac_feature=`echo $ac_feature | sed 's/-/_/g'`
+    eval "enable_$ac_feature=no" ;;
+
+  -enable-* | --enable-*)
+    ac_feature=`expr "x$ac_option" : 'x-*enable-\([^=]*\)'`
+    # Reject names that are not valid shell variable names.
+    expr "x$ac_feature" : ".*[^-_$as_cr_alnum]" >/dev/null &&
+      { echo "$as_me: error: invalid feature name: $ac_feature" >&2
+   { (exit 1); exit 1; }; }
+    ac_feature=`echo $ac_feature | sed 's/-/_/g'`
+    case $ac_option in
+      *=*) ac_optarg=`echo "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"`;;
+      *) ac_optarg=yes ;;
+    esac
+    eval "enable_$ac_feature='$ac_optarg'" ;;
+
+  -exec-prefix | --exec_prefix | --exec-prefix | --exec-prefi \
+  | --exec-pref | --exec-pre | --exec-pr | --exec-p | --exec- \
+  | --exec | --exe | --ex)
+    ac_prev=exec_prefix ;;
+  -exec-prefix=* | --exec_prefix=* | --exec-prefix=* | --exec-prefi=* \
+  | --exec-pref=* | --exec-pre=* | --exec-pr=* | --exec-p=* | --exec-=* \
+  | --exec=* | --exe=* | --ex=*)
+    exec_prefix=$ac_optarg ;;
+
+  -gas | --gas | --ga | --g)
+    # Obsolete; use --with-gas.
+    with_gas=yes ;;
+
+  -help | --help | --hel | --he | -h)
+    ac_init_help=long ;;
+  -help=r* | --help=r* | --hel=r* | --he=r* | -hr*)
+    ac_init_help=recursive ;;
+  -help=s* | --help=s* | --hel=s* | --he=s* | -hs*)
+    ac_init_help=short ;;
+
+  -host | --host | --hos | --ho)
+    ac_prev=host_alias ;;
+  -host=* | --host=* | --hos=* | --ho=*)
+    host_alias=$ac_optarg ;;
+
+  -includedir | --includedir | --includedi | --included | --include \
+  | --includ | --inclu | --incl | --inc)
+    ac_prev=includedir ;;
+  -includedir=* | --includedir=* | --includedi=* | --included=* | --include=* \
+  | --includ=* | --inclu=* | --incl=* | --inc=*)
+    includedir=$ac_optarg ;;
+
+  -infodir | --infodir | --infodi | --infod | --info | --inf)
+    ac_prev=infodir ;;
+  -infodir=* | --infodir=* | --infodi=* | --infod=* | --info=* | --inf=*)
+    infodir=$ac_optarg ;;
+
+  -libdir | --libdir | --libdi | --libd)
+    ac_prev=libdir ;;
+  -libdir=* | --libdir=* | --libdi=* | --libd=*)
+    libdir=$ac_optarg ;;
+
+  -libexecdir | --libexecdir | --libexecdi | --libexecd | --libexec \
+  | --libexe | --libex | --libe)
+    ac_prev=libexecdir ;;
+  -libexecdir=* | --libexecdir=* | --libexecdi=* | --libexecd=* | --libexec=* \
+  | --libexe=* | --libex=* | --libe=*)
+    libexecdir=$ac_optarg ;;
+
+  -localstatedir | --localstatedir | --localstatedi | --localstated \
+  | --localstate | --localstat | --localsta | --localst \
+  | --locals | --local | --loca | --loc | --lo)
+    ac_prev=localstatedir ;;
+  -localstatedir=* | --localstatedir=* | --localstatedi=* | --localstated=* \
+  | --localstate=* | --localstat=* | --localsta=* | --localst=* \
+  | --locals=* | --local=* | --loca=* | --loc=* | --lo=*)
+    localstatedir=$ac_optarg ;;
+
+  -mandir | --mandir | --mandi | --mand | --man | --ma | --m)
+    ac_prev=mandir ;;
+  -mandir=* | --mandir=* | --mandi=* | --mand=* | --man=* | --ma=* | --m=*)
+    mandir=$ac_optarg ;;
+
+  -nfp | --nfp | --nf)
+    # Obsolete; use --without-fp.
+    with_fp=no ;;
+
+  -no-create | --no-create | --no-creat | --no-crea | --no-cre \
+  | --no-cr | --no-c)
+    no_create=yes ;;
+
+  -no-recursion | --no-recursion | --no-recursio | --no-recursi \
+  | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r)
+    no_recursion=yes ;;
+
+  -oldincludedir | --oldincludedir | --oldincludedi | --oldincluded \
+  | --oldinclude | --oldinclud | --oldinclu | --oldincl | --oldinc \
+  | --oldin | --oldi | --old | --ol | --o)
+    ac_prev=oldincludedir ;;
+  -oldincludedir=* | --oldincludedir=* | --oldincludedi=* | --oldincluded=* \
+  | --oldinclude=* | --oldinclud=* | --oldinclu=* | --oldincl=* | --oldinc=* \
+  | --oldin=* | --oldi=* | --old=* | --ol=* | --o=*)
+    oldincludedir=$ac_optarg ;;
+
+  -prefix | --prefix | --prefi | --pref | --pre | --pr | --p)
+    ac_prev=prefix ;;
+  -prefix=* | --prefix=* | --prefi=* | --pref=* | --pre=* | --pr=* | --p=*)
+    prefix=$ac_optarg ;;
+
+  -program-prefix | --program-prefix | --program-prefi | --program-pref \
+  | --program-pre | --program-pr | --program-p)
+    ac_prev=program_prefix ;;
+  -program-prefix=* | --program-prefix=* | --program-prefi=* \
+  | --program-pref=* | --program-pre=* | --program-pr=* | --program-p=*)
+    program_prefix=$ac_optarg ;;
+
+  -program-suffix | --program-suffix | --program-suffi | --program-suff \
+  | --program-suf | --program-su | --program-s)
+    ac_prev=program_suffix ;;
+  -program-suffix=* | --program-suffix=* | --program-suffi=* \
+  | --program-suff=* | --program-suf=* | --program-su=* | --program-s=*)
+    program_suffix=$ac_optarg ;;
+
+  -program-transform-name | --program-transform-name \
+  | --program-transform-nam | --program-transform-na \
+  | --program-transform-n | --program-transform- \
+  | --program-transform | --program-transfor \
+  | --program-transfo | --program-transf \
+  | --program-trans | --program-tran \
+  | --progr-tra | --program-tr | --program-t)
+    ac_prev=program_transform_name ;;
+  -program-transform-name=* | --program-transform-name=* \
+  | --program-transform-nam=* | --program-transform-na=* \
+  | --program-transform-n=* | --program-transform-=* \
+  | --program-transform=* | --program-transfor=* \
+  | --program-transfo=* | --program-transf=* \
+  | --program-trans=* | --program-tran=* \
+  | --progr-tra=* | --program-tr=* | --program-t=*)
+    program_transform_name=$ac_optarg ;;
+
+  -q | -quiet | --quiet | --quie | --qui | --qu | --q \
+  | -silent | --silent | --silen | --sile | --sil)
+    silent=yes ;;
+
+  -sbindir | --sbindir | --sbindi | --sbind | --sbin | --sbi | --sb)
+    ac_prev=sbindir ;;
+  -sbindir=* | --sbindir=* | --sbindi=* | --sbind=* | --sbin=* \
+  | --sbi=* | --sb=*)
+    sbindir=$ac_optarg ;;
+
+  -sharedstatedir | --sharedstatedir | --sharedstatedi \
+  | --sharedstated | --sharedstate | --sharedstat | --sharedsta \
+  | --sharedst | --shareds | --shared | --share | --shar \
+  | --sha | --sh)
+    ac_prev=sharedstatedir ;;
+  -sharedstatedir=* | --sharedstatedir=* | --sharedstatedi=* \
+  | --sharedstated=* | --sharedstate=* | --sharedstat=* | --sharedsta=* \
+  | --sharedst=* | --shareds=* | --shared=* | --share=* | --shar=* \
+  | --sha=* | --sh=*)
+    sharedstatedir=$ac_optarg ;;
+
+  -site | --site | --sit)
+    ac_prev=site ;;
+  -site=* | --site=* | --sit=*)
+    site=$ac_optarg ;;
+
+  -srcdir | --srcdir | --srcdi | --srcd | --src | --sr)
+    ac_prev=srcdir ;;
+  -srcdir=* | --srcdir=* | --srcdi=* | --srcd=* | --src=* | --sr=*)
+    srcdir=$ac_optarg ;;
+
+  -sysconfdir | --sysconfdir | --sysconfdi | --sysconfd | --sysconf \
+  | --syscon | --sysco | --sysc | --sys | --sy)
+    ac_prev=sysconfdir ;;
+  -sysconfdir=* | --sysconfdir=* | --sysconfdi=* | --sysconfd=* | --sysconf=* \
+  | --syscon=* | --sysco=* | --sysc=* | --sys=* | --sy=*)
+    sysconfdir=$ac_optarg ;;
+
+  -target | --target | --targe | --targ | --tar | --ta | --t)
+    ac_prev=target_alias ;;
+  -target=* | --target=* | --targe=* | --targ=* | --tar=* | --ta=* | --t=*)
+    target_alias=$ac_optarg ;;
+
+  -v | -verbose | --verbose | --verbos | --verbo | --verb)
+    verbose=yes ;;
+
+  -version | --version | --versio | --versi | --vers | -V)
+    ac_init_version=: ;;
+
+  -with-* | --with-*)
+    ac_package=`expr "x$ac_option" : 'x-*with-\([^=]*\)'`
+    # Reject names that are not valid shell variable names.
+    expr "x$ac_package" : ".*[^-_$as_cr_alnum]" >/dev/null &&
+      { echo "$as_me: error: invalid package name: $ac_package" >&2
+   { (exit 1); exit 1; }; }
+    ac_package=`echo $ac_package| sed 's/-/_/g'`
+    case $ac_option in
+      *=*) ac_optarg=`echo "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"`;;
+      *) ac_optarg=yes ;;
+    esac
+    eval "with_$ac_package='$ac_optarg'" ;;
+
+  -without-* | --without-*)
+    ac_package=`expr "x$ac_option" : 'x-*without-\(.*\)'`
+    # Reject names that are not valid shell variable names.
+    expr "x$ac_package" : ".*[^-_$as_cr_alnum]" >/dev/null &&
+      { echo "$as_me: error: invalid package name: $ac_package" >&2
+   { (exit 1); exit 1; }; }
+    ac_package=`echo $ac_package | sed 's/-/_/g'`
+    eval "with_$ac_package=no" ;;
+
+  --x)
+    # Obsolete; use --with-x.
+    with_x=yes ;;
+
+  -x-includes | --x-includes | --x-include | --x-includ | --x-inclu \
+  | --x-incl | --x-inc | --x-in | --x-i)
+    ac_prev=x_includes ;;
+  -x-includes=* | --x-includes=* | --x-include=* | --x-includ=* | --x-inclu=* \
+  | --x-incl=* | --x-inc=* | --x-in=* | --x-i=*)
+    x_includes=$ac_optarg ;;
+
+  -x-libraries | --x-libraries | --x-librarie | --x-librari \
+  | --x-librar | --x-libra | --x-libr | --x-lib | --x-li | --x-l)
+    ac_prev=x_libraries ;;
+  -x-libraries=* | --x-libraries=* | --x-librarie=* | --x-librari=* \
+  | --x-librar=* | --x-libra=* | --x-libr=* | --x-lib=* | --x-li=* | --x-l=*)
+    x_libraries=$ac_optarg ;;
+
+  -*) { echo "$as_me: error: unrecognized option: $ac_option
+Try \`$0 --help' for more information." >&2
+   { (exit 1); exit 1; }; }
+    ;;
+
+  *=*)
+    ac_envvar=`expr "x$ac_option" : 'x\([^=]*\)='`
+    # Reject names that are not valid shell variable names.
+    expr "x$ac_envvar" : ".*[^_$as_cr_alnum]" >/dev/null &&
+      { echo "$as_me: error: invalid variable name: $ac_envvar" >&2
+   { (exit 1); exit 1; }; }
+    ac_optarg=`echo "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"`
+    eval "$ac_envvar='$ac_optarg'"
+    export $ac_envvar ;;
+
+  *)
+    # FIXME: should be removed in autoconf 3.0.
+    echo "$as_me: WARNING: you should use --build, --host, --target" >&2
+    expr "x$ac_option" : ".*[^-._$as_cr_alnum]" >/dev/null &&
+      echo "$as_me: WARNING: invalid host type: $ac_option" >&2
+    : ${build_alias=$ac_option} ${host_alias=$ac_option} ${target_alias=$ac_option}
+    ;;
+
+  esac
+done
+
+if test -n "$ac_prev"; then
+  ac_option=--`echo $ac_prev | sed 's/_/-/g'`
+  { echo "$as_me: error: missing argument to $ac_option" >&2
+   { (exit 1); exit 1; }; }
+fi
+
+# Be sure to have absolute paths.
+for ac_var in exec_prefix prefix
+do
+  eval ac_val=$`echo $ac_var`
+  case $ac_val in
+    [\\/$]* | ?:[\\/]* | NONE | '' ) ;;
+    *)  { echo "$as_me: error: expected an absolute path for --$ac_var: $ac_val" >&2
+   { (exit 1); exit 1; }; };;
+  esac
+done
+
+# Be sure to have absolute paths.
+for ac_var in bindir sbindir libexecdir datadir sysconfdir sharedstatedir \
+              localstatedir libdir includedir oldincludedir infodir mandir
+do
+  eval ac_val=$`echo $ac_var`
+  case $ac_val in
+    [\\/$]* | ?:[\\/]* ) ;;
+    *)  { echo "$as_me: error: expected an absolute path for --$ac_var: $ac_val" >&2
+   { (exit 1); exit 1; }; };;
+  esac
+done
+
+# There might be people who depend on the old broken behavior: `$host'
+# used to hold the argument of --host etc.
+build=$build_alias
+host=$host_alias
+target=$target_alias
+
+# FIXME: should be removed in autoconf 3.0.
+if test "x$host_alias" != x; then
+  if test "x$build_alias" = x; then
+    cross_compiling=maybe
+    echo "$as_me: WARNING: If you wanted to set the --build type, don't use --host.
+    If a cross compiler is detected then cross compile mode will be used." >&2
+  elif test "x$build_alias" != "x$host_alias"; then
+    cross_compiling=yes
+  fi
+fi
+
+ac_tool_prefix=
+test -n "$host_alias" && ac_tool_prefix=$host_alias-
+
+test "$silent" = yes && exec 6>/dev/null
+
+# Find the source files, if location was not specified.
+if test -z "$srcdir"; then
+  ac_srcdir_defaulted=yes
+  # Try the directory containing this script, then its parent.
+  ac_prog=$0
+  ac_confdir=`echo "$ac_prog" | sed 's%[\\/][^\\/][^\\/]*$%%'`
+  test "x$ac_confdir" = "x$ac_prog" && ac_confdir=.
+  srcdir=$ac_confdir
+  if test ! -r $srcdir/$ac_unique_file; then
+    srcdir=..
+  fi
+else
+  ac_srcdir_defaulted=no
+fi
+if test ! -r $srcdir/$ac_unique_file; then
+  if test "$ac_srcdir_defaulted" = yes; then
+    { echo "$as_me: error: cannot find sources in $ac_confdir or .." >&2
+   { (exit 1); exit 1; }; }
+  else
+    { echo "$as_me: error: cannot find sources in $srcdir" >&2
+   { (exit 1); exit 1; }; }
+  fi
+fi
+srcdir=`echo "$srcdir" | sed 's%\([^\\/]\)[\\/]*$%\1%'`
+ac_env_build_alias_set=${build_alias+set}
+ac_env_build_alias_value=$build_alias
+ac_cv_env_build_alias_set=${build_alias+set}
+ac_cv_env_build_alias_value=$build_alias
+ac_env_host_alias_set=${host_alias+set}
+ac_env_host_alias_value=$host_alias
+ac_cv_env_host_alias_set=${host_alias+set}
+ac_cv_env_host_alias_value=$host_alias
+ac_env_target_alias_set=${target_alias+set}
+ac_env_target_alias_value=$target_alias
+ac_cv_env_target_alias_set=${target_alias+set}
+ac_cv_env_target_alias_value=$target_alias
+ac_env_CC_set=${CC+set}
+ac_env_CC_value=$CC
+ac_cv_env_CC_set=${CC+set}
+ac_cv_env_CC_value=$CC
+ac_env_CFLAGS_set=${CFLAGS+set}
+ac_env_CFLAGS_value=$CFLAGS
+ac_cv_env_CFLAGS_set=${CFLAGS+set}
+ac_cv_env_CFLAGS_value=$CFLAGS
+ac_env_LDFLAGS_set=${LDFLAGS+set}
+ac_env_LDFLAGS_value=$LDFLAGS
+ac_cv_env_LDFLAGS_set=${LDFLAGS+set}
+ac_cv_env_LDFLAGS_value=$LDFLAGS
+ac_env_CPPFLAGS_set=${CPPFLAGS+set}
+ac_env_CPPFLAGS_value=$CPPFLAGS
+ac_cv_env_CPPFLAGS_set=${CPPFLAGS+set}
+ac_cv_env_CPPFLAGS_value=$CPPFLAGS
+ac_env_CPP_set=${CPP+set}
+ac_env_CPP_value=$CPP
+ac_cv_env_CPP_set=${CPP+set}
+ac_cv_env_CPP_value=$CPP
+
+#
+# Report the --help message.
+#
+if test "$ac_init_help" = "long"; then
+  # Omit some internal or obsolete options to make the list less imposing.
+  # This message is too long to be a string in the A/UX 3.1 sh.
+  cat <<EOF
+\`configure' configures this package to adapt to many kinds of systems.
+
+Usage: $0 [OPTION]... [VAR=VALUE]...
+
+To assign environment variables (e.g., CC, CFLAGS...), specify them as
+VAR=VALUE.  See below for descriptions of some of the useful variables.
+
+Defaults for the options are specified in brackets.
+
+Configuration:
+  -h, --help              display this help and exit
+      --help=short        display options specific to this package
+      --help=recursive    display the short help of all the included packages
+  -V, --version           display version information and exit
+  -q, --quiet, --silent   do not print \`checking...' messages
+      --cache-file=FILE   cache test results in FILE [disabled]
+  -C, --config-cache      alias for \`--cache-file=config.cache'
+  -n, --no-create         do not create output files
+      --srcdir=DIR        find the sources in DIR [configure dir or \`..']
+
+EOF
+
+  cat <<EOF
+Installation directories:
+  --prefix=PREFIX         install architecture-independent files in PREFIX
+                          [$ac_default_prefix]
+  --exec-prefix=EPREFIX   install architecture-dependent files in EPREFIX
+                          [PREFIX]
+
+By default, \`make install' will install all the files in
+\`$ac_default_prefix/bin', \`$ac_default_prefix/lib' etc.  You can specify
+an installation prefix other than \`$ac_default_prefix' using \`--prefix',
+for instance \`--prefix=\$HOME'.
+
+For better control, use the options below.
+
+Fine tuning of the installation directories:
+  --bindir=DIR           user executables [EPREFIX/bin]
+  --sbindir=DIR          system admin executables [EPREFIX/sbin]
+  --libexecdir=DIR       program executables [EPREFIX/libexec]
+  --datadir=DIR          read-only architecture-independent data [PREFIX/share]
+  --sysconfdir=DIR       read-only single-machine data [PREFIX/etc]
+  --sharedstatedir=DIR   modifiable architecture-independent data [PREFIX/com]
+  --localstatedir=DIR    modifiable single-machine data [PREFIX/var]
+  --libdir=DIR           object code libraries [EPREFIX/lib]
+  --includedir=DIR       C header files [PREFIX/include]
+  --oldincludedir=DIR    C header files for non-gcc [/usr/include]
+  --infodir=DIR          info documentation [PREFIX/info]
+  --mandir=DIR           man documentation [PREFIX/man]
+EOF
+
+  cat <<\EOF
+EOF
+fi
+
+if test -n "$ac_init_help"; then
+
+  cat <<\EOF
+
+Optional Features:
+  --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
+  --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
+  --enable-threads        build with threads
+  --enable-shared         build and link with shared libraries --enable-shared
+  --enable-64bit          enable 64bit support (where applicable)
+  --enable-64bit-vis      enable 64bit Sparc VIS support
+  --disable-load          disallow dynamic loading and "load" command
+  --enable-symbols        build with debugging symbols --disable-symbols
+
+Optional Packages:
+  --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]
+  --without-PACKAGE       do not use PACKAGE (same as --with-PACKAGE=no)
+  --with-tcl              directory containing tcl configuration (tclConfig.sh)
+  --with-tclinclude      directory containing the public Tcl header files
+
+Some influential environment variables:
+  CC          C compiler command
+  CFLAGS      C compiler flags
+  LDFLAGS     linker flags, e.g. -L<lib dir> if you have libraries in a
+              nonstandard directory <lib dir>
+  CPPFLAGS    C/C++ preprocessor flags, e.g. -I<include dir> if you have
+              headers in a nonstandard directory <include dir>
+  CPP         C preprocessor
+
+Use these variables to override the choices made by `configure' or to help
+it to find libraries and programs with nonstandard names/locations.
+
+EOF
+fi
+
+if test "$ac_init_help" = "recursive"; then
+  # If there are subdirs, report their specific --help.
+  ac_popdir=`pwd`
+  for ac_subdir in : $ac_subdirs_all; do test "x$ac_subdir" = x: && continue
+    cd $ac_subdir
+    # A "../" for each directory in /$ac_subdir.
+    ac_dots=`echo $ac_subdir |
+             sed 's,^\./,,;s,[^/]$,&/,;s,[^/]*/,../,g'`
+
+    case $srcdir in
+    .) # No --srcdir option.  We are building in place.
+      ac_sub_srcdir=$srcdir ;;
+    [\\/]* | ?:[\\/]* ) # Absolute path.
+      ac_sub_srcdir=$srcdir/$ac_subdir ;;
+    *) # Relative path.
+      ac_sub_srcdir=$ac_dots$srcdir/$ac_subdir ;;
+    esac
+
+    # Check for guested configure; otherwise get Cygnus style configure.
+    if test -f $ac_sub_srcdir/configure.gnu; then
+      echo
+      $SHELL $ac_sub_srcdir/configure.gnu  --help=recursive
+    elif test -f $ac_sub_srcdir/configure; then
+      echo
+      $SHELL $ac_sub_srcdir/configure  --help=recursive
+    elif test -f $ac_sub_srcdir/configure.ac ||
+           test -f $ac_sub_srcdir/configure.in; then
+      echo
+      $ac_configure --help
+    else
+      echo "$as_me: WARNING: no configuration information is in $ac_subdir" >&2
+    fi
+    cd $ac_popdir
+  done
+fi
+
+test -n "$ac_init_help" && exit 0
+if $ac_init_version; then
+  cat <<\EOF
+
+Copyright 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001
+Free Software Foundation, Inc.
+This configure script is free software; the Free Software Foundation
+gives unlimited permission to copy, distribute and modify it.
+EOF
+  exit 0
+fi
+exec 5>config.log
+cat >&5 <<EOF
+This file contains any messages produced by compilers while
+running configure, to aid debugging if configure makes a mistake.
+
+It was created by $as_me, which was
+generated by GNU Autoconf 2.52.  Invocation command line was
+
+  $ $0 $@
+
+EOF
+{
+cat <<_ASUNAME
+## ---------- ##
+## Platform.  ##
+## ---------- ##
+
+hostname = `(hostname || uname -n) 2>/dev/null | sed 1q`
+uname -m = `(uname -m) 2>/dev/null || echo unknown`
+uname -r = `(uname -r) 2>/dev/null || echo unknown`
+uname -s = `(uname -s) 2>/dev/null || echo unknown`
+uname -v = `(uname -v) 2>/dev/null || echo unknown`
+
+/usr/bin/uname -p = `(/usr/bin/uname -p) 2>/dev/null || echo unknown`
+/bin/uname -X     = `(/bin/uname -X) 2>/dev/null     || echo unknown`
+
+/bin/arch              = `(/bin/arch) 2>/dev/null              || echo unknown`
+/usr/bin/arch -k       = `(/usr/bin/arch -k) 2>/dev/null       || echo unknown`
+/usr/convex/getsysinfo = `(/usr/convex/getsysinfo) 2>/dev/null || echo unknown`
+hostinfo               = `(hostinfo) 2>/dev/null               || echo unknown`
+/bin/machine           = `(/bin/machine) 2>/dev/null           || echo unknown`
+/usr/bin/oslevel       = `(/usr/bin/oslevel) 2>/dev/null       || echo unknown`
+/bin/universe          = `(/bin/universe) 2>/dev/null          || echo unknown`
+
+PATH = $PATH
+
+_ASUNAME
+} >&5
+
+cat >&5 <<EOF
+## ------------ ##
+## Core tests.  ##
+## ------------ ##
+
+EOF
+
+# Keep a trace of the command line.
+# Strip out --no-create and --no-recursion so they do not pile up.
+# Also quote any args containing shell meta-characters.
+ac_configure_args=
+ac_sep=
+for ac_arg
+do
+  case $ac_arg in
+  -no-create | --no-create | --no-creat | --no-crea | --no-cre \
+  | --no-cr | --no-c) ;;
+  -no-recursion | --no-recursion | --no-recursio | --no-recursi \
+  | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r) ;;
+  *" "*|*"	"*|*[\[\]\~\#\$\^\&\*\(\)\{\}\\\|\;\<\>\?\"\']*)
+    ac_arg=`echo "$ac_arg" | sed "s/'/'\\\\\\\\''/g"`
+    ac_configure_args="$ac_configure_args$ac_sep'$ac_arg'"
+    ac_sep=" " ;;
+  *) ac_configure_args="$ac_configure_args$ac_sep$ac_arg"
+     ac_sep=" " ;;
+  esac
+  # Get rid of the leading space.
+done
+
+# When interrupted or exit'd, cleanup temporary files, and complete
+# config.log.  We remove comments because anyway the quotes in there
+# would cause problems or look ugly.
+trap 'exit_status=$?
+  # Save into config.log some information that might help in debugging.
+  echo >&5
+  echo "## ----------------- ##" >&5
+  echo "## Cache variables.  ##" >&5
+  echo "## ----------------- ##" >&5
+  echo >&5
+  # The following way of writing the cache mishandles newlines in values,
+{
+  (set) 2>&1 |
+    case `(ac_space='"'"' '"'"'; set | grep ac_space) 2>&1` in
+    *ac_space=\ *)
+      sed -n \
+        "s/'"'"'/'"'"'\\\\'"'"''"'"'/g;
+    	  s/^\\([_$as_cr_alnum]*_cv_[_$as_cr_alnum]*\\)=\\(.*\\)/\\1='"'"'\\2'"'"'/p"
+      ;;
+    *)
+      sed -n \
+        "s/^\\([_$as_cr_alnum]*_cv_[_$as_cr_alnum]*\\)=\\(.*\\)/\\1=\\2/p"
+      ;;
+    esac;
+} >&5
+  sed "/^$/d" confdefs.h >conftest.log
+  if test -s conftest.log; then
+    echo >&5
+    echo "## ------------ ##" >&5
+    echo "## confdefs.h.  ##" >&5
+    echo "## ------------ ##" >&5
+    echo >&5
+    cat conftest.log >&5
+  fi
+  (echo; echo) >&5
+  test "$ac_signal" != 0 &&
+    echo "$as_me: caught signal $ac_signal" >&5
+  echo "$as_me: exit $exit_status" >&5
+  rm -rf conftest* confdefs* core core.* *.core conf$$* $ac_clean_files &&
+    exit $exit_status
+     ' 0
+for ac_signal in 1 2 13 15; do
+  trap 'ac_signal='$ac_signal'; { (exit 1); exit 1; }' $ac_signal
+done
+ac_signal=0
+
+# confdefs.h avoids OS command line length limits that DEFS can exceed.
+rm -rf conftest* confdefs.h
+# AIX cpp loses on an empty file, so make sure it contains at least a newline.
+echo >confdefs.h
+
+# Let the site file select an alternate cache file if it wants to.
+# Prefer explicitly selected file to automatically selected ones.
+if test -z "$CONFIG_SITE"; then
+  if test "x$prefix" != xNONE; then
+    CONFIG_SITE="$prefix/share/config.site $prefix/etc/config.site"
+  else
+    CONFIG_SITE="$ac_default_prefix/share/config.site $ac_default_prefix/etc/config.site"
+  fi
+fi
+for ac_site_file in $CONFIG_SITE; do
+  if test -r "$ac_site_file"; then
+    { echo "$as_me:836: loading site script $ac_site_file" >&5
+echo "$as_me: loading site script $ac_site_file" >&6;}
+    cat "$ac_site_file" >&5
+    . "$ac_site_file"
+  fi
+done
+
+if test -r "$cache_file"; then
+  # Some versions of bash will fail to source /dev/null (special
+  # files actually), so we avoid doing that.
+  if test -f "$cache_file"; then
+    { echo "$as_me:847: loading cache $cache_file" >&5
+echo "$as_me: loading cache $cache_file" >&6;}
+    case $cache_file in
+      [\\/]* | ?:[\\/]* ) . $cache_file;;
+      *)                      . ./$cache_file;;
+    esac
+  fi
+else
+  { echo "$as_me:855: creating cache $cache_file" >&5
+echo "$as_me: creating cache $cache_file" >&6;}
+  >$cache_file
+fi
+
+# Check that the precious variables saved in the cache have kept the same
+# value.
+ac_cache_corrupted=false
+for ac_var in `(set) 2>&1 |
+               sed -n 's/^ac_env_\([a-zA-Z_0-9]*\)_set=.*/\1/p'`; do
+  eval ac_old_set=\$ac_cv_env_${ac_var}_set
+  eval ac_new_set=\$ac_env_${ac_var}_set
+  eval ac_old_val="\$ac_cv_env_${ac_var}_value"
+  eval ac_new_val="\$ac_env_${ac_var}_value"
+  case $ac_old_set,$ac_new_set in
+    set,)
+      { echo "$as_me:871: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&5
+echo "$as_me: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&2;}
+      ac_cache_corrupted=: ;;
+    ,set)
+      { echo "$as_me:875: error: \`$ac_var' was not set in the previous run" >&5
+echo "$as_me: error: \`$ac_var' was not set in the previous run" >&2;}
+      ac_cache_corrupted=: ;;
+    ,);;
+    *)
+      if test "x$ac_old_val" != "x$ac_new_val"; then
+        { echo "$as_me:881: error: \`$ac_var' has changed since the previous run:" >&5
+echo "$as_me: error: \`$ac_var' has changed since the previous run:" >&2;}
+        { echo "$as_me:883:   former value:  $ac_old_val" >&5
+echo "$as_me:   former value:  $ac_old_val" >&2;}
+        { echo "$as_me:885:   current value: $ac_new_val" >&5
+echo "$as_me:   current value: $ac_new_val" >&2;}
+        ac_cache_corrupted=:
+      fi;;
+  esac
+  # Pass precious variables to config.status.  It doesn't matter if
+  # we pass some twice (in addition to the command line arguments).
+  if test "$ac_new_set" = set; then
+    case $ac_new_val in
+    *" "*|*"	"*|*[\[\]\~\#\$\^\&\*\(\)\{\}\\\|\;\<\>\?\"\']*)
+      ac_arg=$ac_var=`echo "$ac_new_val" | sed "s/'/'\\\\\\\\''/g"`
+      ac_configure_args="$ac_configure_args '$ac_arg'"
+      ;;
+    *) ac_configure_args="$ac_configure_args $ac_var=$ac_new_val"
+       ;;
+    esac
+  fi
+done
+if $ac_cache_corrupted; then
+  { echo "$as_me:904: error: changes in the environment can compromise the build" >&5
+echo "$as_me: error: changes in the environment can compromise the build" >&2;}
+  { { echo "$as_me:906: error: run \`make distclean' and/or \`rm $cache_file' and start over" >&5
+echo "$as_me: error: run \`make distclean' and/or \`rm $cache_file' and start over" >&2;}
+   { (exit 1); exit 1; }; }
+fi
+
+ac_ext=c
+ac_cpp='$CPP $CPPFLAGS'
+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ac_compiler_gnu=$ac_cv_c_compiler_gnu
+
+case `echo "testing\c"; echo 1,2,3`,`echo -n testing; echo 1,2,3` in
+  *c*,-n*) ECHO_N= ECHO_C='
+' ECHO_T='	' ;;
+  *c*,*  ) ECHO_N=-n ECHO_C= ECHO_T= ;;
+  *)      ECHO_N= ECHO_C='\c' ECHO_T= ;;
+esac
+echo "#! $SHELL" >conftest.sh
+echo  "exit 0"   >>conftest.sh
+chmod +x conftest.sh
+if { (echo "$as_me:926: PATH=\".;.\"; conftest.sh") >&5
+  (PATH=".;."; conftest.sh) 2>&5
+  ac_status=$?
+  echo "$as_me:929: \$? = $ac_status" >&5
+  (exit $ac_status); }; then
+  ac_path_separator=';'
+else
+  ac_path_separator=:
+fi
+PATH_SEPARATOR="$ac_path_separator"
+rm -f conftest.sh
+
+ac_aux_dir=
+for ac_dir in tclconfig $srcdir/tclconfig; do
+  if test -f $ac_dir/install-sh; then
+    ac_aux_dir=$ac_dir
+    ac_install_sh="$ac_aux_dir/install-sh -c"
+    break
+  elif test -f $ac_dir/install.sh; then
+    ac_aux_dir=$ac_dir
+    ac_install_sh="$ac_aux_dir/install.sh -c"
+    break
+  elif test -f $ac_dir/shtool; then
+    ac_aux_dir=$ac_dir
+    ac_install_sh="$ac_aux_dir/shtool install -c"
+    break
+  fi
+done
+if test -z "$ac_aux_dir"; then
+  { { echo "$as_me:955: error: cannot find install-sh or install.sh in tclconfig $srcdir/tclconfig" >&5
+echo "$as_me: error: cannot find install-sh or install.sh in tclconfig $srcdir/tclconfig" >&2;}
+   { (exit 1); exit 1; }; }
+fi
+ac_config_guess="$SHELL $ac_aux_dir/config.guess"
+ac_config_sub="$SHELL $ac_aux_dir/config.sub"
+ac_configure="$SHELL $ac_aux_dir/configure" # This should be Cygnus configure.
+
+CONFIGDIR=${srcdir}/tclconfig
+
+#--------------------------------------------------------------------
+# Setting our package name and version numbers.  The NODOT_VERSION is
+# required for constructing the library name on systems that don't like
+# dots in library names (Windows).  The VERSION variable is used on the
+# other systems.
+#--------------------------------------------------------------------
+
+PACKAGE=Tcldom
+
+MAJOR_VERSION=2
+MINOR_VERSION=6
+#MAJOR_VERSION=10
+#MINOR_VERSION=0
+PATCHLEVEL=
+
+VERSION=${MAJOR_VERSION}.${MINOR_VERSION}${PATCHLEVEL}
+NODOT_VERSION=${MAJOR_VERSION}${MINOR_VERSION}
+TCLDOM_VERSION=${VERSION}
+
+# This package name must be replaced statically for AC_SUBST to work
+
+# Substitute stub_LIB_FILE if your package creates a stub library too.
+
+#--------------------------------------------------------------------
+# This was placed here so that we can compile with -DVERSION="1.2" to
+# encode the package version directly into the source files.
+#--------------------------------------------------------------------
+
+eval cat >>confdefs.h <<EOF
+#define VERSION "${VERSION}"
+EOF
+
+eval cat >>confdefs.h <<EOF
+#define TCLDOM_VERSION "${TCLDOM_VERSION}"
+EOF
+
+#--------------------------------------------------------------------
+# Call TEA_INIT as the first TEA_ macro to set up initial vars.
+# This will define a ${TEA_PLATFORM} variable == "unix" or "windows".
+#--------------------------------------------------------------------
+
+    echo "$as_me:1006: checking for correct TEA configuration" >&5
+echo $ECHO_N "checking for correct TEA configuration... $ECHO_C" >&6
+    if test x"${PACKAGE}" = x ; then
+	{ { echo "$as_me:1009: error:
+The PACKAGE variable must be defined by your TEA configure.in" >&5
+echo "$as_me: error:
+The PACKAGE variable must be defined by your TEA configure.in" >&2;}
+   { (exit 1); exit 1; }; }
+    fi
+    echo "$as_me:1015: result: ok" >&5
+echo "${ECHO_T}ok" >&6
+    TEA_INITED=ok
+    case "`uname -s`" in
+	*win32*|*WIN32*|*CYGWIN_NT*|*CYGWIN_9*|*CYGWIN_ME*|*MINGW32_*)
+	    # Extract the first word of "cygpath", so it can be a program name with args.
+set dummy cygpath; ac_word=$2
+echo "$as_me:1022: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_CYGPATH+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$CYGPATH"; then
+  ac_cv_prog_CYGPATH="$CYGPATH" # Let the user override the test.
+else
+  ac_save_IFS=$IFS; IFS=$ac_path_separator
+ac_dummy="$PATH"
+for ac_dir in $ac_dummy; do
+  IFS=$ac_save_IFS
+  test -z "$ac_dir" && ac_dir=.
+  $as_executable_p "$ac_dir/$ac_word" || continue
+ac_cv_prog_CYGPATH="cygpath -w"
+echo "$as_me:1037: found $ac_dir/$ac_word" >&5
+break
+done
+
+  test -z "$ac_cv_prog_CYGPATH" && ac_cv_prog_CYGPATH="echo"
+fi
+fi
+CYGPATH=$ac_cv_prog_CYGPATH
+if test -n "$CYGPATH"; then
+  echo "$as_me:1046: result: $CYGPATH" >&5
+echo "${ECHO_T}$CYGPATH" >&6
+else
+  echo "$as_me:1049: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+
+	    EXEEXT=".exe"
+	    TEA_PLATFORM="windows"
+	    ;;
+	*)
+	    CYGPATH=echo
+	    EXEEXT=""
+	    TEA_PLATFORM="unix"
+	    ;;
+    esac
+
+    # Check if exec_prefix is set. If not use fall back to prefix
+    if test x$exec_prefix = xNONE ; then exec_prefix=$prefix ; fi
+
+#--------------------------------------------------------------------
+# Load the tclConfig.sh file
+#--------------------------------------------------------------------
+
+    if test x"${TEA_INITED}" = x ; then
+	# Can't refer to exact macro name or it will be substituted
+	{ { echo "$as_me:1072: error: Must call TEA INIT before PATH_TCLCONFIG" >&5
+echo "$as_me: error: Must call TEA INIT before PATH_TCLCONFIG" >&2;}
+   { (exit 1); exit 1; }; }
+    fi
+    #
+    # Ok, lets find the tcl configuration
+    # First, look for one uninstalled.
+    # the alternative search directory is invoked by --with-tcl
+    #
+
+    if test x"${no_tcl}" = x ; then
+	# we reset no_tcl in case something fails here
+	no_tcl=true
+
+# Check whether --with-tcl or --without-tcl was given.
+if test "${with_tcl+set}" = set; then
+  withval="$with_tcl"
+  with_tclconfig=${withval}
+fi;
+	echo "$as_me:1091: checking for Tcl configuration" >&5
+echo $ECHO_N "checking for Tcl configuration... $ECHO_C" >&6
+	if test "${ac_cv_c_tclconfig+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+
+	    # First check to see if --with-tcl was specified.
+	    if test x"${with_tclconfig}" != x ; then
+		if test -f "${with_tclconfig}/tclConfig.sh" ; then
+		    ac_cv_c_tclconfig=`(cd ${with_tclconfig}; pwd)`
+		else
+		    { { echo "$as_me:1102: error: ${with_tclconfig} directory doesn't contain tclConfig.sh" >&5
+echo "$as_me: error: ${with_tclconfig} directory doesn't contain tclConfig.sh" >&2;}
+   { (exit 1); exit 1; }; }
+		fi
+	    fi
+
+	    # then check for a private Tcl installation
+	    if test x"${ac_cv_c_tclconfig}" = x ; then
+		for i in \
+			../tcl \
+			`ls -dr ../tcl[8-9].[0-9]* 2>/dev/null` \
+			../../tcl \
+			`ls -dr ../../tcl[8-9].[0-9]* 2>/dev/null` \
+			../../../tcl \
+			`ls -dr ../../../tcl[8-9].[0-9]* 2>/dev/null` ; do
+		    if test -f "$i/unix/tclConfig.sh" ; then
+			ac_cv_c_tclconfig=`(cd $i/unix; pwd)`
+			break
+		    fi
+		done
+	    fi
+
+	    # check in a few common install locations
+	    if test x"${ac_cv_c_tclconfig}" = x ; then
+		for i in `ls -d ${exec_prefix}/lib 2>/dev/null` \
+			`ls -d ${prefix}/lib 2>/dev/null` \
+			`ls -d /usr/local/lib 2>/dev/null` \
+			`ls -d /usr/contrib/lib 2>/dev/null` \
+			`ls -d /usr/lib 2>/dev/null` \
+			; do
+		    if test -f "$i/tclConfig.sh" ; then
+			ac_cv_c_tclconfig=`(cd $i; pwd)`
+			break
+		    fi
+		done
+	    fi
+
+	    # check in a few other private locations
+	    if test x"${ac_cv_c_tclconfig}" = x ; then
+		for i in \
+			${srcdir}/../tcl \
+			`ls -dr ${srcdir}/../tcl[8-9].[0-9]* 2>/dev/null` ; do
+		    if test -f "$i/unix/tclConfig.sh" ; then
+		    ac_cv_c_tclconfig=`(cd $i/unix; pwd)`
+		    break
+		fi
+		done
+	    fi
+
+fi
+
+	if test x"${ac_cv_c_tclconfig}" = x ; then
+	    TCL_BIN_DIR="# no Tcl configs found"
+	    { echo "$as_me:1155: WARNING: \"Cannot find Tcl configuration definitions\"" >&5
+echo "$as_me: WARNING: \"Cannot find Tcl configuration definitions\"" >&2;}
+	    exit 0
+	else
+	    no_tcl=
+	    TCL_BIN_DIR=${ac_cv_c_tclconfig}
+	    echo "$as_me:1161: result: found $TCL_BIN_DIR/tclConfig.sh" >&5
+echo "${ECHO_T}found $TCL_BIN_DIR/tclConfig.sh" >&6
+	fi
+    fi
+
+    echo "$as_me:1166: checking for existence of $TCL_BIN_DIR/tclConfig.sh" >&5
+echo $ECHO_N "checking for existence of $TCL_BIN_DIR/tclConfig.sh... $ECHO_C" >&6
+
+    if test -f "$TCL_BIN_DIR/tclConfig.sh" ; then
+        echo "$as_me:1170: result: loading" >&5
+echo "${ECHO_T}loading" >&6
+	. $TCL_BIN_DIR/tclConfig.sh
+    else
+        echo "$as_me:1174: result: file not found" >&5
+echo "${ECHO_T}file not found" >&6
+    fi
+
+    #
+    # If the TCL_BIN_DIR is the build directory (not the install directory),
+    # then set the common variable name to the value of the build variables.
+    # For example, the variable TCL_LIB_SPEC will be set to the value
+    # of TCL_BUILD_LIB_SPEC. An extension should make use of TCL_LIB_SPEC
+    # instead of TCL_BUILD_LIB_SPEC since it will work with both an
+    # installed and uninstalled version of Tcl.
+    #
+
+    if test -f $TCL_BIN_DIR/Makefile ; then
+        TCL_LIB_SPEC=${TCL_BUILD_LIB_SPEC}
+        TCL_STUB_LIB_SPEC=${TCL_BUILD_STUB_LIB_SPEC}
+        TCL_STUB_LIB_PATH=${TCL_BUILD_STUB_LIB_PATH}
+    fi
+
+    #
+    # eval is required to do the TCL_DBGX substitution
+    #
+
+    eval "TCL_LIB_FILE=\"${TCL_LIB_FILE}\""
+    eval "TCL_LIB_FLAG=\"${TCL_LIB_FLAG}\""
+    eval "TCL_LIB_SPEC=\"${TCL_LIB_SPEC}\""
+
+    eval "TCL_STUB_LIB_FILE=\"${TCL_STUB_LIB_FILE}\""
+    eval "TCL_STUB_LIB_FLAG=\"${TCL_STUB_LIB_FLAG}\""
+    eval "TCL_STUB_LIB_SPEC=\"${TCL_STUB_LIB_SPEC}\""
+
+    #AC_SUBST(TCL_DBGX)
+
+    #AC_SUBST(TCL_BUILD_LIB_SPEC)
+    #AC_SUBST(TCL_BUILD_STUB_LIB_SPEC)
+
+#-----------------------------------------------------------------------
+# Handle the --prefix=... option by defaulting to what Tcl gave.
+# Must be called after TEA_LOAD_TCLCONFIG and before TEA_SETUP_COMPILER.
+#-----------------------------------------------------------------------
+
+    # Should be AC_MSG_NOTICE, but that requires autoconf 2.50
+    if test "${prefix}" = "NONE"; then
+	prefix_default=yes
+	if test x"${TCL_PREFIX}" != x; then
+	    { echo "$as_me:1219: WARNING: --prefix defaulting to TCL_PREFIX ${TCL_PREFIX}" >&5
+echo "$as_me: WARNING: --prefix defaulting to TCL_PREFIX ${TCL_PREFIX}" >&2;}
+	    prefix=${TCL_PREFIX}
+	else
+	    prefix=/usr/local
+	fi
+    fi
+    if test "${exec_prefix}" = "NONE" -a x"${prefix_default}" = x"yes" ; then
+	if test x"${TCL_EXEC_PREFIX}" != x; then
+	    { echo "$as_me:1228: WARNING: --exec-prefix defaulting to TCL_EXEC_PREFIX ${TCL_EXEC_PREFIX}" >&5
+echo "$as_me: WARNING: --exec-prefix defaulting to TCL_EXEC_PREFIX ${TCL_EXEC_PREFIX}" >&2;}
+	    exec_prefix=${TCL_EXEC_PREFIX}
+	else
+	    exec_prefix=$prefix
+	fi
+    fi
+
+#-----------------------------------------------------------------------
+# Standard compiler checks.
+# This sets up CC by using the CC env var, or looks for gcc otherwise.
+# This also calls AC_PROG_CC, AC_PROG_INSTALL and a few others to create
+# the basic setup necessary to compile executables.
+#-----------------------------------------------------------------------
+
+ac_ext=c
+ac_cpp='$CPP $CPPFLAGS'
+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ac_compiler_gnu=$ac_cv_c_compiler_gnu
+echo "$as_me:1248: checking how to run the C preprocessor" >&5
+echo $ECHO_N "checking how to run the C preprocessor... $ECHO_C" >&6
+# On Suns, sometimes $CPP names a directory.
+if test -n "$CPP" && test -d "$CPP"; then
+  CPP=
+fi
+if test -z "$CPP"; then
+  if test "${ac_cv_prog_CPP+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+      # Double quotes because CPP needs to be expanded
+    for CPP in "$CC -E" "$CC -E -traditional-cpp" "/lib/cpp"
+    do
+      ac_preproc_ok=false
+for ac_c_preproc_warn_flag in '' yes
+do
+  # Use a header file that comes with gcc, so configuring glibc
+  # with a fresh cross-compiler works.
+  # On the NeXT, cc -E runs the code through the compiler's parser,
+  # not just through cpp. "Syntax error" is here to catch this case.
+  cat >conftest.$ac_ext <<_ACEOF
+#line 1269 "configure"
+#include "confdefs.h"
+#include <assert.h>
+                     Syntax error
+_ACEOF
+if { (eval echo "$as_me:1274: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:1280: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  :
+else
+  echo "$as_me: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  # Broken: fails on valid input.
+continue
+fi
+rm -f conftest.err conftest.$ac_ext
+
+  # OK, works on sane cases.  Now check whether non-existent headers
+  # can be detected and how.
+  cat >conftest.$ac_ext <<_ACEOF
+#line 1303 "configure"
+#include "confdefs.h"
+#include <ac_nonexistent.h>
+_ACEOF
+if { (eval echo "$as_me:1307: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:1313: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  # Broken: success on invalid input.
+continue
+else
+  echo "$as_me: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  # Passes both tests.
+ac_preproc_ok=:
+break
+fi
+rm -f conftest.err conftest.$ac_ext
+
+done
+# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
+rm -f conftest.err conftest.$ac_ext
+if $ac_preproc_ok; then
+  break
+fi
+
+    done
+    ac_cv_prog_CPP=$CPP
+
+fi
+  CPP=$ac_cv_prog_CPP
+else
+  ac_cv_prog_CPP=$CPP
+fi
+echo "$as_me:1350: result: $CPP" >&5
+echo "${ECHO_T}$CPP" >&6
+ac_preproc_ok=false
+for ac_c_preproc_warn_flag in '' yes
+do
+  # Use a header file that comes with gcc, so configuring glibc
+  # with a fresh cross-compiler works.
+  # On the NeXT, cc -E runs the code through the compiler's parser,
+  # not just through cpp. "Syntax error" is here to catch this case.
+  cat >conftest.$ac_ext <<_ACEOF
+#line 1360 "configure"
+#include "confdefs.h"
+#include <assert.h>
+                     Syntax error
+_ACEOF
+if { (eval echo "$as_me:1365: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:1371: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  :
+else
+  echo "$as_me: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  # Broken: fails on valid input.
+continue
+fi
+rm -f conftest.err conftest.$ac_ext
+
+  # OK, works on sane cases.  Now check whether non-existent headers
+  # can be detected and how.
+  cat >conftest.$ac_ext <<_ACEOF
+#line 1394 "configure"
+#include "confdefs.h"
+#include <ac_nonexistent.h>
+_ACEOF
+if { (eval echo "$as_me:1398: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:1404: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  # Broken: success on invalid input.
+continue
+else
+  echo "$as_me: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  # Passes both tests.
+ac_preproc_ok=:
+break
+fi
+rm -f conftest.err conftest.$ac_ext
+
+done
+# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
+rm -f conftest.err conftest.$ac_ext
+if $ac_preproc_ok; then
+  :
+else
+  { { echo "$as_me:1432: error: C preprocessor \"$CPP\" fails sanity check" >&5
+echo "$as_me: error: C preprocessor \"$CPP\" fails sanity check" >&2;}
+   { (exit 1); exit 1; }; }
+fi
+
+ac_ext=c
+ac_cpp='$CPP $CPPFLAGS'
+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ac_compiler_gnu=$ac_cv_c_compiler_gnu
+
+    # If the user did not set CFLAGS, set it now to keep
+    # the AC_PROG_CC macro from adding "-g -O2".
+    if test "${CFLAGS+set}" != "set" ; then
+	CFLAGS=""
+    fi
+
+    ac_ext=c
+ac_cpp='$CPP $CPPFLAGS'
+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ac_compiler_gnu=$ac_cv_c_compiler_gnu
+if test -n "$ac_tool_prefix"; then
+  # Extract the first word of "${ac_tool_prefix}gcc", so it can be a program name with args.
+set dummy ${ac_tool_prefix}gcc; ac_word=$2
+echo "$as_me:1457: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_CC+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$CC"; then
+  ac_cv_prog_CC="$CC" # Let the user override the test.
+else
+  ac_save_IFS=$IFS; IFS=$ac_path_separator
+ac_dummy="$PATH"
+for ac_dir in $ac_dummy; do
+  IFS=$ac_save_IFS
+  test -z "$ac_dir" && ac_dir=.
+  $as_executable_p "$ac_dir/$ac_word" || continue
+ac_cv_prog_CC="${ac_tool_prefix}gcc"
+echo "$as_me:1472: found $ac_dir/$ac_word" >&5
+break
+done
+
+fi
+fi
+CC=$ac_cv_prog_CC
+if test -n "$CC"; then
+  echo "$as_me:1480: result: $CC" >&5
+echo "${ECHO_T}$CC" >&6
+else
+  echo "$as_me:1483: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+
+fi
+if test -z "$ac_cv_prog_CC"; then
+  ac_ct_CC=$CC
+  # Extract the first word of "gcc", so it can be a program name with args.
+set dummy gcc; ac_word=$2
+echo "$as_me:1492: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$ac_ct_CC"; then
+  ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
+else
+  ac_save_IFS=$IFS; IFS=$ac_path_separator
+ac_dummy="$PATH"
+for ac_dir in $ac_dummy; do
+  IFS=$ac_save_IFS
+  test -z "$ac_dir" && ac_dir=.
+  $as_executable_p "$ac_dir/$ac_word" || continue
+ac_cv_prog_ac_ct_CC="gcc"
+echo "$as_me:1507: found $ac_dir/$ac_word" >&5
+break
+done
+
+fi
+fi
+ac_ct_CC=$ac_cv_prog_ac_ct_CC
+if test -n "$ac_ct_CC"; then
+  echo "$as_me:1515: result: $ac_ct_CC" >&5
+echo "${ECHO_T}$ac_ct_CC" >&6
+else
+  echo "$as_me:1518: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+
+  CC=$ac_ct_CC
+else
+  CC="$ac_cv_prog_CC"
+fi
+
+if test -z "$CC"; then
+  if test -n "$ac_tool_prefix"; then
+  # Extract the first word of "${ac_tool_prefix}cc", so it can be a program name with args.
+set dummy ${ac_tool_prefix}cc; ac_word=$2
+echo "$as_me:1531: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_CC+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$CC"; then
+  ac_cv_prog_CC="$CC" # Let the user override the test.
+else
+  ac_save_IFS=$IFS; IFS=$ac_path_separator
+ac_dummy="$PATH"
+for ac_dir in $ac_dummy; do
+  IFS=$ac_save_IFS
+  test -z "$ac_dir" && ac_dir=.
+  $as_executable_p "$ac_dir/$ac_word" || continue
+ac_cv_prog_CC="${ac_tool_prefix}cc"
+echo "$as_me:1546: found $ac_dir/$ac_word" >&5
+break
+done
+
+fi
+fi
+CC=$ac_cv_prog_CC
+if test -n "$CC"; then
+  echo "$as_me:1554: result: $CC" >&5
+echo "${ECHO_T}$CC" >&6
+else
+  echo "$as_me:1557: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+
+fi
+if test -z "$ac_cv_prog_CC"; then
+  ac_ct_CC=$CC
+  # Extract the first word of "cc", so it can be a program name with args.
+set dummy cc; ac_word=$2
+echo "$as_me:1566: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$ac_ct_CC"; then
+  ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
+else
+  ac_save_IFS=$IFS; IFS=$ac_path_separator
+ac_dummy="$PATH"
+for ac_dir in $ac_dummy; do
+  IFS=$ac_save_IFS
+  test -z "$ac_dir" && ac_dir=.
+  $as_executable_p "$ac_dir/$ac_word" || continue
+ac_cv_prog_ac_ct_CC="cc"
+echo "$as_me:1581: found $ac_dir/$ac_word" >&5
+break
+done
+
+fi
+fi
+ac_ct_CC=$ac_cv_prog_ac_ct_CC
+if test -n "$ac_ct_CC"; then
+  echo "$as_me:1589: result: $ac_ct_CC" >&5
+echo "${ECHO_T}$ac_ct_CC" >&6
+else
+  echo "$as_me:1592: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+
+  CC=$ac_ct_CC
+else
+  CC="$ac_cv_prog_CC"
+fi
+
+fi
+if test -z "$CC"; then
+  # Extract the first word of "cc", so it can be a program name with args.
+set dummy cc; ac_word=$2
+echo "$as_me:1605: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_CC+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$CC"; then
+  ac_cv_prog_CC="$CC" # Let the user override the test.
+else
+  ac_prog_rejected=no
+  ac_save_IFS=$IFS; IFS=$ac_path_separator
+ac_dummy="$PATH"
+for ac_dir in $ac_dummy; do
+  IFS=$ac_save_IFS
+  test -z "$ac_dir" && ac_dir=.
+  $as_executable_p "$ac_dir/$ac_word" || continue
+if test "$ac_dir/$ac_word" = "/usr/ucb/cc"; then
+  ac_prog_rejected=yes
+  continue
+fi
+ac_cv_prog_CC="cc"
+echo "$as_me:1625: found $ac_dir/$ac_word" >&5
+break
+done
+
+if test $ac_prog_rejected = yes; then
+  # We found a bogon in the path, so make sure we never use it.
+  set dummy $ac_cv_prog_CC
+  shift
+  if test $# != 0; then
+    # We chose a different compiler from the bogus one.
+    # However, it has the same basename, so the bogon will be chosen
+    # first if we set CC to just the basename; use the full file name.
+    shift
+    set dummy "$ac_dir/$ac_word" ${1+"$@"}
+    shift
+    ac_cv_prog_CC="$@"
+  fi
+fi
+fi
+fi
+CC=$ac_cv_prog_CC
+if test -n "$CC"; then
+  echo "$as_me:1647: result: $CC" >&5
+echo "${ECHO_T}$CC" >&6
+else
+  echo "$as_me:1650: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+
+fi
+if test -z "$CC"; then
+  if test -n "$ac_tool_prefix"; then
+  for ac_prog in cl
+  do
+    # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
+set dummy $ac_tool_prefix$ac_prog; ac_word=$2
+echo "$as_me:1661: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_CC+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$CC"; then
+  ac_cv_prog_CC="$CC" # Let the user override the test.
+else
+  ac_save_IFS=$IFS; IFS=$ac_path_separator
+ac_dummy="$PATH"
+for ac_dir in $ac_dummy; do
+  IFS=$ac_save_IFS
+  test -z "$ac_dir" && ac_dir=.
+  $as_executable_p "$ac_dir/$ac_word" || continue
+ac_cv_prog_CC="$ac_tool_prefix$ac_prog"
+echo "$as_me:1676: found $ac_dir/$ac_word" >&5
+break
+done
+
+fi
+fi
+CC=$ac_cv_prog_CC
+if test -n "$CC"; then
+  echo "$as_me:1684: result: $CC" >&5
+echo "${ECHO_T}$CC" >&6
+else
+  echo "$as_me:1687: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+
+    test -n "$CC" && break
+  done
+fi
+if test -z "$CC"; then
+  ac_ct_CC=$CC
+  for ac_prog in cl
+do
+  # Extract the first word of "$ac_prog", so it can be a program name with args.
+set dummy $ac_prog; ac_word=$2
+echo "$as_me:1700: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$ac_ct_CC"; then
+  ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
+else
+  ac_save_IFS=$IFS; IFS=$ac_path_separator
+ac_dummy="$PATH"
+for ac_dir in $ac_dummy; do
+  IFS=$ac_save_IFS
+  test -z "$ac_dir" && ac_dir=.
+  $as_executable_p "$ac_dir/$ac_word" || continue
+ac_cv_prog_ac_ct_CC="$ac_prog"
+echo "$as_me:1715: found $ac_dir/$ac_word" >&5
+break
+done
+
+fi
+fi
+ac_ct_CC=$ac_cv_prog_ac_ct_CC
+if test -n "$ac_ct_CC"; then
+  echo "$as_me:1723: result: $ac_ct_CC" >&5
+echo "${ECHO_T}$ac_ct_CC" >&6
+else
+  echo "$as_me:1726: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+
+  test -n "$ac_ct_CC" && break
+done
+
+  CC=$ac_ct_CC
+fi
+
+fi
+
+test -z "$CC" && { { echo "$as_me:1738: error: no acceptable cc found in \$PATH" >&5
+echo "$as_me: error: no acceptable cc found in \$PATH" >&2;}
+   { (exit 1); exit 1; }; }
+
+# Provide some information about the compiler.
+echo "$as_me:1743:" \
+     "checking for C compiler version" >&5
+ac_compiler=`set X $ac_compile; echo $2`
+{ (eval echo "$as_me:1746: \"$ac_compiler --version </dev/null >&5\"") >&5
+  (eval $ac_compiler --version </dev/null >&5) 2>&5
+  ac_status=$?
+  echo "$as_me:1749: \$? = $ac_status" >&5
+  (exit $ac_status); }
+{ (eval echo "$as_me:1751: \"$ac_compiler -v </dev/null >&5\"") >&5
+  (eval $ac_compiler -v </dev/null >&5) 2>&5
+  ac_status=$?
+  echo "$as_me:1754: \$? = $ac_status" >&5
+  (exit $ac_status); }
+{ (eval echo "$as_me:1756: \"$ac_compiler -V </dev/null >&5\"") >&5
+  (eval $ac_compiler -V </dev/null >&5) 2>&5
+  ac_status=$?
+  echo "$as_me:1759: \$? = $ac_status" >&5
+  (exit $ac_status); }
+
+cat >conftest.$ac_ext <<_ACEOF
+#line 1763 "configure"
+#include "confdefs.h"
+
+int
+main ()
+{
+
+  ;
+  return 0;
+}
+_ACEOF
+ac_clean_files_save=$ac_clean_files
+ac_clean_files="$ac_clean_files a.out a.exe"
+# Try to create an executable without -o first, disregard a.out.
+# It will help us diagnose broken compilers, and finding out an intuition
+# of exeext.
+echo "$as_me:1779: checking for C compiler default output" >&5
+echo $ECHO_N "checking for C compiler default output... $ECHO_C" >&6
+ac_link_default=`echo "$ac_link" | sed 's/ -o *conftest[^ ]*//'`
+if { (eval echo "$as_me:1782: \"$ac_link_default\"") >&5
+  (eval $ac_link_default) 2>&5
+  ac_status=$?
+  echo "$as_me:1785: \$? = $ac_status" >&5
+  (exit $ac_status); }; then
+  # Find the output, starting from the most likely.  This scheme is
+# not robust to junk in `.', hence go to wildcards (a.*) only as a last
+# resort.
+for ac_file in `ls a.exe conftest.exe 2>/dev/null;
+                ls a.out conftest 2>/dev/null;
+                ls a.* conftest.* 2>/dev/null`; do
+  case $ac_file in
+    *.$ac_ext | *.o | *.obj | *.xcoff | *.tds | *.d | *.pdb ) ;;
+    a.out ) # We found the default executable, but exeext='' is most
+            # certainly right.
+            break;;
+    *.* ) ac_cv_exeext=`expr "$ac_file" : '[^.]*\(\..*\)'`
+          # FIXME: I believe we export ac_cv_exeext for Libtool --akim.
+          export ac_cv_exeext
+          break;;
+    * ) break;;
+  esac
+done
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+{ { echo "$as_me:1808: error: C compiler cannot create executables" >&5
+echo "$as_me: error: C compiler cannot create executables" >&2;}
+   { (exit 77); exit 77; }; }
+fi
+
+ac_exeext=$ac_cv_exeext
+echo "$as_me:1814: result: $ac_file" >&5
+echo "${ECHO_T}$ac_file" >&6
+
+# Check the compiler produces executables we can run.  If not, either
+# the compiler is broken, or we cross compile.
+echo "$as_me:1819: checking whether the C compiler works" >&5
+echo $ECHO_N "checking whether the C compiler works... $ECHO_C" >&6
+# FIXME: These cross compiler hacks should be removed for Autoconf 3.0
+# If not cross compiling, check that we can run a simple program.
+if test "$cross_compiling" != yes; then
+  if { ac_try='./$ac_file'
+  { (eval echo "$as_me:1825: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:1828: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+    cross_compiling=no
+  else
+    if test "$cross_compiling" = maybe; then
+	cross_compiling=yes
+    else
+	{ { echo "$as_me:1835: error: cannot run C compiled programs.
+If you meant to cross compile, use \`--host'." >&5
+echo "$as_me: error: cannot run C compiled programs.
+If you meant to cross compile, use \`--host'." >&2;}
+   { (exit 1); exit 1; }; }
+    fi
+  fi
+fi
+echo "$as_me:1843: result: yes" >&5
+echo "${ECHO_T}yes" >&6
+
+rm -f a.out a.exe conftest$ac_cv_exeext
+ac_clean_files=$ac_clean_files_save
+# Check the compiler produces executables we can run.  If not, either
+# the compiler is broken, or we cross compile.
+echo "$as_me:1850: checking whether we are cross compiling" >&5
+echo $ECHO_N "checking whether we are cross compiling... $ECHO_C" >&6
+echo "$as_me:1852: result: $cross_compiling" >&5
+echo "${ECHO_T}$cross_compiling" >&6
+
+EXEEXT=
+ac_exeext=$EXEEXT
+echo "$as_me:1888: checking for object suffix" >&5
+echo $ECHO_N "checking for object suffix... $ECHO_C" >&6
+if test "${ac_cv_objext+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line 1894 "configure"
+#include "confdefs.h"
+
+int
+main ()
+{
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.o conftest.obj
+if { (eval echo "$as_me:1906: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:1909: \$? = $ac_status" >&5
+  (exit $ac_status); }; then
+  for ac_file in `(ls conftest.o conftest.obj; ls conftest.*) 2>/dev/null`; do
+  case $ac_file in
+    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb ) ;;
+    *) ac_cv_objext=`expr "$ac_file" : '.*\.\(.*\)'`
+       break;;
+  esac
+done
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+{ { echo "$as_me:1921: error: cannot compute OBJEXT: cannot compile" >&5
+echo "$as_me: error: cannot compute OBJEXT: cannot compile" >&2;}
+   { (exit 1); exit 1; }; }
+fi
+
+rm -f conftest.$ac_cv_objext conftest.$ac_ext
+fi
+echo "$as_me:1928: result: $ac_cv_objext" >&5
+echo "${ECHO_T}$ac_cv_objext" >&6
+OBJEXT=$ac_cv_objext
+ac_objext=$OBJEXT
+echo "$as_me:1932: checking whether we are using the GNU C compiler" >&5
+echo $ECHO_N "checking whether we are using the GNU C compiler... $ECHO_C" >&6
+if test "${ac_cv_c_compiler_gnu+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line 1938 "configure"
+#include "confdefs.h"
+
+int
+main ()
+{
+#ifndef __GNUC__
+       choke me
+#endif
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:1953: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:1956: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:1959: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:1962: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_compiler_gnu=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_compiler_gnu=no
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+ac_cv_c_compiler_gnu=$ac_compiler_gnu
+
+fi
+echo "$as_me:1974: result: $ac_cv_c_compiler_gnu" >&5
+echo "${ECHO_T}$ac_cv_c_compiler_gnu" >&6
+GCC=`test $ac_compiler_gnu = yes && echo yes`
+ac_test_CFLAGS=${CFLAGS+set}
+ac_save_CFLAGS=$CFLAGS
+CFLAGS="-g"
+echo "$as_me:1980: checking whether $CC accepts -g" >&5
+echo $ECHO_N "checking whether $CC accepts -g... $ECHO_C" >&6
+if test "${ac_cv_prog_cc_g+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line 1986 "configure"
+#include "confdefs.h"
+
+int
+main ()
+{
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:1998: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:2001: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:2004: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:2007: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_prog_cc_g=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_prog_cc_g=no
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+fi
+echo "$as_me:2017: result: $ac_cv_prog_cc_g" >&5
+echo "${ECHO_T}$ac_cv_prog_cc_g" >&6
+if test "$ac_test_CFLAGS" = set; then
+  CFLAGS=$ac_save_CFLAGS
+elif test $ac_cv_prog_cc_g = yes; then
+  if test "$GCC" = yes; then
+    CFLAGS="-g -O2"
+  else
+    CFLAGS="-g"
+  fi
+else
+  if test "$GCC" = yes; then
+    CFLAGS="-O2"
+  else
+    CFLAGS=
+  fi
+fi
+# Some people use a C++ compiler to compile C.  Since we use `exit',
+# in C++ we need to declare it.  In case someone uses the same compiler
+# for both compiling C and C++ we need to have the C++ compiler decide
+# the declaration of exit, since it's the most demanding environment.
+cat >conftest.$ac_ext <<_ACEOF
+#ifndef __cplusplus
+  choke me
+#endif
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:2044: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:2047: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:2050: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:2053: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  for ac_declaration in \
+   ''\
+   '#include <stdlib.h>' \
+   'extern "C" void std::exit (int) throw (); using std::exit;' \
+   'extern "C" void std::exit (int); using std::exit;' \
+   'extern "C" void exit (int) throw ();' \
+   'extern "C" void exit (int);' \
+   'void exit (int);'
+do
+  cat >conftest.$ac_ext <<_ACEOF
+#line 2065 "configure"
+#include "confdefs.h"
+#include <stdlib.h>
+$ac_declaration
+int
+main ()
+{
+exit (42);
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:2078: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:2081: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:2084: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:2087: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  :
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+continue
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+  cat >conftest.$ac_ext <<_ACEOF
+#line 2097 "configure"
+#include "confdefs.h"
+$ac_declaration
+int
+main ()
+{
+exit (42);
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:2109: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:2112: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:2115: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:2118: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  break
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+done
+rm -f conftest*
+if test -n "$ac_declaration"; then
+  echo '#ifdef __cplusplus' >>confdefs.h
+  echo $ac_declaration      >>confdefs.h
+  echo '#endif'             >>confdefs.h
+fi
+
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+ac_ext=c
+ac_cpp='$CPP $CPPFLAGS'
+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ac_compiler_gnu=$ac_cv_c_compiler_gnu
+
+    #------------------------------------------------------------------------
+    # If we're using GCC, see if the compiler understands -pipe. If so, use it.
+    # It makes compiling go faster.  (This is only a performance feature.)
+    #------------------------------------------------------------------------
+
+    if test -z "$no_pipe" -a -n "$GCC"; then
+	echo "$as_me:2151: checking if the compiler understands -pipe" >&5
+echo $ECHO_N "checking if the compiler understands -pipe... $ECHO_C" >&6
+	OLDCC="$CC"
+	CC="$CC -pipe"
+	cat >conftest.$ac_ext <<_ACEOF
+#line 2156 "configure"
+#include "confdefs.h"
+
+int
+main ()
+{
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:2168: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:2171: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:2174: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:2177: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  echo "$as_me:2179: result: yes" >&5
+echo "${ECHO_T}yes" >&6
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+CC="$OLDCC"
+	    echo "$as_me:2185: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+    fi
+
+    # Find a good install program.  We prefer a C program (faster),
+# so one script is as good as another.  But avoid the broken or
+# incompatible versions:
+# SysV /etc/install, /usr/sbin/install
+# SunOS /usr/etc/install
+# IRIX /sbin/install
+# AIX /bin/install
+# AmigaOS /C/install, which installs bootblocks on floppy discs
+# AIX 4 /usr/bin/installbsd, which doesn't work without a -g flag
+# AFS /usr/afsws/bin/install, which mishandles nonexistent args
+# SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"
+# ./install, which can be erroneously created by make from ./install.sh.
+echo "$as_me:2203: checking for a BSD compatible install" >&5
+echo $ECHO_N "checking for a BSD compatible install... $ECHO_C" >&6
+if test -z "$INSTALL"; then
+if test "${ac_cv_path_install+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+    ac_save_IFS=$IFS; IFS=$ac_path_separator
+  for ac_dir in $PATH; do
+    IFS=$ac_save_IFS
+    # Account for people who put trailing slashes in PATH elements.
+    case $ac_dir/ in
+    / | ./ | .// | /cC/* \
+    | /etc/* | /usr/sbin/* | /usr/etc/* | /sbin/* | /usr/afsws/bin/* \
+    | /usr/ucb/* ) ;;
+    *)
+      # OSF1 and SCO ODT 3.0 have their own names for install.
+      # Don't use installbsd from OSF since it installs stuff as root
+      # by default.
+      for ac_prog in ginstall scoinst install; do
+        if $as_executable_p "$ac_dir/$ac_prog"; then
+	  if test $ac_prog = install &&
+            grep dspmsg "$ac_dir/$ac_prog" >/dev/null 2>&1; then
+	    # AIX install.  It has an incompatible calling convention.
+	    :
+	  elif test $ac_prog = install &&
+	    grep pwplus "$ac_dir/$ac_prog" >/dev/null 2>&1; then
+	    # program-specific install script used by HP pwplus--don't use.
+	    :
+	  else
+	    ac_cv_path_install="$ac_dir/$ac_prog -c"
+	    break 2
+	  fi
+	fi
+      done
+      ;;
+    esac
+  done
+
+fi
+  if test "${ac_cv_path_install+set}" = set; then
+    INSTALL=$ac_cv_path_install
+  else
+    # As a last resort, use the slow shell script.  We don't cache a
+    # path for INSTALL within a source directory, because that will
+    # break other packages using the cache if that directory is
+    # removed, or if the path is relative.
+    INSTALL=$ac_install_sh
+  fi
+fi
+echo "$as_me:2252: result: $INSTALL" >&5
+echo "${ECHO_T}$INSTALL" >&6
+
+# Use test -z because SunOS4 sh mishandles braces in ${var-val}.
+# It thinks the first close brace ends the variable substitution.
+test -z "$INSTALL_PROGRAM" && INSTALL_PROGRAM='${INSTALL}'
+
+test -z "$INSTALL_SCRIPT" && INSTALL_SCRIPT='${INSTALL}'
+
+test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'
+
+    #--------------------------------------------------------------------
+    # Checks to see if the make program sets the $MAKE variable.
+    #--------------------------------------------------------------------
+
+    echo "$as_me:2267: checking whether ${MAKE-make} sets \${MAKE}" >&5
+echo $ECHO_N "checking whether ${MAKE-make} sets \${MAKE}... $ECHO_C" >&6
+set dummy ${MAKE-make}; ac_make=`echo "$2" | sed 'y,./+-,__p_,'`
+if eval "test \"\${ac_cv_prog_make_${ac_make}_set+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.make <<\EOF
+all:
+	@echo 'ac_maketemp="${MAKE}"'
+EOF
+# GNU make sometimes prints "make[1]: Entering...", which would confuse us.
+eval `${MAKE-make} -f conftest.make 2>/dev/null | grep temp=`
+if test -n "$ac_maketemp"; then
+  eval ac_cv_prog_make_${ac_make}_set=yes
+else
+  eval ac_cv_prog_make_${ac_make}_set=no
+fi
+rm -f conftest.make
+fi
+if eval "test \"`echo '$ac_cv_prog_make_'${ac_make}_set`\" = yes"; then
+  echo "$as_me:2287: result: yes" >&5
+echo "${ECHO_T}yes" >&6
+  SET_MAKE=
+else
+  echo "$as_me:2291: result: no" >&5
+echo "${ECHO_T}no" >&6
+  SET_MAKE="MAKE=${MAKE-make}"
+fi
+
+    #--------------------------------------------------------------------
+    # Find ranlib
+    #--------------------------------------------------------------------
+
+    if test -n "$ac_tool_prefix"; then
+  # Extract the first word of "${ac_tool_prefix}ranlib", so it can be a program name with args.
+set dummy ${ac_tool_prefix}ranlib; ac_word=$2
+echo "$as_me:2303: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_RANLIB+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$RANLIB"; then
+  ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
+else
+  ac_save_IFS=$IFS; IFS=$ac_path_separator
+ac_dummy="$PATH"
+for ac_dir in $ac_dummy; do
+  IFS=$ac_save_IFS
+  test -z "$ac_dir" && ac_dir=.
+  $as_executable_p "$ac_dir/$ac_word" || continue
+ac_cv_prog_RANLIB="${ac_tool_prefix}ranlib"
+echo "$as_me:2318: found $ac_dir/$ac_word" >&5
+break
+done
+
+fi
+fi
+RANLIB=$ac_cv_prog_RANLIB
+if test -n "$RANLIB"; then
+  echo "$as_me:2326: result: $RANLIB" >&5
+echo "${ECHO_T}$RANLIB" >&6
+else
+  echo "$as_me:2329: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+
+fi
+if test -z "$ac_cv_prog_RANLIB"; then
+  ac_ct_RANLIB=$RANLIB
+  # Extract the first word of "ranlib", so it can be a program name with args.
+set dummy ranlib; ac_word=$2
+echo "$as_me:2338: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_ac_ct_RANLIB+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$ac_ct_RANLIB"; then
+  ac_cv_prog_ac_ct_RANLIB="$ac_ct_RANLIB" # Let the user override the test.
+else
+  ac_save_IFS=$IFS; IFS=$ac_path_separator
+ac_dummy="$PATH"
+for ac_dir in $ac_dummy; do
+  IFS=$ac_save_IFS
+  test -z "$ac_dir" && ac_dir=.
+  $as_executable_p "$ac_dir/$ac_word" || continue
+ac_cv_prog_ac_ct_RANLIB="ranlib"
+echo "$as_me:2353: found $ac_dir/$ac_word" >&5
+break
+done
+
+  test -z "$ac_cv_prog_ac_ct_RANLIB" && ac_cv_prog_ac_ct_RANLIB=":"
+fi
+fi
+ac_ct_RANLIB=$ac_cv_prog_ac_ct_RANLIB
+if test -n "$ac_ct_RANLIB"; then
+  echo "$as_me:2362: result: $ac_ct_RANLIB" >&5
+echo "${ECHO_T}$ac_ct_RANLIB" >&6
+else
+  echo "$as_me:2365: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+
+  RANLIB=$ac_ct_RANLIB
+else
+  RANLIB="$ac_cv_prog_RANLIB"
+fi
+
+    #--------------------------------------------------------------------
+    # Determines the correct binary file extension (.o, .obj, .exe etc.)
+    #--------------------------------------------------------------------
+
+    #--------------------------------------------------------------------
+    # Common compiler flag setup
+    #--------------------------------------------------------------------
+
+    echo "$as_me:2382: checking for required early compiler flags" >&5
+echo $ECHO_N "checking for required early compiler flags... $ECHO_C" >&6
+    tcl_flags=""
+
+    if test "${tcl_cv_flag__isoc99_source+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line 2390 "configure"
+#include "confdefs.h"
+#include <stdlib.h>
+int
+main ()
+{
+char *p = (char *)strtoll; char *q = (char *)strtoull;
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:2402: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:2405: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:2408: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:2411: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  tcl_cv_flag__isoc99_source=no
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+cat >conftest.$ac_ext <<_ACEOF
+#line 2418 "configure"
+#include "confdefs.h"
+#define _ISOC99_SOURCE 1
+#include <stdlib.h>
+int
+main ()
+{
+char *p = (char *)strtoll; char *q = (char *)strtoull;
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:2431: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:2434: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:2437: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:2440: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  tcl_cv_flag__isoc99_source=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+tcl_cv_flag__isoc99_source=no
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+fi
+
+    if test "x${tcl_cv_flag__isoc99_source}" = "xyes" ; then
+	cat >>confdefs.h <<\EOF
+#define _ISOC99_SOURCE 1
+EOF
+
+	tcl_flags="$tcl_flags _ISOC99_SOURCE"
+    fi
+
+    if test "${tcl_cv_flag__largefile64_source+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line 2465 "configure"
+#include "confdefs.h"
+#include <sys/stat.h>
+int
+main ()
+{
+struct stat64 buf; int i = stat64("/", &buf);
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:2477: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:2480: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:2483: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:2486: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  tcl_cv_flag__largefile64_source=no
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+cat >conftest.$ac_ext <<_ACEOF
+#line 2493 "configure"
+#include "confdefs.h"
+#define _LARGEFILE64_SOURCE 1
+#include <sys/stat.h>
+int
+main ()
+{
+struct stat64 buf; int i = stat64("/", &buf);
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:2506: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:2509: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:2512: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:2515: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  tcl_cv_flag__largefile64_source=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+tcl_cv_flag__largefile64_source=no
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+fi
+
+    if test "x${tcl_cv_flag__largefile64_source}" = "xyes" ; then
+	cat >>confdefs.h <<\EOF
+#define _LARGEFILE64_SOURCE 1
+EOF
+
+	tcl_flags="$tcl_flags _LARGEFILE64_SOURCE"
+    fi
+
+    if test "x${tcl_flags}" = "x" ; then
+	echo "$as_me:2537: result: none" >&5
+echo "${ECHO_T}none" >&6
+    else
+	echo "$as_me:2540: result: ${tcl_flags}" >&5
+echo "${ECHO_T}${tcl_flags}" >&6
+    fi
+
+    echo "$as_me:2544: checking for 64-bit integer type" >&5
+echo $ECHO_N "checking for 64-bit integer type... $ECHO_C" >&6
+    if test "${tcl_cv_type_64bit+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+
+	cat >conftest.$ac_ext <<_ACEOF
+#line 2551 "configure"
+#include "confdefs.h"
+
+int
+main ()
+{
+__int64 value = (__int64) 0;
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:2563: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:2566: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:2569: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:2572: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  tcl_cv_type_64bit=__int64
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+tcl_cv_type_64bit=none
+           if test "$cross_compiling" = yes; then
+  { { echo "$as_me:2580: error: cannot run test program while cross compiling" >&5
+echo "$as_me: error: cannot run test program while cross compiling" >&2;}
+   { (exit 1); exit 1; }; }
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line 2585 "configure"
+#include "confdefs.h"
+#include <unistd.h>
+		int main() {exit(!(sizeof(long long) > sizeof(long)));}
+
+_ACEOF
+rm -f conftest$ac_exeext
+if { (eval echo "$as_me:2592: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:2595: \$? = $ac_status" >&5
+  (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
+  { (eval echo "$as_me:2597: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:2600: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  tcl_cv_type_64bit="long long"
+else
+  echo "$as_me: program exited with status $ac_status" >&5
+echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+fi
+rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
+fi
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+fi
+
+    if test "${tcl_cv_type_64bit}" = none ; then
+	echo "$as_me:2615: result: using long" >&5
+echo "${ECHO_T}using long" >&6
+    else
+	cat >>confdefs.h <<EOF
+#define TCL_WIDE_INT_TYPE ${tcl_cv_type_64bit}
+EOF
+
+	echo "$as_me:2622: result: ${tcl_cv_type_64bit}" >&5
+echo "${ECHO_T}${tcl_cv_type_64bit}" >&6
+
+	# Now check for auxiliary declarations
+	echo "$as_me:2626: checking for struct dirent64" >&5
+echo $ECHO_N "checking for struct dirent64... $ECHO_C" >&6
+	if test "${tcl_cv_struct_dirent64+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+
+	    cat >conftest.$ac_ext <<_ACEOF
+#line 2633 "configure"
+#include "confdefs.h"
+#include <sys/types.h>
+#include <sys/dirent.h>
+int
+main ()
+{
+struct dirent64 p;
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:2646: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:2649: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:2652: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:2655: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  tcl_cv_struct_dirent64=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+tcl_cv_struct_dirent64=no
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+fi
+
+	if test "x${tcl_cv_struct_dirent64}" = "xyes" ; then
+	    cat >>confdefs.h <<\EOF
+#define HAVE_STRUCT_DIRENT64 1
+EOF
+
+	fi
+	echo "$as_me:2672: result: ${tcl_cv_struct_dirent64}" >&5
+echo "${ECHO_T}${tcl_cv_struct_dirent64}" >&6
+
+	echo "$as_me:2675: checking for struct stat64" >&5
+echo $ECHO_N "checking for struct stat64... $ECHO_C" >&6
+	if test "${tcl_cv_struct_stat64+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+
+	    cat >conftest.$ac_ext <<_ACEOF
+#line 2682 "configure"
+#include "confdefs.h"
+#include <sys/stat.h>
+int
+main ()
+{
+struct stat64 p;
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:2695: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:2698: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:2701: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:2704: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  tcl_cv_struct_stat64=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+tcl_cv_struct_stat64=no
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+fi
+
+	if test "x${tcl_cv_struct_stat64}" = "xyes" ; then
+	    cat >>confdefs.h <<\EOF
+#define HAVE_STRUCT_STAT64 1
+EOF
+
+	fi
+	echo "$as_me:2721: result: ${tcl_cv_struct_stat64}" >&5
+echo "${ECHO_T}${tcl_cv_struct_stat64}" >&6
+
+	echo "$as_me:2724: checking for off64_t" >&5
+echo $ECHO_N "checking for off64_t... $ECHO_C" >&6
+	if test "${tcl_cv_type_off64_t+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+
+	    cat >conftest.$ac_ext <<_ACEOF
+#line 2731 "configure"
+#include "confdefs.h"
+#include <sys/types.h>
+int
+main ()
+{
+off64_t offset;
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:2744: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:2747: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:2750: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:2753: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  tcl_cv_type_off64_t=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+tcl_cv_type_off64_t=no
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+fi
+
+	if test "x${tcl_cv_type_off64_t}" = "xyes" ; then
+	    cat >>confdefs.h <<\EOF
+#define HAVE_TYPE_OFF64_T 1
+EOF
+
+	fi
+	echo "$as_me:2770: result: ${tcl_cv_type_off64_t}" >&5
+echo "${ECHO_T}${tcl_cv_type_off64_t}" >&6
+    fi
+
+    #TEA_C_BIGENDIAN
+    if test "${TEA_PLATFORM}" = "unix" ; then
+
+    echo "$as_me:2777: checking dirent.h" >&5
+echo $ECHO_N "checking dirent.h... $ECHO_C" >&6
+    cat >conftest.$ac_ext <<_ACEOF
+#line 2780 "configure"
+#include "confdefs.h"
+#include <sys/types.h>
+#include <dirent.h>
+int
+main ()
+{
+
+#ifndef _POSIX_SOURCE
+#   ifdef __Lynx__
+	/*
+	 * Generate compilation error to make the test fail:  Lynx headers
+	 * are only valid if really in the POSIX environment.
+	 */
+
+	missing_procedure();
+#   endif
+#endif
+DIR *d;
+struct dirent *entryPtr;
+char *p;
+d = opendir("foobar");
+entryPtr = readdir(d);
+p = entryPtr->d_name;
+closedir(d);
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:2811: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:2814: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:2817: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:2820: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  tcl_ok=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+tcl_ok=no
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+
+    if test $tcl_ok = no; then
+	cat >>confdefs.h <<\EOF
+#define NO_DIRENT_H 1
+EOF
+
+    fi
+
+    echo "$as_me:2837: result: $tcl_ok" >&5
+echo "${ECHO_T}$tcl_ok" >&6
+    echo "$as_me:2839: checking for errno.h" >&5
+echo $ECHO_N "checking for errno.h... $ECHO_C" >&6
+if test "${ac_cv_header_errno_h+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line 2845 "configure"
+#include "confdefs.h"
+#include <errno.h>
+_ACEOF
+if { (eval echo "$as_me:2849: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:2855: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  ac_cv_header_errno_h=yes
+else
+  echo "$as_me: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  ac_cv_header_errno_h=no
+fi
+rm -f conftest.err conftest.$ac_ext
+fi
+echo "$as_me:2874: result: $ac_cv_header_errno_h" >&5
+echo "${ECHO_T}$ac_cv_header_errno_h" >&6
+if test $ac_cv_header_errno_h = yes; then
+  :
+else
+  cat >>confdefs.h <<\EOF
+#define NO_ERRNO_H 1
+EOF
+
+fi
+
+    echo "$as_me:2885: checking for float.h" >&5
+echo $ECHO_N "checking for float.h... $ECHO_C" >&6
+if test "${ac_cv_header_float_h+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line 2891 "configure"
+#include "confdefs.h"
+#include <float.h>
+_ACEOF
+if { (eval echo "$as_me:2895: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:2901: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  ac_cv_header_float_h=yes
+else
+  echo "$as_me: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  ac_cv_header_float_h=no
+fi
+rm -f conftest.err conftest.$ac_ext
+fi
+echo "$as_me:2920: result: $ac_cv_header_float_h" >&5
+echo "${ECHO_T}$ac_cv_header_float_h" >&6
+if test $ac_cv_header_float_h = yes; then
+  :
+else
+  cat >>confdefs.h <<\EOF
+#define NO_FLOAT_H 1
+EOF
+
+fi
+
+    echo "$as_me:2931: checking for values.h" >&5
+echo $ECHO_N "checking for values.h... $ECHO_C" >&6
+if test "${ac_cv_header_values_h+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line 2937 "configure"
+#include "confdefs.h"
+#include <values.h>
+_ACEOF
+if { (eval echo "$as_me:2941: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:2947: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  ac_cv_header_values_h=yes
+else
+  echo "$as_me: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  ac_cv_header_values_h=no
+fi
+rm -f conftest.err conftest.$ac_ext
+fi
+echo "$as_me:2966: result: $ac_cv_header_values_h" >&5
+echo "${ECHO_T}$ac_cv_header_values_h" >&6
+if test $ac_cv_header_values_h = yes; then
+  :
+else
+  cat >>confdefs.h <<\EOF
+#define NO_VALUES_H 1
+EOF
+
+fi
+
+    echo "$as_me:2977: checking for limits.h" >&5
+echo $ECHO_N "checking for limits.h... $ECHO_C" >&6
+if test "${ac_cv_header_limits_h+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line 2983 "configure"
+#include "confdefs.h"
+#include <limits.h>
+_ACEOF
+if { (eval echo "$as_me:2987: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:2993: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  ac_cv_header_limits_h=yes
+else
+  echo "$as_me: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  ac_cv_header_limits_h=no
+fi
+rm -f conftest.err conftest.$ac_ext
+fi
+echo "$as_me:3012: result: $ac_cv_header_limits_h" >&5
+echo "${ECHO_T}$ac_cv_header_limits_h" >&6
+if test $ac_cv_header_limits_h = yes; then
+  :
+else
+  cat >>confdefs.h <<\EOF
+#define NO_LIMITS_H 1
+EOF
+
+fi
+
+    echo "$as_me:3023: checking for stdlib.h" >&5
+echo $ECHO_N "checking for stdlib.h... $ECHO_C" >&6
+if test "${ac_cv_header_stdlib_h+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line 3029 "configure"
+#include "confdefs.h"
+#include <stdlib.h>
+_ACEOF
+if { (eval echo "$as_me:3033: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:3039: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  ac_cv_header_stdlib_h=yes
+else
+  echo "$as_me: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  ac_cv_header_stdlib_h=no
+fi
+rm -f conftest.err conftest.$ac_ext
+fi
+echo "$as_me:3058: result: $ac_cv_header_stdlib_h" >&5
+echo "${ECHO_T}$ac_cv_header_stdlib_h" >&6
+if test $ac_cv_header_stdlib_h = yes; then
+  tcl_ok=1
+else
+  tcl_ok=0
+fi
+
+    cat >conftest.$ac_ext <<_ACEOF
+#line 3067 "configure"
+#include "confdefs.h"
+#include <stdlib.h>
+
+_ACEOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  egrep "strtol" >/dev/null 2>&1; then
+  :
+else
+  tcl_ok=0
+fi
+rm -f conftest*
+
+    cat >conftest.$ac_ext <<_ACEOF
+#line 3081 "configure"
+#include "confdefs.h"
+#include <stdlib.h>
+
+_ACEOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  egrep "strtoul" >/dev/null 2>&1; then
+  :
+else
+  tcl_ok=0
+fi
+rm -f conftest*
+
+    cat >conftest.$ac_ext <<_ACEOF
+#line 3095 "configure"
+#include "confdefs.h"
+#include <stdlib.h>
+
+_ACEOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  egrep "strtod" >/dev/null 2>&1; then
+  :
+else
+  tcl_ok=0
+fi
+rm -f conftest*
+
+    if test $tcl_ok = 0; then
+	cat >>confdefs.h <<\EOF
+#define NO_STDLIB_H 1
+EOF
+
+    fi
+    echo "$as_me:3114: checking for string.h" >&5
+echo $ECHO_N "checking for string.h... $ECHO_C" >&6
+if test "${ac_cv_header_string_h+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line 3120 "configure"
+#include "confdefs.h"
+#include <string.h>
+_ACEOF
+if { (eval echo "$as_me:3124: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:3130: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  ac_cv_header_string_h=yes
+else
+  echo "$as_me: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  ac_cv_header_string_h=no
+fi
+rm -f conftest.err conftest.$ac_ext
+fi
+echo "$as_me:3149: result: $ac_cv_header_string_h" >&5
+echo "${ECHO_T}$ac_cv_header_string_h" >&6
+if test $ac_cv_header_string_h = yes; then
+  tcl_ok=1
+else
+  tcl_ok=0
+fi
+
+    cat >conftest.$ac_ext <<_ACEOF
+#line 3158 "configure"
+#include "confdefs.h"
+#include <string.h>
+
+_ACEOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  egrep "strstr" >/dev/null 2>&1; then
+  :
+else
+  tcl_ok=0
+fi
+rm -f conftest*
+
+    cat >conftest.$ac_ext <<_ACEOF
+#line 3172 "configure"
+#include "confdefs.h"
+#include <string.h>
+
+_ACEOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  egrep "strerror" >/dev/null 2>&1; then
+  :
+else
+  tcl_ok=0
+fi
+rm -f conftest*
+
+    # See also memmove check below for a place where NO_STRING_H can be
+    # set and why.
+
+    if test $tcl_ok = 0; then
+	cat >>confdefs.h <<\EOF
+#define NO_STRING_H 1
+EOF
+
+    fi
+
+    echo "$as_me:3195: checking for sys/wait.h" >&5
+echo $ECHO_N "checking for sys/wait.h... $ECHO_C" >&6
+if test "${ac_cv_header_sys_wait_h+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line 3201 "configure"
+#include "confdefs.h"
+#include <sys/wait.h>
+_ACEOF
+if { (eval echo "$as_me:3205: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:3211: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  ac_cv_header_sys_wait_h=yes
+else
+  echo "$as_me: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  ac_cv_header_sys_wait_h=no
+fi
+rm -f conftest.err conftest.$ac_ext
+fi
+echo "$as_me:3230: result: $ac_cv_header_sys_wait_h" >&5
+echo "${ECHO_T}$ac_cv_header_sys_wait_h" >&6
+if test $ac_cv_header_sys_wait_h = yes; then
+  :
+else
+  cat >>confdefs.h <<\EOF
+#define NO_SYS_WAIT_H 1
+EOF
+
+fi
+
+    echo "$as_me:3241: checking for dlfcn.h" >&5
+echo $ECHO_N "checking for dlfcn.h... $ECHO_C" >&6
+if test "${ac_cv_header_dlfcn_h+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line 3247 "configure"
+#include "confdefs.h"
+#include <dlfcn.h>
+_ACEOF
+if { (eval echo "$as_me:3251: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:3257: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  ac_cv_header_dlfcn_h=yes
+else
+  echo "$as_me: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  ac_cv_header_dlfcn_h=no
+fi
+rm -f conftest.err conftest.$ac_ext
+fi
+echo "$as_me:3276: result: $ac_cv_header_dlfcn_h" >&5
+echo "${ECHO_T}$ac_cv_header_dlfcn_h" >&6
+if test $ac_cv_header_dlfcn_h = yes; then
+  :
+else
+  cat >>confdefs.h <<\EOF
+#define NO_DLFCN_H 1
+EOF
+
+fi
+
+    # OS/390 lacks sys/param.h (and doesn't need it, by chance).
+
+for ac_header in unistd.h sys/param.h
+do
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+echo "$as_me:3292: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line 3298 "configure"
+#include "confdefs.h"
+#include <$ac_header>
+_ACEOF
+if { (eval echo "$as_me:3302: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:3308: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  eval "$as_ac_Header=yes"
+else
+  echo "$as_me: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  eval "$as_ac_Header=no"
+fi
+rm -f conftest.err conftest.$ac_ext
+fi
+echo "$as_me:3327: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
+  cat >>confdefs.h <<EOF
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+EOF
+
+fi
+done
+
+    echo "$as_me:3337: checking for strtod" >&5
+echo $ECHO_N "checking for strtod... $ECHO_C" >&6
+if test "${ac_cv_func_strtod+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line 3343 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char strtod (); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+/* We use char because int might match the return type of a gcc2
+   builtin and then its argument prototype would still apply.  */
+char strtod ();
+char (*f) ();
+
+int
+main ()
+{
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_strtod) || defined (__stub___strtod)
+choke me
+#else
+f = strtod;
+#endif
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:3374: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:3377: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:3380: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:3383: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_func_strtod=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_func_strtod=no
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+fi
+echo "$as_me:3393: result: $ac_cv_func_strtod" >&5
+echo "${ECHO_T}$ac_cv_func_strtod" >&6
+if test $ac_cv_func_strtod = yes; then
+  tcl_strtod=1
+else
+  tcl_strtod=0
+fi
+
+    if test "$tcl_strtod" = 1; then
+	echo "$as_me:3402: checking for Solaris2.4/Tru64 strtod bugs" >&5
+echo $ECHO_N "checking for Solaris2.4/Tru64 strtod bugs... $ECHO_C" >&6
+	if test "$cross_compiling" = yes; then
+  tcl_ok=0
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line 3408 "configure"
+#include "confdefs.h"
+
+	    extern double strtod();
+	    int main()
+	    {
+		char *string = "NaN", *spaceString = " ";
+		char *term;
+		double value;
+		value = strtod(string, &term);
+		if ((term != string) && (term[-1] == 0)) {
+		    exit(1);
+		}
+		value = strtod(spaceString, &term);
+		if (term == (spaceString+1)) {
+		    exit(1);
+		}
+		exit(0);
+	    }
+_ACEOF
+rm -f conftest$ac_exeext
+if { (eval echo "$as_me:3429: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:3432: \$? = $ac_status" >&5
+  (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
+  { (eval echo "$as_me:3434: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:3437: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  tcl_ok=1
+else
+  echo "$as_me: program exited with status $ac_status" >&5
+echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+tcl_ok=0
+fi
+rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
+fi
+	if test "$tcl_ok" = 1; then
+	    echo "$as_me:3449: result: ok" >&5
+echo "${ECHO_T}ok" >&6
+	else
+	    echo "$as_me:3452: result: buggy" >&5
+echo "${ECHO_T}buggy" >&6
+	    LIBOBJS="$LIBOBJS fixstrtod.o"
+	    cat >>confdefs.h <<\EOF
+#define strtod fixstrtod
+EOF
+
+	fi
+    fi
+
+    fi
+
+#--------------------------------------------------------------------
+# __CHANGE__
+# Choose which headers you need.  Extension authors should try very
+# hard to only rely on the Tcl public header files.  Internal headers
+# contain private data structures and are subject to change without
+# notice.
+# This MUST be called after TEA_LOAD_TCLCONFIG / TEA_LOAD_TKCONFIG
+#--------------------------------------------------------------------
+
+    echo "$as_me:3473: checking for Tcl public headers" >&5
+echo $ECHO_N "checking for Tcl public headers... $ECHO_C" >&6
+
+# Check whether --with-tclinclude or --without-tclinclude was given.
+if test "${with_tclinclude+set}" = set; then
+  withval="$with_tclinclude"
+  with_tclinclude=${withval}
+fi;
+
+    if test "${ac_cv_c_tclh+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+
+	# Use the value from --with-tclinclude, if it was given
+
+	if test x"${with_tclinclude}" != x ; then
+	    if test -f "${with_tclinclude}/tcl.h" ; then
+		ac_cv_c_tclh=${with_tclinclude}
+	    else
+		{ { echo "$as_me:3492: error: ${with_tclinclude} directory does not contain tcl.h" >&5
+echo "$as_me: error: ${with_tclinclude} directory does not contain tcl.h" >&2;}
+   { (exit 1); exit 1; }; }
+	    fi
+	else
+	    # Check order: pkg --prefix location, Tcl's --prefix location,
+	    # directory of tclConfig.sh, and Tcl source directory.
+	    # Looking in the source dir is not ideal, but OK.
+
+	    eval "temp_includedir=${includedir}"
+	    list="`ls -d ${temp_includedir}      2>/dev/null` \
+		`ls -d ${TCL_PREFIX}/include     2>/dev/null` \
+		`ls -d ${TCL_BIN_DIR}/../include 2>/dev/null` \
+		`ls -d ${TCL_SRC_DIR}/generic    2>/dev/null`"
+	    if test "${TEA_PLATFORM}" != "windows" -o "$GCC" = "yes"; then
+		list="$list /usr/local/include /usr/include"
+	    fi
+	    for i in $list ; do
+		if test -f "$i/tcl.h" ; then
+		    ac_cv_c_tclh=$i
+		    break
+		fi
+	    done
+	fi
+
+fi
+
+    # Print a message based on how we determined the include path
+
+    if test x"${ac_cv_c_tclh}" = x ; then
+	{ { echo "$as_me:3522: error: tcl.h not found.  Please specify its location with --with-tclinclude" >&5
+echo "$as_me: error: tcl.h not found.  Please specify its location with --with-tclinclude" >&2;}
+   { (exit 1); exit 1; }; }
+    else
+	echo "$as_me:3526: result: ${ac_cv_c_tclh}" >&5
+echo "${ECHO_T}${ac_cv_c_tclh}" >&6
+    fi
+
+    # Convert to a native path and substitute into the output files.
+
+    INCLUDE_DIR_NATIVE=`${CYGPATH} ${ac_cv_c_tclh}`
+
+    TCL_INCLUDES=-I\"${INCLUDE_DIR_NATIVE}\"
+
+#TEA_PRIVATE_TCL_HEADERS
+
+#--------------------------------------------------------------------
+# A few miscellaneous platform-specific items:
+#
+# We have to define a special symbol for Windows (BUILD_Tcldom in this
+# case) so that we create the export library with the dll.
+#
+# Windows creates a few extra files that need to be cleaned up.
+# We can add more files to clean if our extension creates any extra
+# files in the future.
+#
+# Define any extra compiler flags in the PACKAGE_CFLAGS variable.
+# These will be appended to the current set of compiler flags for
+# your system.
+#--------------------------------------------------------------------
+
+if test "${TEA_PLATFORM}" = "windows" ; then
+    cat >>confdefs.h <<\EOF
+#define BUILD_Tcldom 1
+EOF
+
+    CLEANFILES="pkgIndex.tcl *.lib *.dll *.exp *.ilk *.pdb vc*.pch"
+    EXTRA_SOURCES='$(WIN_SOURCES)'
+else
+    CLEANFILES="pkgIndex.tcl"
+    EXTRA_SOURCES='$(UNIX_SOURCES)'
+fi
+
+#--------------------------------------------------------------------
+# Check whether --enable-threads or --disable-threads was given.
+# So far only Tcl responds to this one.
+#--------------------------------------------------------------------
+
+    # Check whether --enable-threads or --disable-threads was given.
+if test "${enable_threads+set}" = set; then
+  enableval="$enable_threads"
+  tcl_ok=$enableval
+else
+  tcl_ok=
+fi;
+
+    if test "$tcl_ok" = "yes"; then
+	TCL_THREADS=1
+
+	if test "${TEA_PLATFORM}" != "windows" ; then
+	    # We are always OK on Windows, so check what this platform wants.
+	    cat >>confdefs.h <<\EOF
+#define USE_THREAD_ALLOC 1
+EOF
+
+	    cat >>confdefs.h <<\EOF
+#define _REENTRANT 1
+EOF
+
+	    cat >>confdefs.h <<\EOF
+#define _THREAD_SAFE 1
+EOF
+
+	    echo "$as_me:3595: checking for pthread_mutex_init in -lpthread" >&5
+echo $ECHO_N "checking for pthread_mutex_init in -lpthread... $ECHO_C" >&6
+if test "${ac_cv_lib_pthread_pthread_mutex_init+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  ac_check_lib_save_LIBS=$LIBS
+LIBS="-lpthread  $LIBS"
+cat >conftest.$ac_ext <<_ACEOF
+#line 3603 "configure"
+#include "confdefs.h"
+
+/* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+/* We use char because int might match the return type of a gcc2
+   builtin and then its argument prototype would still apply.  */
+char pthread_mutex_init ();
+int
+main ()
+{
+pthread_mutex_init ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:3622: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:3625: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:3628: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:3631: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_lib_pthread_pthread_mutex_init=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_lib_pthread_pthread_mutex_init=no
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:3642: result: $ac_cv_lib_pthread_pthread_mutex_init" >&5
+echo "${ECHO_T}$ac_cv_lib_pthread_pthread_mutex_init" >&6
+if test $ac_cv_lib_pthread_pthread_mutex_init = yes; then
+  tcl_ok=yes
+else
+  tcl_ok=no
+fi
+
+	    if test "$tcl_ok" = "no"; then
+		# Check a little harder for __pthread_mutex_init in the
+		# same library, as some systems hide it there until
+		# pthread.h is defined.	 We could alternatively do an
+		# AC_TRY_COMPILE with pthread.h, but that will work with
+		# libpthread really doesn't exist, like AIX 4.2.
+		# [Bug: 4359]
+		echo "$as_me:3657: checking for __pthread_mutex_init in -lpthread" >&5
+echo $ECHO_N "checking for __pthread_mutex_init in -lpthread... $ECHO_C" >&6
+if test "${ac_cv_lib_pthread___pthread_mutex_init+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  ac_check_lib_save_LIBS=$LIBS
+LIBS="-lpthread  $LIBS"
+cat >conftest.$ac_ext <<_ACEOF
+#line 3665 "configure"
+#include "confdefs.h"
+
+/* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+/* We use char because int might match the return type of a gcc2
+   builtin and then its argument prototype would still apply.  */
+char __pthread_mutex_init ();
+int
+main ()
+{
+__pthread_mutex_init ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:3684: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:3687: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:3690: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:3693: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_lib_pthread___pthread_mutex_init=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_lib_pthread___pthread_mutex_init=no
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:3704: result: $ac_cv_lib_pthread___pthread_mutex_init" >&5
+echo "${ECHO_T}$ac_cv_lib_pthread___pthread_mutex_init" >&6
+if test $ac_cv_lib_pthread___pthread_mutex_init = yes; then
+  tcl_ok=yes
+else
+  tcl_ok=no
+fi
+
+	    fi
+
+	    if test "$tcl_ok" = "yes"; then
+		# The space is needed
+		THREADS_LIBS=" -lpthread"
+	    else
+		echo "$as_me:3718: checking for pthread_mutex_init in -lpthreads" >&5
+echo $ECHO_N "checking for pthread_mutex_init in -lpthreads... $ECHO_C" >&6
+if test "${ac_cv_lib_pthreads_pthread_mutex_init+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  ac_check_lib_save_LIBS=$LIBS
+LIBS="-lpthreads  $LIBS"
+cat >conftest.$ac_ext <<_ACEOF
+#line 3726 "configure"
+#include "confdefs.h"
+
+/* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+/* We use char because int might match the return type of a gcc2
+   builtin and then its argument prototype would still apply.  */
+char pthread_mutex_init ();
+int
+main ()
+{
+pthread_mutex_init ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:3745: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:3748: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:3751: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:3754: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_lib_pthreads_pthread_mutex_init=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_lib_pthreads_pthread_mutex_init=no
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:3765: result: $ac_cv_lib_pthreads_pthread_mutex_init" >&5
+echo "${ECHO_T}$ac_cv_lib_pthreads_pthread_mutex_init" >&6
+if test $ac_cv_lib_pthreads_pthread_mutex_init = yes; then
+  tcl_ok=yes
+else
+  tcl_ok=no
+fi
+
+		if test "$tcl_ok" = "yes"; then
+		    # The space is needed
+		    THREADS_LIBS=" -lpthreads"
+		else
+		    echo "$as_me:3777: checking for pthread_mutex_init in -lc" >&5
+echo $ECHO_N "checking for pthread_mutex_init in -lc... $ECHO_C" >&6
+if test "${ac_cv_lib_c_pthread_mutex_init+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  ac_check_lib_save_LIBS=$LIBS
+LIBS="-lc  $LIBS"
+cat >conftest.$ac_ext <<_ACEOF
+#line 3785 "configure"
+#include "confdefs.h"
+
+/* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+/* We use char because int might match the return type of a gcc2
+   builtin and then its argument prototype would still apply.  */
+char pthread_mutex_init ();
+int
+main ()
+{
+pthread_mutex_init ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:3804: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:3807: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:3810: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:3813: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_lib_c_pthread_mutex_init=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_lib_c_pthread_mutex_init=no
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:3824: result: $ac_cv_lib_c_pthread_mutex_init" >&5
+echo "${ECHO_T}$ac_cv_lib_c_pthread_mutex_init" >&6
+if test $ac_cv_lib_c_pthread_mutex_init = yes; then
+  tcl_ok=yes
+else
+  tcl_ok=no
+fi
+
+		    if test "$tcl_ok" = "no"; then
+			echo "$as_me:3833: checking for pthread_mutex_init in -lc_r" >&5
+echo $ECHO_N "checking for pthread_mutex_init in -lc_r... $ECHO_C" >&6
+if test "${ac_cv_lib_c_r_pthread_mutex_init+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  ac_check_lib_save_LIBS=$LIBS
+LIBS="-lc_r  $LIBS"
+cat >conftest.$ac_ext <<_ACEOF
+#line 3841 "configure"
+#include "confdefs.h"
+
+/* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+/* We use char because int might match the return type of a gcc2
+   builtin and then its argument prototype would still apply.  */
+char pthread_mutex_init ();
+int
+main ()
+{
+pthread_mutex_init ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:3860: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:3863: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:3866: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:3869: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_lib_c_r_pthread_mutex_init=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_lib_c_r_pthread_mutex_init=no
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:3880: result: $ac_cv_lib_c_r_pthread_mutex_init" >&5
+echo "${ECHO_T}$ac_cv_lib_c_r_pthread_mutex_init" >&6
+if test $ac_cv_lib_c_r_pthread_mutex_init = yes; then
+  tcl_ok=yes
+else
+  tcl_ok=no
+fi
+
+			if test "$tcl_ok" = "yes"; then
+			    # The space is needed
+			    THREADS_LIBS=" -pthread"
+			else
+			    TCL_THREADS=0
+			    { echo "$as_me:3893: WARNING: \"Don t know how to find pthread lib on your system - thread support disabled\"" >&5
+echo "$as_me: WARNING: \"Don t know how to find pthread lib on your system - thread support disabled\"" >&2;}
+			fi
+		    fi
+		fi
+	    fi
+
+	    # Does the pthread-implementation provide
+	    # 'pthread_attr_setstacksize' ?
+
+	    ac_saved_libs=$LIBS
+	    LIBS="$LIBS $THREADS_LIBS"
+
+for ac_func in pthread_attr_setstacksize
+do
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:3909: checking for $ac_func" >&5
+echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
+if eval "test \"\${$as_ac_var+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line 3915 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func (); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+/* We use char because int might match the return type of a gcc2
+   builtin and then its argument prototype would still apply.  */
+char $ac_func ();
+char (*f) ();
+
+int
+main ()
+{
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+f = $ac_func;
+#endif
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:3946: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:3949: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:3952: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:3955: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  eval "$as_ac_var=yes"
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+eval "$as_ac_var=no"
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+fi
+echo "$as_me:3965: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
+  cat >>confdefs.h <<EOF
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
+EOF
+
+fi
+done
+
+	    LIBS=$ac_saved_libs
+
+for ac_func in readdir_r
+do
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:3980: checking for $ac_func" >&5
+echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
+if eval "test \"\${$as_ac_var+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line 3986 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func (); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+/* We use char because int might match the return type of a gcc2
+   builtin and then its argument prototype would still apply.  */
+char $ac_func ();
+char (*f) ();
+
+int
+main ()
+{
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+f = $ac_func;
+#endif
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:4017: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:4020: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:4023: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:4026: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  eval "$as_ac_var=yes"
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+eval "$as_ac_var=no"
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+fi
+echo "$as_me:4036: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
+  cat >>confdefs.h <<EOF
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
+EOF
+
+fi
+done
+
+	fi
+    else
+	TCL_THREADS=0
+    fi
+    # Do checking message here to not mess up interleaved configure output
+    echo "$as_me:4051: checking for building with threads" >&5
+echo $ECHO_N "checking for building with threads... $ECHO_C" >&6
+    if test "${TCL_THREADS}" = "1"; then
+	cat >>confdefs.h <<\EOF
+#define TCL_THREADS 1
+EOF
+
+	echo "$as_me:4058: result: yes" >&5
+echo "${ECHO_T}yes" >&6
+    else
+	echo "$as_me:4061: result: no (default)" >&5
+echo "${ECHO_T}no (default)" >&6
+    fi
+    # TCL_THREADS sanity checking.  See if our request for building with
+    # threads is the same as the way Tcl was built.  If not, warn the user.
+    case ${TCL_DEFS} in
+	*THREADS=1*)
+	    if test "${TCL_THREADS}" = "0"; then
+		{ echo "$as_me:4069: WARNING:
+    Building ${PACKAGE} without threads enabled, but building against a Tcl
+    that IS thread-enabled." >&5
+echo "$as_me: WARNING:
+    Building ${PACKAGE} without threads enabled, but building against a Tcl
+    that IS thread-enabled." >&2;}
+	    fi
+	    ;;
+	*)
+	    if test "${TCL_THREADS}" = "1"; then
+		{ echo "$as_me:4079: WARNING:
+    --enable-threads requested, but attempting building against a Tcl
+    that is NOT thread-enabled." >&5
+echo "$as_me: WARNING:
+    --enable-threads requested, but attempting building against a Tcl
+    that is NOT thread-enabled." >&2;}
+	    fi
+	    ;;
+    esac
+
+#--------------------------------------------------------------------
+# The statement below defines a collection of symbols related to
+# building as a shared library instead of a static library.
+#--------------------------------------------------------------------
+
+    echo "$as_me:4094: checking how to build libraries" >&5
+echo $ECHO_N "checking how to build libraries... $ECHO_C" >&6
+    # Check whether --enable-shared or --disable-shared was given.
+if test "${enable_shared+set}" = set; then
+  enableval="$enable_shared"
+  tcl_ok=$enableval
+else
+  tcl_ok=yes
+fi;
+
+    if test "${enable_shared+set}" = set; then
+	enableval="$enable_shared"
+	tcl_ok=$enableval
+    else
+	tcl_ok=yes
+    fi
+
+    if test "$tcl_ok" = "yes" ; then
+	echo "$as_me:4112: result: shared" >&5
+echo "${ECHO_T}shared" >&6
+	SHARED_BUILD=1
+    else
+	echo "$as_me:4116: result: static" >&5
+echo "${ECHO_T}static" >&6
+	SHARED_BUILD=0
+	cat >>confdefs.h <<\EOF
+#define STATIC_BUILD 1
+EOF
+
+    fi
+
+#--------------------------------------------------------------------
+# This macro figures out what flags to use with the compiler/linker
+# when building shared/static debug/optimized objects.  This information
+# can be taken from the tclConfig.sh file, but this figures it all out.
+#--------------------------------------------------------------------
+
+    if test x"${TEA_INITED}" = x ; then
+	# Can't refer to exact macro name or it will be substituted
+	{ { echo "$as_me:4133: error: Must call TEA INIT before CONFIG_CFLAGS" >&5
+echo "$as_me: error: Must call TEA INIT before CONFIG_CFLAGS" >&2;}
+   { (exit 1); exit 1; }; }
+    fi
+
+    # Step 0: Enable 64 bit support?
+
+    echo "$as_me:4140: checking if 64bit support is enabled" >&5
+echo $ECHO_N "checking if 64bit support is enabled... $ECHO_C" >&6
+    # Check whether --enable-64bit or --disable-64bit was given.
+if test "${enable_64bit+set}" = set; then
+  enableval="$enable_64bit"
+  do64bit=$enableval
+else
+  do64bit=no
+fi;
+    echo "$as_me:4149: result: $do64bit" >&5
+echo "${ECHO_T}$do64bit" >&6
+
+    # Step 0.b: Enable Solaris 64 bit VIS support?
+
+    echo "$as_me:4154: checking if 64bit Sparc VIS support is requested" >&5
+echo $ECHO_N "checking if 64bit Sparc VIS support is requested... $ECHO_C" >&6
+    # Check whether --enable-64bit-vis or --disable-64bit-vis was given.
+if test "${enable_64bit_vis+set}" = set; then
+  enableval="$enable_64bit_vis"
+  do64bitVIS=$enableval
+else
+  do64bitVIS=no
+fi;
+    echo "$as_me:4163: result: $do64bitVIS" >&5
+echo "${ECHO_T}$do64bitVIS" >&6
+
+    if test "$do64bitVIS" = "yes"; then
+	# Force 64bit on with VIS
+	do64bit=yes
+    fi
+
+    # Step 1: set the variable "system" to hold the name and version number
+    # for the system.  This can usually be done via the "uname" command, but
+    # there are a few systems, like Next, where this doesn't work.
+
+    echo "$as_me:4175: checking system version (for dynamic loading)" >&5
+echo $ECHO_N "checking system version (for dynamic loading)... $ECHO_C" >&6
+    if test -f /usr/lib/NextStep/software_version; then
+	system=NEXTSTEP-`awk '/3/,/3/' /usr/lib/NextStep/software_version`
+    else
+	system=`uname -s`-`uname -r`
+	if test "$?" -ne 0 ; then
+	    echo "$as_me:4182: result: unknown (can't find uname command)" >&5
+echo "${ECHO_T}unknown (can't find uname command)" >&6
+	    system=unknown
+	else
+	    # Special check for weird MP-RAS system (uname returns weird
+	    # results, and the version is kept in special file).
+
+	    if test -r /etc/.relid -a "X`uname -n`" = "X`uname -s`" ; then
+		system=MP-RAS-`awk '{print }' /etc/.relid'`
+	    fi
+	    if test "`uname -s`" = "AIX" ; then
+		system=AIX-`uname -v`.`uname -r`
+	    fi
+	    if test "${TEA_PLATFORM}" = "windows" ; then
+		system=windows
+	    fi
+	    echo "$as_me:4198: result: $system" >&5
+echo "${ECHO_T}$system" >&6
+	fi
+    fi
+
+    # Step 2: check for existence of -ldl library.  This is needed because
+    # Linux can use either -ldl or -ldld for dynamic loading.
+
+    echo "$as_me:4206: checking for dlopen in -ldl" >&5
+echo $ECHO_N "checking for dlopen in -ldl... $ECHO_C" >&6
+if test "${ac_cv_lib_dl_dlopen+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  ac_check_lib_save_LIBS=$LIBS
+LIBS="-ldl  $LIBS"
+cat >conftest.$ac_ext <<_ACEOF
+#line 4214 "configure"
+#include "confdefs.h"
+
+/* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+/* We use char because int might match the return type of a gcc2
+   builtin and then its argument prototype would still apply.  */
+char dlopen ();
+int
+main ()
+{
+dlopen ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:4233: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:4236: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:4239: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:4242: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_lib_dl_dlopen=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_lib_dl_dlopen=no
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:4253: result: $ac_cv_lib_dl_dlopen" >&5
+echo "${ECHO_T}$ac_cv_lib_dl_dlopen" >&6
+if test $ac_cv_lib_dl_dlopen = yes; then
+  have_dl=yes
+else
+  have_dl=no
+fi
+
+    # Step 3: set configuration options based on system name and version.
+
+    do64bit_ok=no
+    EXTRA_CFLAGS=""
+    TCL_EXPORT_FILE_SUFFIX=""
+    UNSHARED_LIB_SUFFIX=""
+    TCL_TRIM_DOTS='`echo ${VERSION} | tr -d .`'
+    ECHO_VERSION='`echo ${VERSION}`'
+    TCL_LIB_VERSIONS_OK=ok
+    CFLAGS_DEBUG=-g
+    CFLAGS_OPTIMIZE=-O
+    if test "$GCC" = "yes" ; then
+	CFLAGS_WARNING="-Wall -Wconversion -Wno-implicit-int"
+    else
+	CFLAGS_WARNING=""
+    fi
+    TCL_NEEDS_EXP_FILE=0
+    TCL_BUILD_EXP_FILE=""
+    TCL_EXP_FILE=""
+    # Extract the first word of "ar", so it can be a program name with args.
+set dummy ar; ac_word=$2
+echo "$as_me:4282: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_AR+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$AR"; then
+  ac_cv_prog_AR="$AR" # Let the user override the test.
+else
+  ac_save_IFS=$IFS; IFS=$ac_path_separator
+ac_dummy="$PATH"
+for ac_dir in $ac_dummy; do
+  IFS=$ac_save_IFS
+  test -z "$ac_dir" && ac_dir=.
+  $as_executable_p "$ac_dir/$ac_word" || continue
+ac_cv_prog_AR="ar"
+echo "$as_me:4297: found $ac_dir/$ac_word" >&5
+break
+done
+
+fi
+fi
+AR=$ac_cv_prog_AR
+if test -n "$AR"; then
+  echo "$as_me:4305: result: $AR" >&5
+echo "${ECHO_T}$AR" >&6
+else
+  echo "$as_me:4308: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+
+    STLIB_LD='${AR} cr'
+    case $system in
+	windows)
+	    # This is a 2-stage check to make sure we have the 64-bit SDK
+	    # We have to know where the SDK is installed.
+	    if test "$do64bit" = "yes" ; then
+		if test "x${MSSDK}x" = "xx" ; then
+		    MSSDK="C:/Progra~1/Microsoft SDK"
+		fi
+		# In order to work in the tortured autoconf environment,
+		# we need to ensure that this path has no spaces
+		MSSDK=`cygpath -w -s "$MSSDK" | sed -e 's!\\\!/!g'`
+		if test ! -d "${MSSDK}/bin/win64" ; then
+		    { echo "$as_me:4325: WARNING: \"could not find 64-bit SDK to enable 64bit mode\"" >&5
+echo "$as_me: WARNING: \"could not find 64-bit SDK to enable 64bit mode\"" >&2;}
+		    do64bit="no"
+		else
+		    do64bit_ok="yes"
+		fi
+	    fi
+
+	    if test "$GCC" != "yes" ; then
+	        if test "${SHARED_BUILD}" = "0" ; then
+		    runtime=-MT
+	        else
+		    runtime=-MD
+	        fi
+
+                if test "$do64bit" = "yes" ; then
+		    # All this magic is necessary for the Win64 SDK RC1 - hobbs
+		    export CC="${MSSDK}/Bin/Win64/cl.exe \
+	                -I${MSSDK}/Include/prerelease \
+                        -I${MSSDK}/Include/Win64/crt \
+	                -I${MSSDK}/Include"
+		    export RC="${MSSDK}/bin/rc.exe"
+		    export lflags="-MACHINE:IA64 -LIBPATH:${MSSDK}/Lib/IA64 \
+	                -LIBPATH:${MSSDK}/Lib/Prerelease/IA64"
+		    export STLIB_LD="${MSSDK}/bin/win64/lib.exe -nologo ${lflags}"
+		    export LINKBIN="${MSSDK}/bin/win64/link.exe ${lflags}"
+		    CFLAGS_DEBUG="-nologo -Zi -Od -W3 ${runtime}d"
+		    CFLAGS_OPTIMIZE="-nologo -O2 -Gs -W2 ${runtime}"
+	        else
+		    RC="rc"
+		    STLIB_LD="lib -nologo"
+    		    LINKBIN="link -link50compat"
+		    CFLAGS_DEBUG="-nologo -Z7 -Od -W3 -WX ${runtime}d"
+		    CFLAGS_OPTIMIZE="-nologo -O2 -Gs -GD -W2 ${runtime}"
+		fi
+	    fi
+
+	    if test "$GCC" = "yes"; then
+		# mingw gcc mode
+		RC="windres"
+		CFLAGS_DEBUG="-g"
+		CFLAGS_OPTIMIZE="-O2"
+		SHLIB_LD="$CC -shared"
+		UNSHARED_LIB_SUFFIX='${TCL_TRIM_DOTS}\$\{DBGX\}.a'
+		LDFLAGS_CONSOLE="-wl,--subsystem,console ${lflags}"
+		LDFLAGS_WINDOW="-wl,--subsystem,windows ${lflags}"
+	    else
+		SHLIB_LD="${LINKBIN} -dll -nologo"
+		UNSHARED_LIB_SUFFIX='${TCL_TRIM_DOTS}\$\{DBGX\}.lib'
+		EXTRA_CFLAGS="-YX"
+		# For information on what debugtype is most useful, see:
+		# http://msdn.microsoft.com/library/en-us/dnvc60/html/gendepdebug.asp
+		# This essentially turns it all on.
+		LDFLAGS_DEBUG="-debug:full -debugtype:both -warn:2"
+		LDFLAGS_OPTIMIZE="-release"
+		LDFLAGS_CONSOLE="-link -subsystem:console ${lflags}"
+		LDFLAGS_WINDOW="-link -subsystem:windows ${lflags}"
+		PATHTYPE=-w
+	    fi
+
+	    SHLIB_LD_LIBS='${LIBS}'
+	    SHLIB_SUFFIX=".dll"
+	    SHARED_LIB_SUFFIX='${TCL_TRIM_DOTS}\$\{DBGX\}.dll'
+
+	    TCL_LIB_VERSIONS_OK=nodots
+	    # Bogus to avoid getting this turned off
+	    DL_OBJS="tclLoadNone.obj"
+    	    ;;
+	AIX-*)
+	    if test "${TCL_THREADS}" = "1" -a "$GCC" != "yes" ; then
+		# AIX requires the _r compiler when gcc isn't being used
+		if test "${CC}" != "cc_r" ; then
+		    CC=${CC}_r
+		fi
+		echo "$as_me:4399: result: Using $CC for compiling with threads" >&5
+echo "${ECHO_T}Using $CC for compiling with threads" >&6
+	    fi
+	    LIBS="$LIBS -lc"
+	    SHLIB_CFLAGS=""
+	    SHLIB_SUFFIX=".so"
+	    SHLIB_LD_LIBS='${LIBS}'
+	    if test "`uname -m`" = "ia64" ; then
+		# AIX-5 uses ELF style dynamic libraries on IA-64, but not PPC
+		SHLIB_LD="/usr/ccs/bin/ld -G -z text"
+		# AIX-5 has dl* in libc.so
+		DL_LIBS=""
+		if test "$GCC" = "yes" ; then
+		    LD_SEARCH_FLAGS='-Wl,-R,${LIB_RUNTIME_DIR}'
+		else
+		    LD_SEARCH_FLAGS='-R${LIB_RUNTIME_DIR}'
+		fi
+	    else
+		SHLIB_LD="${TCL_SRC_DIR}/unix/ldAix /bin/ld -bhalt:4 -bM:SRE -bE:lib.exp -H512 -T512 -bnoentry"
+		DL_LIBS="-ldl"
+		LD_SEARCH_FLAGS='-L${LIB_RUNTIME_DIR}'
+		TCL_NEEDS_EXP_FILE=1
+		TCL_EXPORT_FILE_SUFFIX='${VERSION}\$\{DBGX\}.exp'
+	    fi
+	    DL_OBJS="tclLoadDl.o"
+	    LDFLAGS=""
+
+	    # AIX v<=4.1 has some different flags than 4.2+
+	    if test "$system" = "AIX-4.1" -o "`uname -v`" -lt "4" ; then
+		LIBOBJS="$LIBOBJS tclLoadAix.o"
+		DL_LIBS="-lld"
+	    fi
+
+	    # On AIX <=v4 systems, libbsd.a has to be linked in to support
+	    # non-blocking file IO.  This library has to be linked in after
+	    # the MATH_LIBS or it breaks the pow() function.  The way to
+	    # insure proper sequencing, is to add it to the tail of MATH_LIBS.
+	    # This library also supplies gettimeofday.
+	    #
+	    # AIX does not have a timezone field in struct tm. When the AIX
+	    # bsd library is used, the timezone global and the gettimeofday
+	    # methods are to be avoided for timezone deduction instead, we
+	    # deduce the timezone by comparing the localtime result on a
+	    # known GMT value.
+
+	    echo "$as_me:4444: checking for gettimeofday in -lbsd" >&5
+echo $ECHO_N "checking for gettimeofday in -lbsd... $ECHO_C" >&6
+if test "${ac_cv_lib_bsd_gettimeofday+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  ac_check_lib_save_LIBS=$LIBS
+LIBS="-lbsd  $LIBS"
+cat >conftest.$ac_ext <<_ACEOF
+#line 4452 "configure"
+#include "confdefs.h"
+
+/* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+/* We use char because int might match the return type of a gcc2
+   builtin and then its argument prototype would still apply.  */
+char gettimeofday ();
+int
+main ()
+{
+gettimeofday ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:4471: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:4474: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:4477: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:4480: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_lib_bsd_gettimeofday=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_lib_bsd_gettimeofday=no
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:4491: result: $ac_cv_lib_bsd_gettimeofday" >&5
+echo "${ECHO_T}$ac_cv_lib_bsd_gettimeofday" >&6
+if test $ac_cv_lib_bsd_gettimeofday = yes; then
+  libbsd=yes
+else
+  libbsd=no
+fi
+
+	    if test $libbsd = yes; then
+	    	MATH_LIBS="$MATH_LIBS -lbsd"
+	    	cat >>confdefs.h <<\EOF
+#define USE_DELTA_FOR_TZ 1
+EOF
+
+	    fi
+
+	    # Check to enable 64-bit flags for compiler/linker on AIX 4+
+	    if test "$do64bit" = "yes" -a "`uname -v`" -gt "3" ; then
+		if test "$GCC" = "yes" ; then
+		    { echo "$as_me:4510: WARNING: \"64bit mode not supported with GCC on $system\"" >&5
+echo "$as_me: WARNING: \"64bit mode not supported with GCC on $system\"" >&2;}
+		else
+		    do64bit_ok=yes
+		    EXTRA_CFLAGS="-q64"
+		    LDFLAGS="-q64"
+		    RANLIB="${RANLIB} -X64"
+		    AR="${AR} -X64"
+		    SHLIB_LDFLAGS="-b64"
+		fi
+	    fi
+	    ;;
+	BSD/OS-2.1*|BSD/OS-3*)
+	    SHLIB_CFLAGS=""
+	    SHLIB_LD="shlicc -r"
+	    SHLIB_LD_LIBS='${LIBS}'
+	    SHLIB_SUFFIX=".so"
+	    DL_OBJS="tclLoadDl.o"
+	    DL_LIBS="-ldl"
+	    LDFLAGS=""
+	    LD_SEARCH_FLAGS=""
+	    ;;
+	BSD/OS-4.*)
+	    SHLIB_CFLAGS="-export-dynamic -fPIC"
+	    SHLIB_LD="cc -shared"
+	    SHLIB_LD_LIBS='${LIBS}'
+	    SHLIB_SUFFIX=".so"
+	    DL_OBJS="tclLoadDl.o"
+	    DL_LIBS="-ldl"
+	    LDFLAGS="-export-dynamic"
+	    LD_SEARCH_FLAGS=""
+	    ;;
+	dgux*)
+	    SHLIB_CFLAGS="-K PIC"
+	    SHLIB_LD="cc -G"
+	    SHLIB_LD_LIBS=""
+	    SHLIB_SUFFIX=".so"
+	    DL_OBJS="tclLoadDl.o"
+	    DL_LIBS="-ldl"
+	    LDFLAGS=""
+	    LD_SEARCH_FLAGS=""
+	    ;;
+	HP-UX-*.11.*)
+	    # Use updated header definitions where possible
+	    cat >>confdefs.h <<\EOF
+#define _XOPEN_SOURCE_EXTENDED 1
+EOF
+
+	    SHLIB_SUFFIX=".sl"
+	    echo "$as_me:4559: checking for shl_load in -ldld" >&5
+echo $ECHO_N "checking for shl_load in -ldld... $ECHO_C" >&6
+if test "${ac_cv_lib_dld_shl_load+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  ac_check_lib_save_LIBS=$LIBS
+LIBS="-ldld  $LIBS"
+cat >conftest.$ac_ext <<_ACEOF
+#line 4567 "configure"
+#include "confdefs.h"
+
+/* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+/* We use char because int might match the return type of a gcc2
+   builtin and then its argument prototype would still apply.  */
+char shl_load ();
+int
+main ()
+{
+shl_load ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:4586: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:4589: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:4592: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:4595: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_lib_dld_shl_load=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_lib_dld_shl_load=no
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:4606: result: $ac_cv_lib_dld_shl_load" >&5
+echo "${ECHO_T}$ac_cv_lib_dld_shl_load" >&6
+if test $ac_cv_lib_dld_shl_load = yes; then
+  tcl_ok=yes
+else
+  tcl_ok=no
+fi
+
+	    if test "$tcl_ok" = yes; then
+		SHLIB_CFLAGS="+z"
+		SHLIB_LD="ld -b"
+		SHLIB_LD_LIBS='${LIBS}'
+		DL_OBJS="tclLoadShl.o"
+		DL_LIBS="-ldld"
+		LDFLAGS="-Wl,-E"
+		LD_SEARCH_FLAGS='-Wl,+s,+b,${LIB_RUNTIME_DIR}:.'
+	    fi
+
+	    # Users may want PA-RISC 1.1/2.0 portable code - needs HP cc
+	    #EXTRA_CFLAGS="+DAportable"
+
+	    # Check to enable 64-bit flags for compiler/linker
+	    if test "$do64bit" = "yes" ; then
+		if test "$GCC" = "yes" ; then
+		    hpux_arch=`${CC} -dumpmachine`
+		    case $hpux_arch in
+			hppa64*)
+			    # 64-bit gcc in use.  Fix flags for GNU ld.
+			    do64bit_ok=yes
+			    SHLIB_LD="${CC} -shared"
+			    SHLIB_LD_LIBS=""
+			    LD_SEARCH_FLAGS=''
+			    ;;
+			*)
+			    { echo "$as_me:4640: WARNING: \"64bit mode not supported with GCC on $system\"" >&5
+echo "$as_me: WARNING: \"64bit mode not supported with GCC on $system\"" >&2;}
+			    ;;
+		    esac
+		else
+		    do64bit_ok=yes
+		    if test "`uname -m`" = "ia64" ; then
+			EXTRA_CFLAGS="+DD64"
+			LDFLAGS="+DD64 $LDFLAGS"
+		    else
+			EXTRA_CFLAGS="+DA2.0W"
+			LDFLAGS="+DA2.0W $LDFLAGS"
+		    fi
+		fi
+	    fi
+	    ;;
+	HP-UX-*.08.*|HP-UX-*.09.*|HP-UX-*.10.*)
+	    SHLIB_SUFFIX=".sl"
+	    echo "$as_me:4658: checking for shl_load in -ldld" >&5
+echo $ECHO_N "checking for shl_load in -ldld... $ECHO_C" >&6
+if test "${ac_cv_lib_dld_shl_load+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  ac_check_lib_save_LIBS=$LIBS
+LIBS="-ldld  $LIBS"
+cat >conftest.$ac_ext <<_ACEOF
+#line 4666 "configure"
+#include "confdefs.h"
+
+/* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+/* We use char because int might match the return type of a gcc2
+   builtin and then its argument prototype would still apply.  */
+char shl_load ();
+int
+main ()
+{
+shl_load ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:4685: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:4688: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:4691: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:4694: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_lib_dld_shl_load=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_lib_dld_shl_load=no
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:4705: result: $ac_cv_lib_dld_shl_load" >&5
+echo "${ECHO_T}$ac_cv_lib_dld_shl_load" >&6
+if test $ac_cv_lib_dld_shl_load = yes; then
+  tcl_ok=yes
+else
+  tcl_ok=no
+fi
+
+	    if test "$tcl_ok" = yes; then
+		SHLIB_CFLAGS="+z"
+		SHLIB_LD="ld -b"
+		SHLIB_LD_LIBS=""
+		DL_OBJS="tclLoadShl.o"
+		DL_LIBS="-ldld"
+		LDFLAGS="-Wl,-E"
+		LD_SEARCH_FLAGS='-Wl,+s,+b,${LIB_RUNTIME_DIR}:.'
+	    fi
+	    ;;
+	IRIX-4.*)
+	    SHLIB_CFLAGS="-G 0"
+	    SHLIB_SUFFIX=".a"
+	    SHLIB_LD="echo tclLdAout $CC \{$SHLIB_CFLAGS\} | `pwd`/tclsh -r -G 0"
+	    SHLIB_LD_LIBS='${LIBS}'
+	    DL_OBJS="tclLoadAout.o"
+	    DL_LIBS=""
+	    LDFLAGS="-Wl,-D,08000000"
+	    LD_SEARCH_FLAGS='-L${LIB_RUNTIME_DIR}'
+	    SHARED_LIB_SUFFIX='${VERSION}\$\{DBGX\}.a'
+	    ;;
+	IRIX-5.*)
+	    SHLIB_CFLAGS=""
+	    SHLIB_LD="ld -shared -rdata_shared"
+	    SHLIB_LD_LIBS='${LIBS}'
+	    SHLIB_SUFFIX=".so"
+	    DL_OBJS="tclLoadDl.o"
+	    DL_LIBS=""
+	    LD_SEARCH_FLAGS='-Wl,-rpath,${LIB_RUNTIME_DIR}'
+	    EXTRA_CFLAGS=""
+	    LDFLAGS=""
+	    ;;
+	IRIX-6.*|IRIX64-6.5*)
+	    SHLIB_CFLAGS=""
+	    SHLIB_LD="ld -n32 -shared -rdata_shared"
+	    SHLIB_LD_LIBS='${LIBS}'
+	    SHLIB_SUFFIX=".so"
+	    DL_OBJS="tclLoadDl.o"
+	    DL_LIBS=""
+	    LD_SEARCH_FLAGS='-Wl,-rpath,${LIB_RUNTIME_DIR}'
+	    if test "$GCC" = "yes" ; then
+		EXTRA_CFLAGS="-mabi=n32"
+		LDFLAGS="-mabi=n32"
+	    else
+		case $system in
+		    IRIX-6.3)
+			# Use to build 6.2 compatible binaries on 6.3.
+			EXTRA_CFLAGS="-n32 -D_OLD_TERMIOS"
+			;;
+		    *)
+			EXTRA_CFLAGS="-n32"
+			;;
+		esac
+		LDFLAGS="-n32"
+	    fi
+	    ;;
+	IRIX64-6.*)
+	    SHLIB_CFLAGS=""
+	    SHLIB_LD="ld -n32 -shared -rdata_shared"
+	    SHLIB_LD_LIBS='${LIBS}'
+	    SHLIB_SUFFIX=".so"
+	    DL_OBJS="tclLoadDl.o"
+	    DL_LIBS=""
+	    LDFLAGS=""
+	    LD_SEARCH_FLAGS='-Wl,-rpath,${LIB_RUNTIME_DIR}'
+
+	    # Check to enable 64-bit flags for compiler/linker
+
+	    if test "$do64bit" = "yes" ; then
+	        if test "$GCC" = "yes" ; then
+	            { echo "$as_me:4783: WARNING: 64bit mode not supported by gcc" >&5
+echo "$as_me: WARNING: 64bit mode not supported by gcc" >&2;}
+	        else
+	            do64bit_ok=yes
+	            SHLIB_LD="ld -64 -shared -rdata_shared"
+	            EXTRA_CFLAGS="-64"
+	            LDFLAGS="-64"
+	        fi
+	    fi
+	    ;;
+	Linux*)
+	    SHLIB_CFLAGS="-fPIC"
+	    SHLIB_LD_LIBS='${LIBS}'
+	    SHLIB_SUFFIX=".so"
+
+	    # egcs-2.91.66 on Redhat Linux 6.0 generates lots of warnings
+	    # when you inline the string and math operations.  Turn this off to
+	    # get rid of the warnings.
+
+	    CFLAGS_OPTIMIZE="${CFLAGS_OPTIMIZE} -D__NO_STRING_INLINES -D__NO_MATH_INLINES"
+
+	    if test "$have_dl" = yes; then
+		SHLIB_LD="${CC} -shared"
+		DL_OBJS="tclLoadDl.o"
+		DL_LIBS="-ldl"
+		LDFLAGS="-rdynamic"
+		LD_SEARCH_FLAGS='-Wl,-rpath,${LIB_RUNTIME_DIR}'
+	    else
+		echo "$as_me:4811: checking for dld.h" >&5
+echo $ECHO_N "checking for dld.h... $ECHO_C" >&6
+if test "${ac_cv_header_dld_h+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line 4817 "configure"
+#include "confdefs.h"
+#include <dld.h>
+_ACEOF
+if { (eval echo "$as_me:4821: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:4827: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  ac_cv_header_dld_h=yes
+else
+  echo "$as_me: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  ac_cv_header_dld_h=no
+fi
+rm -f conftest.err conftest.$ac_ext
+fi
+echo "$as_me:4846: result: $ac_cv_header_dld_h" >&5
+echo "${ECHO_T}$ac_cv_header_dld_h" >&6
+if test $ac_cv_header_dld_h = yes; then
+
+		    SHLIB_LD="ld -shared"
+		    DL_OBJS="tclLoadDld.o"
+		    DL_LIBS="-ldld"
+		    LDFLAGS=""
+		    LD_SEARCH_FLAGS=""
+fi
+
+	    fi
+	    if test "`uname -m`" = "alpha" ; then
+		EXTRA_CFLAGS="-mieee"
+	    fi
+
+	    # The combo of gcc + glibc has a bug related
+	    # to inlining of functions like strtod(). The
+	    # -fno-builtin flag should address this problem
+	    # but it does not work. The -fno-inline flag
+	    # is kind of overkill but it works.
+	    # Disable inlining only when one of the
+	    # files in compat/*.c is being linked in.
+	    if test x"${LIBOBJS}" != x ; then
+	        EXTRA_CFLAGS="${EXTRA_CFLAGS} -fno-inline"
+	    fi
+
+	    ;;
+	GNU*)
+	    SHLIB_CFLAGS="-fPIC"
+	    SHLIB_LD_LIBS='${LIBS}'
+	    SHLIB_SUFFIX=".so"
+
+	    if test "$have_dl" = yes; then
+		SHLIB_LD="${CC} -shared"
+		DL_OBJS=""
+		DL_LIBS="-ldl"
+		LDFLAGS="-rdynamic"
+		LD_SEARCH_FLAGS=""
+	    else
+		echo "$as_me:4886: checking for dld.h" >&5
+echo $ECHO_N "checking for dld.h... $ECHO_C" >&6
+if test "${ac_cv_header_dld_h+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line 4892 "configure"
+#include "confdefs.h"
+#include <dld.h>
+_ACEOF
+if { (eval echo "$as_me:4896: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:4902: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  ac_cv_header_dld_h=yes
+else
+  echo "$as_me: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  ac_cv_header_dld_h=no
+fi
+rm -f conftest.err conftest.$ac_ext
+fi
+echo "$as_me:4921: result: $ac_cv_header_dld_h" >&5
+echo "${ECHO_T}$ac_cv_header_dld_h" >&6
+if test $ac_cv_header_dld_h = yes; then
+
+		    SHLIB_LD="ld -shared"
+		    DL_OBJS=""
+		    DL_LIBS="-ldld"
+		    LDFLAGS=""
+		    LD_SEARCH_FLAGS=""
+fi
+
+	    fi
+	    if test "`uname -m`" = "alpha" ; then
+		EXTRA_CFLAGS="-mieee"
+	    fi
+	    ;;
+	MP-RAS-02*)
+	    SHLIB_CFLAGS="-K PIC"
+	    SHLIB_LD="cc -G"
+	    SHLIB_LD_LIBS=""
+	    SHLIB_SUFFIX=".so"
+	    DL_OBJS="tclLoadDl.o"
+	    DL_LIBS="-ldl"
+	    LDFLAGS=""
+	    LD_SEARCH_FLAGS=""
+	    ;;
+	MP-RAS-*)
+	    SHLIB_CFLAGS="-K PIC"
+	    SHLIB_LD="cc -G"
+	    SHLIB_LD_LIBS=""
+	    SHLIB_SUFFIX=".so"
+	    DL_OBJS="tclLoadDl.o"
+	    DL_LIBS="-ldl"
+	    LDFLAGS="-Wl,-Bexport"
+	    LD_SEARCH_FLAGS=""
+	    ;;
+	NetBSD-*|FreeBSD-[1-2].*|OpenBSD-*)
+	    # Not available on all versions:  check for include file.
+	    echo "$as_me:4959: checking for dlfcn.h" >&5
+echo $ECHO_N "checking for dlfcn.h... $ECHO_C" >&6
+if test "${ac_cv_header_dlfcn_h+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line 4965 "configure"
+#include "confdefs.h"
+#include <dlfcn.h>
+_ACEOF
+if { (eval echo "$as_me:4969: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:4975: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  ac_cv_header_dlfcn_h=yes
+else
+  echo "$as_me: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  ac_cv_header_dlfcn_h=no
+fi
+rm -f conftest.err conftest.$ac_ext
+fi
+echo "$as_me:4994: result: $ac_cv_header_dlfcn_h" >&5
+echo "${ECHO_T}$ac_cv_header_dlfcn_h" >&6
+if test $ac_cv_header_dlfcn_h = yes; then
+
+		# NetBSD/SPARC needs -fPIC, -fpic will not do.
+		SHLIB_CFLAGS="-fPIC"
+		SHLIB_LD="ld -Bshareable -x"
+		SHLIB_LD_LIBS=""
+		SHLIB_SUFFIX=".so"
+		DL_OBJS="tclLoadDl.o"
+		DL_LIBS=""
+		LDFLAGS=""
+		LD_SEARCH_FLAGS='-Wl,-rpath,${LIB_RUNTIME_DIR}'
+		echo "$as_me:5007: checking for ELF" >&5
+echo $ECHO_N "checking for ELF... $ECHO_C" >&6
+		cat >conftest.$ac_ext <<_ACEOF
+#line 5010 "configure"
+#include "confdefs.h"
+
+#ifdef __ELF__
+	yes
+#endif
+
+_ACEOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  egrep "yes" >/dev/null 2>&1; then
+  echo "$as_me:5020: result: yes" >&5
+echo "${ECHO_T}yes" >&6
+		    SHARED_LIB_SUFFIX='${TCL_TRIM_DOTS}\$\{DBGX\}.so'
+else
+  echo "$as_me:5024: result: no" >&5
+echo "${ECHO_T}no" >&6
+		    SHARED_LIB_SUFFIX='${TCL_TRIM_DOTS}\$\{DBGX\}.so.1.0'
+
+fi
+rm -f conftest*
+
+else
+
+		SHLIB_CFLAGS=""
+		SHLIB_LD="echo tclLdAout $CC \{$SHLIB_CFLAGS\} | `pwd`/tclsh -r"
+		SHLIB_LD_LIBS='${LIBS}'
+		SHLIB_SUFFIX=".a"
+		DL_OBJS="tclLoadAout.o"
+		DL_LIBS=""
+		LDFLAGS=""
+		LD_SEARCH_FLAGS='-L${LIB_RUNTIME_DIR}'
+		SHARED_LIB_SUFFIX='${TCL_TRIM_DOTS}\$\{DBGX\}.a'
+
+fi
+
+	    # FreeBSD doesn't handle version numbers with dots.
+
+	    UNSHARED_LIB_SUFFIX='${TCL_TRIM_DOTS}\$\{DBGX\}.a'
+	    TCL_LIB_VERSIONS_OK=nodots
+	    ;;
+	FreeBSD-*)
+	    # FreeBSD 3.* and greater have ELF.
+	    SHLIB_CFLAGS="-fPIC"
+	    SHLIB_LD="ld -Bshareable -x"
+	    SHLIB_LD_LIBS='${LIBS}'
+	    SHLIB_SUFFIX=".so"
+	    DL_OBJS="tclLoadDl.o"
+	    DL_LIBS=""
+	    LDFLAGS="-export-dynamic"
+	    LD_SEARCH_FLAGS='-Wl,-rpath,${LIB_RUNTIME_DIR}'
+	    if test "${TCL_THREADS}" = "1" ; then
+		# The -pthread needs to go in the CFLAGS, not LIBS
+		LIBS=`echo $LIBS | sed s/-pthread//`
+		EXTRA_CFLAGS="-pthread"
+	    	LDFLAGS="$LDFLAGS -pthread"
+	    fi
+	    case $system in
+	    FreeBSD-3.*)
+	    	# FreeBSD-3 doesn't handle version numbers with dots.
+	    	UNSHARED_LIB_SUFFIX='${TCL_TRIM_DOTS}\$\{DBGX\}.a'
+	    	SHARED_LIB_SUFFIX='${TCL_TRIM_DOTS}\$\{DBGX\}.so'
+	    	TCL_LIB_VERSIONS_OK=nodots
+		;;
+	    esac
+	    ;;
+	Rhapsody-*|Darwin-*)
+	    SHLIB_CFLAGS="-fno-common"
+	    SHLIB_LD="cc -dynamiclib \${LDFLAGS}"
+	    TCL_SHLIB_LD_EXTRAS="-compatibility_version ${TCL_MAJOR_VERSION} -current_version \${VERSION} -install_name \${LIB_RUNTIME_DIR}/\${TCL_LIB_FILE} -prebind -seg1addr 0xa000000"
+	    SHLIB_LD_LIBS='${LIBS}'
+	    SHLIB_SUFFIX=".dylib"
+	    DL_OBJS="tclLoadDyld.o"
+	    DL_LIBS=""
+	    LDFLAGS="-prebind"
+	    LD_SEARCH_FLAGS=""
+	    CFLAGS_OPTIMIZE="-O3"
+	    EXTRA_CFLAGS="-arch ppc -pipe"
+	    ;;
+	NEXTSTEP-*)
+	    SHLIB_CFLAGS=""
+	    SHLIB_LD="cc -nostdlib -r"
+	    SHLIB_LD_LIBS=""
+	    SHLIB_SUFFIX=".so"
+	    DL_OBJS="tclLoadNext.o"
+	    DL_LIBS=""
+	    LDFLAGS=""
+	    LD_SEARCH_FLAGS=""
+	    ;;
+	OS/390-*)
+	    CFLAGS_OPTIMIZE=""      # Optimizer is buggy
+	    cat >>confdefs.h <<\EOF
+#define _OE_SOCKETS 1
+EOF
+  # needed in sys/socket.h
+	    ;;
+	OSF1-1.0|OSF1-1.1|OSF1-1.2)
+	    # OSF/1 1.[012] from OSF, and derivatives, including Paragon OSF/1
+	    SHLIB_CFLAGS=""
+	    # Hack: make package name same as library name
+	    SHLIB_LD='ld -R -export :'
+	    SHLIB_LD_LIBS=""
+	    SHLIB_SUFFIX=".so"
+	    DL_OBJS="tclLoadOSF.o"
+	    DL_LIBS=""
+	    LDFLAGS=""
+	    LD_SEARCH_FLAGS=""
+	    ;;
+	OSF1-1.*)
+	    # OSF/1 1.3 from OSF using ELF, and derivatives, including AD2
+	    SHLIB_CFLAGS="-fPIC"
+	    if test "$SHARED_BUILD" = "1" ; then
+	        SHLIB_LD="ld -shared"
+	    else
+	        SHLIB_LD="ld -non_shared"
+	    fi
+	    SHLIB_LD_LIBS=""
+	    SHLIB_SUFFIX=".so"
+	    DL_OBJS="tclLoadDl.o"
+	    DL_LIBS=""
+	    LDFLAGS=""
+	    LD_SEARCH_FLAGS=""
+	    ;;
+	OSF1-V*)
+	    # Digital OSF/1
+	    SHLIB_CFLAGS=""
+	    if test "$SHARED_BUILD" = "1" ; then
+	        SHLIB_LD='ld -shared -expect_unresolved "*"'
+	    else
+	        SHLIB_LD='ld -non_shared -expect_unresolved "*"'
+	    fi
+	    SHLIB_LD_LIBS=""
+	    SHLIB_SUFFIX=".so"
+	    DL_OBJS="tclLoadDl.o"
+	    DL_LIBS=""
+	    LDFLAGS=""
+	    LD_SEARCH_FLAGS='-rpath ${LIB_RUNTIME_DIR}'
+	    if test "$GCC" != "yes" ; then
+		EXTRA_CFLAGS="-DHAVE_TZSET -std1"
+	    fi
+	    # see pthread_intro(3) for pthread support on osf1, k.furukawa
+	    if test "${TCL_THREADS}" = "1" ; then
+		EXTRA_CFLAGS="${EXTRA_CFLAGS} -DHAVE_PTHREAD_ATTR_SETSTACKSIZE"
+		EXTRA_CFLAGS="${EXTRA_CFLAGS} -DTCL_THREAD_STACK_MIN=PTHREAD_STACK_MIN*64"
+		LIBS=`echo $LIBS | sed s/-lpthreads//`
+		if test "$GCC" = "yes" ; then
+		    LIBS="$LIBS -lpthread -lmach -lexc"
+		else
+		    EXTRA_CFLAGS="${EXTRA_CFLAGS} -pthread"
+		    LDFLAGS="-pthread"
+		fi
+	    fi
+
+	    ;;
+	QNX-6*)
+	    # QNX RTP
+	    # This may work for all QNX, but it was only reported for v6.
+	    SHLIB_CFLAGS="-fPIC"
+	    SHLIB_LD="ld -Bshareable -x"
+	    SHLIB_LD_LIBS=""
+	    SHLIB_SUFFIX=".so"
+	    DL_OBJS="tclLoadDl.o"
+	    # dlopen is in -lc on QNX
+	    DL_LIBS=""
+	    LDFLAGS=""
+	    LD_SEARCH_FLAGS=""
+	    ;;
+	RISCos-*)
+	    SHLIB_CFLAGS="-G 0"
+	    SHLIB_LD="echo tclLdAout $CC \{$SHLIB_CFLAGS\} | `pwd`/tclsh -r -G 0"
+	    SHLIB_LD_LIBS='${LIBS}'
+	    SHLIB_SUFFIX=".a"
+	    DL_OBJS="tclLoadAout.o"
+	    DL_LIBS=""
+	    LDFLAGS="-Wl,-D,08000000"
+	    LD_SEARCH_FLAGS='-L${LIB_RUNTIME_DIR}'
+	    ;;
+	SCO_SV-3.2*)
+	    # Note, dlopen is available only on SCO 3.2.5 and greater. However,
+	    # this test works, since "uname -s" was non-standard in 3.2.4 and
+	    # below.
+	    if test "$GCC" = "yes" ; then
+	    	SHLIB_CFLAGS="-fPIC -melf"
+	    	LDFLAGS="-melf -Wl,-Bexport"
+	    else
+	    	SHLIB_CFLAGS="-Kpic -belf"
+	    	LDFLAGS="-belf -Wl,-Bexport"
+	    fi
+	    SHLIB_LD="ld -G"
+	    SHLIB_LD_LIBS=""
+	    SHLIB_SUFFIX=".so"
+	    DL_OBJS="tclLoadDl.o"
+	    DL_LIBS=""
+	    LD_SEARCH_FLAGS=""
+	    ;;
+	SINIX*5.4*)
+	    SHLIB_CFLAGS="-K PIC"
+	    SHLIB_LD="cc -G"
+	    SHLIB_LD_LIBS=""
+	    SHLIB_SUFFIX=".so"
+	    DL_OBJS="tclLoadDl.o"
+	    DL_LIBS="-ldl"
+	    LDFLAGS=""
+	    LD_SEARCH_FLAGS=""
+	    ;;
+	SunOS-4*)
+	    SHLIB_CFLAGS="-PIC"
+	    SHLIB_LD="ld"
+	    SHLIB_LD_LIBS=""
+	    SHLIB_SUFFIX=".so"
+	    DL_OBJS="tclLoadDl.o"
+	    DL_LIBS="-ldl"
+	    LDFLAGS=""
+	    LD_SEARCH_FLAGS='-L${LIB_RUNTIME_DIR}'
+
+	    # SunOS can't handle version numbers with dots in them in library
+	    # specs, like -ltcl7.5, so use -ltcl75 instead.  Also, it
+	    # requires an extra version number at the end of .so file names.
+	    # So, the library has to have a name like libtcl75.so.1.0
+
+	    SHARED_LIB_SUFFIX='${TCL_TRIM_DOTS}\$\{DBGX\}.so.1.0'
+	    UNSHARED_LIB_SUFFIX='${TCL_TRIM_DOTS}\$\{DBGX\}.a'
+	    TCL_LIB_VERSIONS_OK=nodots
+	    ;;
+	SunOS-5.[0-6]*)
+
+	    # Note: If _REENTRANT isn't defined, then Solaris
+	    # won't define thread-safe library routines.
+
+	    cat >>confdefs.h <<\EOF
+#define _REENTRANT 1
+EOF
+
+	    cat >>confdefs.h <<\EOF
+#define _POSIX_PTHREAD_SEMANTICS 1
+EOF
+
+	    SHLIB_CFLAGS="-KPIC"
+
+	    # Note: need the LIBS below, otherwise Tk won't find Tcl's
+	    # symbols when dynamically loaded into tclsh.
+
+	    SHLIB_LD_LIBS='${LIBS}'
+	    SHLIB_SUFFIX=".so"
+	    DL_OBJS="tclLoadDl.o"
+	    DL_LIBS="-ldl"
+	    LDFLAGS=""
+	    if test "$GCC" = "yes" ; then
+		SHLIB_LD="$CC -shared"
+		LD_SEARCH_FLAGS='-Wl,-R,${LIB_RUNTIME_DIR}'
+	    else
+		SHLIB_LD="/usr/ccs/bin/ld -G -z text"
+		LD_SEARCH_FLAGS='-R ${LIB_RUNTIME_DIR}'
+	    fi
+	    ;;
+	SunOS-5*)
+
+	    # Note: If _REENTRANT isn't defined, then Solaris
+	    # won't define thread-safe library routines.
+
+	    cat >>confdefs.h <<\EOF
+#define _REENTRANT 1
+EOF
+
+	    cat >>confdefs.h <<\EOF
+#define _POSIX_PTHREAD_SEMANTICS 1
+EOF
+
+	    SHLIB_CFLAGS="-KPIC"
+	    LDFLAGS=""
+
+	    # Check to enable 64-bit flags for compiler/linker
+	    if test "$do64bit" = "yes" ; then
+		arch=`isainfo`
+		if test "$arch" = "sparcv9 sparc" ; then
+			if test "$GCC" = "yes" ; then
+			    { echo "$as_me:5285: WARNING: \"64bit mode not supported with GCC on $system\"" >&5
+echo "$as_me: WARNING: \"64bit mode not supported with GCC on $system\"" >&2;}
+			else
+			    do64bit_ok=yes
+			    if test "$do64bitVIS" = "yes" ; then
+				EXTRA_CFLAGS="-xarch=v9a"
+			    	LDFLAGS="-xarch=v9a"
+			    else
+				EXTRA_CFLAGS="-xarch=v9"
+			    	LDFLAGS="-xarch=v9"
+			    fi
+			fi
+		else
+		    { echo "$as_me:5298: WARNING: \"64bit mode only supported sparcv9 system\"" >&5
+echo "$as_me: WARNING: \"64bit mode only supported sparcv9 system\"" >&2;}
+		fi
+	    fi
+
+	    # Note: need the LIBS below, otherwise Tk won't find Tcl's
+	    # symbols when dynamically loaded into tclsh.
+
+	    SHLIB_LD_LIBS='${LIBS}'
+	    SHLIB_SUFFIX=".so"
+	    DL_OBJS="tclLoadDl.o"
+	    DL_LIBS="-ldl"
+	    if test "$GCC" = "yes" ; then
+		SHLIB_LD="$CC -shared"
+		LD_SEARCH_FLAGS='-Wl,-R,${LIB_RUNTIME_DIR}'
+	    else
+		SHLIB_LD="/usr/ccs/bin/ld -G -z text"
+		LD_SEARCH_FLAGS='-R ${LIB_RUNTIME_DIR}'
+	    fi
+	    ;;
+	ULTRIX-4.*)
+	    SHLIB_CFLAGS="-G 0"
+	    SHLIB_SUFFIX=".a"
+	    SHLIB_LD="echo tclLdAout $CC \{$SHLIB_CFLAGS\} | `pwd`/tclsh -r -G 0"
+	    SHLIB_LD_LIBS='${LIBS}'
+	    DL_OBJS="tclLoadAout.o"
+	    DL_LIBS=""
+	    LDFLAGS="-Wl,-D,08000000"
+	    LD_SEARCH_FLAGS='-L${LIB_RUNTIME_DIR}'
+	    if test "$GCC" != "yes" ; then
+		EXTRA_CFLAGS="-DHAVE_TZSET -std1"
+	    fi
+	    ;;
+	UNIX_SV* | UnixWare-5*)
+	    SHLIB_CFLAGS="-KPIC"
+	    SHLIB_LD="cc -G"
+	    SHLIB_LD_LIBS=""
+	    SHLIB_SUFFIX=".so"
+	    DL_OBJS="tclLoadDl.o"
+	    DL_LIBS="-ldl"
+	    # Some UNIX_SV* systems (unixware 1.1.2 for example) have linkers
+	    # that don't grok the -Bexport option.  Test that it does.
+	    hold_ldflags=$LDFLAGS
+	    echo "$as_me:5341: checking for ld accepts -Bexport flag" >&5
+echo $ECHO_N "checking for ld accepts -Bexport flag... $ECHO_C" >&6
+	    LDFLAGS="${LDFLAGS} -Wl,-Bexport"
+	    cat >conftest.$ac_ext <<_ACEOF
+#line 5345 "configure"
+#include "confdefs.h"
+
+int
+main ()
+{
+int i;
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:5357: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:5360: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:5363: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:5366: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  found=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+found=no
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+	    LDFLAGS=$hold_ldflags
+	    echo "$as_me:5376: result: $found" >&5
+echo "${ECHO_T}$found" >&6
+	    if test $found = yes; then
+	    LDFLAGS="-Wl,-Bexport"
+	    else
+	    LDFLAGS=""
+	    fi
+	    LD_SEARCH_FLAGS=""
+	    ;;
+    esac
+
+    if test "$do64bit" = "yes" -a "$do64bit_ok" = "no" ; then
+    { echo "$as_me:5388: WARNING: \"64bit support being disabled -- don\'t know magic for this platform\"" >&5
+echo "$as_me: WARNING: \"64bit support being disabled -- don\'t know magic for this platform\"" >&2;}
+    fi
+
+    # Step 4: If pseudo-static linking is in use (see K. B. Kenny, "Dynamic
+    # Loading for Tcl -- What Became of It?".  Proc. 2nd Tcl/Tk Workshop,
+    # New Orleans, LA, Computerized Processes Unlimited, 1994), then we need
+    # to determine which of several header files defines the a.out file
+    # format (a.out.h, sys/exec.h, or sys/exec_aout.h).  At present, we
+    # support only a file format that is more or less version-7-compatible.
+    # In particular,
+    #	- a.out files must begin with `struct exec'.
+    #	- the N_TXTOFF on the `struct exec' must compute the seek address
+    #	  of the text segment
+    #	- The `struct exec' must contain a_magic, a_text, a_data, a_bss
+    #	  and a_entry fields.
+    # The following compilation should succeed if and only if either sys/exec.h
+    # or a.out.h is usable for the purpose.
+    #
+    # Note that the modified COFF format used on MIPS Ultrix 4.x is usable; the
+    # `struct exec' includes a second header that contains information that
+    # duplicates the v7 fields that are needed.
+
+    if test "x$DL_OBJS" = "xtclLoadAout.o" ; then
+	echo "$as_me:5412: checking sys/exec.h" >&5
+echo $ECHO_N "checking sys/exec.h... $ECHO_C" >&6
+	cat >conftest.$ac_ext <<_ACEOF
+#line 5415 "configure"
+#include "confdefs.h"
+#include <sys/exec.h>
+int
+main ()
+{
+
+	    struct exec foo;
+	    unsigned long seek;
+	    int flag;
+#if defined(__mips) || defined(mips)
+	    seek = N_TXTOFF (foo.ex_f, foo.ex_o);
+#else
+	    seek = N_TXTOFF (foo);
+#endif
+	    flag = (foo.a_magic == OMAGIC);
+	    return foo.a_text + foo.a_data + foo.a_bss + foo.a_entry;
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:5438: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:5441: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:5444: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:5447: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  tcl_ok=usable
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+tcl_ok=unusable
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+	echo "$as_me:5456: result: $tcl_ok" >&5
+echo "${ECHO_T}$tcl_ok" >&6
+	if test $tcl_ok = usable; then
+	    cat >>confdefs.h <<\EOF
+#define USE_SYS_EXEC_H 1
+EOF
+
+	else
+	    echo "$as_me:5464: checking a.out.h" >&5
+echo $ECHO_N "checking a.out.h... $ECHO_C" >&6
+	    cat >conftest.$ac_ext <<_ACEOF
+#line 5467 "configure"
+#include "confdefs.h"
+#include <a.out.h>
+int
+main ()
+{
+
+		struct exec foo;
+		unsigned long seek;
+		int flag;
+#if defined(__mips) || defined(mips)
+		seek = N_TXTOFF (foo.ex_f, foo.ex_o);
+#else
+		seek = N_TXTOFF (foo);
+#endif
+		flag = (foo.a_magic == OMAGIC);
+		return foo.a_text + foo.a_data + foo.a_bss + foo.a_entry;
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:5490: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:5493: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:5496: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:5499: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  tcl_ok=usable
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+tcl_ok=unusable
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+	    echo "$as_me:5508: result: $tcl_ok" >&5
+echo "${ECHO_T}$tcl_ok" >&6
+	    if test $tcl_ok = usable; then
+		cat >>confdefs.h <<\EOF
+#define USE_A_OUT_H 1
+EOF
+
+	    else
+		echo "$as_me:5516: checking sys/exec_aout.h" >&5
+echo $ECHO_N "checking sys/exec_aout.h... $ECHO_C" >&6
+		cat >conftest.$ac_ext <<_ACEOF
+#line 5519 "configure"
+#include "confdefs.h"
+#include <sys/exec_aout.h>
+int
+main ()
+{
+
+		    struct exec foo;
+		    unsigned long seek;
+		    int flag;
+#if defined(__mips) || defined(mips)
+		    seek = N_TXTOFF (foo.ex_f, foo.ex_o);
+#else
+		    seek = N_TXTOFF (foo);
+#endif
+		    flag = (foo.a_midmag == OMAGIC);
+		    return foo.a_text + foo.a_data + foo.a_bss + foo.a_entry;
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:5542: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:5545: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:5548: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:5551: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  tcl_ok=usable
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+tcl_ok=unusable
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+		echo "$as_me:5560: result: $tcl_ok" >&5
+echo "${ECHO_T}$tcl_ok" >&6
+		if test $tcl_ok = usable; then
+		    cat >>confdefs.h <<\EOF
+#define USE_SYS_EXEC_AOUT_H 1
+EOF
+
+		else
+		    DL_OBJS=""
+		fi
+	    fi
+	fi
+    fi
+
+    # Step 5: disable dynamic loading if requested via a command-line switch.
+
+    # Check whether --enable-load or --disable-load was given.
+if test "${enable_load+set}" = set; then
+  enableval="$enable_load"
+  tcl_ok=$enableval
+else
+  tcl_ok=yes
+fi;
+    if test "$tcl_ok" = "no"; then
+	DL_OBJS=""
+    fi
+
+    if test "x$DL_OBJS" != "x" ; then
+	BUILD_DLTEST="\$(DLTEST_TARGETS)"
+    else
+	echo "Can't figure out how to do dynamic loading or shared libraries"
+	echo "on this system."
+	SHLIB_CFLAGS=""
+	SHLIB_LD=""
+	SHLIB_SUFFIX=""
+	DL_OBJS="tclLoadNone.o"
+	DL_LIBS=""
+	LDFLAGS=""
+	LD_SEARCH_FLAGS=""
+	BUILD_DLTEST=""
+    fi
+
+    # If we're running gcc, then change the C flags for compiling shared
+    # libraries to the right flags for gcc, instead of those for the
+    # standard manufacturer compiler.
+
+    if test "$DL_OBJS" != "tclLoadNone.o" ; then
+	if test "$GCC" = "yes" ; then
+	    case $system in
+		AIX-*)
+		    ;;
+		BSD/OS*)
+		    ;;
+		IRIX*)
+		    ;;
+		NetBSD-*|FreeBSD-*|OpenBSD-*)
+		    ;;
+		Rhapsody-*|Darwin-*)
+		    ;;
+		RISCos-*)
+		    ;;
+		SCO_SV-3.2*)
+		    ;;
+		ULTRIX-4.*)
+		    ;;
+		windows)
+		    ;;
+		*)
+		    SHLIB_CFLAGS="-fPIC"
+		    ;;
+	    esac
+	fi
+    fi
+
+    if test "$SHARED_LIB_SUFFIX" = "" ; then
+	SHARED_LIB_SUFFIX='${VERSION}\$\{DBGX\}${SHLIB_SUFFIX}'
+    fi
+    if test "$UNSHARED_LIB_SUFFIX" = "" ; then
+	UNSHARED_LIB_SUFFIX='${VERSION}\$\{DBGX\}.a'
+    fi
+
+    SHLIB_LDFLAGS='$(LDFLAGS_DEFAULT)'
+
+#--------------------------------------------------------------------
+# Set the default compiler switches based on the --enable-symbols option.
+#--------------------------------------------------------------------
+
+    if test x"${TEA_INITED}" = x ; then
+	# Can't refer to exact macro name or it will be substituted
+	{ { echo "$as_me:5649: error: Must call TEA INIT before ENABLE_SYMBOLS" >&5
+echo "$as_me: error: Must call TEA INIT before ENABLE_SYMBOLS" >&2;}
+   { (exit 1); exit 1; }; }
+    fi
+
+    if test "${TEA_PLATFORM}" = "windows" ; then
+	tcl_dbgx=d
+    else
+	tcl_dbgx=g
+    fi
+
+    echo "$as_me:5660: checking for build with symbols" >&5
+echo $ECHO_N "checking for build with symbols... $ECHO_C" >&6
+    # Check whether --enable-symbols or --disable-symbols was given.
+if test "${enable_symbols+set}" = set; then
+  enableval="$enable_symbols"
+  tcl_ok=$enableval
+else
+  tcl_ok=no
+fi;
+    if test "$tcl_ok" = "no"; then
+	CFLAGS_DEFAULT='$(CFLAGS_OPTIMIZE)'
+	LDFLAGS_DEFAULT='$(LDFLAGS_OPTIMIZE)'
+	DBGX=""
+	TCL_DBGX=""
+	echo "$as_me:5674: result: no" >&5
+echo "${ECHO_T}no" >&6
+    else
+	CFLAGS_DEFAULT='$(CFLAGS_DEBUG)'
+	LDFLAGS_DEFAULT='$(LDFLAGS_DEBUG)'
+	DBGX=${tcl_dbgx}
+	TCL_DBGX=${tcl_dbgx}
+	if test "$tcl_ok" = "yes"; then
+	    echo "$as_me:5682: result: yes (standard debugging)" >&5
+echo "${ECHO_T}yes (standard debugging)" >&6
+	fi
+    fi
+
+    if test "$tcl_ok" = "mem" -o "$tcl_ok" = "all"; then
+	cat >>confdefs.h <<\EOF
+#define TCL_MEM_DEBUG 1
+EOF
+
+    fi
+
+    if test "$tcl_ok" != "yes" -a "$tcl_ok" != "no"; then
+	if test "$tcl_ok" = "all"; then
+	    echo "$as_me:5696: result: enabled symbols mem debugging" >&5
+echo "${ECHO_T}enabled symbols mem debugging" >&6
+	else
+	    echo "$as_me:5699: result: enabled $tcl_ok debugging" >&5
+echo "${ECHO_T}enabled $tcl_ok debugging" >&6
+	fi
+    fi
+
+#--------------------------------------------------------------------
+# Everyone should be linking against the Tcl stub library.  If you
+# can't for some reason, remove this definition.  If you aren't using
+# stubs, you also need to modify the SHLIB_LD_LIBS setting below to
+# link against the non-stubbed Tcl library.
+#--------------------------------------------------------------------
+
+cat >>confdefs.h <<\EOF
+#define USE_TCL_STUBS 1
+EOF
+
+#--------------------------------------------------------------------
+# This macro generates a line to use when building a library.  It
+# depends on values set by the TEA_ENABLE_SHARED, TEA_ENABLE_SYMBOLS,
+# and TEA_LOAD_TCLCONFIG macros above.
+#--------------------------------------------------------------------
+
+    if test "${TEA_PLATFORM}" = "windows" -a "$GCC" != "yes"; then
+	MAKE_STATIC_LIB="\${STLIB_LD} -out:\$@ \$(\$(PACKAGE)_OBJECTS)"
+	MAKE_SHARED_LIB="\${SHLIB_LD} \${SHLIB_LDFLAGS} \${SHLIB_LD_LIBS} \$(LDFLAGS) -out:\$@ \$(\$(PACKAGE)_OBJECTS)"
+	MAKE_STUB_LIB="\${STLIB_LD} -out:\$@ \$(\$(PACKAGE)stub_OBJECTS)"
+    else
+	MAKE_STATIC_LIB="\${STLIB_LD} \$@ \$(\$(PACKAGE)_OBJECTS)"
+	MAKE_SHARED_LIB="\${SHLIB_LD} -o \$@ \$(\$(PACKAGE)_OBJECTS) \${SHLIB_LDFLAGS} \${SHLIB_LD_LIBS}"
+	MAKE_STUB_LIB="\${STLIB_LD} \$@ \$(\$(PACKAGE)stub_OBJECTS)"
+    fi
+
+    if test "${SHARED_BUILD}" = "1" ; then
+	MAKE_LIB="${MAKE_SHARED_LIB} "
+    else
+	MAKE_LIB="${MAKE_STATIC_LIB} "
+    fi
+
+    #--------------------------------------------------------------------
+    # Shared libraries and static libraries have different names.
+    # Use the double eval to make sure the ${DBGX} in the suffix is
+    # substituted.
+    #--------------------------------------------------------------------
+
+    RANLIB_STUB="${RANLIB}"
+    if test "${TEA_PLATFORM}" = "windows" ; then
+	if test "${SHARED_BUILD}" = "1" ; then
+	    # We force the unresolved linking of symbols that are really in
+	    # the private libraries of Tcl and Tk.
+	    SHLIB_LD_LIBS="${SHLIB_LD_LIBS} \"`${CYGPATH} ${TCL_BIN_DIR}/${TCL_STUB_LIB_FILE}`\""
+	    if test x"${TK_BIN_DIR}" != x ; then
+		SHLIB_LD_LIBS="${SHLIB_LD_LIBS} \"`${CYGPATH} ${TK_BIN_DIR}/${TK_STUB_LIB_FILE}`\""
+	    fi
+	    eval eval "${PACKAGE}_LIB_FILE=${PACKAGE}${SHARED_LIB_SUFFIX}"
+	    RANLIB=:
+	else
+	    eval eval "${PACKAGE}_LIB_FILE=${PACKAGE}${UNSHARED_LIB_SUFFIX}"
+	fi
+	# Some packages build there own stubs libraries
+	eval eval "${PACKAGE}stub_LIB_FILE=${PACKAGE}stub${UNSHARED_LIB_SUFFIX}"
+    else
+	if test "${SHARED_BUILD}" = "1" ; then
+	    SHLIB_LD_LIBS="${SHLIB_LD_LIBS} ${TCL_STUB_LIB_SPEC}"
+	    if test x"${TK_BIN_DIR}" != x ; then
+		SHLIB_LD_LIBS="${SHLIB_LD_LIBS} ${TK_STUB_LIB_SPEC}"
+	    fi
+	    eval eval "${PACKAGE}_LIB_FILE=lib${PACKAGE}${SHARED_LIB_SUFFIX}"
+	    RANLIB=:
+	else
+	    eval eval "${PACKAGE}_LIB_FILE=lib${PACKAGE}${UNSHARED_LIB_SUFFIX}"
+	fi
+	# Some packages build there own stubs libraries
+	eval eval "${PACKAGE}stub_LIB_FILE=lib${PACKAGE}stub${UNSHARED_LIB_SUFFIX}"
+    fi
+
+    # These are escaped so that only CFLAGS is picked up at configure time.
+    # The other values will be substituted at make time.
+    CFLAGS="${CFLAGS} \${CFLAGS_DEFAULT} \${CFLAGS_WARNING}"
+    if test "${SHARED_BUILD}" = "1" ; then
+	CFLAGS="${CFLAGS} \${SHLIB_CFLAGS}"
+    fi
+
+#--------------------------------------------------------------------
+# Find tclsh so that we can run pkg_mkIndex to generate the pkgIndex.tcl
+# file during the install process.  Don't run the TCLSH_PROG through
+# ${CYGPATH} because it's being used directly by make.
+# Require that we use a tclsh shell version 8.2 or later since earlier
+# versions have bugs in the pkg_mkIndex routine.
+# Add WISH as well if this is a Tk extension.
+#--------------------------------------------------------------------
+
+    echo "$as_me:5790: checking for tclsh" >&5
+echo $ECHO_N "checking for tclsh... $ECHO_C" >&6
+
+    if test "${ac_cv_path_tclsh+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+
+	search_path=`echo ${TCL_BIN_DIR}:${TCL_BIN_DIR}/../bin:${exec_prefix}/bin:${prefix}/bin:${PATH} | sed -e 's/:/ /g'`
+	for dir in $search_path ; do
+	    for j in `ls -r $dir/tclsh[8-9]*${EXEEXT} 2> /dev/null` \
+		    `ls -r $dir/tclsh*${EXEEXT} 2> /dev/null` ; do
+		if test x"$ac_cv_path_tclsh" = x ; then
+		    if test -f "$j" ; then
+			ac_cv_path_tclsh=$j
+			break
+		    fi
+		fi
+	    done
+	done
+
+fi
+
+    if test -f "$ac_cv_path_tclsh" ; then
+	TCLSH_PROG=$ac_cv_path_tclsh
+	echo "$as_me:5814: result: $TCLSH_PROG" >&5
+echo "${ECHO_T}$TCLSH_PROG" >&6
+    else
+	{ { echo "$as_me:5817: error: No tclsh found in PATH:  $search_path" >&5
+echo "$as_me: error: No tclsh found in PATH:  $search_path" >&2;}
+   { (exit 1); exit 1; }; }
+    fi
+
+#--------------------------------------------------------------------
+# These are for tcldomConfig.sh
+#--------------------------------------------------------------------
+
+# pkglibdir must be a fully qualified path and (not ${exec_prefix}/lib)
+eval pkglibdir="${libdir}/${PACKAGE}${VERSION}"
+if test "${TCL_LIB_VERSIONS_OK}" = "ok"; then
+    eval Tcldom_LIB_FLAG="-lTcldom${VERSION}${DBGX}"
+else
+    eval Tcldom_LIB_FLAG="-lTcldom`echo ${VERSION} | tr -d .`${DBGX}"
+fi
+Tcldom_BUILD_LIB_SPEC="-L`pwd` ${Tcldom_LIB_FLAG}"
+Tcldom_LIB_SPEC="-L${pkglibdir} ${Tcldom_LIB_FLAG}"
+
+if test "${TCL_LIB_VERSIONS_OK}" = "ok"; then
+    eval Tcldom_STUB_LIB_FLAG="-lTcldomstub${VERSION}${DBGX}"
+else
+    eval Tcldom_STUB_LIB_FLAG="-lTcldomstub`echo ${VERSION} | tr -d .`${DBGX}"
+fi
+Tcldom_BUILD_STUB_LIB_SPEC="-L`pwd` ${Tcldom_STUB_LIB_FLAG}"
+Tcldom_STUB_LIB_SPEC="-L${pkglibdir} ${Tcldom_STUB_LIB_FLAG}"
+Tcldom_BUILD_STUB_LIB_PATH="`pwd`/${Tcldomstub_LIB_FILE}"
+Tcldom_STUB_LIB_PATH="${pkglibdir}/${Tcldomstub_LIB_FILE}"
+
+#--------------------------------------------------------------------
+# Finally, substitute all of the various values into the Makefile.
+# You may alternatively have a special pkgIndex.tcl.in or other files
+# which require substituting th AC variables in.  Include these here.
+#--------------------------------------------------------------------
+
+ac_config_files="$ac_config_files Makefile library/pkgIndex.tcl TcldomConfig.sh"
+cat >confcache <<\_ACEOF
+# This file is a shell script that caches the results of configure
+# tests run on this system so they can be shared between configure
+# scripts and configure runs, see configure's option --config-cache.
+# It is not useful on other systems.  If it contains results you don't
+# want to keep, you may remove or edit it.
+#
+# config.status only pays attention to the cache file if you give it
+# the --recheck option to rerun configure.
+#
+# `ac_cv_env_foo' variables (set or unset) will be overriden when
+# loading this file, other *unset* `ac_cv_foo' will be assigned the
+# following values.
+
+_ACEOF
+
+# The following way of writing the cache mishandles newlines in values,
+# but we know of no workaround that is simple, portable, and efficient.
+# So, don't put newlines in cache variables' values.
+# Ultrix sh set writes to stderr and can't be redirected directly,
+# and sets the high bit in the cache file unless we assign to the vars.
+{
+  (set) 2>&1 |
+    case `(ac_space=' '; set | grep ac_space) 2>&1` in
+    *ac_space=\ *)
+      # `set' does not quote correctly, so add quotes (double-quote
+      # substitution turns \\\\ into \\, and sed turns \\ into \).
+      sed -n \
+        "s/'/'\\\\''/g;
+    	  s/^\\([_$as_cr_alnum]*_cv_[_$as_cr_alnum]*\\)=\\(.*\\)/\\1='\\2'/p"
+      ;;
+    *)
+      # `set' quotes correctly as required by POSIX, so do not add quotes.
+      sed -n \
+        "s/^\\([_$as_cr_alnum]*_cv_[_$as_cr_alnum]*\\)=\\(.*\\)/\\1=\\2/p"
+      ;;
+    esac;
+} |
+  sed '
+     t clear
+     : clear
+     s/^\([^=]*\)=\(.*[{}].*\)$/test "${\1+set}" = set || &/
+     t end
+     /^ac_cv_env/!s/^\([^=]*\)=\(.*\)$/\1=${\1=\2}/
+     : end' >>confcache
+if cmp -s $cache_file confcache; then :; else
+  if test -w $cache_file; then
+    test "x$cache_file" != "x/dev/null" && echo "updating cache $cache_file"
+    cat confcache >$cache_file
+  else
+    echo "not updating unwritable cache $cache_file"
+  fi
+fi
+rm -f confcache
+
+test "x$prefix" = xNONE && prefix=$ac_default_prefix
+# Let make expand exec_prefix.
+test "x$exec_prefix" = xNONE && exec_prefix='${prefix}'
+
+# VPATH may cause trouble with some makes, so we remove $(srcdir),
+# ${srcdir} and @srcdir@ from VPATH if srcdir is ".", strip leading and
+# trailing colons and then remove the whole line if VPATH becomes empty
+# (actually we leave an empty line to preserve line numbers).
+if test "x$srcdir" = x.; then
+  ac_vpsub='/^[ 	]*VPATH[ 	]*=/{
+s/:*\$(srcdir):*/:/;
+s/:*\${srcdir}:*/:/;
+s/:*@srcdir@:*/:/;
+s/^\([^=]*=[ 	]*\):*/\1/;
+s/:*$//;
+s/^[^=]*=[ 	]*$//;
+}'
+fi
+
+# Transform confdefs.h into DEFS.
+# Protect against shell expansion while executing Makefile rules.
+# Protect against Makefile macro expansion.
+#
+# If the first sed substitution is executed (which looks for macros that
+# take arguments), then we branch to the quote section.  Otherwise,
+# look for a macro that doesn't take arguments.
+cat >confdef2opt.sed <<\EOF
+t clear
+: clear
+s,^[ 	]*#[ 	]*define[ 	][ 	]*\([^ 	(][^ 	(]*([^)]*)\)[ 	]*\(.*\),-D\1=\2,g
+t quote
+s,^[ 	]*#[ 	]*define[ 	][ 	]*\([^ 	][^ 	]*\)[ 	]*\(.*\),-D\1=\2,g
+t quote
+d
+: quote
+s,[ 	`~#$^&*(){}\\|;'"<>?],\\&,g
+s,\[,\\&,g
+s,\],\\&,g
+s,\$,$$,g
+p
+EOF
+# We use echo to avoid assuming a particular line-breaking character.
+# The extra dot is to prevent the shell from consuming trailing
+# line-breaks from the sub-command output.  A line-break within
+# single-quotes doesn't work because, if this script is created in a
+# platform that uses two characters for line-breaks (e.g., DOS), tr
+# would break.
+ac_LF_and_DOT=`echo; echo .`
+DEFS=`sed -n -f confdef2opt.sed confdefs.h | tr "$ac_LF_and_DOT" ' .'`
+rm -f confdef2opt.sed
+
+: ${CONFIG_STATUS=./config.status}
+ac_clean_files_save=$ac_clean_files
+ac_clean_files="$ac_clean_files $CONFIG_STATUS"
+{ echo "$as_me:5962: creating $CONFIG_STATUS" >&5
+echo "$as_me: creating $CONFIG_STATUS" >&6;}
+cat >$CONFIG_STATUS <<_ACEOF
+#! $SHELL
+# Generated automatically by configure.
+# Run this file to recreate the current configuration.
+# Compiler output produced by configure, useful for debugging
+# configure, is in config.log if it exists.
+
+debug=false
+SHELL=\${CONFIG_SHELL-$SHELL}
+ac_cs_invocation="\$0 \$@"
+
+_ACEOF
+
+cat >>$CONFIG_STATUS <<\_ACEOF
+# Be Bourne compatible
+if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
+  emulate sh
+  NULLCMD=:
+elif test -n "${BASH_VERSION+set}" && (set -o posix) >/dev/null 2>&1; then
+  set -o posix
+fi
+
+# Name of the executable.
+as_me=`echo "$0" |sed 's,.*[\\/],,'`
+
+if expr a : '\(a\)' >/dev/null 2>&1; then
+  as_expr=expr
+else
+  as_expr=false
+fi
+
+rm -f conf$$ conf$$.exe conf$$.file
+echo >conf$$.file
+if ln -s conf$$.file conf$$ 2>/dev/null; then
+  # We could just check for DJGPP; but this test a) works b) is more generic
+  # and c) will remain valid once DJGPP supports symlinks (DJGPP 2.04).
+  if test -f conf$$.exe; then
+    # Don't use ln at all; we don't have any links
+    as_ln_s='cp -p'
+  else
+    as_ln_s='ln -s'
+  fi
+elif ln conf$$.file conf$$ 2>/dev/null; then
+  as_ln_s=ln
+else
+  as_ln_s='cp -p'
+fi
+rm -f conf$$ conf$$.exe conf$$.file
+
+as_executable_p="test -f"
+
+# Support unset when possible.
+if (FOO=FOO; unset FOO) >/dev/null 2>&1; then
+  as_unset=unset
+else
+  as_unset=false
+fi
+
+# NLS nuisances.
+$as_unset LANG || test "${LANG+set}" != set || { LANG=C; export LANG; }
+$as_unset LC_ALL || test "${LC_ALL+set}" != set || { LC_ALL=C; export LC_ALL; }
+$as_unset LC_TIME || test "${LC_TIME+set}" != set || { LC_TIME=C; export LC_TIME; }
+$as_unset LC_CTYPE || test "${LC_CTYPE+set}" != set || { LC_CTYPE=C; export LC_CTYPE; }
+$as_unset LANGUAGE || test "${LANGUAGE+set}" != set || { LANGUAGE=C; export LANGUAGE; }
+$as_unset LC_COLLATE || test "${LC_COLLATE+set}" != set || { LC_COLLATE=C; export LC_COLLATE; }
+$as_unset LC_NUMERIC || test "${LC_NUMERIC+set}" != set || { LC_NUMERIC=C; export LC_NUMERIC; }
+$as_unset LC_MESSAGES || test "${LC_MESSAGES+set}" != set || { LC_MESSAGES=C; export LC_MESSAGES; }
+
+# IFS
+# We need space, tab and new line, in precisely that order.
+as_nl='
+'
+IFS=" 	$as_nl"
+
+# CDPATH.
+$as_unset CDPATH || test "${CDPATH+set}" != set || { CDPATH=:; export CDPATH; }
+
+exec 6>&1
+
+_ACEOF
+
+# Files that config.status was made for.
+if test -n "$ac_config_files"; then
+  echo "config_files=\"$ac_config_files\"" >>$CONFIG_STATUS
+fi
+
+if test -n "$ac_config_headers"; then
+  echo "config_headers=\"$ac_config_headers\"" >>$CONFIG_STATUS
+fi
+
+if test -n "$ac_config_links"; then
+  echo "config_links=\"$ac_config_links\"" >>$CONFIG_STATUS
+fi
+
+if test -n "$ac_config_commands"; then
+  echo "config_commands=\"$ac_config_commands\"" >>$CONFIG_STATUS
+fi
+
+cat >>$CONFIG_STATUS <<\EOF
+
+ac_cs_usage="\
+\`$as_me' instantiates files from templates according to the
+current configuration.
+
+Usage: $0 [OPTIONS] [FILE]...
+
+  -h, --help       print this help, then exit
+  -V, --version    print version number, then exit
+  -d, --debug      don't remove temporary files
+      --recheck    update $as_me by reconfiguring in the same conditions
+  --file=FILE[:TEMPLATE]
+                   instantiate the configuration file FILE
+
+Configuration files:
+$config_files
+
+Report bugs to <bug-autoconf@gnu.org>."
+EOF
+
+cat >>$CONFIG_STATUS <<EOF
+ac_cs_version="\\
+config.status
+configured by $0, generated by GNU Autoconf 2.52,
+  with options \\"`echo "$ac_configure_args" | sed 's/[\\""\`\$]/\\\\&/g'`\\"
+
+Copyright 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001
+Free Software Foundation, Inc.
+This config.status script is free software; the Free Software Foundation
+gives unlimited permission to copy, distribute and modify it."
+srcdir=$srcdir
+INSTALL="$INSTALL"
+EOF
+
+cat >>$CONFIG_STATUS <<\EOF
+# If no file are specified by the user, then we need to provide default
+# value.  By we need to know if files were specified by the user.
+ac_need_defaults=:
+while test $# != 0
+do
+  case $1 in
+  --*=*)
+    ac_option=`expr "x$1" : 'x\([^=]*\)='`
+    ac_optarg=`expr "x$1" : 'x[^=]*=\(.*\)'`
+    shift
+    set dummy "$ac_option" "$ac_optarg" ${1+"$@"}
+    shift
+    ;;
+  -*);;
+  *) # This is not an option, so the user has probably given explicit
+     # arguments.
+     ac_need_defaults=false;;
+  esac
+
+  case $1 in
+  # Handling of the options.
+EOF
+cat >>$CONFIG_STATUS <<EOF
+  -recheck | --recheck | --rechec | --reche | --rech | --rec | --re | --r)
+    echo "running $SHELL $0 " $ac_configure_args " --no-create --no-recursion"
+    exec $SHELL $0 $ac_configure_args --no-create --no-recursion ;;
+EOF
+cat >>$CONFIG_STATUS <<\EOF
+  --version | --vers* | -V )
+    echo "$ac_cs_version"; exit 0 ;;
+  --he | --h)
+    # Conflict between --help and --header
+    { { echo "$as_me:6130: error: ambiguous option: $1
+Try \`$0 --help' for more information." >&5
+echo "$as_me: error: ambiguous option: $1
+Try \`$0 --help' for more information." >&2;}
+   { (exit 1); exit 1; }; };;
+  --help | --hel | -h )
+    echo "$ac_cs_usage"; exit 0 ;;
+  --debug | --d* | -d )
+    debug=: ;;
+  --file | --fil | --fi | --f )
+    shift
+    CONFIG_FILES="$CONFIG_FILES $1"
+    ac_need_defaults=false;;
+  --header | --heade | --head | --hea )
+    shift
+    CONFIG_HEADERS="$CONFIG_HEADERS $1"
+    ac_need_defaults=false;;
+
+  # This is an error.
+  -*) { { echo "$as_me:6149: error: unrecognized option: $1
+Try \`$0 --help' for more information." >&5
+echo "$as_me: error: unrecognized option: $1
+Try \`$0 --help' for more information." >&2;}
+   { (exit 1); exit 1; }; } ;;
+
+  *) ac_config_targets="$ac_config_targets $1" ;;
+
+  esac
+  shift
+done
+
+exec 5>>config.log
+cat >&5 << _ACEOF
+
+## ----------------------- ##
+## Running config.status.  ##
+## ----------------------- ##
+
+This file was extended by $as_me 2.52, executed with
+  CONFIG_FILES    = $CONFIG_FILES
+  CONFIG_HEADERS  = $CONFIG_HEADERS
+  CONFIG_LINKS    = $CONFIG_LINKS
+  CONFIG_COMMANDS = $CONFIG_COMMANDS
+  > $ac_cs_invocation
+on `(hostname || uname -n) 2>/dev/null | sed 1q`
+
+_ACEOF
+EOF
+
+cat >>$CONFIG_STATUS <<\EOF
+for ac_config_target in $ac_config_targets
+do
+  case "$ac_config_target" in
+  # Handling of arguments.
+  "Makefile" ) CONFIG_FILES="$CONFIG_FILES Makefile" ;;
+  "library/pkgIndex.tcl" ) CONFIG_FILES="$CONFIG_FILES library/pkgIndex.tcl" ;;
+  "TcldomConfig.sh" ) CONFIG_FILES="$CONFIG_FILES TcldomConfig.sh" ;;
+  *) { { echo "$as_me:6187: error: invalid argument: $ac_config_target" >&5
+echo "$as_me: error: invalid argument: $ac_config_target" >&2;}
+   { (exit 1); exit 1; }; };;
+  esac
+done
+
+# If the user did not use the arguments to specify the items to instantiate,
+# then the envvar interface is used.  Set only those that are not.
+# We use the long form for the default assignment because of an extremely
+# bizarre bug on SunOS 4.1.3.
+if $ac_need_defaults; then
+  test "${CONFIG_FILES+set}" = set || CONFIG_FILES=$config_files
+fi
+
+# Create a temporary directory, and hook for its removal unless debugging.
+$debug ||
+{
+  trap 'exit_status=$?; rm -rf $tmp && exit $exit_status' 0
+  trap '{ (exit 1); exit 1; }' 1 2 13 15
+}
+
+# Create a (secure) tmp directory for tmp files.
+: ${TMPDIR=/tmp}
+{
+  tmp=`(umask 077 && mktemp -d -q "$TMPDIR/csXXXXXX") 2>/dev/null` &&
+  test -n "$tmp" && test -d "$tmp"
+}  ||
+{
+  tmp=$TMPDIR/cs$$-$RANDOM
+  (umask 077 && mkdir $tmp)
+} ||
+{
+   echo "$me: cannot create a temporary directory in $TMPDIR" >&2
+   { (exit 1); exit 1; }
+}
+
+EOF
+
+cat >>$CONFIG_STATUS <<EOF
+
+#
+# CONFIG_FILES section.
+#
+
+# No need to generate the scripts if there are no CONFIG_FILES.
+# This happens for instance when ./config.status config.h
+if test -n "\$CONFIG_FILES"; then
+  # Protect against being on the right side of a sed subst in config.status.
+  sed 's/,@/@@/; s/@,/@@/; s/,;t t\$/@;t t/; /@;t t\$/s/[\\\\&,]/\\\\&/g;
+   s/@@/,@/; s/@@/@,/; s/@;t t\$/,;t t/' >\$tmp/subs.sed <<\\CEOF
+s,@SHELL@,$SHELL,;t t
+s,@exec_prefix@,$exec_prefix,;t t
+s,@prefix@,$prefix,;t t
+s,@program_transform_name@,$program_transform_name,;t t
+s,@bindir@,$bindir,;t t
+s,@sbindir@,$sbindir,;t t
+s,@libexecdir@,$libexecdir,;t t
+s,@datadir@,$datadir,;t t
+s,@sysconfdir@,$sysconfdir,;t t
+s,@sharedstatedir@,$sharedstatedir,;t t
+s,@localstatedir@,$localstatedir,;t t
+s,@libdir@,$libdir,;t t
+s,@includedir@,$includedir,;t t
+s,@oldincludedir@,$oldincludedir,;t t
+s,@infodir@,$infodir,;t t
+s,@mandir@,$mandir,;t t
+s,@PACKAGE_NAME@,$PACKAGE_NAME,;t t
+s,@PACKAGE_TARNAME@,$PACKAGE_TARNAME,;t t
+s,@PACKAGE_VERSION@,$PACKAGE_VERSION,;t t
+s,@PACKAGE_STRING@,$PACKAGE_STRING,;t t
+s,@PACKAGE_BUGREPORT@,$PACKAGE_BUGREPORT,;t t
+s,@build_alias@,$build_alias,;t t
+s,@host_alias@,$host_alias,;t t
+s,@target_alias@,$target_alias,;t t
+s,@ECHO_C@,$ECHO_C,;t t
+s,@ECHO_N@,$ECHO_N,;t t
+s,@ECHO_T@,$ECHO_T,;t t
+s,@PATH_SEPARATOR@,$PATH_SEPARATOR,;t t
+s,@DEFS@,$DEFS,;t t
+s,@LIBS@,$LIBS,;t t
+s,@CONFIGDIR@,$CONFIGDIR,;t t
+s,@PACKAGE@,$PACKAGE,;t t
+s,@VERSION@,$VERSION,;t t
+s,@TCLDOM_VERSION@,$TCLDOM_VERSION,;t t
+s,@Tcldom_LIB_FILE@,$Tcldom_LIB_FILE,;t t
+s,@Tcldomstub_LIB_FILE@,$Tcldomstub_LIB_FILE,;t t
+s,@CYGPATH@,$CYGPATH,;t t
+s,@EXEEXT@,$EXEEXT,;t t
+s,@TCL_VERSION@,$TCL_VERSION,;t t
+s,@TCL_BIN_DIR@,$TCL_BIN_DIR,;t t
+s,@TCL_SRC_DIR@,$TCL_SRC_DIR,;t t
+s,@TCL_LIB_FILE@,$TCL_LIB_FILE,;t t
+s,@TCL_LIB_FLAG@,$TCL_LIB_FLAG,;t t
+s,@TCL_LIB_SPEC@,$TCL_LIB_SPEC,;t t
+s,@TCL_STUB_LIB_FILE@,$TCL_STUB_LIB_FILE,;t t
+s,@TCL_STUB_LIB_FLAG@,$TCL_STUB_LIB_FLAG,;t t
+s,@TCL_STUB_LIB_SPEC@,$TCL_STUB_LIB_SPEC,;t t
+s,@TCL_LIBS@,$TCL_LIBS,;t t
+s,@TCL_DEFS@,$TCL_DEFS,;t t
+s,@TCL_EXTRA_CFLAGS@,$TCL_EXTRA_CFLAGS,;t t
+s,@TCL_LD_FLAGS@,$TCL_LD_FLAGS,;t t
+s,@TCL_SHLIB_LD_LIBS@,$TCL_SHLIB_LD_LIBS,;t t
+s,@CC@,$CC,;t t
+s,@CFLAGS@,$CFLAGS,;t t
+s,@LDFLAGS@,$LDFLAGS,;t t
+s,@CPPFLAGS@,$CPPFLAGS,;t t
+s,@ac_ct_CC@,$ac_ct_CC,;t t
+s,@OBJEXT@,$OBJEXT,;t t
+s,@INSTALL_PROGRAM@,$INSTALL_PROGRAM,;t t
+s,@INSTALL_SCRIPT@,$INSTALL_SCRIPT,;t t
+s,@INSTALL_DATA@,$INSTALL_DATA,;t t
+s,@SET_MAKE@,$SET_MAKE,;t t
+s,@RANLIB@,$RANLIB,;t t
+s,@ac_ct_RANLIB@,$ac_ct_RANLIB,;t t
+s,@CPP@,$CPP,;t t
+s,@TCL_INCLUDES@,$TCL_INCLUDES,;t t
+s,@CLEANFILES@,$CLEANFILES,;t t
+s,@EXTRA_SOURCES@,$EXTRA_SOURCES,;t t
+s,@TCL_THREADS@,$TCL_THREADS,;t t
+s,@SHARED_BUILD@,$SHARED_BUILD,;t t
+s,@AR@,$AR,;t t
+s,@DL_LIBS@,$DL_LIBS,;t t
+s,@CFLAGS_DEBUG@,$CFLAGS_DEBUG,;t t
+s,@CFLAGS_OPTIMIZE@,$CFLAGS_OPTIMIZE,;t t
+s,@CFLAGS_WARNING@,$CFLAGS_WARNING,;t t
+s,@EXTRA_CFLAGS@,$EXTRA_CFLAGS,;t t
+s,@STLIB_LD@,$STLIB_LD,;t t
+s,@SHLIB_LD@,$SHLIB_LD,;t t
+s,@SHLIB_CFLAGS@,$SHLIB_CFLAGS,;t t
+s,@SHLIB_LDFLAGS@,$SHLIB_LDFLAGS,;t t
+s,@SHLIB_LD_LIBS@,$SHLIB_LD_LIBS,;t t
+s,@LDFLAGS_DEBUG@,$LDFLAGS_DEBUG,;t t
+s,@LDFLAGS_OPTIMIZE@,$LDFLAGS_OPTIMIZE,;t t
+s,@TCL_DBGX@,$TCL_DBGX,;t t
+s,@CFLAGS_DEFAULT@,$CFLAGS_DEFAULT,;t t
+s,@LDFLAGS_DEFAULT@,$LDFLAGS_DEFAULT,;t t
+s,@MAKE_LIB@,$MAKE_LIB,;t t
+s,@MAKE_SHARED_LIB@,$MAKE_SHARED_LIB,;t t
+s,@MAKE_STATIC_LIB@,$MAKE_STATIC_LIB,;t t
+s,@MAKE_STUB_LIB@,$MAKE_STUB_LIB,;t t
+s,@RANLIB_STUB@,$RANLIB_STUB,;t t
+s,@TCLSH_PROG@,$TCLSH_PROG,;t t
+s,@Tcldom_BUILD_LIB_SPEC@,$Tcldom_BUILD_LIB_SPEC,;t t
+s,@Tcldom_LIB_SPEC@,$Tcldom_LIB_SPEC,;t t
+s,@Tcldom_BUILD_STUB_LIB_SPEC@,$Tcldom_BUILD_STUB_LIB_SPEC,;t t
+s,@Tcldom_STUB_LIB_SPEC@,$Tcldom_STUB_LIB_SPEC,;t t
+s,@Tcldom_BUILD_STUB_LIB_PATH@,$Tcldom_BUILD_STUB_LIB_PATH,;t t
+s,@Tcldom_STUB_LIB_PATH@,$Tcldom_STUB_LIB_PATH,;t t
+s,@MAJOR_VERSION@,$MAJOR_VERSION,;t t
+s,@MINOR_VERSION@,$MINOR_VERSION,;t t
+s,@PATCHLEVEL@,$PATCHLEVEL,;t t
+CEOF
+
+EOF
+
+  cat >>$CONFIG_STATUS <<\EOF
+  # Split the substitutions into bite-sized pieces for seds with
+  # small command number limits, like on Digital OSF/1 and HP-UX.
+  ac_max_sed_lines=48
+  ac_sed_frag=1 # Number of current file.
+  ac_beg=1 # First line for current file.
+  ac_end=$ac_max_sed_lines # Line after last line for current file.
+  ac_more_lines=:
+  ac_sed_cmds=
+  while $ac_more_lines; do
+    if test $ac_beg -gt 1; then
+      sed "1,${ac_beg}d; ${ac_end}q" $tmp/subs.sed >$tmp/subs.frag
+    else
+      sed "${ac_end}q" $tmp/subs.sed >$tmp/subs.frag
+    fi
+    if test ! -s $tmp/subs.frag; then
+      ac_more_lines=false
+    else
+      # The purpose of the label and of the branching condition is to
+      # speed up the sed processing (if there are no `@' at all, there
+      # is no need to browse any of the substitutions).
+      # These are the two extra sed commands mentioned above.
+      (echo ':t
+  /@[a-zA-Z_][a-zA-Z_0-9]*@/!b' && cat $tmp/subs.frag) >$tmp/subs-$ac_sed_frag.sed
+      if test -z "$ac_sed_cmds"; then
+  	ac_sed_cmds="sed -f $tmp/subs-$ac_sed_frag.sed"
+      else
+  	ac_sed_cmds="$ac_sed_cmds | sed -f $tmp/subs-$ac_sed_frag.sed"
+      fi
+      ac_sed_frag=`expr $ac_sed_frag + 1`
+      ac_beg=$ac_end
+      ac_end=`expr $ac_end + $ac_max_sed_lines`
+    fi
+  done
+  if test -z "$ac_sed_cmds"; then
+    ac_sed_cmds=cat
+  fi
+fi # test -n "$CONFIG_FILES"
+
+EOF
+cat >>$CONFIG_STATUS <<\EOF
+for ac_file in : $CONFIG_FILES; do test "x$ac_file" = x: && continue
+  # Support "outfile[:infile[:infile...]]", defaulting infile="outfile.in".
+  case $ac_file in
+  - | *:- | *:-:* ) # input from stdin
+        cat >$tmp/stdin
+        ac_file_in=`echo "$ac_file" | sed 's,[^:]*:,,'`
+        ac_file=`echo "$ac_file" | sed 's,:.*,,'` ;;
+  *:* ) ac_file_in=`echo "$ac_file" | sed 's,[^:]*:,,'`
+        ac_file=`echo "$ac_file" | sed 's,:.*,,'` ;;
+  * )   ac_file_in=$ac_file.in ;;
+  esac
+
+  # Compute @srcdir@, @top_srcdir@, and @INSTALL@ for subdirectories.
+  ac_dir=`$as_expr X"$ac_file" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
+         X"$ac_file" : 'X\(//\)[^/]' \| \
+         X"$ac_file" : 'X\(//\)$' \| \
+         X"$ac_file" : 'X\(/\)' \| \
+         .     : '\(.\)' 2>/dev/null ||
+echo X"$ac_file" |
+    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{ s//\1/; q; }
+  	  /^X\(\/\/\)[^/].*/{ s//\1/; q; }
+  	  /^X\(\/\/\)$/{ s//\1/; q; }
+  	  /^X\(\/\).*/{ s//\1/; q; }
+  	  s/.*/./; q'`
+  if test "$ac_dir" != "$ac_file" && test "$ac_dir" != .; then
+    { case "$ac_dir" in
+  [\\/]* | ?:[\\/]* ) as_incr_dir=;;
+  *)                      as_incr_dir=.;;
+esac
+as_dummy="$ac_dir"
+for as_mkdir_dir in `IFS='/\\'; set X $as_dummy; shift; echo "$@"`; do
+  case $as_mkdir_dir in
+    # Skip DOS drivespec
+    ?:) as_incr_dir=$as_mkdir_dir ;;
+    *)
+      as_incr_dir=$as_incr_dir/$as_mkdir_dir
+      test -d "$as_incr_dir" || mkdir "$as_incr_dir"
+    ;;
+  esac
+done; }
+
+    ac_dir_suffix="/`echo $ac_dir|sed 's,^\./,,'`"
+    # A "../" for each directory in $ac_dir_suffix.
+    ac_dots=`echo "$ac_dir_suffix" | sed 's,/[^/]*,../,g'`
+  else
+    ac_dir_suffix= ac_dots=
+  fi
+
+  case $srcdir in
+  .)  ac_srcdir=.
+      if test -z "$ac_dots"; then
+         ac_top_srcdir=.
+      else
+         ac_top_srcdir=`echo $ac_dots | sed 's,/$,,'`
+      fi ;;
+  [\\/]* | ?:[\\/]* )
+      ac_srcdir=$srcdir$ac_dir_suffix;
+      ac_top_srcdir=$srcdir ;;
+  *) # Relative path.
+    ac_srcdir=$ac_dots$srcdir$ac_dir_suffix
+    ac_top_srcdir=$ac_dots$srcdir ;;
+  esac
+
+  case $INSTALL in
+  [\\/$]* | ?:[\\/]* ) ac_INSTALL=$INSTALL ;;
+  *) ac_INSTALL=$ac_dots$INSTALL ;;
+  esac
+
+  if test x"$ac_file" != x-; then
+    { echo "$as_me:6452: creating $ac_file" >&5
+echo "$as_me: creating $ac_file" >&6;}
+    rm -f "$ac_file"
+  fi
+  # Let's still pretend it is `configure' which instantiates (i.e., don't
+  # use $as_me), people would be surprised to read:
+  #    /* config.h.  Generated automatically by config.status.  */
+  configure_input="Generated automatically from `echo $ac_file_in |
+                                                 sed 's,.*/,,'` by configure."
+
+  # First look for the input files in the build tree, otherwise in the
+  # src tree.
+  ac_file_inputs=`IFS=:
+    for f in $ac_file_in; do
+      case $f in
+      -) echo $tmp/stdin ;;
+      [\\/$]*)
+         # Absolute (can't be DOS-style, as IFS=:)
+         test -f "$f" || { { echo "$as_me:6470: error: cannot find input file: $f" >&5
+echo "$as_me: error: cannot find input file: $f" >&2;}
+   { (exit 1); exit 1; }; }
+         echo $f;;
+      *) # Relative
+         if test -f "$f"; then
+           # Build tree
+           echo $f
+         elif test -f "$srcdir/$f"; then
+           # Source tree
+           echo $srcdir/$f
+         else
+           # /dev/null tree
+           { { echo "$as_me:6483: error: cannot find input file: $f" >&5
+echo "$as_me: error: cannot find input file: $f" >&2;}
+   { (exit 1); exit 1; }; }
+         fi;;
+      esac
+    done` || { (exit 1); exit 1; }
+EOF
+cat >>$CONFIG_STATUS <<EOF
+  sed "$ac_vpsub
+$extrasub
+EOF
+cat >>$CONFIG_STATUS <<\EOF
+:t
+/@[a-zA-Z_][a-zA-Z_0-9]*@/!b
+s,@configure_input@,$configure_input,;t t
+s,@srcdir@,$ac_srcdir,;t t
+s,@top_srcdir@,$ac_top_srcdir,;t t
+s,@INSTALL@,$ac_INSTALL,;t t
+" $ac_file_inputs | (eval "$ac_sed_cmds") >$tmp/out
+  rm -f $tmp/stdin
+  if test x"$ac_file" != x-; then
+    mv $tmp/out $ac_file
+  else
+    cat $tmp/out
+    rm -f $tmp/out
+  fi
+
+done
+EOF
+
+cat >>$CONFIG_STATUS <<\EOF
+
+{ (exit 0); exit 0; }
+EOF
+chmod +x $CONFIG_STATUS
+ac_clean_files=$ac_clean_files_save
+
+# configure is writing to config.log, and then calls config.status.
+# config.status does its own redirection, appending to config.log.
+# Unfortunately, on DOS this fails, as config.log is still kept open
+# by configure, so config.status won't be able to write to it; its
+# output is simply discarded.  So we exec the FD to /dev/null,
+# effectively closing config.log, so it can be properly (re)opened and
+# appended to by config.status.  When coming back to configure, we
+# need to make the FD available again.
+if test "$no_create" != yes; then
+  ac_cs_success=:
+  exec 5>/dev/null
+  $SHELL $CONFIG_STATUS || ac_cs_success=false
+  exec 5>>config.log
+  # Use ||, not &&, to avoid exiting from the if with $? = 1, which
+  # would make configure fail if this is the last instruction.
+  $ac_cs_success || { (exit 1); exit 1; }
+fi
+
+#--------------------------------------------------------------------
Index: docs/tcldom.html
===================================================================
RCS file: docs/tcldom.html
diff -N docs/tcldom.html
--- /dev/null	1 Jan 1970 00:00:00 -0000
+++ docs/tcldom.html	3 Nov 2005 11:21:16 -0000
@@ -0,0 +1,426 @@
+<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>TclDOM</title><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="refentry"><h1 class="title"><a name="id614542">TclDOM</a></h1><h2>Contents</h2><ul><li><a href="#synopsis">Synopsis</a></li><li><a href="#Description">Description</a></li><li><a href="#Packages-and-Namespaces">Packages and Namespaces</a></li><li><a href="#Tokens">Tokens</a></li><li><a href="#Document-and-Node-Commands">Document and Node Commands</a></li><li><a href="#DOM-Interfaces">DOM Interfaces</a></li><li><a href="#Convenience-Commands-and-Methods">Convenience Commands and Methods</a></li><li><a href="#Commands">Commands</a><ul><li><a href="#Commands-::dom::DOMImplementation">::dom::DOMImplementation</a><ul><li><a href="#Commands-::dom::DOMImplementation-Command-Options">Command Options</a></li></ul></li><li><a href="#Commands-::dom::document">::dom::document</a></li><li><a href="#Commands-dom::node">dom::node</a></li><li><a href="#Commands-dom::element">dom::element</a></li><li><a href="#Commands-dom::processinginstruction">dom::processinginstruction</a></li><li><a href="#Commands-dom::event">dom::event</a></li></ul></li><li><a href="#Errors">Errors</a></li><li><a href="#Implementations">Implementations</a><ul><li><a href="#Implementations-Tcl-Implementation">Tcl Implementation</a><ul><li><a href="#Implementations-Tcl-Implementation-Limitations">Limitations</a></li></ul></li><li><a href="#Implementations-libxml2-Implementation">libxml2 Implementation</a><ul><li><a href="#Implementations-libxml2-Implementation-Limitations">Limitations</a></li></ul></li></ul></li></ul><div class="refnamediv"><h2>Name</h2><p>::dom::DOMImplementation, ::dom::hasfeature, ::dom::create, ::dom::destroy, ::dom::parse, ::dom::serialize, ::dom::document, ::dom::documenttype, ::dom::node, ::dom::element, ::dom::event, ::dom::selectNode, ::dom::isNode, ::dom::xinclude, ::dom::prefix2namespaceURI, ::dom::trim &#8212; Tcl language binding for the W3C Document Object Model</p></div><div class="refsynopsisdiv"><a name="synopsis"></a><h2>Synopsis</h2><div class="tclcmdsynopsis" id="id752047"><a name="id752047"></a>
+      <span class="command" id="id752049"><a name="package_require_dom"></a><tt class="command">package require dom</tt> </span>
+    </div><br><span class="tclpkgsynopsis"><pre>package require dom ?3.1?</pre></span><div class="tclcmdsynopsis" id="id752084"><a name="id752084"></a>
+      <span class="command" id="id752086"><a name="__dom__DOMImplementation"></a><tt class="command">::dom::DOMImplementation</tt> </span>
+      <i class="replaceable"><tt>method</tt></i>
+      ?args...?
+    </div><div class="tclcmdsynopsis" id="id752114"><a name="id752114"></a>
+      <span class="command" id="id752116"><a name="__dom__hasfeature"></a><tt class="command">::dom::hasfeature</tt> </span>
+      <i class="replaceable"><tt>feature</tt></i>
+       <i class="replaceable"><tt>version</tt></i>
+    </div><div class="tclcmdsynopsis" id="id752141"><a name="id752141"></a>
+      <span class="command" id="id752143"><a name="__dom__create"></a><tt class="command">::dom::create</tt> </span>
+    </div><div class="tclcmdsynopsis" id="id752149"><a name="id752149"></a>
+      <span class="command" id="id752152"><a name="__dom__destroy"></a><tt class="command">::dom::destroy</tt> </span>
+      <i class="replaceable"><tt>token</tt></i>
+    </div><div class="tclcmdsynopsis" id="id752167"><a name="id752167"></a>
+      <span class="command" id="id752169"><a name="__dom__parse"></a><tt class="command">::dom::parse</tt> </span>
+      <i class="replaceable"><tt>xml</tt></i>
+      ?option value...?
+    </div><div class="tclcmdsynopsis" id="id752204"><a name="id752204"></a>
+      <span class="command" id="id752206"><a name="__dom__serialize"></a><tt class="command">::dom::serialize</tt> </span>
+      <i class="replaceable"><tt>token</tt></i>
+      ?option value...?
+    </div><div class="tclcmdsynopsis" id="id752241"><a name="id752241"></a>
+      <span class="command" id="id752243"><a name="__dom__document"></a><tt class="command">::dom::document</tt> </span>
+      <i class="replaceable"><tt>method</tt></i>
+       <i class="replaceable"><tt>token</tt></i>
+      ?args...?
+    </div><div class="tclcmdsynopsis" id="id752280"><a name="id752280"></a>
+      <span class="command" id="id752282"><a name="__dom__documenttype"></a><tt class="command">::dom::documenttype</tt> </span>
+      <i class="replaceable"><tt>method</tt></i>
+       <i class="replaceable"><tt>token</tt></i>
+      ?args...?
+    </div><div class="tclcmdsynopsis" id="id752320"><a name="id752320"></a>
+      <span class="command" id="id752322"><a name="__dom__node"></a><tt class="command">::dom::node</tt> </span>
+      <i class="replaceable"><tt>method</tt></i>
+       <i class="replaceable"><tt>token</tt></i>
+      ?args...?
+    </div><div class="tclcmdsynopsis" id="id752359"><a name="id752359"></a>
+      <span class="command" id="id752361"><a name="__dom__element"></a><tt class="command">::dom::element</tt> </span>
+      <i class="replaceable"><tt>method</tt></i>
+       <i class="replaceable"><tt>token</tt></i>
+      ?args...?
+    </div><div class="tclcmdsynopsis" id="id752398"><a name="id752398"></a>
+      <span class="command" id="id752400"><a name="__dom__event"></a><tt class="command">::dom::event</tt> </span>
+      <i class="replaceable"><tt>method</tt></i>
+       <i class="replaceable"><tt>token</tt></i>
+      ?args...?
+    </div><div class="tclcmdsynopsis" id="id752437"><a name="id752437"></a>
+      <span class="command" id="id752440"><a name="__dom__selectNode"></a><tt class="command">::dom::selectNode</tt> </span>
+      <i class="replaceable"><tt>token</tt></i>
+       <i class="replaceable"><tt>xpath</tt></i>
+      ?option value...?
+    </div><div class="tclcmdsynopsis" id="id752477"><a name="id752477"></a>
+      <span class="command" id="id752479"><a name="__dom__isNode"></a><tt class="command">::dom::isNode</tt> </span>
+      <i class="replaceable"><tt>token</tt></i>
+    </div><div class="tclcmdsynopsis" id="id752494"><a name="id752494"></a>
+      <span class="command" id="id752497"><a name="__dom__xinclude"></a><tt class="command">::dom::xinclude</tt> </span>
+      <i class="replaceable"><tt>doc</tt></i>
+    </div><div class="tclcmdsynopsis" id="id752512"><a name="id752512"></a>
+      <span class="command" id="id752514"><a name="__dom__prefix2namespaceURI"></a><tt class="command">::dom::prefix2namespaceURI</tt> </span>
+      <i class="replaceable"><tt>node</tt></i>
+       <i class="replaceable"><tt>prefix</tt></i>
+    </div><div class="tclcmdsynopsis" id="id752539"><a name="id752539"></a>
+      <span class="command" id="id752541"><a name="__dom__trim"></a><tt class="command">::dom::trim</tt> </span>
+      <i class="replaceable"><tt>doc</tt></i>
+    </div><h3>Tcl Namespace Usage</h3>
+      <br><tt class="tclnamespace">::dom</tt>
+      <br><tt class="tclnamespace">::dom::tcl</tt>
+      <br><tt class="tclnamespace">::dom::libxml2</tt>
+    <p></p></div><div class="refsect1" lang="en"><a name="id752557"></a><h2>Description</h2><p>TclDOM is a Tcl language binding for the <a href="http://www.w3c.org/DOM/" target="_top">W3C Document Object Model</a> (DOM).  DOM provides a view of a XML (or HTML) document as a tree structure.  Currently, TclDOM only supports XML documents.</p><p>The package implements most of the DOM Level 1 interfaces and also some Level 2 and Level 3 interfaces.  There are also a number of non-standard commands and methods provided for the convenience of application developers (these are documented).</p><p>The DOM specification should be read in conjunction with this reference manual, as it explains the meaning and purpose of the various interfaces.  This manual is not a tutorial on how to use the DOM.</p><p>TclDOM also provides several implementations of the API:  a pure-Tcl implementation, a C implementation (based on TclDOMPro) and another C implementation based on the Gnome libxml2 library.</p></div><div class="refsect1" lang="en"><a name="id752594"></a><h2>Packages and Namespaces</h2><p>TclDOM defines the <tt class="tclpackage">dom</tt> package and also a Tcl namespace using that same name.</p><p>Implementations define their own package name and Tcl namespace within the <tt class="tclnamespace">::dom</tt> Tcl namespace:</p><div class="variablelist"><dl><dt><span class="term">Tcl implementation</span></dt><dd><p>Package <tt class="tclpackage">dom::tcl</tt>, Tcl namespace <tt class="tclnamespace">::dom::tcl</tt>.</p></dd><dt><span class="term">TclDOMPro</span></dt><dd><p>Package <tt class="tclpackage">dom::c</tt>, Tcl namespace <tt class="tclnamespace">::dom::c</tt>.</p></dd><dt><span class="term">libxml2</span></dt><dd><p>Package <tt class="tclpackage">dom::libxml2</tt>, Tcl namespace <tt class="tclnamespace">::dom::libxml2</tt>.</p></dd></dl></div><p>Each DOM Document is allocated a Tcl namespace within the <tt class="tclnamespace">::dom</tt> Tcl namespace.  All storage for the document and commands are defined within that Tcl namespace.</p></div><div class="refsect1" lang="en"><a name="id752693"></a><h2>Tokens</h2><p>The TclDOM API uses <span class="emphasis"><em>tokens</em></span> as identifiers for nodes within the document tree.  This technique has been used to allow alternate implementations of TclDOM to be efficient, while retaining compatibility with the pure-Tcl implementation.</p><p>The format of the token itself as well as the data structure referred to by the token are <span class="emphasis"><em>not</em></span> public and an application should not rely on these.  Instead, an application should use the accessor methods provided by the API.</p><p>There is no requirement to always use the same token for a node.  In fact, an important performance optimisation for some implementations is to create a new token when a node is accessed, regardless of whether a token has already been issued for that node.  This implies that in order to test whether two tokens refer to the same node it is not sufficient to test the string values of the tokens; the <tt class="tclmethod">isSameNode</tt> method must be used for this purpose.  For example,</p><div class="informalexample"><pre class="programlisting">
+proc NodeCompare1 {A B} {
+    return [string equal $A $B]
+}
+proc NodeCompare2 {A B} {
+    return [$A isSameNode $B]
+}
+</pre></div><p>In the above example, <tt class="literal">NodeCompare2</tt> correctly determines whether its two arguments refer to the same node.</p></div><div class="refsect1" lang="en"><a name="id752757"></a><h2>Document and Node Commands</h2><p>Each Document and Node has a Tcl command defined that may be used to control the object.  This command may be used to invoke the methods by the <a href="#__dom__document"><span><b class="tclcommand">::dom::document</b></span></a> command (for Documents) or the <a href="#__dom__node"><span><b class="tclcommand">::dom::node</b></span></a> command (for all other Nodes).  If a Document' or Node's Tcl command is destroyed then the Document or Node is also destroyed.</p></div><div class="refsect1" lang="en"><a name="id752784"></a><h2>DOM Interfaces</h2><p>Each <span class="emphasis"><em>Interface</em></span> in the DOM specification is implemented with a Tcl command in the <tt class="tclnamespace">dom</tt> namespace.  A few interfaces have not been mapped to Tcl commands because Tcl already provides the required functionality, for example the <tt class="classname">CharacterData</tt> interface.</p><p><span class="emphasis"><em>method</em></span>s for interfaces are methods (subcommands) of the corresponding Tcl command.</p><p>Each <span class="emphasis"><em>attribute</em></span> of an interface is a configuration option for an object in the document tree.</p></div><div class="refsect1" lang="en"><a name="id752824"></a><h2>Convenience Commands and Methods</h2><p>DOM doesn't always provide an interface, method or attribute for every function required.  For example, until DOM Level 3 for was no standard for creating, parsing and serializing a document.  Sometimes using the standard DOM interface is awkward.  TclDOM provides a number of non-standard features to overcome these problems.</p><p>A major convenience is that each method of the <tt class="classname">DOMImplementation</tt> interface is also defined as a command.  For example, rather than using <a href="#dom__DOMImplementation_create"><span><b class="tclcommand">dom::DOMImplementation create</b></span></a> to create a new document, the shorter command <a href="#dom__create"><span><b class="tclcommand">dom::create</b></span></a> may be used.</p><p>Implementations may also provide direct access to specific features.  Refer to the documentation for a DOM implementation.</p></div><div class="refsect1" lang="en"><a name="id752866"></a><h2>Commands</h2><div class="refsect2" lang="en"><a name="id752872"></a><h3><a href="#__dom__DOMImplementation"><span><b class="tclcommand">::dom::DOMImplementation</b></span></a></h3><p>The <a href="#__dom__DOMImplementation"><span><b class="tclcommand">::dom::DOMImplementation</b></span></a> command implements the <tt class="classname">DOMImplementation</tt> DOM interface.  It is used to provide implementation-specific features not explicitly defined in the DOM specification.</p><div class="refsect3" lang="en"><a name="id752897"></a><h4>Command Options</h4><p>The following command options may be used.  These are also available as commands.</p><div class="variablelist"><dl><dt><span class="term"><tt class="methodname">hasFeature</tt></span></dt><dd><div class="tclcmdsynopsis" id="id752918"><a name="id752918"></a>
+	        hasFeature
+	         <i class="replaceable"><tt>feature</tt></i>
+	      </div><p>Provides a test for existence of a feature.  Returns <tt class="literal">1</tt> if a feature is implemented, <tt class="literal">0</tt> otherwise.</p></dd><dt><span class="term"><tt class="methodname">create</tt></span></dt><dd><div class="tclcmdsynopsis" id="id752967"><a name="id752967"></a>
+	        create
+	         <i class="replaceable"><tt>type</tt></i>
+	      </div><p>Creates the root node of a new DOM document.  The document element type may be specified as an argument, in which case that element is created.  The return value is a token referring to the root node of the newly created document.  A Tcl command is also created with the same name as the document's token.  This command is a shortcut for the <a href="#__dom__document"><span><b class="tclcommand">::dom::document</b></span></a> command.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Non-standard method.  DOM Level 2 introduced the <tt class="methodname">createDocument</tt> method.</p></div></dd><dt><span class="term"><tt class="methodname">createDocument</tt></span></dt><dd><div class="tclcmdsynopsis" id="id753026"><a name="id753026"></a>
+	        createDocument
+	         <i class="replaceable"><tt>nsURI</tt></i>
+	         <i class="replaceable"><tt>type</tt></i>
+	         <i class="replaceable"><tt>doctype</tt></i>
+	      </div><p>Creates the root node of a new DOM document.  The document element namespace URI and local-name (element type) may be specified as an argument, in which case that element is created.  If the document type is given then the newly created document is configured to use that document type.  The return value is a token referring to the root node of the newly created document.  A Tcl command is also created with the same name as the document's token.  This command is a shortcut for the <a href="#__dom__document"><span><b class="tclcommand">::dom::document</b></span></a> command.</p></dd><dt><span class="term"><tt class="methodname">createDocumentType</tt></span></dt><dd><div class="tclcmdsynopsis" id="id753092"><a name="id753092"></a>
+	        createDocumentType
+	         <i class="replaceable"><tt>name</tt></i>
+	         <i class="replaceable"><tt>publicid</tt></i>
+	         <i class="replaceable"><tt>systemid</tt></i>
+	         <i class="replaceable"><tt>internaldtd</tt></i>
+	      </div><p>Creates a Document Type Declaration.  The return value is a token for the newly created document type declaration.  A Tcl command is also created with the same name as the document type's token.  This command is a shortcut for the <a href="#__dom__documenttype"><span><b class="tclcommand">::dom::documenttype</b></span></a> command.</p></dd><dt><span class="term"><tt class="methodname">createNode</tt></span></dt><dd><div class="tclcmdsynopsis" id="id753162"><a name="id753162"></a>
+	        createNode
+	         <i class="replaceable"><tt>token</tt></i>
+	         <i class="replaceable"><tt>xpath</tt></i>
+	      </div><p>May create a node in the document.  <tt class="option"><i class="replaceable"><tt>token</tt></i></tt> specifies a context for the XPath expression given by <tt class="option"><i class="replaceable"><tt>xpath</tt></i></tt>.  The expression must resolve to a node.  If the node exists then no further action is taken.  Otherwise the node is created.  The token of the matched or newly created node is returned.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Non-standard method.</p></div></dd><dt><span class="term"><tt class="methodname">destroy</tt></span></dt><dd><div class="tclcmdsynopsis" id="id753226"><a name="id753226"></a>
+	        destroy
+	         <i class="replaceable"><tt>token</tt></i>
+	      </div><p>This method frees all data structures associated with a DOM document or node.  The <tt class="option"><i class="replaceable"><tt>token</tt></i></tt> argument must refer to a valid token for any document or any node in the tree of a document.</p><p>When the given token refers to a DOM document then the entire document is destroyed; the Tcl namespace for the document is deleted and all document and node commands are deleted.  All tokens for the document or nodes in the document become invalid.</p><p>When the token refers to a node the node is removed from the tree before it is destroyed.  If the node has children or attributes, they will also be destroyed.  The Tcl command for the node is deleted.</p></dd><dt><span class="term"><tt class="methodname">isNode</tt></span></dt><dd><div class="tclcmdsynopsis" id="id753286"><a name="id753286"></a>
+	        isNode
+	         <i class="replaceable"><tt>token</tt></i>
+	      </div><p>Tests whether the given token is a valid token for some DOM node.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Non-standard method.</p></div></dd><dt><span class="term"><tt class="methodname">parse</tt></span></dt><dd><div class="tclcmdsynopsis" id="id753328"><a name="id753328"></a>
+	        parse
+	         <i class="replaceable"><tt>xml</tt></i>
+	        ?<i class="replaceable"><tt>option</tt></i> <i class="replaceable"><tt>value</tt></i>?
+	      </div><p>This method parses XML formatted text given by the <tt class="option"><i class="replaceable"><tt>xml</tt></i></tt> argument and constructs a DOM tree for the document.  The return result is the token of the root node of the newly created document.  The document will also have a Tcl command associated with it, see the <tt class="tclmethod">createDocument</tt> method.</p><p>This method uses the <a href="http://tclxml.sourceforge.net/" target="_top">TclXML</a> package to perform the parsing operation.  The <tt class="tclpackage">dom</tt> package itself does not include an XML parser.  TclXML supports the use of multiple parser implementations.  The <tt class="option">-parser</tt> may be used to specify which XML parser class to use.</p><p>All options not listed below are passed to the TclXML parser.</p><p>Valid configuration options are:</p><div class="variablelist"><dl><dt><span class="term">[-parser]  [[[{}] |  [expat] |  [tcl]]]</span></dt><dd><p>This option specifies the name of a TclXML parser class to use to parse the XML data.  The given parser class must be registered with the TclXML package.  If an empty string is given then the default parser class is used.  If an explicit value is given and that parser class is not registered then the command will fail, despite the fact that another parser may be available.</p></dd><dt><span class="term">[-progresscommand]  [<i class="replaceable"><tt>script</tt></i>]</span></dt><dd><p>This option specifies a Tcl command to be invoked from time to time while the DOM tree is being constructed.  The script will be invoked after a certain number of element start tags have been processed, given by the <tt class="option">-chunksize</tt> option.</p></dd><dt><span class="term">[-chunksize]  [<i class="replaceable"><tt>integer</tt></i>]</span></dt><dd><p>This option specifies how many element start tags to process before invoking the script given by the <tt class="option">-progresscommand</tt> option.</p></dd></dl></div></dd><dt><span class="term"><tt class="methodname">selectNode</tt></span></dt><dd><div class="tclcmdsynopsis" id="id753561"><a name="id753561"></a>
+	        selectNode
+	         <i class="replaceable"><tt>token</tt></i>
+	         <i class="replaceable"><tt>xpath</tt></i>
+		?option value...?
+	      </div><p>Resolves the XPath location path given by <tt class="option"><i class="replaceable"><tt>xpath</tt></i></tt>.  <tt class="option"><i class="replaceable"><tt>token</tt></i></tt> is the initial context for the location path.  Returns the resulting nodeset as a (static) Tcl list.</p><p>The following options may be specified:</p><div class="variablelist"><dl><dt><span class="term"><tt class="option">-namespaces</tt></span></dt><dd><p>The value for this option is a list of prefix-URI pairs.  Each of these pairs defines an XML Namespace and its prefix for the purposes of evaluating the XPath expression.  The document itself may use a different prefix for the same XML Namespace.</p><p>This option may be repeated, in which case the lists of namespace pairs are merged and all of the XML Namespaces registered.</p></dd></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Non-standard method.</p></div></dd><dt><span class="term"><tt class="methodname">serialize</tt></span></dt><dd><div class="tclcmdsynopsis" id="id753666"><a name="id753666"></a>
+	        serialize
+		 <i class="replaceable"><tt>token</tt></i>
+	        ?<i class="replaceable"><tt>option</tt></i> <i class="replaceable"><tt>value</tt></i>?
+	      </div><p>This method returns the XML formatted text corresponding to the node given by <tt class="option">token</tt>.  The text is guaranteed to be a well-formed XML document, unless the <tt class="option">-method</tt> option specifies a non-XML output method.</p><p>Valid configuration options are:</p><div class="variablelist"><dl><dt><span class="term">[-method]  [xml|html|text]</span></dt><dd><p>Specifies how the document tree is to be serialized as text.  The allowed values correspond to the output methods defined by the XSLT v1.0 W3C Recommendation.  The <tt class="literal">xml</tt> method produces output that conforms to the XML syntax.  The <tt class="literal">html</tt> method produces output that conforms to HTML syntax.  The <tt class="literal">text</tt> method serializes only the text nodes of the document and disables all output escaping.</p></dd><dt><span class="term">[-indent]  [<i class="replaceable"><tt>boolean</tt></i>]</span></dt><dd><p>Specifies that the output is to be "pretty-printed", ie. element content is indented to provide a visual indication of nesting levels.</p></dd><dt><span class="term">[-encoding]  [<i class="replaceable"><tt>encoding</tt></i>]</span></dt><dd><p>Specifies that the output is to be encoded using the given character encoding.  If the encoding is <tt class="literal">utf-8</tt> (the default) then the output is treated as a string within Tcl.  If any other encoding is specified then the output is treated as a ByteArray object (ie. as binary).</p></dd><dt><span class="term">[-newline]  [<i class="replaceable"><tt>elementlist</tt></i>]</span></dt><dd><p>This option specifies a list of element types for which newline characters will be added before and after the start and end tags for those elements upon serialization.  This option is deprecated: the  [-indent] option should be used instead.</p><p>White space is significant in XML, so the <tt class="tclpackage">dom</tt> package never adds extra white space for purposes of "pretty-printing" the XML source document.  On some platforms, such as VMS, this can actually cause serious problems due to line length limitations.  This option provides the convenience of adding newlines to certain nominated element types for formatting the source into lines.</p><p>Examples:</p><p>Suppose the following DOM document is constructed:</p><div class="informalexample"><pre class="programlisting">
+set doc [::dom::DOMImplementation create]
+set top [::dom::document createElement $doc Root]
+set node [::dom::document createElement $top First]
+::dom::document createElement $node Second
+::dom::document createElement $top First
+</pre></div><p>Without the <tt class="option">-newline</tt> option the serialized document would be:</p><div class="informalexample"><pre class="programlisting">
+::dom::DOMImplementation serialize $doc
+<tt class="computeroutput">
+&lt;?xml version="1.0"?&gt;
+&lt;!DOCTYPE Root&gt;
+&lt;Root&gt;&lt;First&gt;&lt;Second/&gt;&lt;/First&gt;&lt;First/&gt;&lt;/Root&gt;
+
+</tt>
+</pre></div><p>With the <tt class="option">-newline</tt> option the serialized document would be:</p><div class="informalexample"><pre class="programlisting">
+::dom::DOMImplementation serialize $doc -newline First
+<tt class="computeroutput">
+&lt;?xml version="1.0"?&gt;
+&lt;!DOCTYPE Root&gt;
+&lt;Root&gt;
+&lt;First&gt;
+&lt;Second/&gt;
+&lt;/First&gt;
+&lt;First/&gt;
+&lt;/Root&gt;
+
+</tt>
+</pre></div></dd></dl></div></dd><dt><span class="term"><tt class="methodname">trim</tt></span></dt><dd><div class="tclcmdsynopsis" id="id753979"><a name="id753979"></a>
+		trim
+		 <i class="replaceable"><tt>token</tt></i>
+	      </div><p>This method removes any node containing only white space from the document tree of the node given by <tt class="option"><i class="replaceable"><tt>token</tt></i></tt>.</p></dd></dl></div></div></div><div class="refsect2" lang="en"><a name="id754013"></a><h3><a href="#__dom__document"><span><b class="tclcommand">::dom::document</b></span></a></h3><p>This command implements the Document interface in the DOM specification.  The most important aspect of this command are its factory methods for creating nodes.</p><p>The methods accepted by this command are as follows:</p><div class="variablelist"><dl><dt><span class="term"><tt class="methodname">cget</tt></span></dt><dd><div class="tclcmdsynopsis" id="id754043"><a name="id754043"></a>
+	      <tt class="methodname">cget</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       -option
+	    </div><p>This method returns the value of the given configuration option.</p></dd><dt><span class="term"><tt class="methodname">configure</tt></span></dt><dd><div class="tclcmdsynopsis" id="id754082"><a name="id754082"></a>
+	      <tt class="methodname">configure</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	      ?<i class="replaceable"><tt>option</tt></i> <i class="replaceable"><tt>value</tt></i>...?
+	    </div><p>This method sets the value of the given configuration options.</p><p>Valid configuration options are:</p><div class="variablelist"><dl><dt><span class="term">[-doctype]</span></dt><dd><p>Specifies the token of the Document Type Declaration node.</p><p>This is a read-only option.  Use the factory method to create a Document Type Declaration node.</p></dd><dt><span class="term">[-implementation]</span></dt><dd><p>Specifies the token of the document's implementation.</p><p>This is a read-only option.</p></dd><dt><span class="term">[-documentElement]</span></dt><dd><p>Specifies the token of the document's document element node.  A document node may only have one document element, but may have other types of children (such as comments).</p><p>This is a read-only option.  Use the factory method to create the document element node.</p></dd></dl></div></dd><dt><span class="term"><tt class="methodname">createElement</tt></span></dt><dd><div class="tclcmdsynopsis" id="id754217"><a name="id754217"></a>
+	      <tt class="methodname">createElement</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>type</tt></i>
+	    </div><p>This method creates an element node as a child of the given node specified by <tt class="option"><i class="replaceable"><tt>token</tt></i></tt> and returns the new node's token as its result.  <tt class="option"><i class="replaceable"><tt>token</tt></i></tt> must be a node of type element, document or documentFragment.  The new, child element is added as the last child of <tt class="option"><i class="replaceable"><tt>token</tt></i></tt>'s list of children.  The new element's type is given by the <tt class="option"><i class="replaceable"><tt>type</tt></i></tt> argument.  The new element is created with an empty attribute list.</p><p>A Tcl command is created with the same name as the new node's token.  This command is a shortcut for the <a href="#__dom__node"><span><b class="tclcommand">::dom::node</b></span></a> command.</p></dd><dt><span class="term"><tt class="methodname">createElementNS</tt></span></dt><dd><div class="tclcmdsynopsis" id="id754292"><a name="id754292"></a>
+	      <tt class="methodname">createElementNS</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>nsuri</tt></i>
+	       <i class="replaceable"><tt>qualname</tt></i>
+	    </div><p>This method creates an element node in an XML Namespace as a child of the given node specified by <tt class="option"><i class="replaceable"><tt>token</tt></i></tt> and returns the new node's token as its result.  <tt class="option"><i class="replaceable"><tt>token</tt></i></tt> must be a node of type element, document or documentFragment.  The new, child element is added as the last child of <tt class="option"><i class="replaceable"><tt>token</tt></i></tt>'s list of children.  The new element is created in the XML Namespace given by the namespace URI <tt class="option"><i class="replaceable"><tt>nsuri</tt></i></tt>.  The new element's qualifed name (QName) is given by the <tt class="option"><i class="replaceable"><tt>qualname</tt></i></tt> argument.  Qualified names have the form <tt class="literal">prefix:local-part</tt>.  The new element is created with an empty attribute list.</p><p>A Tcl command is created with the same name as the new node's token.  This command is a shortcut for the <a href="#__dom__node"><span><b class="tclcommand">::dom::node</b></span></a> command.</p></dd><dt><span class="term"><tt class="methodname">createDocumentFragment</tt></span></dt><dd><div class="tclcmdsynopsis" id="id754388"><a name="id754388"></a>
+	      <tt class="methodname">createDocumentFragment</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	    </div><p>This method creates a documentFragment node as a child of the given node specified by <tt class="option"><i class="replaceable"><tt>token</tt></i></tt> and returns the new node's token as its result.  <tt class="option"><i class="replaceable"><tt>token</tt></i></tt> must be a node of type element, document or documentFragment.</p><p>A Tcl command is created with the same name as the new node's token.  This command is a shortcut for the <a href="#__dom__node"><span><b class="tclcommand">::dom::node</b></span></a> command.</p></dd><dt><span class="term"><tt class="methodname">createTextNode</tt></span></dt><dd><div class="tclcmdsynopsis" id="id754442"><a name="id754442"></a>
+	      <tt class="methodname">createTextNode</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>text</tt></i>
+	    </div><p>This method creates a textNode node as a child of the given node specified by <tt class="option"><i class="replaceable"><tt>token</tt></i></tt> and returns the new node's token as its result.  <tt class="option"><i class="replaceable"><tt>token</tt></i></tt> must be a node of type element, document or documentFragment.  The new, child textNode is added as the last child of <tt class="option"><i class="replaceable"><tt>token</tt></i></tt>'s list of children.  The new textNode is created with its value set to <tt class="option"><i class="replaceable"><tt>text</tt></i></tt>.</p><p>A Tcl command is created with the same name as the new node's token.  This command is a shortcut for the <a href="#__dom__node"><span><b class="tclcommand">::dom::node</b></span></a> command.</p></dd><dt><span class="term"><tt class="methodname">createComment</tt></span></dt><dd><div class="tclcmdsynopsis" id="id754515"><a name="id754515"></a>
+	      <tt class="methodname">createComment</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>data</tt></i>
+	    </div><p>This method creates a comment node as a child of the given node specified by <tt class="option"><i class="replaceable"><tt>token</tt></i></tt> and returns the new node's token as its result.  <tt class="option"><i class="replaceable"><tt>token</tt></i></tt> must be a node of type element, document or documentFragment.  The new, child comment is added as the last child of <tt class="option"><i class="replaceable"><tt>token</tt></i></tt>'s list of children.  The new comment is created with its value set to <tt class="option"><i class="replaceable"><tt>data</tt></i></tt>.</p><p>A Tcl command is created with the same name as the new node's token.  This command is a shortcut for the <a href="#__dom__node"><span><b class="tclcommand">::dom::node</b></span></a> command.</p></dd><dt><span class="term"><tt class="methodname">createCDATASection</tt></span></dt><dd><div class="tclcmdsynopsis" id="id754589"><a name="id754589"></a>
+	      <tt class="methodname">createCDATASection</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>text</tt></i>
+	    </div><p>TclDOM does not distinguish between textNodes and CDATASection nodes.  Accordingly, this method creates a textNode node as a child of the given node specified by <tt class="option"><i class="replaceable"><tt>token</tt></i></tt> and returns the new node's token as its result.  <tt class="option"><i class="replaceable"><tt>token</tt></i></tt> must be a node of type element, document or documentFragment.  The new, child textNode is added as the last child of <tt class="option"><i class="replaceable"><tt>token</tt></i></tt>'s list of children.  The new node is created with its value set to <tt class="option"><i class="replaceable"><tt>text</tt></i></tt> and has the attribute <tt class="option">-cdatasection</tt> set to the value <tt class="literal">1</tt>.</p><p>A Tcl command is created with the same name as the new node's token.  This command is a shortcut for the <a href="#__dom__node"><span><b class="tclcommand">::dom::node</b></span></a> command.</p></dd><dt><span class="term"><tt class="methodname">createProcessingInstruction</tt></span></dt><dd><div class="tclcmdsynopsis" id="id754674"><a name="id754674"></a>
+	      <tt class="methodname">createProcessingInstruction</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>target</tt></i>
+	       <i class="replaceable"><tt>data</tt></i>
+	    </div><p>This method creates a processingInstruction node as a child of the given node specified by <tt class="option"><i class="replaceable"><tt>token</tt></i></tt> and returns the new node's token as its result.  <tt class="option"><i class="replaceable"><tt>token</tt></i></tt> must be a node of type element, document or documentFragment.  The new, child processingInstruction is added as the last child of <tt class="option"><i class="replaceable"><tt>token</tt></i></tt>'s list of children.  The new node is created with its name set to <tt class="option"><i class="replaceable"><tt>target</tt></i></tt> and its value set to <tt class="option"><i class="replaceable"><tt>data</tt></i></tt>.</p><p>A Tcl command is created with the same name as the new node's token.  This command is a shortcut for the <a href="#__dom__node"><span><b class="tclcommand">::dom::node</b></span></a> command.</p></dd><dt><span class="term"><tt class="methodname">createAttribute</tt></span></dt><dd><div class="tclcmdsynopsis" id="id754762"><a name="id754762"></a>
+	      <tt class="methodname">createAttribute</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>name</tt></i>
+	    </div><p>This method creates an attribute node for the given element specified by <tt class="option"><i class="replaceable"><tt>token</tt></i></tt> and returns the new node's token as its result.  <tt class="option"><i class="replaceable"><tt>token</tt></i></tt> must be a node of type element.  The new attribute is created with its name set to <tt class="option"><i class="replaceable"><tt>name</tt></i></tt> and an empty value.</p><p>A Tcl command is created with the same name as the new node's token.  This command is a shortcut for the <a href="#__dom__node"><span><b class="tclcommand">::dom::node</b></span></a> command.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This method is included for completeness with respect to the DOM specification.  The preferred method for setting element attributes is to use the <a href="#__dom__element"><span><b class="tclcommand">::dom::element</b></span></a> command.</p></div></dd><dt><span class="term"><tt class="methodname">createEntity</tt></span></dt><dd><div class="tclcmdsynopsis" id="id754845"><a name="id754845"></a>
+	      <tt class="methodname">createEntity</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	    </div><p>Not currently implemented.</p></dd><dt><span class="term"><tt class="methodname">createEntityReference</tt></span></dt><dd><div class="tclcmdsynopsis" id="id754875"><a name="id754875"></a>
+	      <tt class="methodname">createEntityReference</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>name</tt></i>
+	    </div><p>Not currently implemented.</p></dd><dt><span class="term"><tt class="methodname">createEvent</tt></span></dt><dd><div class="tclcmdsynopsis" id="id754914"><a name="id754914"></a>
+	      <tt class="methodname">createEvent</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>name</tt></i>
+	    </div><p>This method creates an event node in the document specified by <tt class="option"><i class="replaceable"><tt>token</tt></i></tt> and returns the new node's token as its result.  <tt class="option"><i class="replaceable"><tt>token</tt></i></tt> must be a node of type document.  The event type is specified by <tt class="option"><i class="replaceable"><tt>name</tt></i></tt>.</p><p>A Tcl command is created with the same name as the new node's token.  This command is a shortcut for the <a href="#__dom__event"><span><b class="tclcommand">::dom::event</b></span></a> command.</p></dd><dt><span class="term"><tt class="methodname">getElementsByTagName</tt></span></dt><dd><div class="tclcmdsynopsis" id="id754981"><a name="id754981"></a>
+	      <tt class="methodname">getElementsByTagName</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>name</tt></i>
+	    </div><p>This method searches the node given by the argument <tt class="option"><i class="replaceable"><tt>token</tt></i></tt> for child elements with a type matching the argument <tt class="option"><i class="replaceable"><tt>name</tt></i></tt>.  The name <tt class="literal">*</tt> matches all elements.  All descendants of <tt class="option"><i class="replaceable"><tt>token</tt></i></tt> are searched.  This method returns a "live-list"; the return result of this method is the name of a Tcl variable, the content of which is a Tcl list containing tokens for all elements that match.</p></dd><dt><span class="term"><tt class="methodname">dtd</tt></span></dt><dd><div class="tclcmdsynopsis" id="id755045"><a name="id755045"></a>
+	      <tt class="methodname">dtd</tt>
+	      validate
+	    </div><p>This method performs DTD validation upon the document.  If the method returns successfully, then the document is valid.  Otherwise the document is invalid and the error returned contains the reason.</p></dd><dt><span class="term"><tt class="methodname">schema</tt></span></dt><dd><div class="tclcmdsynopsis" id="id755077"><a name="id755077"></a>
+	      <tt class="methodname"><i class="replaceable"><tt>submethod</tt></i></tt>
+	      ?<i class="replaceable"><tt>args</tt></i>...?
+	    </div><p>This method performs XML Schema validation upon the document.  Schema validation is performed in two steps.  First the document is compiled into a schema document.  Second, the schema document is used to schema-validate an instance document.</p><p>Example:</p><div class="informalexample"><pre class="programlisting">
+set schema [dom::parse $XML]
+$schema schema compile
+set instance [dom::parse $XML2]
+$schema schema validate $instance
+</pre></div><p>If the document is changed after compiling, then schema document must be recompiled.</p></dd></dl></div></div><div class="refsect2" lang="en"><a name="id755129"></a><h3><a href="#dom__node"><span><b class="tclcommand">dom::node</b></span></a></h3><p>This command implements generic functions for DOM nodes.</p><p>The methods accepted by this command are as follows:</p><div class="variablelist"><dl><dt><span class="term"><tt class="methodname">cget</tt></span></dt><dd><div class="tclcmdsynopsis" id="id755157"><a name="id755157"></a>
+	      <tt class="methodname">cget</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       option
+	    </div><p>This method returns the value of the given configuration option for the node given by <tt class="option"><i class="replaceable"><tt>token</tt></i></tt>.</p></dd><dt><span class="term"><tt class="methodname">configure</tt></span></dt><dd><div class="tclcmdsynopsis" id="id755201"><a name="id755201"></a>
+	      <tt class="methodname">configure</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	      ?<i class="replaceable"><tt>option</tt></i> <i class="replaceable"><tt>value</tt></i>...?
+	    </div><p>This method sets the value of the given configuration option for the node given by <tt class="option"><i class="replaceable"><tt>token</tt></i></tt>.</p><p>Valid configuration options are as follows:</p><div class="variablelist"><dl><dt><span class="term">[-nodeName]</span></dt><dd><p>Returns the node name.  This is a read-only option.</p><p>The DOM specification gives the meaning of names for different types of nodes.  For example, the <tt class="option">-nodeName</tt> option of an element node is the element type.</p></dd><dt><span class="term">[-nodeType]</span></dt><dd><p>Returns the type of the node given by <tt class="option"><i class="replaceable"><tt>token</tt></i></tt>.  This is a read-only option.</p></dd><dt><span class="term"><tt class="option">-parentNode</tt></span></dt><dd><p>Returns the parent node of the node given by <tt class="option"><i class="replaceable"><tt>token</tt></i></tt>.  This is a read-only option.</p></dd><dt><span class="term"><tt class="option">-childNodes</tt></span></dt><dd><p>Returns the name of a Tcl variable which contains a list of the children of the node given by <tt class="option"><i class="replaceable"><tt>token</tt></i></tt>.  The variable contains the "live" list of children.  This is a read-only option.</p></dd><dt><span class="term"><tt class="option">-firstChild</tt></span></dt><dd><p>Returns the first child node of the node given by <tt class="option"><i class="replaceable"><tt>token</tt></i></tt>.  This is a read-only option.</p></dd><dt><span class="term"><tt class="option">-lastChild</tt></span></dt><dd><p>Returns the last child node of the node given by <tt class="option"><i class="replaceable"><tt>token</tt></i></tt>.  This is a read-only option.</p></dd><dt><span class="term"><tt class="option">-previousSibling</tt></span></dt><dd><p>Returns the parent's child node which appears before this node.  If this child is the first child of its parent then returns an empty string.  This is a read-only option.</p></dd><dt><span class="term"><tt class="option">-nextSibling</tt></span></dt><dd><p>Returns the parent's child node which appears after this node.  If this child is the last child of its parent then returns an empty string.  This is a read-only option.</p></dd><dt><span class="term"><tt class="option">-attributes</tt></span></dt><dd><p>Returns the name of a Tcl array variable which contains the attribute list for an element node.  If the node is not an element type node then returns an empty string.  The indices of the array are attribute names, and the values of the array elements are their corresponding attribute values.  This is a read-only option.</p></dd><dt><span class="term"><tt class="option">-nodeValue</tt>  [<i class="replaceable"><tt>data</tt></i>]</span></dt><dd><p>Specifies the value of a node.  The DOM specification gives the meaning of values for different types of nodes.  For example, the <tt class="option">-nodeValue</tt> option of a textNode node is the node's text.</p></dd></dl></div></dd><dt><span class="term"><tt class="methodname">insertBefore</tt></span></dt><dd><div class="tclcmdsynopsis" id="id755490"><a name="id755490"></a>
+	      <tt class="methodname">insertBefore</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>newchild</tt></i>
+	       <i class="replaceable"><tt>refchild</tt></i>
+	    </div><p>This method removes the node given by <tt class="option"><i class="replaceable"><tt>newchild</tt></i></tt> from its parent.  If no <tt class="option"><i class="replaceable"><tt>refchild</tt></i></tt> argument is given then <tt class="option"><i class="replaceable"><tt>newchild</tt></i></tt> is appended to <tt class="option"><i class="replaceable"><tt>token</tt></i></tt>'s list of children.  If the <tt class="option"><i class="replaceable"><tt>refchild</tt></i></tt> argument is given then this method adds <tt class="option"><i class="replaceable"><tt>newchild</tt></i></tt> as a child of <tt class="option"><i class="replaceable"><tt>token</tt></i></tt>.  The new child node is positioned before the node <tt class="option"><i class="replaceable"><tt>refchild</tt></i></tt> in <tt class="option"><i class="replaceable"><tt>token</tt></i></tt>'s list of children.  Returns an empty string.</p></dd><dt><span class="term"><tt class="methodname">replaceChild</tt></span></dt><dd><div class="tclcmdsynopsis" id="id755584"><a name="id755584"></a>
+	      <tt class="methodname">replaceChild</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>newchild</tt></i>
+	       <i class="replaceable"><tt>oldchild</tt></i>
+	    </div><p>This method removes the node given by <tt class="option"><i class="replaceable"><tt>newchild</tt></i></tt> from its parent.  It then also removes the node given by <tt class="option"><i class="replaceable"><tt>oldchild</tt></i></tt> from <tt class="option"><i class="replaceable"><tt>token</tt></i></tt>.  <tt class="option"><i class="replaceable"><tt>newchild</tt></i></tt> is then added as a child of <tt class="option"><i class="replaceable"><tt>token</tt></i></tt> in <tt class="option"><i class="replaceable"><tt>oldchild</tt></i></tt>'s original position in the list of children.  The method returns the token <tt class="option"><i class="replaceable"><tt>oldchild</tt></i></tt>, which will now have no parent.</p></dd><dt><span class="term"><tt class="methodname">removeChild</tt></span></dt><dd><div class="tclcmdsynopsis" id="id755668"><a name="id755668"></a>
+	      <tt class="methodname">removeChild</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>oldchild</tt></i>
+	    </div><p>This method removes the node given by <tt class="option"><i class="replaceable"><tt>oldchild</tt></i></tt> from its parent, <tt class="option"><i class="replaceable"><tt>token</tt></i></tt>.  The method returns the token <tt class="option"><i class="replaceable"><tt>oldchild</tt></i></tt>, which will now have no parent.</p></dd><dt><span class="term"><tt class="methodname">appendChild</tt></span></dt><dd><div class="tclcmdsynopsis" id="id755723"><a name="id755723"></a>
+	      <tt class="methodname">appendChild</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>newchild</tt></i>
+	    </div><p>This method removes the node given by <tt class="option"><i class="replaceable"><tt>newchild</tt></i></tt> from its parent.  <tt class="option"><i class="replaceable"><tt>newchild</tt></i></tt> is then appended to the end of the list of children for node <tt class="option"><i class="replaceable"><tt>token</tt></i></tt>.  The method returns the token <tt class="option"><i class="replaceable"><tt>newchild</tt></i></tt>.</p></dd><dt><span class="term"><tt class="methodname">hasChildNodes</tt></span></dt><dd><div class="tclcmdsynopsis" id="id755783"><a name="id755783"></a>
+	      <tt class="methodname">hasChildNodes</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	    </div><p>Returns <tt class="literal">1</tt> if the given node has any child nodes, <tt class="literal">0</tt> otherwise.</p></dd><dt><span class="term"><tt class="methodname">isSameNode</tt></span></dt><dd><div class="tclcmdsynopsis" id="id755824"><a name="id755824"></a>
+	      <tt class="methodname">isSameNode</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>ref</tt></i>
+	    </div><p>Returns <tt class="literal">1</tt> if the given node is the same node as the node given by the  [<tt class="literal">ref</tt>] token, <tt class="literal">0</tt> otherwise.</p></dd><dt><span class="term"><tt class="methodname">cloneNode</tt></span></dt><dd><div class="tclcmdsynopsis" id="id755886"><a name="id755886"></a>
+	      <tt class="methodname">cloneNode</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>deep</tt></i>
+	    </div><p>This method makes a copy the node given by <tt class="option"><i class="replaceable"><tt>token</tt></i></tt>.  If the argument <tt class="option"><i class="replaceable"><tt>deep</tt></i></tt> is not specified or has the value <tt class="literal">0</tt> then only the node itself is copied, not its children.  If the argument <tt class="option"><i class="replaceable"><tt>deep</tt></i></tt> has the value <tt class="literal">1</tt> then <tt class="option"><i class="replaceable"><tt>token</tt></i></tt>'s children are also copied recursively.  This method returns the token of the newly created node.  This new node will have no parent.</p></dd><dt><span class="term"><tt class="methodname">children</tt></span></dt><dd><div class="tclcmdsynopsis" id="id755959"><a name="id755959"></a>
+	      <tt class="methodname">children</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	    </div><p>This is a convenience method which returns the list of child nodes for the given node as a (static) Tcl list.</p><p>This is not a standard DOM method for this interface.</p></dd><dt><span class="term"><tt class="methodname">parent</tt></span></dt><dd><div class="tclcmdsynopsis" id="id755995"><a name="id755995"></a>
+	      <tt class="methodname">parent</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	    </div><p>This is a convenience method which returns the parent node for the given node.</p><p>This is not a standard DOM method for this interface.</p></dd><dt><span class="term"><tt class="methodname">path</tt></span></dt><dd><div class="tclcmdsynopsis" id="id756030"><a name="id756030"></a>
+	      <tt class="methodname">path</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	    </div><p>Returns a Tcl list of the ancestor nodes of the given node, starting with the root node.</p><p>This is not a standard DOM method for this interface.</p></dd><dt><span class="term"><tt class="methodname">createNode</tt></span></dt><dd><div class="tclcmdsynopsis" id="id756065"><a name="id756065"></a>
+	      <tt class="methodname">createNode</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>xpath</tt></i>
+	    </div><p>May create nodes in order to satisfy the given XPath location path.  The initial context for the location path is the node  [<i class="replaceable"><tt>token</tt></i>].  For more detail, see the <a href="#__dom__createNode"><span><b class="tclcommand">::dom::createNode</b></span></a> command.</p><p>This is not a standard DOM method for this interface.</p></dd><dt><span class="term"><tt class="methodname">selectNode</tt></span></dt><dd><div class="tclcmdsynopsis" id="id756126"><a name="id756126"></a>
+	      <tt class="methodname">selectNode</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>xpath</tt></i>
+	    </div><p>Returns a (static) Tcl list of nodes selected by the XPath location path  [<i class="replaceable"><tt>xpath</tt></i>].  The initial context for the location path is the node  [<i class="replaceable"><tt>token</tt></i>].  For more detail, see the <a href="#__dom__selectNode"><span><b class="tclcommand">::dom::selectNode</b></span></a> command.</p><p>This is not a standard DOM method for this interface.</p></dd><dt><span class="term"><tt class="methodname">stringValue</tt></span></dt><dd><div class="tclcmdsynopsis" id="id756195"><a name="id756195"></a>
+	      <tt class="methodname">stringValue</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	    </div><p>Returns the string value of the node given by  [<i class="replaceable"><tt>token</tt></i>].  The string value of a node is defined by the XPath specification: for element nodes it is the concatenation of the string values of all descendant text nodes, for text nodes it is the node's character data value, for attribute nodes it is the attribute value, for comment nodes it is the comment data and for processing instruction nodes it is the PI data.</p><p>This is not a standard DOM method for this interface.</p></dd><dt><span class="term"><tt class="methodname">addEventListener</tt></span></dt><dd><div class="tclcmdsynopsis" id="id756245"><a name="id756245"></a>
+	      <tt class="methodname">addEventListener</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>type</tt></i>
+	       <i class="replaceable"><tt>listener</tt></i>
+	      ?option value...?
+	    </div><p>Register an event listener for the node given by  [<i class="replaceable"><tt>token</tt></i>] listening for events of type  [<i class="replaceable"><tt>type</tt></i>].  The event mechanism functions as described in the W3C DOM Level 2 Event module.</p><p>When an event of type  [<i class="replaceable"><tt>type</tt></i>] occurs the script  [<i class="replaceable"><tt>listener</tt></i>] is evaluated, in the global context.  The token of the event node is appended to the script.</p><p>If the  [<i class="replaceable"><tt>listener</tt></i>] argument is omitted then the listener for the given event type is returned.</p><p>Valid options are:</p><div class="variablelist"><dl><dt><span class="term">[-usecapture]  [<i class="replaceable"><tt>boolean</tt></i>]</span></dt><dd><p>If true the listener is triggered in the event capturing phase.  If false the listener is triggered in the event bubbling phase.</p></dd></dl></div></dd><dt><span class="term"><tt class="methodname">removeEventListener</tt></span></dt><dd><div class="tclcmdsynopsis" id="id756406"><a name="id756406"></a>
+	      <tt class="methodname">removeEventListener</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>type</tt></i>
+	       <i class="replaceable"><tt>listener</tt></i>
+	      ?option value...?
+	    </div><p>Removes an event listener previously registered for the node given by  [<i class="replaceable"><tt>token</tt></i>] listening for events of type  [<i class="replaceable"><tt>type</tt></i>].</p><p>Valid options are:</p><div class="variablelist"><dl><dt><span class="term">[-usecapture]  [<i class="replaceable"><tt>boolean</tt></i>]</span></dt><dd><p>If true the capturing listener is removed.  If false the bubbling listener is removed.</p></dd></dl></div></dd><dt><span class="term"><tt class="methodname">dispatchEvent</tt></span></dt><dd><div class="tclcmdsynopsis" id="id756528"><a name="id756528"></a>
+	      <tt class="methodname">dispatchEvent</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>event</tt></i>
+	    </div><p>Dispatches the event given by  [<i class="replaceable"><tt>event</tt></i>] with target node  [<i class="replaceable"><tt>token</tt></i>].  The event mechanism functions as described in the W3C DOM Level 2 Event module.  The event enters the capturing phase first, followed by the bubbling phase.  During each phase any event listeners registered for the same event type as the event  [<i class="replaceable"><tt>event</tt></i>] are triggered; their script is evaluated.  Unless the script invokes the <tt class="tclmethod">stopPropagation</tt> method of the <a href="#dom__event"><span><b class="tclcommand">dom::event</b></span></a> command, all registered event listeners will be triggered.  The order in which listeners registered at a particular node for a particular phase are triggered is undefined.</p></dd></dl></div></div><div class="refsect2" lang="en"><a name="id756605"></a><h3><a href="#dom__element"><span><b class="tclcommand">dom::element</b></span></a></h3><p>This command provides functions for element type nodes.</p><p>Valid methods for this command are as follows:</p><div class="variablelist"><dl><dt><span class="term"><tt class="methodname">cget</tt></span></dt><dd><div class="tclcmdsynopsis" id="id756633"><a name="id756633"></a>
+	      <tt class="methodname">cget</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>option</tt></i>
+	    </div><p>This method returns the current setting of configuration options for an element.  See the <tt class="methodname">configure</tt> method for the list of valid configuration options.</p></dd><dt><span class="term"><tt class="methodname">configure</tt></span></dt><dd><div class="tclcmdsynopsis" id="id756678"><a name="id756678"></a>
+	      <tt class="methodname">configure</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	      ?<i class="replaceable"><tt>option</tt></i> <i class="replaceable"><tt>value</tt></i>...?
+	    </div><p>This method sets configuration options for an element.  Note that element type nodes only have read-only options.</p><p>Valid configuration options are as follows:</p><div class="variablelist"><dl><dt><span class="term"><tt class="option">-tagName</tt>  [<i class="replaceable"><tt>name</tt></i>]</span></dt><dd>The tag name, or element type, of this element.</dd><dt><span class="term"><tt class="option">-empty</tt>  [<i class="replaceable"><tt>boolean</tt></i>]</span></dt><dd><p>Sets whether this element was specified as an empty element when the document was parsed.  That is, XML empty element syntax such as <tt class="literal">&lt;Empty/&gt;</tt> was used.</p><p>This option has no effect upon output (serialization) of the XML document.  Empty element syntax is automatically used where appropriate.</p></dd></dl></div></dd><dt><span class="term"><tt class="methodname">getAttribute</tt></span></dt><dd><div class="tclcmdsynopsis" id="id756799"><a name="id756799"></a>
+	      <tt class="methodname">getAttribute</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>name</tt></i>
+	    </div><p>This method returns the attribute value of the attribute given by <tt class="option"><i class="replaceable"><tt>name</tt></i></tt>.  If the attribute does not exist, then an empty string is returned.</p></dd><dt><span class="term"><tt class="methodname">setAttribute</tt></span></dt><dd><div class="tclcmdsynopsis" id="id756845"><a name="id756845"></a>
+	      <tt class="methodname">setAttribute</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>name</tt></i>
+	       <i class="replaceable"><tt>value</tt></i>
+	    </div><p>This method sets the attribute value of the attribute given by <tt class="option"><i class="replaceable"><tt>name</tt></i></tt>.  If the attribute already exists then its value is replaced, otherwise the attribute is created.</p></dd><dt><span class="term"><tt class="methodname">removeAttribute</tt></span></dt><dd><div class="tclcmdsynopsis" id="id756900"><a name="id756900"></a>
+	      <tt class="methodname">removeAttribute</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>name</tt></i>
+	    </div><p>This method deletes the attribute given by <tt class="option"><i class="replaceable"><tt>name</tt></i></tt>.  If the attribute does not exist then the method has no effect.</p></dd><dt><span class="term"><tt class="methodname">getAttributeNode</tt></span></dt><dd><div class="tclcmdsynopsis" id="id756945"><a name="id756945"></a>
+	      <tt class="methodname">getAttributeNode</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>name</tt></i>
+	    </div><p>Not implemented.</p></dd><dt><span class="term"><tt class="methodname">setAttributeNode</tt></span></dt><dd><div class="tclcmdsynopsis" id="id756984"><a name="id756984"></a>
+	      <tt class="methodname">setAttributeNode</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>name</tt></i>
+	    </div><p>Not implemented.</p></dd><dt><span class="term"><tt class="methodname">removeAttributeNode</tt></span></dt><dd><div class="tclcmdsynopsis" id="id757024"><a name="id757024"></a>
+	      <tt class="methodname">removeAttributeNode</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>name</tt></i>
+	    </div><p>Not implemented.</p></dd><dt><span class="term"><tt class="methodname">getAttributeNS</tt></span></dt><dd><div class="tclcmdsynopsis" id="id757063"><a name="id757063"></a>
+	      <tt class="methodname">getAttributeNS</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>ns</tt></i>
+	       <i class="replaceable"><tt>name</tt></i>
+	    </div><p>This method returns the attribute value of the attribute given by <tt class="option"><i class="replaceable"><tt>name</tt></i></tt> in the XML namespace  [<i class="replaceable"><tt>ns</tt></i>].  If the attribute does not exist, then an empty string is returned.</p></dd><dt><span class="term"><tt class="methodname">setAttributeNS</tt></span></dt><dd><div class="tclcmdsynopsis" id="id757126"><a name="id757126"></a>
+	      <tt class="methodname">setAttributeNS</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>ns</tt></i>
+	       <i class="replaceable"><tt>name</tt></i>
+	       <i class="replaceable"><tt>value</tt></i>
+	    </div><p>This method sets the attribute value of the attribute given by <tt class="option"><i class="replaceable"><tt>name</tt></i></tt> in the XML namespace  [<i class="replaceable"><tt>ns</tt></i>].  If the attribute already exists then its value is replaced, otherwise the attribute is created.</p></dd><dt><span class="term"><tt class="methodname">removeAttributeNS</tt></span></dt><dd><div class="tclcmdsynopsis" id="id757199"><a name="id757199"></a>
+	      <tt class="methodname">removeAttributeNS</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>ns</tt></i>
+	       <i class="replaceable"><tt>name</tt></i>
+	    </div><p>This method deletes the attribute given by <tt class="option"><i class="replaceable"><tt>name</tt></i></tt> in the XML namespace  [<i class="replaceable"><tt>ns</tt></i>].  If the attribute does not exist then the method has no effect.</p></dd><dt><span class="term"><tt class="methodname">getElementsByTagName</tt></span></dt><dd><div class="tclcmdsynopsis" id="id757262"><a name="id757262"></a>
+	      <tt class="methodname">getElementsByTagName</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>name</tt></i>
+	    </div><p>This method searches the node given by the argument <tt class="option"><i class="replaceable"><tt>token</tt></i></tt> for descendant child elements with a type matching the argument <tt class="option"><i class="replaceable"><tt>name</tt></i></tt>.  The wildcard character <tt class="literal">*</tt> matches any element type.  The return result is a "live-list" which is represented by a Tcl variable.  This method returns the name of the Tcl variable that contains the list of tokens that match.</p></dd><dt><span class="term"><tt class="methodname">normalize</tt></span></dt><dd><div class="tclcmdsynopsis" id="id757322"><a name="id757322"></a>
+	      <tt class="methodname">normalize</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	    </div><p>This method recursively coalesces textNodes within the children of the given node.  textNodes which are adjacent in the DOM tree cannot be distinguished in the serialized XML document.</p></dd></dl></div></div><div class="refsect2" lang="en"><a name="id757348"></a><h3><a href="#dom__processinginstruction"><span><b class="tclcommand">dom::processinginstruction</b></span></a></h3><p>This command provides functions for processingInstruction type nodes.</p><p>Valid methods for this command are as follows:</p><div class="variablelist"><dl><dt><span class="term"><tt class="methodname">cget</tt></span></dt><dd><div class="tclcmdsynopsis" id="id757376"><a name="id757376"></a>
+	      <tt class="methodname">cget</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>option</tt></i>
+	    </div><p>This method returns the current setting of configuration options for an element.  See the <tt class="methodname">configure</tt> method for the list of valid configuration options.</p></dd><dt><span class="term"><tt class="methodname">configure</tt></span></dt><dd><div class="tclcmdsynopsis" id="id757421"><a name="id757421"></a>
+	      <tt class="methodname">configure</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	      ?<i class="replaceable"><tt>option</tt></i> <i class="replaceable"><tt>value</tt></i>...?
+	    </div><p>This method sets configuration options for a processing instruction.</p><p>Valid configuration options are as follows:</p><div class="variablelist"><dl><dt><span class="term"><tt class="option">-target</tt>  [<i class="replaceable"><tt>name</tt></i>]</span></dt><dd>This option sets the target of the processing instruction.  This is a read-only configuration option.</dd><dt><span class="term"><tt class="option">-data</tt>  [<i class="replaceable"><tt>data</tt></i>]</span></dt><dd><p>This option sets the data of the processing instruction.</p></dd></dl></div></dd></dl></div></div><div class="refsect2" lang="en"><a name="id757523"></a><h3><a href="#dom__event"><span><b class="tclcommand">dom::event</b></span></a></h3><p>This command provides functions for event type nodes.</p><p>Valid methods for this command are as follows:</p><div class="variablelist"><dl><dt><span class="term"><tt class="methodname">cget</tt></span></dt><dd><div class="tclcmdsynopsis" id="id757551"><a name="id757551"></a>
+	      <tt class="methodname">cget</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	    </div><p>This method retrieves configuration options for an event.</p><p>Valid configuration options are as follows:</p><div class="variablelist"><dl><dt><span class="term"><tt class="option">-altKey</tt></span></dt><dd>This option determines whether the ALT modifier key has been specified for this event.</dd><dt><span class="term"><tt class="option">-attrName</tt>, </span><span class="term"><tt class="option">-timeStamp</tt></span></dt><dd>This option gives the name of the attribute associated with this event.<p>This option gives the time at which the event was posted.  The value is the number of milliseconds since the epoch, which is compatible with the Tcl <span><b class="command">clock</b></span> command.  </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>The implementation of this method depends on the <tt class="methodname">Tcl_GetTime</tt> function.This function only became publically available in Tcl 8.4.  If a version of Tcl prior to 8.4 is being used, then this option will have the value <tt class="literal">0</tt>.</div></dd><dt><span class="term"><tt class="option">-type</tt></span></dt><dd>The type of this event.</dd><dt><span class="term"><tt class="option">-view</tt></span></dt><dd>This option gives whether the view of the event.</dd></dl></div></dd><dt><span class="term"><tt class="methodname">configure</tt></span></dt><dd><div class="tclcmdsynopsis" id="id757882"><a name="id757882"></a>
+	      <tt class="methodname">configure</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	      ?<i class="replaceable"><tt>option</tt></i> <i class="replaceable"><tt>value</tt></i>...?
+	    </div><p>This method sets the configuration options for an event.  However, all event options are read-only.  See the <tt class="methodname">cget</tt> method for the list of valid configuration options.</p></dd><dt><span class="term"><tt class="methodname">stopPropagation</tt></span></dt><dd><div class="tclcmdsynopsis" id="id757943"><a name="id757943"></a>
+	      <tt class="methodname">stopPropagation</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	    </div><p>This method cancels further propagation of the event.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>Invoking this method does not prevent event listeners at the current node from being triggered.</div></dd><dt><span class="term"><tt class="methodname">preventDefault</tt></span></dt><dd><div class="tclcmdsynopsis" id="id757979"><a name="id757979"></a>
+	      <tt class="methodname">preventDefault</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	    </div><p>This method stops the default action for this event from occurring.</p></dd><dt><span class="term"><tt class="methodname">initEvent</tt></span></dt><dd><div class="tclcmdsynopsis" id="id758010"><a name="id758010"></a>
+	      <tt class="methodname">initEvent</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>type</tt></i>
+	       <i class="replaceable"><tt>bubbles</tt></i>
+	       <i class="replaceable"><tt>cancelable</tt></i>
+	    </div><p>Initialise the event.</p><p>[<i class="replaceable"><tt>type</tt></i>] gives the type of the event.  Any of the event types defined by the W3C DOM Level 2 Event module may be specified, or a user-defined event type may be used instead.</p><p>[<i class="replaceable"><tt>bubbles</tt></i>] indicates whether the event will enter the bubbling phase after the capturing phase.   [<i class="replaceable"><tt>cancelable</tt></i>] indicates whether the event may be cancelled.</p></dd><dt><span class="term"><tt class="methodname">initUIEvent</tt></span></dt><dd><div class="tclcmdsynopsis" id="id758102"><a name="id758102"></a>
+	      <tt class="methodname">initUIEvent</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>type</tt></i>
+	       <i class="replaceable"><tt>bubbles</tt></i>
+	       <i class="replaceable"><tt>cancelable</tt></i>
+	       <i class="replaceable"><tt>view</tt></i>
+	       <i class="replaceable"><tt>detail</tt></i>
+	    </div><p>Initialise a user interface event.  See <tt class="tclmethod">initEvent</tt> for further information.</p><p>[<i class="replaceable"><tt>view</tt></i>] gives the view for the event (not supported by TclDOM).   [<i class="replaceable"><tt>detail</tt></i>] provides extra data for the event.</p></dd><dt><span class="term"><tt class="methodname">initMouseEvent</tt></span></dt><dd><div class="tclcmdsynopsis" id="id758202"><a name="id758202"></a>
+	      <tt class="methodname">initMouseEvent</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>type</tt></i>
+	       <i class="replaceable"><tt>bubbles</tt></i>
+	       <i class="replaceable"><tt>cancelable</tt></i>
+	       <i class="replaceable"><tt>view</tt></i>
+	       <i class="replaceable"><tt>detail</tt></i>
+	       <i class="replaceable"><tt>screenX</tt></i>
+	       <i class="replaceable"><tt>screenY</tt></i>
+	       <i class="replaceable"><tt>clientX</tt></i>
+	       <i class="replaceable"><tt>clientY</tt></i>
+	       <i class="replaceable"><tt>ctrlKey</tt></i>
+	       <i class="replaceable"><tt>altKey</tt></i>
+	       <i class="replaceable"><tt>shiftKey</tt></i>
+	       <i class="replaceable"><tt>metaKey</tt></i>
+	       <i class="replaceable"><tt>button</tt></i>
+	       <i class="replaceable"><tt>relatedNode</tt></i>
+	    </div><p>Initialise a mouse event.  See <tt class="tclmethod">initUIEvent</tt> for further information.</p><p>[<i class="replaceable"><tt>screenX</tt></i>] and  [<i class="replaceable"><tt>screenY</tt></i>] give the coordinates at which the event occurred relative to the screen.   [<i class="replaceable"><tt>screenX</tt></i>] and  [<i class="replaceable"><tt>screenY</tt></i>] give the coordinates at which the event occurred relative to the window.</p><p>[<i class="replaceable"><tt>ctrlKey</tt></i>],  [<i class="replaceable"><tt>altKey</tt></i>],  [<i class="replaceable"><tt>shiftKey</tt></i>],  [<i class="replaceable"><tt>metaKey</tt></i>] indicate whether the respective modifier key was pressed when the event occurred.</p><p>[<i class="replaceable"><tt>button</tt></i>] indicates which button, if any, was pressed when the event occurred.</p><p>[<i class="replaceable"><tt>relatedNode</tt></i>] specifies that a DOM node is associated with the event.</p></dd><dt><span class="term"><tt class="methodname">initMutationEvent</tt></span></dt><dd><div class="tclcmdsynopsis" id="id758473"><a name="id758473"></a>
+	      <tt class="methodname">initMutationEvent</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>type</tt></i>
+	       <i class="replaceable"><tt>bubbles</tt></i>
+	       <i class="replaceable"><tt>cancelable</tt></i>
+	       <i class="replaceable"><tt>relatedNode</tt></i>
+	       <i class="replaceable"><tt>prevValue</tt></i>
+	       <i class="replaceable"><tt>newValue</tt></i>
+	       <i class="replaceable"><tt>attrName</tt></i>
+	    </div><p>Initialise a tree mutation event event.  See <tt class="tclmethod">initEvent</tt> for further information.</p><p>[<i class="replaceable"><tt>relatedNode</tt></i>] specifies a DOM node to associate with the event.   [<i class="replaceable"><tt>prevValue</tt></i>] gives the previous value of the node.   [<i class="replaceable"><tt>newValue</tt></i>] gives the new value of the node.   [<i class="replaceable"><tt>attrName</tt></i>] gives the name of the attribute where the event is modifying an attribute value.</p></dd><dt><span class="term"><tt class="methodname">postUIEvent</tt></span></dt><dd><div class="tclcmdsynopsis" id="id758610"><a name="id758610"></a>
+	      <tt class="methodname">postUIEvent</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>type</tt></i>
+	      ?option <i class="replaceable"><tt>value</tt></i>...?
+	    </div><p>Non-standard convenience method that handles posting an user interface event with  [<i class="replaceable"><tt>token</tt></i>] as the target node.  This method performs the following functions:</p><div class="orderedlist"><ol type="1"><li><p>Create an event node,</p></li><li><p>Initialise the event node (using default values where required),</p></li><li><p>Dispatch the event,</p></li><li><p>Destroy the event node.</p></li></ol></div><p>[<i class="replaceable"><tt>type</tt></i>] gives the event type.</p><p>The following options are valid:</p><div class="variablelist"><dl><dt><span class="term"><tt class="option">-bubbles</tt></span></dt><dd><p>Indicates whether the event bubbles.</p></dd><dt><span class="term"><tt class="option">-cancelable</tt></span></dt><dd><p>Indicates whether the event can be cancelled.</p></dd><dt><span class="term"><tt class="option">-view</tt></span></dt><dd><p>The view.</p></dd><dt><span class="term"><tt class="option">-detail</tt></span></dt><dd><p>Extra data for the event.</p></dd></dl></div></dd><dt><span class="term"><tt class="methodname">postMouseEvent</tt></span></dt><dd><div class="tclcmdsynopsis" id="id758796"><a name="id758796"></a>
+	      <tt class="methodname">postMouseEvent</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>type</tt></i>
+	      ?option <i class="replaceable"><tt>value</tt></i>...?
+	    </div><p>Non-standard convenience method that handles posting a mouse event with  [<i class="replaceable"><tt>token</tt></i>] as the target node.  This method performs the following functions:</p><div class="orderedlist"><ol type="1"><li><p>Create an event node,</p></li><li><p>Initialise the event node (using default values where required),</p></li><li><p>Dispatch the event,</p></li><li><p>Destroy the event node.</p></li></ol></div><p>[<i class="replaceable"><tt>type</tt></i>] gives the event type.</p><p>The following options are valid:</p><div class="variablelist"><dl><dt><span class="term"><tt class="option">-bubbles</tt></span></dt><dd><p>Indicates whether the event bubbles.</p></dd><dt><span class="term"><tt class="option">-cancelable</tt></span></dt><dd><p>Indicates whether the event can be cancelled.</p></dd><dt><span class="term"><tt class="option">-view</tt></span></dt><dd><p>The view.</p></dd><dt><span class="term"><tt class="option">-detail</tt></span></dt><dd><p>Extra data for the event.</p></dd><dt><span class="term"><tt class="option">-screenX</tt></span></dt><dd><p>Gives the screen X coordinate.</p></dd><dt><span class="term"><tt class="option">-screenY</tt></span></dt><dd><p>Gives the screen Y coordinate.</p></dd><dt><span class="term"><tt class="option">-clientX</tt></span></dt><dd><p>Gives the window X coordinate.</p></dd><dt><span class="term"><tt class="option">-clientY</tt></span></dt><dd><p>Gives the window Y coordinate.</p></dd><dt><span class="term"><tt class="option">-ctrlKey</tt></span></dt><dd><p>Indicates whether the control modifier key was pressed.</p></dd><dt><span class="term"><tt class="option">-altKey</tt></span></dt><dd><p>Indicates whether the ALT modifier key was pressed.</p></dd><dt><span class="term"><tt class="option">-shiftKey</tt></span></dt><dd><p>Indicates whether the shift modifier key was pressed.</p></dd><dt><span class="term"><tt class="option">-metaKey</tt></span></dt><dd><p>Indicates whether the meta modifier key was pressed.</p></dd><dt><span class="term"><tt class="option">-button</tt></span></dt><dd><p>Gives the button pressed.</p></dd><dt><span class="term"><tt class="option">-relatedNode</tt></span></dt><dd><p>Gives a node to associate with the event.</p></dd></dl></div></dd><dt><span class="term"><tt class="methodname">postMutationEvent</tt></span></dt><dd><div class="tclcmdsynopsis" id="id759130"><a name="id759130"></a>
+	      <tt class="methodname">postMutationEvent</tt>
+	      <i class="replaceable"><tt>token</tt></i>
+	       <i class="replaceable"><tt>type</tt></i>
+	      ?option <i class="replaceable"><tt>value</tt></i>...?
+	    </div><p>Non-standard convenience method that handles posting a mutation event with  [<i class="replaceable"><tt>token</tt></i>] as the target node.  This method performs the following functions:</p><div class="orderedlist"><ol type="1"><li><p>Create an event node,</p></li><li><p>Initialise the event node (using default values where required),</p></li><li><p>Dispatch the event,</p></li><li><p>Destroy the event node.</p></li></ol></div><p>[<i class="replaceable"><tt>type</tt></i>] gives the event type.</p><p>The following options are valid:</p><div class="variablelist"><dl><dt><span class="term"><tt class="option">-bubbles</tt></span></dt><dd><p>Indicates whether the event bubbles.</p></dd><dt><span class="term"><tt class="option">-cancelable</tt></span></dt><dd><p>Indicates whether the event can be cancelled.</p></dd><dt><span class="term"><tt class="option">-relatedNode</tt></span></dt><dd><p>Gives a node to associate with the event.</p></dd><dt><span class="term"><tt class="option">-prevValue</tt></span></dt><dd><p>Gives the previous value of the target node.</p></dd><dt><span class="term"><tt class="option">-newValue</tt></span></dt><dd><p>Gives the new value of the target node.</p></dd><dt><span class="term"><tt class="option">-attrName</tt></span></dt><dd><p>Gives the name of the attribute modified.</p></dd></dl></div></dd></dl></div></div></div><div class="refsect1" lang="en"><a name="id759341"></a><h2>Errors</h2><p>If an operation results in an error condition, an error message is returned as a structured Tcl list.  The list has members as follows:</p><div class="informalexample"><pre class="programlisting">{domain level code node line message int1 int2 string1 string2 string3}</pre></div><p>The format of the list is described in the TclXML manual page.</p></div><div class="refsect1" lang="en"><a name="id759367"></a><h2>Implementations</h2><p>This section documents the various implmentations of the TclDOM API.</p><div class="refsect2" lang="en"><a name="id759377"></a><h3>Tcl Implementation</h3><p>The Tcl implementation is provided by the <tt class="tclpackage">dom::tcl</tt> package.</p><div class="refsect3" lang="en"><a name="id759391"></a><h4>Limitations</h4><p>This implementation is not able to preform the following functions:</p><div class="itemizedlist"><ul type="disc"><li><p>Validation: DTD, XML Schema or RelaxNG validation are not supported.</p></li><li><p>Character encodings: The TclDOM/tcl implementation itself does not handle character encodings other than utf-8.  Character encodings are handled by Tcl itself.</p></li></ul></div></div></div><div class="refsect2" lang="en"><a name="id759423"></a><h3>libxml2 Implementation</h3><p>The TclDOM/libxml2 implementation is a wrapper for the <a href="http://xmlsoft.org/" target="_top">Gnome libxml2 library</a>.  It is provided by the <tt class="tclpackage">dom::libxml2</tt> package.  It is a high-performance library, making use of Tcl objects for fast access to tree nodes.</p><p>On MS Windows, it is necessary to load all required packages separately.  For example:</p><div class="informalexample"><pre class="programlisting">
+package require xml
+package require xml::libxml2
+package require dom
+</pre></div><div class="refsect3" lang="en"><a name="id759460"></a><h4>Limitations</h4><div class="itemizedlist"><ul type="disc"><li><p>The TclXML/libxml2 parser must be used to parse an XML document.  It is not possible to use any other parser class.</p></li><li><p>RELAX-NG validation is not yet supported.</p></li><li><p>The importNode method has not been implemented.</p></li></ul></div></div></div></div></div></body></html>
Index: docs/tcldom.n
===================================================================
RCS file: docs/tcldom.n
diff -N docs/tcldom.n
--- /dev/null	1 Jan 1970 00:00:00 -0000
+++ docs/tcldom.n	3 Nov 2005 11:21:16 -0000
@@ -0,0 +1,1297 @@
+'\"
+'\" Copyright (c) 2004 Zveno Pty Ltd
+'\"
+'\"Zveno makes this software and all associated data and documentation
+'\"('Software') available free of charge for any purpose.  This software may
+'\"be copied, and distributed, with or without modifications; but this notice
+'\"must be included on any copy.
+'\"
+'\"The Software was developed for research purposes and Zveno does not
+'\"warrant that it is error free or fit for any purpose.  Zveno disclaims any
+'\"liability for all claims, expenses, losses, damages and costs any user may
+'\"incur as a result of using, copying or modifying the Software.
+'\"
+'\"
+'\" RCS: @(#) $Id: nroff.xsl,v 1.4 2004/01/15 08:18:34 balls Exp $
+'\" 
+.so man.macros
+.TH TclDOM n  TclXML "TclXML Package Commands"
+.BS
+'\" Note:  do not modify the .SH NAME line immediately below!
+.SH NAME
+::dom::DOMImplementation ::dom::hasfeature ::dom::create ::dom::destroy ::dom::parse ::dom::serialize ::dom::document ::dom::documenttype ::dom::node ::dom::element ::dom::event ::dom::selectNode ::dom::isNode ::dom::xinclude ::dom::prefix2namespaceURI ::dom::trim \- Tcl language binding for the W3C Document Object Model
+.BE
+
+.SH SYNOPSIS
+\fBpackage require dom\fP
+.sp
+\fB::dom::DOMImplementation\fI \fImethod\fR ?\fI args ... ?\fP
+.sp
+\fB::dom::hasfeature\fI \fIfeature\fR\fI \fIversion\fR\fP
+.sp
+\fB::dom::create\fP
+.sp
+\fB::dom::destroy\fI \fItoken\fR\fP
+.sp
+\fB::dom::parse\fI \fIxml\fR ?\fI option\fI value ... ?\fP
+.sp
+\fB::dom::serialize\fI \fItoken\fR ?\fI option\fI value ... ?\fP
+.sp
+\fB::dom::document\fI \fImethod\fR\fI \fItoken\fR ?\fI args ... ?\fP
+.sp
+\fB::dom::documenttype\fI \fImethod\fR\fI \fItoken\fR ?\fI args ... ?\fP
+.sp
+\fB::dom::node\fI \fImethod\fR\fI \fItoken\fR ?\fI args ... ?\fP
+.sp
+\fB::dom::element\fI \fImethod\fR\fI \fItoken\fR ?\fI args ... ?\fP
+.sp
+\fB::dom::event\fI \fImethod\fR\fI \fItoken\fR ?\fI args ... ?\fP
+.sp
+\fB::dom::selectNode\fI \fItoken\fR\fI \fIxpath\fR ?\fI option value ... ?\fP
+.sp
+\fB::dom::isNode\fI \fItoken\fR\fP
+.sp
+\fB::dom::xinclude\fI \fIdoc\fR\fP
+.sp
+\fB::dom::prefix2namespaceURI\fI \fInode\fR\fI \fIprefix\fR\fP
+.sp
+\fB::dom::trim\fI \fIdoc\fR\fP
+.BE
+
+.SH DESCRIPTION
+
+.PP
+TclDOM is a Tcl language binding for the W3C Document Object Model (DOM).  DOM provides a view of a XML (or HTML) document as a tree structure.  Currently, TclDOM only supports XML documents.
+
+.PP
+The package implements most of the DOM Level 1 interfaces and also some Level 2 and Level 3 interfaces.  There are also a number of non-standard commands and methods provided for the convenience of application developers (these are documented).
+
+.PP
+The DOM specification should be read in conjunction with this reference manual, as it explains the meaning and purpose of the various interfaces.  This manual is not a tutorial on how to use the DOM.
+
+.PP
+TclDOM also provides several implementations of the API:  a pure-Tcl implementation, a C implementation (based on TclDOMPro) and another C implementation based on the Gnome libxml2 library.
+
+.SH PACKAGES AND NAMESPACES
+
+.PP
+TclDOM defines the \fBdom\fR package and also a Tcl namespace using that same name.
+
+.PP
+Implementations define their own package name and Tcl namespace within the \fB::dom\fR Tcl namespace:
+
+.RS
+.TP
+\fI\fBTcl implementation\fR\fP 
+
+.PP
+Package \fBdom::tcl\fR, Tcl namespace \fB::dom::tcl\fR.
+
+.TP
+\fI\fBTclDOMPro\fR\fP 
+
+.PP
+Package \fBdom::c\fR, Tcl namespace \fB::dom::c\fR.
+
+.TP
+\fI\fBlibxml2\fR\fP 
+
+.PP
+Package \fBdom::libxml2\fR, Tcl namespace \fB::dom::libxml2\fR.
+
+.RE
+
+.PP
+Each DOM Document is allocated a Tcl namespace within the \fB::dom\fR Tcl namespace.  All storage for the document and commands are defined within that Tcl namespace.
+
+.SH TOKENS
+
+.PP
+The TclDOM API uses \fI tokens as identifiers for nodes within the document tree.  This technique has been used to allow alternate implementations of TclDOM to be efficient, while retaining compatibility with the pure-Tcl implementation.
+
+.PP
+The format of the token itself as well as the data structure referred to by the token are \fI not public and an application should not rely on these.  Instead, an application should use the accessor methods provided by the API.
+
+.PP
+There is no requirement to always use the same token for a node.  In fact, an important performance optimisation for some implementations is to create a new token when a node is accessed, regardless of whether a token has already been issued for that node.  This implies that in order to test whether two tokens refer to the same node it is not sufficient to test the string values of the tokens; the \fBisSameNode\fR method must be used for this purpose.  For example,
+.PP
+.CS
+
+proc NodeCompare1 {A B} {
+    return [string equal $A $B]
+}
+proc NodeCompare2 {A B} {
+    return [$A isSameNode $B]
+}
+
+.CE
+
+.PP
+In the above example, \fBNodeCompare2\fR correctly determines whether its two arguments refer to the same node.
+
+.SH DOCUMENT AND NODE COMMANDS
+
+.PP
+Each Document and Node has a Tcl command defined that may be used to control the object.  This command may be used to invoke the methods by the \fB::dom::document\fR command (for Documents) or the \fB::dom::node\fR command (for all other Nodes).  If a Document' or Node's Tcl command is destroyed then the Document or Node is also destroyed.
+
+.SH DOM INTERFACES
+
+.PP
+Each \fI Interface in the DOM specification is implemented with a Tcl command in the \fBdom\fR namespace.  A few interfaces have not been mapped to Tcl commands because Tcl already provides the required functionality, for example the \fBCharacterData\fR interface.
+
+.PP
+\fI methods for interfaces are methods (subcommands) of the corresponding Tcl command.
+
+.PP
+Each \fI attribute of an interface is a configuration option for an object in the document tree.
+
+.SH CONVENIENCE COMMANDS AND METHODS
+
+.PP
+DOM doesn't always provide an interface, method or attribute for every function required.  For example, until DOM Level 3 for was no standard for creating, parsing and serializing a document.  Sometimes using the standard DOM interface is awkward.  TclDOM provides a number of non-standard features to overcome these problems.
+
+.PP
+A major convenience is that each method of the \fBDOMImplementation\fR interface is also defined as a command.  For example, rather than using \fBdom::DOMImplementation create\fR to create a new document, the shorter command \fBdom::create\fR may be used.
+
+.PP
+Implementations may also provide direct access to specific features.  Refer to the documentation for a DOM implementation.
+
+.SH COMMANDS
+.SS \fB::dom::DOMImplementation\fR
+
+.PP
+The \fB::dom::DOMImplementation\fR command implements the \fBDOMImplementation\fR DOM interface.  It is used to provide implementation-specific features not explicitly defined in the DOM specification.
+.SS Command Options
+
+.PP
+The following command options may be used.  These are also available as commands.
+
+.RS
+.TP
+\fI\fB\fBhasFeature\fR\fR\fP 
+\fI hasFeature\fI \fIfeature\fR\fP
+.PP
+Provides a test for existence of a feature.  Returns \fB1\fR if a feature is implemented, \fB0\fR otherwise.
+
+.TP
+\fI\fB\fBcreate\fR\fR\fP 
+\fI create\fI \fItype\fR\fP
+.PP
+Creates the root node of a new DOM document.  The document element type may be specified as an argument, in which case that element is created.  The return value is a token referring to the root node of the newly created document.  A Tcl command is also created with the same name as the document's token.  This command is a shortcut for the \fB::dom::document\fR command.
+
+.PP
+\fB
+.PP
+Non-standard method.  DOM Level 2 introduced the \fBcreateDocument\fR method.
+\fR
+
+.TP
+\fI\fB\fBcreateDocument\fR\fR\fP 
+\fI createDocument\fI \fInsURI\fR\fI \fItype\fR\fI \fIdoctype\fR\fP
+.PP
+Creates the root node of a new DOM document.  The document element namespace URI and local-name (element type) may be specified as an argument, in which case that element is created.  If the document type is given then the newly created document is configured to use that document type.  The return value is a token referring to the root node of the newly created document.  A Tcl command is also created with the same name as the document's token.  This command is a shortcut for the \fB::dom::document\fR command.
+
+.TP
+\fI\fB\fBcreateDocumentType\fR\fR\fP 
+\fI createDocumentType\fI \fIname\fR\fI \fIpublicid\fR\fI \fIsystemid\fR\fI \fIinternaldtd\fR\fP
+.PP
+Creates a Document Type Declaration.  The return value is a token for the newly created document type declaration.  A Tcl command is also created with the same name as the document type's token.  This command is a shortcut for the \fB::dom::documenttype\fR command.
+
+.TP
+\fI\fB\fBcreateNode\fR\fR\fP 
+\fI createNode\fI \fItoken\fR\fI \fIxpath\fR\fP
+.PP
+May create a node in the document.  \fI \fItoken\fR\fR specifies a context for the XPath expression given by \fI \fIxpath\fR\fR.  The expression must resolve to a node.  If the node exists then no further action is taken.  Otherwise the node is created.  The token of the matched or newly created node is returned.
+
+.PP
+\fB
+.PP
+Non-standard method.
+\fR
+
+.TP
+\fI\fB\fBdestroy\fR\fR\fP 
+\fI destroy\fI \fItoken\fR\fP
+.PP
+This method frees all data structures associated with a DOM document or node.  The \fI \fItoken\fR\fR argument must refer to a valid token for any document or any node in the tree of a document.
+
+.PP
+When the given token refers to a DOM document then the entire document is destroyed; the Tcl namespace for the document is deleted and all document and node commands are deleted.  All tokens for the document or nodes in the document become invalid.
+
+.PP
+When the token refers to a node the node is removed from the tree before it is destroyed.  If the node has children or attributes, they will also be destroyed.  The Tcl command for the node is deleted.
+
+.TP
+\fI\fB\fBisNode\fR\fR\fP 
+\fI isNode\fI \fItoken\fR\fP
+.PP
+Tests whether the given token is a valid token for some DOM node.
+
+.PP
+\fB
+.PP
+Non-standard method.
+\fR
+
+.TP
+\fI\fB\fBparse\fR\fR\fP 
+\fI parse\fI \fIxml\fR ?\fI \fIoption\fR\fI \fIvalue\fR?\fP
+.PP
+This method parses XML formatted text given by the \fI \fIxml\fR\fR argument and constructs a DOM tree for the document.  The return result is the token of the root node of the newly created document.  The document will also have a Tcl command associated with it, see the \fBcreateDocument\fR method.
+
+.PP
+This method uses the TclXML package to perform the parsing operation.  The \fBdom\fR package itself does not include an XML parser.  TclXML supports the use of multiple parser implementations.  The \fI -parser\fR may be used to specify which XML parser class to use.
+
+.PP
+All options not listed below are passed to the TclXML parser.
+
+.PP
+Valid configuration options are:
+
+.RS
+.TP
+\fI\fB\fI -parser\fI  ?\fI {}\fI expat\fI tcl?\fR\fP 
+
+.PP
+This option specifies the name of a TclXML parser class to use to parse the XML data.  The given parser class must be registered with the TclXML package.  If an empty string is given then the default parser class is used.  If an explicit value is given and that parser class is not registered then the command will fail, despite the fact that another parser may be available.
+
+.TP
+\fI\fB\fI -progresscommand\fI \fIscript\fR\fR\fP 
+
+.PP
+This option specifies a Tcl command to be invoked from time to time while the DOM tree is being constructed.  The script will be invoked after a certain number of element start tags have been processed, given by the \fI -chunksize\fR option.
+
+.TP
+\fI\fB\fI -chunksize\fI \fIinteger\fR\fR\fP 
+
+.PP
+This option specifies how many element start tags to process before invoking the script given by the \fI -progresscommand\fR option.
+
+.RE
+
+.TP
+\fI\fB\fBselectNode\fR\fR\fP 
+\fI selectNode\fI \fItoken\fR\fI \fIxpath\fR ?\fI option value ... ?\fP
+.PP
+Resolves the XPath location path given by \fI \fIxpath\fR\fR.  \fI \fItoken\fR\fR is the initial context for the location path.  Returns the resulting nodeset as a (static) Tcl list.
+
+.PP
+The following options may be specified:
+
+.RS
+.TP
+\fI\fB\fI -namespaces\fR\fR\fP 
+
+.PP
+The value for this option is a list of prefix-URI pairs.  Each of these pairs defines an XML Namespace and its prefix for the purposes of evaluating the XPath expression.  The document itself may use a different prefix for the same XML Namespace.
+
+.PP
+This option may be repeated, in which case the lists of namespace pairs are merged and all of the XML Namespaces registered.
+
+.RE
+
+.PP
+\fB
+.PP
+Non-standard method.
+\fR
+
+.TP
+\fI\fB\fBserialize\fR\fR\fP 
+\fI serialize\fI \fItoken\fR ?\fI \fIoption\fR\fI \fIvalue\fR?\fP
+.PP
+This method returns the XML formatted text corresponding to the node given by \fI token\fR.  The text is guaranteed to be a well-formed XML document, unless the \fI -method\fR option specifies a non-XML output method.
+
+.PP
+Valid configuration options are:
+
+.RS
+.TP
+\fI\fB\fI -method\fI xml|html|text\fR\fP 
+
+.PP
+Specifies how the document tree is to be serialized as text.  The allowed values correspond to the output methods defined by the XSLT v1.0 W3C Recommendation.  The \fBxml\fR method produces output that conforms to the XML syntax.  The \fBhtml\fR method produces output that conforms to HTML syntax.  The \fBtext\fR method serializes only the text nodes of the document and disables all output escaping.
+
+.TP
+\fI\fB\fI -indent\fI \fIboolean\fR\fR\fP 
+
+.PP
+Specifies that the output is to be "pretty-printed", ie. element content is indented to provide a visual indication of nesting levels.
+
+.TP
+\fI\fB\fI -encoding\fI \fIencoding\fR\fR\fP 
+
+.PP
+Specifies that the output is to be encoded using the given character encoding.  If the encoding is \fButf-8\fR (the default) then the output is treated as a string within Tcl.  If any other encoding is specified then the output is treated as a ByteArray object (ie. as binary).
+
+.TP
+\fI\fB\fI -newline\fI \fIelementlist\fR\fR\fP 
+
+.PP
+This option specifies a list of element types for which newline characters will be added before and after the start and end tags for those elements upon serialization.  This option is deprecated: the \fI -indent option should be used instead.
+
+.PP
+White space is significant in XML, so the \fBdom\fR package never adds extra white space for purposes of "pretty-printing" the XML source document.  On some platforms, such as VMS, this can actually cause serious problems due to line length limitations.  This option provides the convenience of adding newlines to certain nominated element types for formatting the source into lines.
+
+.PP
+Examples:
+
+.PP
+Suppose the following DOM document is constructed:
+.PP
+.CS
+
+set doc [::dom::DOMImplementation create]
+set top [::dom::document createElement $doc Root]
+set node [::dom::document createElement $top First]
+::dom::document createElement $node Second
+::dom::document createElement $top First
+
+.CE
+
+.PP
+Without the \fI -newline\fR option the serialized document would be:
+.PP
+.CS
+
+::dom::DOMImplementation serialize $doc
+
+<?xml version="1.0"?>
+<!DOCTYPE Root>
+<Root><First><Second/></First><First/></Root>
+
+
+.CE
+
+.PP
+With the \fI -newline\fR option the serialized document would be:
+.PP
+.CS
+
+::dom::DOMImplementation serialize $doc -newline First
+
+<?xml version="1.0"?>
+<!DOCTYPE Root>
+<Root>
+<First>
+<Second/>
+</First>
+<First/>
+</Root>
+
+
+.CE
+
+.RE
+
+.TP
+\fI\fB\fBtrim\fR\fR\fP 
+\fI trim\fI \fItoken\fR\fP
+.PP
+This method removes any node containing only white space from the document tree of the node given by \fI \fItoken\fR\fR.
+
+.RE
+.SS \fB::dom::document\fR
+
+.PP
+This command implements the Document interface in the DOM specification.  The most important aspect of this command are its factory methods for creating nodes.
+
+.PP
+The methods accepted by this command are as follows:
+
+.RS
+.TP
+\fI\fB\fBcget\fR\fR\fP 
+\fBcget\fR\fI \fItoken\fR\fI -option\fP
+.PP
+This method returns the value of the given configuration option.
+
+.TP
+\fI\fB\fBconfigure\fR\fR\fP 
+\fBconfigure\fR\fI \fItoken\fR ?\fI \fIoption\fR\fI \fIvalue\fR ... ?\fP
+.PP
+This method sets the value of the given configuration options.
+
+.PP
+Valid configuration options are:
+
+.RS
+.TP
+\fI\fB\fI -doctype\fR\fP 
+
+.PP
+Specifies the token of the Document Type Declaration node.
+
+.PP
+This is a read-only option.  Use the factory method to create a Document Type Declaration node.
+
+.TP
+\fI\fB\fI -implementation\fR\fP 
+
+.PP
+Specifies the token of the document's implementation.
+
+.PP
+This is a read-only option.
+
+.TP
+\fI\fB\fI -documentElement\fR\fP 
+
+.PP
+Specifies the token of the document's document element node.  A document node may only have one document element, but may have other types of children (such as comments).
+
+.PP
+This is a read-only option.  Use the factory method to create the document element node.
+
+.RE
+
+.TP
+\fI\fB\fBcreateElement\fR\fR\fP 
+\fBcreateElement\fR\fI \fItoken\fR\fI \fItype\fR\fP
+.PP
+This method creates an element node as a child of the given node specified by \fI \fItoken\fR\fR and returns the new node's token as its result.  \fI \fItoken\fR\fR must be a node of type element, document or documentFragment.  The new, child element is added as the last child of \fI \fItoken\fR\fR's list of children.  The new element's type is given by the \fI \fItype\fR\fR argument.  The new element is created with an empty attribute list.
+
+.PP
+A Tcl command is created with the same name as the new node's token.  This command is a shortcut for the \fB::dom::node\fR command.
+
+.TP
+\fI\fB\fBcreateElementNS\fR\fR\fP 
+\fBcreateElementNS\fR\fI \fItoken\fR\fI \fInsuri\fR\fI \fIqualname\fR\fP
+.PP
+This method creates an element node in an XML Namespace as a child of the given node specified by \fI \fItoken\fR\fR and returns the new node's token as its result.  \fI \fItoken\fR\fR must be a node of type element, document or documentFragment.  The new, child element is added as the last child of \fI \fItoken\fR\fR's list of children.  The new element is created in the XML Namespace given by the namespace URI \fI \fInsuri\fR\fR.  The new element's qualifed name (QName) is given by the \fI \fIqualname\fR\fR argument.  Qualified names have the form \fBprefix:local-part\fR.  The new element is created with an empty attribute list.
+
+.PP
+A Tcl command is created with the same name as the new node's token.  This command is a shortcut for the \fB::dom::node\fR command.
+
+.TP
+\fI\fB\fBcreateDocumentFragment\fR\fR\fP 
+\fBcreateDocumentFragment\fR\fI \fItoken\fR\fP
+.PP
+This method creates a documentFragment node as a child of the given node specified by \fI \fItoken\fR\fR and returns the new node's token as its result.  \fI \fItoken\fR\fR must be a node of type element, document or documentFragment.
+
+.PP
+A Tcl command is created with the same name as the new node's token.  This command is a shortcut for the \fB::dom::node\fR command.
+
+.TP
+\fI\fB\fBcreateTextNode\fR\fR\fP 
+\fBcreateTextNode\fR\fI \fItoken\fR\fI \fItext\fR\fP
+.PP
+This method creates a textNode node as a child of the given node specified by \fI \fItoken\fR\fR and returns the new node's token as its result.  \fI \fItoken\fR\fR must be a node of type element, document or documentFragment.  The new, child textNode is added as the last child of \fI \fItoken\fR\fR's list of children.  The new textNode is created with its value set to \fI \fItext\fR\fR.
+
+.PP
+A Tcl command is created with the same name as the new node's token.  This command is a shortcut for the \fB::dom::node\fR command.
+
+.TP
+\fI\fB\fBcreateComment\fR\fR\fP 
+\fBcreateComment\fR\fI \fItoken\fR\fI \fIdata\fR\fP
+.PP
+This method creates a comment node as a child of the given node specified by \fI \fItoken\fR\fR and returns the new node's token as its result.  \fI \fItoken\fR\fR must be a node of type element, document or documentFragment.  The new, child comment is added as the last child of \fI \fItoken\fR\fR's list of children.  The new comment is created with its value set to \fI \fIdata\fR\fR.
+
+.PP
+A Tcl command is created with the same name as the new node's token.  This command is a shortcut for the \fB::dom::node\fR command.
+
+.TP
+\fI\fB\fBcreateCDATASection\fR\fR\fP 
+\fBcreateCDATASection\fR\fI \fItoken\fR\fI \fItext\fR\fP
+.PP
+TclDOM does not distinguish between textNodes and CDATASection nodes.  Accordingly, this method creates a textNode node as a child of the given node specified by \fI \fItoken\fR\fR and returns the new node's token as its result.  \fI \fItoken\fR\fR must be a node of type element, document or documentFragment.  The new, child textNode is added as the last child of \fI \fItoken\fR\fR's list of children.  The new node is created with its value set to \fI \fItext\fR\fR and has the attribute \fI -cdatasection\fR set to the value \fB1\fR.
+
+.PP
+A Tcl command is created with the same name as the new node's token.  This command is a shortcut for the \fB::dom::node\fR command.
+
+.TP
+\fI\fB\fBcreateProcessingInstruction\fR\fR\fP 
+\fBcreateProcessingInstruction\fR\fI \fItoken\fR\fI \fItarget\fR\fI \fIdata\fR\fP
+.PP
+This method creates a processingInstruction node as a child of the given node specified by \fI \fItoken\fR\fR and returns the new node's token as its result.  \fI \fItoken\fR\fR must be a node of type element, document or documentFragment.  The new, child processingInstruction is added as the last child of \fI \fItoken\fR\fR's list of children.  The new node is created with its name set to \fI \fItarget\fR\fR and its value set to \fI \fIdata\fR\fR.
+
+.PP
+A Tcl command is created with the same name as the new node's token.  This command is a shortcut for the \fB::dom::node\fR command.
+
+.TP
+\fI\fB\fBcreateAttribute\fR\fR\fP 
+\fBcreateAttribute\fR\fI \fItoken\fR\fI \fIname\fR\fP
+.PP
+This method creates an attribute node for the given element specified by \fI \fItoken\fR\fR and returns the new node's token as its result.  \fI \fItoken\fR\fR must be a node of type element.  The new attribute is created with its name set to \fI \fIname\fR\fR and an empty value.
+
+.PP
+A Tcl command is created with the same name as the new node's token.  This command is a shortcut for the \fB::dom::node\fR command.
+
+.PP
+\fB
+.PP
+This method is included for completeness with respect to the DOM specification.  The preferred method for setting element attributes is to use the \fB::dom::element\fR command.
+\fR
+
+.TP
+\fI\fB\fBcreateEntity\fR\fR\fP 
+\fBcreateEntity\fR\fI \fItoken\fR\fP
+.PP
+Not currently implemented.
+
+.TP
+\fI\fB\fBcreateEntityReference\fR\fR\fP 
+\fBcreateEntityReference\fR\fI \fItoken\fR\fI \fIname\fR\fP
+.PP
+Not currently implemented.
+
+.TP
+\fI\fB\fBcreateEvent\fR\fR\fP 
+\fBcreateEvent\fR\fI \fItoken\fR\fI \fIname\fR\fP
+.PP
+This method creates an event node in the document specified by \fI \fItoken\fR\fR and returns the new node's token as its result.  \fI \fItoken\fR\fR must be a node of type document.  The event type is specified by \fI \fIname\fR\fR.
+
+.PP
+A Tcl command is created with the same name as the new node's token.  This command is a shortcut for the \fB::dom::event\fR command.
+
+.TP
+\fI\fB\fBgetElementsByTagName\fR\fR\fP 
+\fBgetElementsByTagName\fR\fI \fItoken\fR\fI \fIname\fR\fP
+.PP
+This method searches the node given by the argument \fI \fItoken\fR\fR for child elements with a type matching the argument \fI \fIname\fR\fR.  The name \fB*\fR matches all elements.  All descendants of \fI \fItoken\fR\fR are searched.  This method returns a "live-list"; the return result of this method is the name of a Tcl variable, the content of which is a Tcl list containing tokens for all elements that match.
+
+.TP
+\fI\fB\fBdtd\fR\fR\fP 
+\fBdtd\fR\fI validate\fP
+.PP
+This method performs DTD validation upon the document.  If the method returns successfully, then the document is valid.  Otherwise the document is invalid and the error returned contains the reason.
+
+.TP
+\fI\fB\fBschema\fR\fR\fP 
+\fB\fIsubmethod\fR\fR ?\fI \fIargs\fR ... ?\fP
+.PP
+This method performs XML Schema validation upon the document.  Schema validation is performed in two steps.  First the document is compiled into a schema document.  Second, the schema document is used to schema-validate an instance document.
+
+.PP
+Example:
+.PP
+.CS
+
+set schema [dom::parse $XML]
+$schema schema compile
+set instance [dom::parse $XML2]
+$schema schema validate $instance
+
+.CE
+
+.PP
+If the document is changed after compiling, then schema document must be recompiled.
+
+.RE
+.SS \fBdom::node\fR
+
+.PP
+This command implements generic functions for DOM nodes.
+
+.PP
+The methods accepted by this command are as follows:
+
+.RS
+.TP
+\fI\fB\fBcget\fR\fR\fP 
+\fBcget\fR\fI \fItoken\fR\fI option\fP
+.PP
+This method returns the value of the given configuration option for the node given by \fI \fItoken\fR\fR.
+
+.TP
+\fI\fB\fBconfigure\fR\fR\fP 
+\fBconfigure\fR\fI \fItoken\fR ?\fI \fIoption\fR\fI \fIvalue\fR ... ?\fP
+.PP
+This method sets the value of the given configuration option for the node given by \fI \fItoken\fR\fR.
+
+.PP
+Valid configuration options are as follows:
+
+.RS
+.TP
+\fI\fB\fI -nodeName\fR\fP 
+
+.PP
+Returns the node name.  This is a read-only option.
+
+.PP
+The DOM specification gives the meaning of names for different types of nodes.  For example, the \fI -nodeName\fR option of an element node is the element type.
+
+.TP
+\fI\fB\fI -nodeType\fR\fP 
+
+.PP
+Returns the type of the node given by \fI \fItoken\fR\fR.  This is a read-only option.
+
+.TP
+\fI\fB\fI -parentNode\fR\fR\fP 
+
+.PP
+Returns the parent node of the node given by \fI \fItoken\fR\fR.  This is a read-only option.
+
+.TP
+\fI\fB\fI -childNodes\fR\fR\fP 
+
+.PP
+Returns the name of a Tcl variable which contains a list of the children of the node given by \fI \fItoken\fR\fR.  The variable contains the "live" list of children.  This is a read-only option.
+
+.TP
+\fI\fB\fI -firstChild\fR\fR\fP 
+
+.PP
+Returns the first child node of the node given by \fI \fItoken\fR\fR.  This is a read-only option.
+
+.TP
+\fI\fB\fI -lastChild\fR\fR\fP 
+
+.PP
+Returns the last child node of the node given by \fI \fItoken\fR\fR.  This is a read-only option.
+
+.TP
+\fI\fB\fI -previousSibling\fR\fR\fP 
+
+.PP
+Returns the parent's child node which appears before this node.  If this child is the first child of its parent then returns an empty string.  This is a read-only option.
+
+.TP
+\fI\fB\fI -nextSibling\fR\fR\fP 
+
+.PP
+Returns the parent's child node which appears after this node.  If this child is the last child of its parent then returns an empty string.  This is a read-only option.
+
+.TP
+\fI\fB\fI -attributes\fR\fR\fP 
+
+.PP
+Returns the name of a Tcl array variable which contains the attribute list for an element node.  If the node is not an element type node then returns an empty string.  The indices of the array are attribute names, and the values of the array elements are their corresponding attribute values.  This is a read-only option.
+
+.TP
+\fI\fB\fI -nodeValue\fR\fI \fIdata\fR\fR\fP 
+
+.PP
+Specifies the value of a node.  The DOM specification gives the meaning of values for different types of nodes.  For example, the \fI -nodeValue\fR option of a textNode node is the node's text.
+
+.RE
+
+.TP
+\fI\fB\fBinsertBefore\fR\fR\fP 
+\fBinsertBefore\fR\fI \fItoken\fR\fI \fInewchild\fR\fI \fIrefchild\fR\fP
+.PP
+This method removes the node given by \fI \fInewchild\fR\fR from its parent.  If no \fI \fIrefchild\fR\fR argument is given then \fI \fInewchild\fR\fR is appended to \fI \fItoken\fR\fR's list of children.  If the \fI \fIrefchild\fR\fR argument is given then this method adds \fI \fInewchild\fR\fR as a child of \fI \fItoken\fR\fR.  The new child node is positioned before the node \fI \fIrefchild\fR\fR in \fI \fItoken\fR\fR's list of children.  Returns an empty string.
+
+.TP
+\fI\fB\fBreplaceChild\fR\fR\fP 
+\fBreplaceChild\fR\fI \fItoken\fR\fI \fInewchild\fR\fI \fIoldchild\fR\fP
+.PP
+This method removes the node given by \fI \fInewchild\fR\fR from its parent.  It then also removes the node given by \fI \fIoldchild\fR\fR from \fI \fItoken\fR\fR.  \fI \fInewchild\fR\fR is then added as a child of \fI \fItoken\fR\fR in \fI \fIoldchild\fR\fR's original position in the list of children.  The method returns the token \fI \fIoldchild\fR\fR, which will now have no parent.
+
+.TP
+\fI\fB\fBremoveChild\fR\fR\fP 
+\fBremoveChild\fR\fI \fItoken\fR\fI \fIoldchild\fR\fP
+.PP
+This method removes the node given by \fI \fIoldchild\fR\fR from its parent, \fI \fItoken\fR\fR.  The method returns the token \fI \fIoldchild\fR\fR, which will now have no parent.
+
+.TP
+\fI\fB\fBappendChild\fR\fR\fP 
+\fBappendChild\fR\fI \fItoken\fR\fI \fInewchild\fR\fP
+.PP
+This method removes the node given by \fI \fInewchild\fR\fR from its parent.  \fI \fInewchild\fR\fR is then appended to the end of the list of children for node \fI \fItoken\fR\fR.  The method returns the token \fI \fInewchild\fR\fR.
+
+.TP
+\fI\fB\fBhasChildNodes\fR\fR\fP 
+\fBhasChildNodes\fR\fI \fItoken\fR\fP
+.PP
+Returns \fB1\fR if the given node has any child nodes, \fB0\fR otherwise.
+
+.TP
+\fI\fB\fBisSameNode\fR\fR\fP 
+\fBisSameNode\fR\fI \fItoken\fR\fI \fIref\fR\fP
+.PP
+Returns \fB1\fR if the given node is the same node as the node given by the \fI \fBref\fR token, \fB0\fR otherwise.
+
+.TP
+\fI\fB\fBcloneNode\fR\fR\fP 
+\fBcloneNode\fR\fI \fItoken\fR\fI \fIdeep\fR\fP
+.PP
+This method makes a copy the node given by \fI \fItoken\fR\fR.  If the argument \fI \fIdeep\fR\fR is not specified or has the value \fB0\fR then only the node itself is copied, not its children.  If the argument \fI \fIdeep\fR\fR has the value \fB1\fR then \fI \fItoken\fR\fR's children are also copied recursively.  This method returns the token of the newly created node.  This new node will have no parent.
+
+.TP
+\fI\fB\fBchildren\fR\fR\fP 
+\fBchildren\fR\fI \fItoken\fR\fP
+.PP
+This is a convenience method which returns the list of child nodes for the given node as a (static) Tcl list.
+
+.PP
+This is not a standard DOM method for this interface.
+
+.TP
+\fI\fB\fBparent\fR\fR\fP 
+\fBparent\fR\fI \fItoken\fR\fP
+.PP
+This is a convenience method which returns the parent node for the given node.
+
+.PP
+This is not a standard DOM method for this interface.
+
+.TP
+\fI\fB\fBpath\fR\fR\fP 
+\fBpath\fR\fI \fItoken\fR\fP
+.PP
+Returns a Tcl list of the ancestor nodes of the given node, starting with the root node.
+
+.PP
+This is not a standard DOM method for this interface.
+
+.TP
+\fI\fB\fBcreateNode\fR\fR\fP 
+\fBcreateNode\fR\fI \fItoken\fR\fI \fIxpath\fR\fP
+.PP
+May create nodes in order to satisfy the given XPath location path.  The initial context for the location path is the node \fI \fItoken\fR.  For more detail, see the \fB::dom::createNode\fR command.
+
+.PP
+This is not a standard DOM method for this interface.
+
+.TP
+\fI\fB\fBselectNode\fR\fR\fP 
+\fBselectNode\fR\fI \fItoken\fR\fI \fIxpath\fR\fP
+.PP
+Returns a (static) Tcl list of nodes selected by the XPath location path \fI \fIxpath\fR.  The initial context for the location path is the node \fI \fItoken\fR.  For more detail, see the \fB::dom::selectNode\fR command.
+
+.PP
+This is not a standard DOM method for this interface.
+
+.TP
+\fI\fB\fBstringValue\fR\fR\fP 
+\fBstringValue\fR\fI \fItoken\fR\fP
+.PP
+Returns the string value of the node given by \fI \fItoken\fR.  The string value of a node is defined by the XPath specification: for element nodes it is the concatenation of the string values of all descendant text nodes, for text nodes it is the node's character data value, for attribute nodes it is the attribute value, for comment nodes it is the comment data and for processing instruction nodes it is the PI data.
+
+.PP
+This is not a standard DOM method for this interface.
+
+.TP
+\fI\fB\fBaddEventListener\fR\fR\fP 
+\fBaddEventListener\fR\fI \fItoken\fR\fI \fItype\fR\fI \fIlistener\fR ?\fI option\fI value ... ?\fP
+.PP
+Register an event listener for the node given by \fI \fItoken\fR listening for events of type \fI \fItype\fR.  The event mechanism functions as described in the W3C DOM Level 2 Event module.
+
+.PP
+When an event of type \fI \fItype\fR occurs the script \fI \fIlistener\fR is evaluated, in the global context.  The token of the event node is appended to the script.
+
+.PP
+If the \fI \fIlistener\fR argument is omitted then the listener for the given event type is returned.
+
+.PP
+Valid options are:
+
+.RS
+.TP
+\fI\fB\fI -usecapture\fI \fIboolean\fR\fR\fP 
+
+.PP
+If true the listener is triggered in the event capturing phase.  If false the listener is triggered in the event bubbling phase.
+
+.RE
+
+.TP
+\fI\fB\fBremoveEventListener\fR\fR\fP 
+\fBremoveEventListener\fR\fI \fItoken\fR\fI \fItype\fR\fI \fIlistener\fR ?\fI option\fI value ... ?\fP
+.PP
+Removes an event listener previously registered for the node given by \fI \fItoken\fR listening for events of type \fI \fItype\fR.
+
+.PP
+Valid options are:
+
+.RS
+.TP
+\fI\fB\fI -usecapture\fI \fIboolean\fR\fR\fP 
+
+.PP
+If true the capturing listener is removed.  If false the bubbling listener is removed.
+
+.RE
+
+.TP
+\fI\fB\fBdispatchEvent\fR\fR\fP 
+\fBdispatchEvent\fR\fI \fItoken\fR\fI \fIevent\fR\fP
+.PP
+Dispatches the event given by \fI \fIevent\fR with target node \fI \fItoken\fR.  The event mechanism functions as described in the W3C DOM Level 2 Event module.  The event enters the capturing phase first, followed by the bubbling phase.  During each phase any event listeners registered for the same event type as the event \fI \fIevent\fR are triggered; their script is evaluated.  Unless the script invokes the \fBstopPropagation\fR method of the \fBdom::event\fR command, all registered event listeners will be triggered.  The order in which listeners registered at a particular node for a particular phase are triggered is undefined.
+
+.RE
+.SS \fBdom::element\fR
+
+.PP
+This command provides functions for element type nodes.
+
+.PP
+Valid methods for this command are as follows:
+
+.RS
+.TP
+\fI\fB\fBcget\fR\fR\fP 
+\fBcget\fR\fI \fItoken\fR\fI \fIoption\fR\fP
+.PP
+This method returns the current setting of configuration options for an element.  See the \fBconfigure\fR method for the list of valid configuration options.
+
+.TP
+\fI\fB\fBconfigure\fR\fR\fP 
+\fBconfigure\fR\fI \fItoken\fR ?\fI \fIoption\fR\fI \fIvalue\fR ... ?\fP
+.PP
+This method sets configuration options for an element.  Note that element type nodes only have read-only options.
+
+.PP
+Valid configuration options are as follows:
+
+.RS
+.TP
+\fI\fB\fI -tagName\fR\fI \fIname\fR\fR\fP 
+The tag name, or element type, of this element.
+.TP
+\fI\fB\fI -empty\fR\fI \fIboolean\fR\fR\fP 
+
+.PP
+Sets whether this element was specified as an empty element when the document was parsed.  That is, XML empty element syntax such as \fB<Empty/>\fR was used.
+
+.PP
+This option has no effect upon output (serialization) of the XML document.  Empty element syntax is automatically used where appropriate.
+
+.RE
+
+.TP
+\fI\fB\fBgetAttribute\fR\fR\fP 
+\fBgetAttribute\fR\fI \fItoken\fR\fI \fIname\fR\fP
+.PP
+This method returns the attribute value of the attribute given by \fI \fIname\fR\fR.  If the attribute does not exist, then an empty string is returned.
+
+.TP
+\fI\fB\fBsetAttribute\fR\fR\fP 
+\fBsetAttribute\fR\fI \fItoken\fR\fI \fIname\fR\fI \fIvalue\fR\fP
+.PP
+This method sets the attribute value of the attribute given by \fI \fIname\fR\fR.  If the attribute already exists then its value is replaced, otherwise the attribute is created.
+
+.TP
+\fI\fB\fBremoveAttribute\fR\fR\fP 
+\fBremoveAttribute\fR\fI \fItoken\fR\fI \fIname\fR\fP
+.PP
+This method deletes the attribute given by \fI \fIname\fR\fR.  If the attribute does not exist then the method has no effect.
+
+.TP
+\fI\fB\fBgetAttributeNode\fR\fR\fP 
+\fBgetAttributeNode\fR\fI \fItoken\fR\fI \fIname\fR\fP
+.PP
+Not implemented.
+
+.TP
+\fI\fB\fBsetAttributeNode\fR\fR\fP 
+\fBsetAttributeNode\fR\fI \fItoken\fR\fI \fIname\fR\fP
+.PP
+Not implemented.
+
+.TP
+\fI\fB\fBremoveAttributeNode\fR\fR\fP 
+\fBremoveAttributeNode\fR\fI \fItoken\fR\fI \fIname\fR\fP
+.PP
+Not implemented.
+
+.TP
+\fI\fB\fBgetAttributeNS\fR\fR\fP 
+\fBgetAttributeNS\fR\fI \fItoken\fR\fI \fIns\fR\fI \fIname\fR\fP
+.PP
+This method returns the attribute value of the attribute given by \fI \fIname\fR\fR in the XML namespace \fI \fIns\fR.  If the attribute does not exist, then an empty string is returned.
+
+.TP
+\fI\fB\fBsetAttributeNS\fR\fR\fP 
+\fBsetAttributeNS\fR\fI \fItoken\fR\fI \fIns\fR\fI \fIname\fR\fI \fIvalue\fR\fP
+.PP
+This method sets the attribute value of the attribute given by \fI \fIname\fR\fR in the XML namespace \fI \fIns\fR.  If the attribute already exists then its value is replaced, otherwise the attribute is created.
+
+.TP
+\fI\fB\fBremoveAttributeNS\fR\fR\fP 
+\fBremoveAttributeNS\fR\fI \fItoken\fR\fI \fIns\fR\fI \fIname\fR\fP
+.PP
+This method deletes the attribute given by \fI \fIname\fR\fR in the XML namespace \fI \fIns\fR.  If the attribute does not exist then the method has no effect.
+
+.TP
+\fI\fB\fBgetElementsByTagName\fR\fR\fP 
+\fBgetElementsByTagName\fR\fI \fItoken\fR\fI \fIname\fR\fP
+.PP
+This method searches the node given by the argument \fI \fItoken\fR\fR for descendant child elements with a type matching the argument \fI \fIname\fR\fR.  The wildcard character \fB*\fR matches any element type.  The return result is a "live-list" which is represented by a Tcl variable.  This method returns the name of the Tcl variable that contains the list of tokens that match.
+
+.TP
+\fI\fB\fBnormalize\fR\fR\fP 
+\fBnormalize\fR\fI \fItoken\fR\fP
+.PP
+This method recursively coalesces textNodes within the children of the given node.  textNodes which are adjacent in the DOM tree cannot be distinguished in the serialized XML document.
+
+.RE
+.SS \fBdom::processinginstruction\fR
+
+.PP
+This command provides functions for processingInstruction type nodes.
+
+.PP
+Valid methods for this command are as follows:
+
+.RS
+.TP
+\fI\fB\fBcget\fR\fR\fP 
+\fBcget\fR\fI \fItoken\fR\fI \fIoption\fR\fP
+.PP
+This method returns the current setting of configuration options for an element.  See the \fBconfigure\fR method for the list of valid configuration options.
+
+.TP
+\fI\fB\fBconfigure\fR\fR\fP 
+\fBconfigure\fR\fI \fItoken\fR ?\fI \fIoption\fR\fI \fIvalue\fR ... ?\fP
+.PP
+This method sets configuration options for a processing instruction.
+
+.PP
+Valid configuration options are as follows:
+
+.RS
+.TP
+\fI\fB\fI -target\fR\fI \fIname\fR\fR\fP 
+This option sets the target of the processing instruction.  This is a read-only configuration option.
+.TP
+\fI\fB\fI -data\fR\fI \fIdata\fR\fR\fP 
+
+.PP
+This option sets the data of the processing instruction.
+
+.RE
+
+.RE
+.SS \fBdom::event\fR
+
+.PP
+This command provides functions for event type nodes.
+
+.PP
+Valid methods for this command are as follows:
+
+.RS
+.TP
+\fI\fB\fBcget\fR\fR\fP 
+\fBcget\fR\fI \fItoken\fR\fP
+.PP
+This method retrieves configuration options for an event.
+
+.PP
+Valid configuration options are as follows:
+
+.RS
+.TP
+\fI\fB\fI -altKey\fR\fR\fP 
+This option determines whether the ALT modifier key has been specified for this event.
+.TP
+\fI\fB\fI -attrName\fR\fR\fB\fI -timeStamp\fR\fR\fP 
+This option gives the name of the attribute associated with this event.
+.PP
+This option gives the time at which the event was posted.  The value is the number of milliseconds since the epoch, which is compatible with the Tcl \fBclock\fR command.  
+
+.PP
+\fBThe implementation of this method depends on the \fBTcl_GetTime\fR function.This function only became publically available in Tcl 8.4.  If a version of Tcl prior to 8.4 is being used, then this option will have the value \fB0\fR.\fR
+
+.TP
+\fI\fB\fI -type\fR\fR\fP 
+The type of this event.
+.TP
+\fI\fB\fI -view\fR\fR\fP 
+This option gives whether the view of the event.
+.RE
+
+.TP
+\fI\fB\fBconfigure\fR\fR\fP 
+\fBconfigure\fR\fI \fItoken\fR ?\fI \fIoption\fR\fI \fIvalue\fR ... ?\fP
+.PP
+This method sets the configuration options for an event.  However, all event options are read-only.  See the \fBcget\fR method for the list of valid configuration options.
+
+.TP
+\fI\fB\fBstopPropagation\fR\fR\fP 
+\fBstopPropagation\fR\fI \fItoken\fR\fP
+.PP
+This method cancels further propagation of the event.
+
+.PP
+\fBInvoking this method does not prevent event listeners at the current node from being triggered.\fR
+
+.TP
+\fI\fB\fBpreventDefault\fR\fR\fP 
+\fBpreventDefault\fR\fI \fItoken\fR\fP
+.PP
+This method stops the default action for this event from occurring.
+
+.TP
+\fI\fB\fBinitEvent\fR\fR\fP 
+\fBinitEvent\fR\fI \fItoken\fR\fI \fItype\fR\fI \fIbubbles\fR\fI \fIcancelable\fR\fP
+.PP
+Initialise the event.
+
+.PP
+\fI \fItype\fR gives the type of the event.  Any of the event types defined by the W3C DOM Level 2 Event module may be specified, or a user-defined event type may be used instead.
+
+.PP
+\fI \fIbubbles\fR indicates whether the event will enter the bubbling phase after the capturing phase.  \fI \fIcancelable\fR indicates whether the event may be cancelled.
+
+.TP
+\fI\fB\fBinitUIEvent\fR\fR\fP 
+\fBinitUIEvent\fR\fI \fItoken\fR\fI \fItype\fR\fI \fIbubbles\fR\fI \fIcancelable\fR\fI \fIview\fR\fI \fIdetail\fR\fP
+.PP
+Initialise a user interface event.  See \fBinitEvent\fR for further information.
+
+.PP
+\fI \fIview\fR gives the view for the event (not supported by TclDOM).  \fI \fIdetail\fR provides extra data for the event.
+
+.TP
+\fI\fB\fBinitMouseEvent\fR\fR\fP 
+\fBinitMouseEvent\fR\fI \fItoken\fR\fI \fItype\fR\fI \fIbubbles\fR\fI \fIcancelable\fR\fI \fIview\fR\fI \fIdetail\fR\fI \fIscreenX\fR\fI \fIscreenY\fR\fI \fIclientX\fR\fI \fIclientY\fR\fI \fIctrlKey\fR\fI \fIaltKey\fR\fI \fIshiftKey\fR\fI \fImetaKey\fR\fI \fIbutton\fR\fI \fIrelatedNode\fR\fP
+.PP
+Initialise a mouse event.  See \fBinitUIEvent\fR for further information.
+
+.PP
+\fI \fIscreenX\fR and \fI \fIscreenY\fR give the coordinates at which the event occurred relative to the screen.  \fI \fIscreenX\fR and \fI \fIscreenY\fR give the coordinates at which the event occurred relative to the window.
+
+.PP
+\fI \fIctrlKey\fR, \fI \fIaltKey\fR, \fI \fIshiftKey\fR, \fI \fImetaKey\fR indicate whether the respective modifier key was pressed when the event occurred.
+
+.PP
+\fI \fIbutton\fR indicates which button, if any, was pressed when the event occurred.
+
+.PP
+\fI \fIrelatedNode\fR specifies that a DOM node is associated with the event.
+
+.TP
+\fI\fB\fBinitMutationEvent\fR\fR\fP 
+\fBinitMutationEvent\fR\fI \fItoken\fR\fI \fItype\fR\fI \fIbubbles\fR\fI \fIcancelable\fR\fI \fIrelatedNode\fR\fI \fIprevValue\fR\fI \fInewValue\fR\fI \fIattrName\fR\fP
+.PP
+Initialise a tree mutation event event.  See \fBinitEvent\fR for further information.
+
+.PP
+\fI \fIrelatedNode\fR specifies a DOM node to associate with the event.  \fI \fIprevValue\fR gives the previous value of the node.  \fI \fInewValue\fR gives the new value of the node.  \fI \fIattrName\fR gives the name of the attribute where the event is modifying an attribute value.
+
+.TP
+\fI\fB\fBpostUIEvent\fR\fR\fP 
+\fBpostUIEvent\fR\fI \fItoken\fR\fI \fItype\fR ?\fI option\fI \fIvalue\fR ... ?\fP
+.PP
+Non-standard convenience method that handles posting an user interface event with \fI \fItoken\fR as the target node.  This method performs the following functions:
+
+.PP
+\fI \fItype\fR gives the event type.
+
+.PP
+The following options are valid:
+
+.RS
+.TP
+\fI\fB\fI -bubbles\fR\fR\fP 
+
+.PP
+Indicates whether the event bubbles.
+
+.TP
+\fI\fB\fI -cancelable\fR\fR\fP 
+
+.PP
+Indicates whether the event can be cancelled.
+
+.TP
+\fI\fB\fI -view\fR\fR\fP 
+
+.PP
+The view.
+
+.TP
+\fI\fB\fI -detail\fR\fR\fP 
+
+.PP
+Extra data for the event.
+
+.RE
+
+.TP
+\fI\fB\fBpostMouseEvent\fR\fR\fP 
+\fBpostMouseEvent\fR\fI \fItoken\fR\fI \fItype\fR ?\fI option\fI \fIvalue\fR ... ?\fP
+.PP
+Non-standard convenience method that handles posting a mouse event with \fI \fItoken\fR as the target node.  This method performs the following functions:
+
+.PP
+\fI \fItype\fR gives the event type.
+
+.PP
+The following options are valid:
+
+.RS
+.TP
+\fI\fB\fI -bubbles\fR\fR\fP 
+
+.PP
+Indicates whether the event bubbles.
+
+.TP
+\fI\fB\fI -cancelable\fR\fR\fP 
+
+.PP
+Indicates whether the event can be cancelled.
+
+.TP
+\fI\fB\fI -view\fR\fR\fP 
+
+.PP
+The view.
+
+.TP
+\fI\fB\fI -detail\fR\fR\fP 
+
+.PP
+Extra data for the event.
+
+.TP
+\fI\fB\fI -screenX\fR\fR\fP 
+
+.PP
+Gives the screen X coordinate.
+
+.TP
+\fI\fB\fI -screenY\fR\fR\fP 
+
+.PP
+Gives the screen Y coordinate.
+
+.TP
+\fI\fB\fI -clientX\fR\fR\fP 
+
+.PP
+Gives the window X coordinate.
+
+.TP
+\fI\fB\fI -clientY\fR\fR\fP 
+
+.PP
+Gives the window Y coordinate.
+
+.TP
+\fI\fB\fI -ctrlKey\fR\fR\fP 
+
+.PP
+Indicates whether the control modifier key was pressed.
+
+.TP
+\fI\fB\fI -altKey\fR\fR\fP 
+
+.PP
+Indicates whether the ALT modifier key was pressed.
+
+.TP
+\fI\fB\fI -shiftKey\fR\fR\fP 
+
+.PP
+Indicates whether the shift modifier key was pressed.
+
+.TP
+\fI\fB\fI -metaKey\fR\fR\fP 
+
+.PP
+Indicates whether the meta modifier key was pressed.
+
+.TP
+\fI\fB\fI -button\fR\fR\fP 
+
+.PP
+Gives the button pressed.
+
+.TP
+\fI\fB\fI -relatedNode\fR\fR\fP 
+
+.PP
+Gives a node to associate with the event.
+
+.RE
+
+.TP
+\fI\fB\fBpostMutationEvent\fR\fR\fP 
+\fBpostMutationEvent\fR\fI \fItoken\fR\fI \fItype\fR ?\fI option\fI \fIvalue\fR ... ?\fP
+.PP
+Non-standard convenience method that handles posting a mutation event with \fI \fItoken\fR as the target node.  This method performs the following functions:
+
+.PP
+\fI \fItype\fR gives the event type.
+
+.PP
+The following options are valid:
+
+.RS
+.TP
+\fI\fB\fI -bubbles\fR\fR\fP 
+
+.PP
+Indicates whether the event bubbles.
+
+.TP
+\fI\fB\fI -cancelable\fR\fR\fP 
+
+.PP
+Indicates whether the event can be cancelled.
+
+.TP
+\fI\fB\fI -relatedNode\fR\fR\fP 
+
+.PP
+Gives a node to associate with the event.
+
+.TP
+\fI\fB\fI -prevValue\fR\fR\fP 
+
+.PP
+Gives the previous value of the target node.
+
+.TP
+\fI\fB\fI -newValue\fR\fR\fP 
+
+.PP
+Gives the new value of the target node.
+
+.TP
+\fI\fB\fI -attrName\fR\fR\fP 
+
+.PP
+Gives the name of the attribute modified.
+
+.RE
+
+.RE
+
+.SH ERRORS
+
+.PP
+If an operation results in an error condition, an error message is returned as a structured Tcl list.  The list has members as follows:
+.PP
+.CS
+{domain level code node line message int1 int2 string1 string2 string3}
+.CE
+
+.PP
+The format of the list is described in the TclXML manual page.
+
+.SH IMPLEMENTATIONS
+
+.PP
+This section documents the various implmentations of the TclDOM API.
+.SS Tcl Implementation
+
+.PP
+The Tcl implementation is provided by the \fBdom::tcl\fR package.
+.SS Limitations
+
+.PP
+This implementation is not able to preform the following functions:
+.SS libxml2 Implementation
+
+.PP
+The TclDOM/libxml2 implementation is a wrapper for the Gnome libxml2 library.  It is provided by the \fBdom::libxml2\fR package.  It is a high-performance library, making use of Tcl objects for fast access to tree nodes.
+
+.PP
+On MS Windows, it is necessary to load all required packages separately.  For example:
+.PP
+.CS
+
+package require xml
+package require xml::libxml2
+package require dom
+
+.CE
+.SS Limitations
Index: src-libxml2/Makefile.in
===================================================================
RCS file: /cvsroot/tclxml/tcldom/src-libxml2/Makefile.in,v
retrieving revision 1.12
diff -u -p -r1.12 Makefile.in
--- src-libxml2/Makefile.in	3 Apr 2003 21:55:20 -0000	1.12
+++ src-libxml2/Makefile.in	2 Jun 2004 11:21:16 -0000
@@ -143,6 +143,7 @@ MAKE_STATIC_LIB	= @MAKE_STATIC_LIB@
 MAKE_STUB_LIB	= @MAKE_STUB_LIB@
 OBJEXT		= @OBJEXT@
 RANLIB		= @RANLIB@
+RANLIB_STUB	= @RANLIB_STUB@
 SHLIB_CFLAGS	= @SHLIB_CFLAGS@
 SHLIB_LD	= @SHLIB_LD@
 SHLIB_LDFLAGS	= @SHLIB_LDFLAGS@
@@ -166,6 +167,7 @@ TCL_LIBS	= @TCL_LIBS@
 EXTRA_PATH	= $(top_builddir):$(TCL_BIN_DIR)
 TCLSH_ENV	= TCL_LIBRARY=`@CYGPATH@ $(TCL_SRC_DIR)/library` \
 		  LD_LIBRARY_PATH="$(EXTRA_PATH):$(LD_LIBRARY_PATH)" \
+		  DYLD_LIBRARY_PATH="$(EXTRA_PATH):$(DYLD_LIBRARY_PATH)" \
 		  LIBPATH="$(EXTRA_PATH):${LIBPATH}" \
 		  SHLIB_PATH="$(EXTRA_PATH):${SHLIB_PATH}" \
 		  PATH="$(EXTRA_PATH):$(PATH)" \
@@ -283,7 +285,7 @@ $($(PACKAGE)_LIB_FILE): $($(PACKAGE)_OBJ
 $($(PACKAGE)stub_LIB_FILE): $($(PACKAGE)stub_OBJECTS)
 	-rm -f $($(PACKAGE)stub_LIB_FILE)
 	${MAKE_STUB_LIB}
-	$(RANLIB) $($(PACKAGE)stub_LIB_FILE)
+	$(RANLIB_STUB) $($(PACKAGE)stub_LIB_FILE)
 
 #========================================================================
 # We need to enumerate the list of .c to .o lines here.
@@ -417,8 +419,14 @@ install-lib-binaries:
 	  if test -f $$p; then \
 	    echo " $(INSTALL_PROGRAM) $$p $(DESTDIR)$(pkglibdir)/$$p"; \
 	    $(INSTALL_PROGRAM) $$p $(DESTDIR)$(pkglibdir)/$$p; \
+	    stub=`echo $$p|sed -e "s/.*\(stub\).*/\1/"`; \
+	    if test "x$$stub" = "xstub"; then \
+	    echo " $(RANLIB_STUB) $(DESTDIR)$(pkglibdir)/$$p"; \
+	    $(RANLIB_STUB) $(DESTDIR)$(pkglibdir)/$$p; \
+	    else \
 	    echo " $(RANLIB) $(DESTDIR)$(pkglibdir)/$$p"; \
 	    $(RANLIB) $(DESTDIR)$(pkglibdir)/$$p; \
+	    fi; \
 	    ext=`echo $$p|sed -e "s/.*\.//"`; \
 	    if test "x$$ext" = "xdll"; then \
 		lib=`basename $$p|sed -e 's/.[^.]*$$//'`.lib; \
Index: src-libxml2/configure
===================================================================
RCS file: /cvsroot/tclxml/tcldom/src-libxml2/configure,v
retrieving revision 1.9
diff -u -p -r1.9 configure
--- src-libxml2/configure	4 Apr 2003 22:07:50 -0000	1.9
+++ src-libxml2/configure	2 Jun 2004 11:21:16 -0000
@@ -5301,6 +5301,7 @@ EOF
     # substituted.
     #--------------------------------------------------------------------
 
+    RANLIB_STUB="${RANLIB}"
     if test "${TEA_PLATFORM}" = "windows" ; then
 	if test "${SHARED_BUILD}" = "1" ; then
 	    # We force the unresolved linking of symbols that are really in
@@ -5342,6 +5343,7 @@ EOF
     
     
     
+    
 
 
 #--------------------------------------------------------------------
@@ -5366,7 +5368,7 @@ fi
 #--------------------------------------------------------------------
 
 echo $ac_n "checking for libxml2 headers""... $ac_c" 1>&6
-echo "configure:5370: checking for libxml2 headers" >&5
+echo "configure:5372: checking for libxml2 headers" >&5
 
 with_xml2include=NONE
 # Check whether --with-libxml2-include or --without-libxml2-include was given.
@@ -5409,7 +5411,7 @@ fi
 #--------------------------------------------------------------------
 
 echo $ac_n "checking for libxml2 library""... $ac_c" 1>&6
-echo "configure:5413: checking for libxml2 library" >&5
+echo "configure:5415: checking for libxml2 library" >&5
 
 with_xml2lib=NONE
 # Check whether --with-libxml2-lib or --without-libxml2-lib was given.
@@ -5446,6 +5448,10 @@ do
 	LIBXML2_LIBDIR="$d"
 	break
     fi
+    if test -f "$d/libxml2.a" ; then
+	LIBXML2_LIBDIR="$d"
+	break
+    fi
 done
 if test "x$LIBXML2_LIBDIR" = "x"; then
     { echo "configure: error: not found, please use --with-libxml2-lib" 1>&2; exit 1; }
@@ -5457,7 +5463,7 @@ fi
 #--------------------------------------------------------------------
 if test "${TEA_PLATFORM}" = "windows" -a "$GCC" != "yes" ; then
     echo $ac_n "checking for iconv library""... $ac_c" 1>&6
-echo "configure:5461: checking for iconv library" >&5
+echo "configure:5467: checking for iconv library" >&5
 
     with_iconvlib=NONE
     # Check whether --with-iconv-lib or --without-iconv-lib was given.
@@ -5522,7 +5528,7 @@ fi
 
 
     echo $ac_n "checking for tclsh""... $ac_c" 1>&6
-echo "configure:5526: checking for tclsh" >&5
+echo "configure:5532: checking for tclsh" >&5
 
     if eval "test \"`echo '$''{'ac_cv_path_tclsh'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -5801,6 +5807,7 @@ s%@MAKE_LIB@%$MAKE_LIB%g
 s%@MAKE_SHARED_LIB@%$MAKE_SHARED_LIB%g
 s%@MAKE_STATIC_LIB@%$MAKE_STATIC_LIB%g
 s%@MAKE_STUB_LIB@%$MAKE_STUB_LIB%g
+s%@RANLIB_STUB@%$RANLIB_STUB%g
 s%@LIBXML2_INCLUDEDIR@%$LIBXML2_INCLUDEDIR%g
 s%@LIBXML2_LIBDIR@%$LIBXML2_LIBDIR%g
 s%@ICONV_LIBDIR@%$ICONV_LIBDIR%g
Index: src-libxml2/configure.in
===================================================================
RCS file: /cvsroot/tclxml/tcldom/src-libxml2/configure.in,v
retrieving revision 1.9
diff -u -p -r1.9 configure.in
--- src-libxml2/configure.in	2 Apr 2003 21:58:51 -0000	1.9
+++ src-libxml2/configure.in	2 Jun 2004 11:21:16 -0000
@@ -262,6 +262,10 @@ do
 	LIBXML2_LIBDIR="$d"
 	break
     fi
+    if test -f "$d/libxml2.a" ; then
+	LIBXML2_LIBDIR="$d"
+	break
+    fi
 done
 if test "x$LIBXML2_LIBDIR" = "x"; then
     AC_MSG_ERROR([not found, please use --with-libxml2-lib])
Index: tclconfig/tcl.m4
===================================================================
RCS file: /cvsroot/tclxml/tcldom/tclconfig/tcl.m4,v
retrieving revision 1.7
diff -u -p -r1.7 tcl.m4
--- tclconfig/tcl.m4	4 Apr 2003 22:07:51 -0000	1.7
+++ tclconfig/tcl.m4	2 Jun 2004 11:21:16 -0000
@@ -2591,6 +2591,7 @@ AC_DEFUN(TEA_MAKE_LIB, [
     # substituted.
     #--------------------------------------------------------------------
 
+    RANLIB_STUB="${RANLIB}"
     if test "${TEA_PLATFORM}" = "windows" ; then
 	if test "${SHARED_BUILD}" = "1" ; then
 	    # We force the unresolved linking of symbols that are really in
@@ -2632,6 +2633,7 @@ AC_DEFUN(TEA_MAKE_LIB, [
     AC_SUBST(MAKE_SHARED_LIB)
     AC_SUBST(MAKE_STATIC_LIB)
     AC_SUBST(MAKE_STUB_LIB)
+    AC_SUBST(RANLIB_STUB)
 ])
 
 #------------------------------------------------------------------------
