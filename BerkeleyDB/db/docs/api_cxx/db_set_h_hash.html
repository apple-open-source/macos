<!--$Id: db_set_h_hash.html,v 1.1.1.1 2003/02/15 04:55:48 zarzycki Exp $-->
<!--Copyright 1997-2002 by Sleepycat Software, Inc.-->
<!--All rights reserved.-->
<!--See the file LICENSE for redistribution information.-->
<html>
<head>
<title>Berkeley DB: Db::set_h_hash</title>
<meta name="description" content="Berkeley DB: An embedded database programmatic toolkit.">
<meta name="keywords" content="embedded,database,programmatic,toolkit,b+tree,btree,hash,hashing,transaction,transactions,locking,logging,access method,access methods,java,C,C++">
</head>
<body bgcolor=white>
<a name="2"><!--meow--></a>
<table width="100%"><tr valign=top>
<td>
<h1>Db::set_h_hash</h1>
</td>
<td align=right>
<a href="../api_cxx/c_index.html"><img src="../images/api.gif" alt="API"></a><a href="../reftoc.html"><img src="../images/ref.gif" alt="Ref"></a>
</td></tr></table>
<hr size=1 noshade>
<tt>
<h3><pre>
#include &lt;db_cxx.h&gt;
<p>
extern "C" {
    typedef u_int32_t (*h_hash_fcn_type)
	(DB *, const void *bytes, u_int32_t length);
};
int
Db::set_h_hash(h_hash_fcn_type h_hash_fcn);
</pre></h3>
<h1>Description</h1>
<p>Set a user-defined hash method; if no hash method is specified, a default
hash method is used.  Because no hash method performs equally well on all
possible data, the user may find that the built-in hash method performs
poorly with a particular data set.  User-specified hash functions must
take a pointer to a byte string and a length as arguments, and return a
value of type
<b>u_int32_t</b>.
The hash function must handle any key values used by the application
(possibly including zero-length keys).
<p>If a hash method is specified, <a href="../api_cxx/db_open.html">Db::open</a> will attempt to determine
whether the hash method specified is the same as the one with which the
database was created, and will fail if it detects that it is not.
<p>The Db::set_h_hash method configures operations performed using the specified
<a href="../api_cxx/db_class.html">Db</a> handle, not all operations performed on the underlying
database.
<p>The Db::set_h_hash interface may not be called after the <a href="../api_cxx/db_open.html">Db::open</a>
interface is called.
If the database already exists when
<a href="../api_cxx/db_open.html">Db::open</a> is called, the information specified to Db::set_h_hash must
be the same as that historically used to create the database or
corruption can occur.
<p>The Db::set_h_hash method either returns a non-zero error value or throws an exception that
encapsulates a non-zero error value on failure, and returns 0 on success.
<h1>Errors</h1>
<p>The Db::set_h_hash method may fail and throw an exception or return a non-zero error for the following conditions:
<p><dl compact>
<p><dt>EINVAL<dd>An invalid flag value or parameter was specified.
<p>Called after <a href="../api_cxx/db_open.html">Db::open</a> was called.
</dl>
<p>The Db::set_h_hash method may fail and throw an exception or return a non-zero error for errors specified for other Berkeley DB and C library or system methods.
If a catastrophic error has occurred, the Db::set_h_hash method may fail and
either return <a href="../ref/program/errorret.html#DB_RUNRECOVERY">DB_RUNRECOVERY</a> or throw a
<a href="../api_cxx/runrec_class.html">DbRunRecoveryException</a>,
in which case all subsequent Berkeley DB calls will fail in the same way.
<h1>Class</h1>
<a href="../api_cxx/db_class.html">Db</a>
<h1>See Also</h1>
<a href="../api_cxx/db_list.html">Databases and Related Methods</a>
</tt>
<table width="100%"><tr><td><br></td><td align=right>
<a href="../api_cxx/c_index.html"><img src="../images/api.gif" alt="API"></a><a href="../reftoc.html"><img src="../images/ref.gif" alt="Ref"></a>
</td></tr></table>
<p><font size=1><a href="http://www.sleepycat.com">Copyright Sleepycat Software</a></font>
</body>
</html>
