#! /bin/sh






























	











































 





























































































































# libtool.m4 - Configure libtool for the host system. -*-Shell-script-*-

# serial 46 AC_PROG_LIBTOOL





# AC_LIBTOOL_HEADER_ASSERT
# ------------------------
# AC_LIBTOOL_HEADER_ASSERT

# _LT_AC_CHECK_DLFCN
# --------------------
# _LT_AC_CHECK_DLFCN

# AC_LIBTOOL_SYS_GLOBAL_SYMBOL_PIPE
# ---------------------------------
 # AC_LIBTOOL_SYS_GLOBAL_SYMBOL_PIPE

# _LT_AC_LIBTOOL_SYS_PATH_SEPARATOR
# ---------------------------------
# _LT_AC_LIBTOOL_SYS_PATH_SEPARATOR

# _LT_AC_PROG_ECHO_BACKSLASH
# --------------------------
# Add some code to the start of the generated configure script which
# will find an echo command which doesn't interpret backslashes.
# _LT_AC_PROG_ECHO_BACKSLASH

# _LT_AC_TRY_DLOPEN_SELF (ACTION-IF-TRUE, ACTION-IF-TRUE-W-USCORE,
#                           ACTION-IF-FALSE, ACTION-IF-CROSS-COMPILING)
# ------------------------------------------------------------------
# _LT_AC_TRY_DLOPEN_SELF

# AC_LIBTOOL_DLOPEN_SELF
# -------------------
# AC_LIBTOOL_DLOPEN_SELF

# _LT_AC_LTCONFIG_HACK

# AC_LIBTOOL_DLOPEN - enable checks for dlopen support


# AC_LIBTOOL_WIN32_DLL - declare package support for building win32 dll's


# AC_ENABLE_SHARED - implement the --enable-shared flag
# Usage: AC_ENABLE_SHARED[(DEFAULT)]
#   Where DEFAULT is either `yes' or `no'.  If omitted, it defaults to
#   `yes'.


# AC_DISABLE_SHARED - set the default shared flag to --disable-shared


# AC_ENABLE_STATIC - implement the --enable-static flag
# Usage: AC_ENABLE_STATIC[(DEFAULT)]
#   Where DEFAULT is either `yes' or `no'.  If omitted, it defaults to
#   `yes'.


# AC_DISABLE_STATIC - set the default static flag to --disable-static



# AC_ENABLE_FAST_INSTALL - implement the --enable-fast-install flag
# Usage: AC_ENABLE_FAST_INSTALL[(DEFAULT)]
#   Where DEFAULT is either `yes' or `no'.  If omitted, it defaults to
#   `yes'.


# AC_DISABLE_FAST_INSTALL - set the default to --disable-fast-install


# AC_LIBTOOL_PICMODE - implement the --with-pic flag
# Usage: AC_LIBTOOL_PICMODE[(MODE)]
#   Where MODE is either `yes' or `no'.  If omitted, it defaults to
#   `both'.



# AC_PATH_TOOL_PREFIX - find a file program which can recognise shared library



# AC_PATH_MAGIC - find a file program which can recognise a shared library



# AC_PROG_LD - find the path to the GNU or non-GNU linker


# AC_PROG_LD_GNU -


# AC_PROG_LD_RELOAD_FLAG - find reload flag for linker
#   -- PORTME Some linkers may need a different reload flag.


# AC_DEPLIBS_CHECK_METHOD - how to check for library dependencies
#  -- PORTME fill in with the dynamic library characteristics



# AC_PROG_NM - find the path to a BSD-compatible name lister


# AC_CHECK_LIBM - check for math library


# AC_LIBLTDL_CONVENIENCE[(dir)] - sets LIBLTDL to the link flags for
# the libltdl convenience library and LTDLINCL to the include flags for
# the libltdl header and adds --enable-ltdl-convenience to the
# configure arguments.  Note that LIBLTDL and LTDLINCL are not
# AC_SUBSTed, nor is AC_CONFIG_SUBDIRS called.  If DIR is not
# provided, it is assumed to be `libltdl'.  LIBLTDL will be prefixed
# with '${top_builddir}/' and LTDLINCL will be prefixed with
# '${top_srcdir}/' (note the single quotes!).  If your package is not
# flat and you're not using automake, define top_builddir and
# top_srcdir appropriately in the Makefiles.


# AC_LIBLTDL_INSTALLABLE[(dir)] - sets LIBLTDL to the link flags for
# the libltdl installable library and LTDLINCL to the include flags for
# the libltdl header and adds --enable-ltdl-install to the configure
# arguments.  Note that LIBLTDL and LTDLINCL are not AC_SUBSTed, nor is
# AC_CONFIG_SUBDIRS called.  If DIR is not provided and an installed
# libltdl is not found, it is assumed to be `libltdl'.  LIBLTDL will
# be prefixed with '${top_builddir}/' and LTDLINCL will be prefixed
# with '${top_srcdir}/' (note the single quotes!).  If your package is
# not flat and you're not using automake, define top_builddir and
# top_srcdir appropriately in the Makefiles.
# In the future, this macro may have to be called after AC_PROG_LIBTOOL.


# old names








# This is just to silence aclocal about the macro not being used


# NOTE: This macro has been submitted for inclusion into   #
#  GNU Autoconf as AC_PROG_SED.  When it is available in   #
#  a released version of Autoconf we should remove this    #
#  macro and use it instead.                               #
# LT_AC_PROG_SED
# --------------
# Check for a fully-functional sed program, that truncates
# as few characters as possible.  Prefer GNU sed if found.


# Guess values for system-dependent variables and create Makefiles.
# Generated automatically using autoconf version 2.13 
# Copyright (C) 1992, 93, 94, 95, 96 Free Software Foundation, Inc.
#
# This configure script is free software; the Free Software Foundation
# gives unlimited permission to copy, distribute and modify it.

# Defaults:
ac_help=
ac_default_prefix=/usr/local
# Any additions from configure.in:
ac_help="$ac_help

SAPI modules:
"
ac_help="$ac_help
  --with-aolserver=DIR    Specify path to the installed AOLserver"
ac_help="$ac_help
  --with-apxs[=FILE]      Build shared Apache 1.x module. FILE is the optional
                          pathname to the Apache apxs tool; defaults to "apxs"."
ac_help="$ac_help
  --with-apache[=DIR]     Build Apache 1.x module. DIR is the top-level Apache
                          build directory, defaults to /usr/local/apache."
ac_help="$ac_help
  --with-mod_charset      Enable transfer tables for mod_charset (Rus Apache)."
ac_help="$ac_help
  --with-apxs2filter[=FILE]   EXPERIMENTAL: Build shared Apache 2.0 module. FILE is the optional
                          pathname to the Apache apxs tool; defaults to "apxs"."
ac_help="$ac_help
  --with-apxs2[=FILE]     EXPERIMENTAL: Build shared Apache 2.0 module. FILE is the optional
                          pathname to the Apache apxs tool; defaults to "apxs"."
ac_help="$ac_help
  --with-caudium=DIR      Build PHP as a Pike module for use with Caudium
                          DIR is the Caudium server dir, with the default value
                          /usr/local/caudium/server."
ac_help="$ac_help
  --disable-cli           Disable building CLI version of PHP
                          (this forces --without-pear)."
ac_help="$ac_help
  --enable-embed[=TYPE]   EXPERIMENTAL: Enable building of embedded SAPI library
                          TYPE is either 'shared' or 'static'. [TYPE=shared]"
ac_help="$ac_help
  --with-isapi=DIR        Build PHP as an ISAPI module for use with Zeus."
ac_help="$ac_help
  --with-nsapi=DIR        Build PHP as NSAPI module for use with iPlanet."
ac_help="$ac_help
  --with-phttpd=DIR       Build PHP as phttpd module"
ac_help="$ac_help
  --with-pi3web=DIR       Build PHP as Pi3Web module"
ac_help="$ac_help
  --with-roxen=DIR        Build PHP as a Pike module. DIR is the base Roxen
                          directory, normally /usr/local/roxen/server."
ac_help="$ac_help
  --enable-roxen-zts      Build the Roxen module using Zend Thread Safety."
ac_help="$ac_help
  --with-servlet[=DIR]    Include servlet support. DIR is the base install
                          directory for the JSDK.  This SAPI prereqs the
                          java extension must be built as a shared dl."
ac_help="$ac_help
  --with-thttpd=SRCDIR    Build PHP as thttpd module"
ac_help="$ac_help
  --with-tux=MODULEDIR    Build PHP as a TUX module (Linux only)"
ac_help="$ac_help
  --with-webjames=SRCDIR  Build PHP as a WebJames module (RISC OS only)"
ac_help="$ac_help
  --disable-cgi           Disable building CGI version of PHP"
ac_help="$ac_help
  --enable-force-cgi-redirect
                           Enable the security check for internal server
                           redirects.  You should use this if you are
                           running the CGI version with Apache."
ac_help="$ac_help
  --enable-discard-path   If this is enabled, the PHP CGI binary
                          can safely be placed outside of the
                          web tree and people will not be able
                          to circumvent .htaccess security."
ac_help="$ac_help
  --enable-fastcgi        If this is enabled, the cgi module will
                          be built with support for fastcgi also."
ac_help="$ac_help
  --disable-path-info-check  If this is disabled, paths such as
                          /info.php/test?a=b will fail to work."
ac_help="$ac_help

General settings:
"
ac_help="$ac_help
  --enable-debug          Compile with debugging symbols."
ac_help="$ac_help
  --with-layout=TYPE      Sets how installed files will be laid out.  Type is
                          one of "PHP" (default) or "GNU""
ac_help="$ac_help
  --with-config-file-path=PATH  
                          Sets the path in which to look for php.ini,
                          defaults to PREFIX/lib"
ac_help="$ac_help
  --with-config-file-scan-dir=PATH "
ac_help="$ac_help
  --with-pear=DIR         Install PEAR in DIR (default PREFIX/lib/php)
  --without-pear          Do not install PEAR"
ac_help="$ac_help
  --enable-safe-mode      Enable safe mode by default."
ac_help="$ac_help
  --with-exec-dir[=DIR]   Only allow executables in DIR when in safe mode
                          defaults to /usr/local/php/bin"
ac_help="$ac_help
  --enable-sigchild       Enable PHP's own SIGCHLD handler."
ac_help="$ac_help
  --enable-magic-quotes   Enable magic quotes by default."
ac_help="$ac_help
  --disable-rpath         Disable passing additional runtime library
                          search paths"
ac_help="$ac_help
  --enable-libgcc         Enable explicitly linking against libgcc"
ac_help="$ac_help
  --disable-short-tags    Disable the short-form <? start tag by default."
ac_help="$ac_help
  --enable-dmalloc        Enable dmalloc"
ac_help="$ac_help
  --disable-ipv6          Disable IPv6 support"
ac_help="$ac_help
  --with-openssl[=DIR]    Include OpenSSL support (requires OpenSSL >= 0.9.6) "
ac_help="$ac_help

Extensions:

  --with-EXTENSION=[shared[,PATH]]
  
    NOTE: Not all extensions can be build as 'shared'.

    Example: --with-foobar=shared,/usr/local/foobar/

      o Builds the foobar extension as shared extension.
      o foobar package install prefix is /usr/local/foobar/

"
ac_help="$ac_help
 --disable-all   Disable all extensions enabled by default.
"
ac_help="$ac_help
  --with-zlib[=DIR]       Include ZLIB support (requires zlib >= 1.0.9)."
ac_help="$ac_help
  --with-zlib-dir=<DIR>   Define the location of zlib install directory"
ac_help="$ac_help
  --enable-bcmath         Enable bc style precision math functions."
ac_help="$ac_help
  --with-bz2[=DIR]        Include BZip2 support"
ac_help="$ac_help
  --enable-calendar       Enable support for calendar conversion"
ac_help="$ac_help
  --with-cpdflib[=DIR]    Include cpdflib support (requires cpdflib >= 2)."
ac_help="$ac_help
  --with-jpeg-dir[=DIR]     CPDF: Set the path to libjpeg install prefix."
ac_help="$ac_help
  --with-tiff-dir[=DIR]     CPDF: Set the path to libtiff install prefix."
ac_help="$ac_help
  --with-crack[=DIR]      Include crack support."
ac_help="$ac_help
  --disable-ctype         Disable ctype functions"
ac_help="$ac_help
  --with-curl[=DIR]       Include CURL support"
ac_help="$ac_help
  --with-cyrus[=dir]      Include Cyrus IMAP support"
ac_help="$ac_help
  --with-db               Include old xDBM support (deprecated use --with-dba)"
ac_help="$ac_help
  --enable-dba            Build DBA with builtin modules"
ac_help="$ac_help
  --with-gdbm[=DIR]         DBA: Include GDBM support"
ac_help="$ac_help
  --with-ndbm[=DIR]         DBA: Include NDBM support"
ac_help="$ac_help
  --with-db4[=DIR]          DBA: Include Berkeley DB4 support"
ac_help="$ac_help
  --with-db3[=DIR]          DBA: Include Berkeley DB3 support"
ac_help="$ac_help
  --with-db2[=DIR]          DBA: Include Berkeley DB2 support"
ac_help="$ac_help
  --with-dbm[=DIR]          DBA: Include DBM support"
ac_help="$ac_help
  --with-cdb[=DIR]          DBA: Include CDB support"
ac_help="$ac_help
  --with-flatfile           DBA: Include FlatFile support"
ac_help="$ac_help
"
ac_help="$ac_help
  --enable-dbase          Enable the bundled dbase library"
ac_help="$ac_help
  --enable-dbx            Enable dbx"
ac_help="$ac_help
  --enable-dio            Enable direct I/O support"
ac_help="$ac_help
  --with-dom[=DIR]        Include DOM support (requires libxml >= 2.4.14).
                          DIR is the libxml install directory."
ac_help="$ac_help
  --with-zlib-dir[=DIR]     DOMXML: Set the path to libz install prefix."
ac_help="$ac_help
  --with-dom-xslt[=DIR]     DOMXML: Include DOM XSLT support (requires libxslt >= 1.0.18).
                            DIR is the libxslt install directory."
ac_help="$ac_help
  --with-dom-exslt[=DIR]    DOMXML: Include DOM EXSLT support (requires libxslt >= 1.0.18).
                            DIR is the libexslt install directory."
ac_help="$ac_help
  --enable-exif           Enable EXIF (metadata from images) support"
ac_help="$ac_help
  --with-fbsql[=DIR]      Include FrontBase support. DIR is the FrontBase base directory."
ac_help="$ac_help
  --with-fdftk[=DIR]      Include FDF support."
ac_help="$ac_help
"
ac_help="$ac_help
  --enable-filepro        Enable the bundled read-only filePro support."
ac_help="$ac_help
  --with-fribidi[=DIR]    Include FriBidi support (requires FriBidi >= 0.10.4)."
ac_help="$ac_help
  --enable-ftp            Enable FTP support"
ac_help="$ac_help
  --with-gd[=DIR]         Include GD support where DIR is GD install prefix.
                          If DIR is not set, the bundled GD library will be used."
ac_help="$ac_help
  --with-jpeg-dir[=DIR]     GD: Set the path to libjpeg install prefix."
ac_help="$ac_help
  --with-png-dir[=DIR]      GD: Set the path to libpng install prefix."
ac_help="$ac_help
  --with-zlib-dir[=DIR]     GD: Set the path to libz install prefix."
ac_help="$ac_help
  --with-xpm-dir[=DIR]      GD: Set the path to libXpm install prefix."
ac_help="$ac_help
  --with-ttf[=DIR]          GD: Include FreeType 1.x support"
ac_help="$ac_help
  --with-freetype-dir[=DIR] GD: Set the path to FreeType 2 install prefix."
ac_help="$ac_help
  --with-t1lib[=DIR]        GD: Include T1lib support."
ac_help="$ac_help
  --enable-gd-native-ttf    GD: Enable TrueType string function."
ac_help="$ac_help
  --enable-gd-jis-conv      GD: Enable JIS-mapped Japanese font suppert."
ac_help="$ac_help
  --with-gettext[=DIR]    Include GNU gettext support."
ac_help="$ac_help
  --with-gmp              Include GNU MP support"
ac_help="$ac_help
  --with-hwapi[=DIR]      Include official Hyperwave API support"
ac_help="$ac_help
  --with-hyperwave        Include Hyperwave support"
ac_help="$ac_help
  --with-iconv[=DIR]      Include iconv support"
ac_help="$ac_help
  --with-imap[=DIR]       Include IMAP support. DIR is the c-client install prefix."
ac_help="$ac_help
  --with-kerberos[=DIR]     IMAP: Include Kerberos support. DIR is the Kerberos install dir."
ac_help="$ac_help
  --with-imap-ssl=<DIR>     IMAP: Include SSL support. DIR is the OpenSSL install dir."
ac_help="$ac_help
  --with-informix[=DIR]   Include Informix support.  DIR is the Informix base
                          install directory, defaults to ${INFORMIXDIR:-nothing}."
ac_help="$ac_help
  --with-ingres[=DIR]     Include Ingres II support. DIR is the Ingres
                          base directory (default $II_SYSTEM/ingres)"
ac_help="$ac_help
  --with-interbase[=DIR]  Include InterBase support.  DIR is the InterBase base
                          install directory, defaults to /usr/interbase"
ac_help="$ac_help
  --with-ircg             Include IRCG support"
ac_help="$ac_help
  --with-ircg-config=PATH   IRCG: Path to the ircg-config script"
ac_help="$ac_help
  --with-java[=DIR]       Include Java support. DIR is the JDK base install directory. 
                          This extension is always built as shared."
ac_help="$ac_help
  --with-ldap[=DIR]       Include LDAP support."
ac_help="$ac_help
  --enable-mbstring       Enable multibyte string support"
ac_help="$ac_help
  --enable-mbregex        Enable multibyte regex support"
ac_help="$ac_help
  --with-mcal[=DIR]       Include MCAL support."
ac_help="$ac_help
  --with-mcrypt[=DIR]     Include mcrypt support."
ac_help="$ac_help
  --with-mcve[=DIR]       Include MCVE support"
ac_help="$ac_help
  --with-mhash[=DIR]      Include mhash support."
ac_help="$ac_help
  --with-mime-magic[=FILE]  Include mime_magic support. FILE is the optional
                            pathname to the magic.mime file."
ac_help="$ac_help
  --with-ming[=DIR]       Include MING support"
ac_help="$ac_help
  --with-mnogosearch[=DIR]
                          Include mnoGoSearch support.  DIR is the mnoGoSearch 
                          base install directory, defaults to 
                          /usr/local/mnogosearch."
ac_help="$ac_help
  --with-msession[=DIR]   Include msession support"
ac_help="$ac_help
  --with-msql[=DIR]       Include mSQL support.  DIR is the mSQL base
                          install directory, defaults to /usr/local/Hughes."
ac_help="$ac_help
  --with-mssql[=DIR]      Include MSSQL-DB support.  DIR is the FreeTDS home
                          directory, defaults to /usr/local/freetds."
ac_help="$ac_help
  --with-mysql[=DIR]      Include MySQL support. DIR is the MySQL base directory.
                          If unspecified, the bundled MySQL library will be used."
ac_help="$ac_help
  --with-mysql-sock[=DIR]   MySQL: Location of the MySQL unix socket pointer.
                            If unspecified, the default locations are searched."
ac_help="$ac_help
  --with-zlib-dir[=DIR]     MySQL: Set the path to libz install prefix."
ac_help="$ac_help
  --with-ncurses[=DIR]    Include ncurses support (CLI/CGI only)."
ac_help="$ac_help
  --with-oci8[=DIR]       Include Oracle-oci8 support. Default DIR is 
                          ORACLE_HOME."
ac_help="$ac_help
  --with-adabas[=DIR]     Include Adabas D support.  DIR is the Adabas base
                          install directory, defaults to /usr/local."
ac_help="$ac_help
  --with-sapdb[=DIR]      Include SAP DB support.  DIR is SAP DB base
                          install directory, defaults to /usr/local."
ac_help="$ac_help
  --with-solid[=DIR]      Include Solid support.  DIR is the Solid base
                          install directory, defaults to /usr/local/solid"
ac_help="$ac_help
  --with-ibm-db2[=DIR]    Include IBM DB2 support.  DIR is the DB2 base
                          install directory, defaults to /home/db2inst1/sqllib"
ac_help="$ac_help
  --with-empress[=DIR]    Include Empress support.  DIR is the Empress base
                          install directory, defaults to \$EMPRESSPATH.
                          From PHP4, this option only supports Empress Version
                          8.60 and above"
ac_help="$ac_help
  --with-empress-bcs[=DIR]
                          Include Empress Local Access support.  DIR is the 
                          Empress base install directory, defaults to 
                          \$EMPRESSPATH.  From PHP4, this option only supports
                          Empress Version 8.60 and above."
ac_help="$ac_help
  --with-birdstep[=DIR]   Include Birdstep support.  DIR is the Birdstep base
                          install directory, defaults to /usr/local/birdstep."
ac_help="$ac_help
  --with-custom-odbc[=DIR]      
                          Include a user defined ODBC support.
                          The DIR is ODBC install base directory, 
                          which defaults to /usr/local.
                          Make sure to define CUSTOM_ODBC_LIBS and
                          have some odbc.h in your include dirs.
                          E.g., you should define following for 
                          Sybase SQL Anywhere 5.5.00 on QNX, prior to
                          run configure script:
                              CPPFLAGS=\"-DODBC_QNX -DSQLANY_BUG\"
                              LDFLAGS=-lunix
                              CUSTOM_ODBC_LIBS=\"-ldblib -lodbc\"."
ac_help="$ac_help
  --with-iodbc[=DIR]      Include iODBC support.  DIR is the iODBC base
                          install directory, defaults to /usr/local."
ac_help="$ac_help
  --with-esoob[=DIR]      Include Easysoft OOB support. DIR is the OOB base
                          install directory,
                          defaults to /usr/local/easysoft/oob/client."
ac_help="$ac_help
  --with-unixODBC[=DIR]   Include unixODBC support.  DIR is the unixODBC base
                          install directory, defaults to /usr/local."
ac_help="$ac_help
  --with-openlink[=DIR]   Include OpenLink ODBC support.  DIR is the
                          OpenLink base install directory, defaults to
                          /usr/local.  This is the same as iODBC."
ac_help="$ac_help
  --with-dbmaker[=DIR]    Include DBMaker support.  DIR is the DBMaker base
                          install directory, defaults to where the latest 
                          version of DBMaker is installed (such as
                          /home/dbmaker/3.6)."
ac_help="$ac_help
  --with-oracle[=DIR]     Include Oracle-oci7 support.  Default DIR is 
                          ORACLE_HOME."
ac_help="$ac_help
  --disable-overload      Disable user-space object overloading support."
ac_help="$ac_help
  --with-ovrimos[=DIR]    Include Ovrimos SQL Server support. DIR is the
                          Ovrimos libsqlcli install directory."
ac_help="$ac_help
  --enable-pcntl          Enable experimental pcntl support (CLI/CGI only)"
ac_help="$ac_help
  --without-pcre-regex    Do not include Perl Compatible Regular Expressions 
                          support. Use --with-pcre-regex=DIR to specify DIR
                          where PCRE's include and library files are located,
                          if not using bundled library."
ac_help="$ac_help
  --with-pdflib[=DIR]     Include PDFlib support."
ac_help="$ac_help
  --with-jpeg-dir[=DIR]     PDFLIB: define libjpeg install directory.
                                     (OPTIONAL for PDFlib v4)"
ac_help="$ac_help
  --with-png-dir[=DIR]      PDFLIB: define libpng install directory.
                                     (OPTIONAL for PDFlib v4)"
ac_help="$ac_help
  --with-zlib-dir[=DIR]     PDFLIB: define libz install directory.
                                     (OPTIONAL for PDFlib v4)"
ac_help="$ac_help
  --with-tiff-dir[=DIR]     PDFLIB: define libtiff install directory.
                                     (OPTIONAL for PDFlib v4)"
ac_help="$ac_help
  --with-pfpro[=DIR]      Include Verisign Payflow Pro support."
ac_help="$ac_help
  --with-pgsql[=DIR]      Include PostgreSQL support.  DIR is the PostgreSQL
                          base install directory, defaults to /usr/local/pgsql."
ac_help="$ac_help
  --disable-posix         Disable POSIX-like functions"
ac_help="$ac_help
  --with-pspell[=DIR]     Include PSPELL support.
                          This replaces the old ASPELL extension."
ac_help="$ac_help
  --with-qtdom            Include QtDOM support (requires Qt >= 2.2.0)."
ac_help="$ac_help
  --with-libedit[=DIR]    Include libedit readline replacement (CLI/CGI only)."
ac_help="$ac_help
  --with-readline[=DIR]   Include readline support (CLI/CGI only)."
ac_help="$ac_help
  --with-recode[=DIR]     Include recode support."
ac_help="$ac_help
  --disable-session       Disable session support"
ac_help="$ac_help
  --with-mm[=DIR]         Include mm support for session storage"
ac_help="$ac_help
  --enable-shmop          Enable shmop support"
ac_help="$ac_help
  --with-snmp[=DIR]       Include SNMP support."
ac_help="$ac_help
  --enable-ucd-snmp-hack  Enable UCD SNMP hack"
ac_help="$ac_help
  --enable-sockets        Enable sockets support"
ac_help="$ac_help
  --with-regex=TYPE       regex library type: system, apache, php. Default: php
                          WARNING: Do NOT use unless you know what you are doing!"
ac_help="$ac_help
  --with-swf[=DIR]        Include swf support"
ac_help="$ac_help
  --with-sybase[=DIR]     Include Sybase-DB support.  DIR is the Sybase home
                          directory, defaults to /home/sybase."
ac_help="$ac_help
  --with-sybase-ct[=DIR]  Include Sybase-CT support.  DIR is the Sybase home
                          directory. Defaults to /home/sybase."
ac_help="$ac_help
  --enable-sysvmsg        Enable sysvmsg support"
ac_help="$ac_help
  --enable-sysvsem        Enable System V semaphore support."
ac_help="$ac_help
  --enable-sysvshm        Enable the System V shared memory support."
ac_help="$ac_help
  --disable-tokenizer     Disable tokenizer support"
ac_help="$ac_help
  --enable-wddx           Enable WDDX support."
ac_help="$ac_help
  --disable-xml           Disable XML support using bundled expat lib"
ac_help="$ac_help
  --with-expat-dir=DIR    XML: external libexpat install dir"
ac_help="$ac_help
  --with-xmlrpc[=DIR]     Include XMLRPC-EPI support."
ac_help="$ac_help
  --with-expat-dir=DIR      XMLRPC-EPI: libexpat dir for XMLRPC-EPI."
ac_help="$ac_help
  --with-iconv-dir=DIR      XMLRPC-EPI: iconv dir for XMLRPC-EPI."
ac_help="$ac_help
  --enable-xslt           Enable xslt support."
ac_help="$ac_help
  --with-xslt-sablot=DIR    XSLT: Enable the sablotron backend."
ac_help="$ac_help
  --with-expat-dir=DIR      XSLT: libexpat dir for Sablotron."
ac_help="$ac_help
  --with-iconv-dir=DIR      XSLT: iconv dir for Sablotron."
ac_help="$ac_help
  --with-sablot-js=DIR      XSLT: enable JavaScript support for Sablotron."
ac_help="$ac_help
  --with-yaz[=DIR]        Include YAZ support (ANSI/NISO Z39.50). 
                          DIR is the YAZ bin install directory."
ac_help="$ac_help
  --enable-yp             Include YP support."
ac_help="$ac_help
  --with-zip[=DIR]        Include ZIP support (requires zziplib >= 0.10.6)."
ac_help="$ac_help

Other settings:
"
ac_help="$ac_help
  --enable-versioning     Export only required symbols.
                          See INSTALL for more information"
ac_help="$ac_help
  --enable-experimental-zts   This will most likely break your build"
ac_help="$ac_help
  --disable-inline-optimization If building zend_execute.lo fails, try
                                this switch."
ac_help="$ac_help
  --enable-memory-limit   Compile with memory limit support. "
ac_help="$ac_help
  --enable-zend-multibyte Compile with zend multibyte support. "
ac_help="$ac_help
  --with-tsrm-pth[=pth-config]    Use GNU Pth."
ac_help="$ac_help
  --with-tsrm-st"
ac_help="$ac_help
  --with-tsrm-pthreads    Use POSIX threads (default)"
ac_help="$ac_help
  --enable-shared[=PKGS]  build shared libraries [default=yes]"
ac_help="$ac_help
  --enable-static[=PKGS]  build static libraries [default=yes]"
ac_help="$ac_help
  --enable-fast-install[=PKGS]  optimize for fast installation [default=yes]"
ac_help="$ac_help
  --with-gnu-ld           assume the C compiler uses GNU ld [default=no]"

# Find the correct PATH separator.  Usually this is `:', but
# DJGPP uses `;' like DOS.
if test "X${PATH_SEPARATOR+set}" != Xset; then
  UNAME=${UNAME-`uname 2>/dev/null`}
  case X$UNAME in
    *-DOS) lt_cv_sys_path_separator=';' ;;
    *)     lt_cv_sys_path_separator=':' ;;
  esac
  PATH_SEPARATOR=$lt_cv_sys_path_separator
fi


# Check that we are running under the correct shell.
SHELL=${CONFIG_SHELL-/bin/sh}

case X$ECHO in
X*--fallback-echo)
  # Remove one level of quotation (which was required for Make).
  ECHO=`echo "$ECHO" | sed 's,\\\\\$\\$0,'$0','`
  ;;
esac

echo=${ECHO-echo}
if test "X$1" = X--no-reexec; then
  # Discard the --no-reexec flag, and continue.
  shift
elif test "X$1" = X--fallback-echo; then
  # Avoid inline document here, it may be left over
  :
elif test "X`($echo '\t') 2>/dev/null`" = 'X\t'; then
  # Yippee, $echo works!
  :
else
  # Restart under the correct shell.
  exec $SHELL "$0" --no-reexec ${1+"$@"}
fi

if test "X$1" = X--fallback-echo; then
  # used as fallback echo
  shift
  cat <<EOF

EOF
  exit 0
fi

# The HP-UX ksh and POSIX shell print the target directory to stdout
# if CDPATH is set.
if test "X${CDPATH+set}" = Xset; then CDPATH=:; export CDPATH; fi

if test -z "$ECHO"; then
if test "X${echo_test_string+set}" != Xset; then
# find a string as large as possible, as long as the shell can cope with it
  for cmd in 'sed 50q "$0"' 'sed 20q "$0"' 'sed 10q "$0"' 'sed 2q "$0"' 'echo test'; do
    # expected sizes: less than 2Kb, 1Kb, 512 bytes, 16 bytes, ...
    if (echo_test_string="`eval $cmd`") 2>/dev/null &&
       echo_test_string="`eval $cmd`" &&
       (test "X$echo_test_string" = "X$echo_test_string") 2>/dev/null
    then
      break
    fi
  done
fi

if test "X`($echo '\t') 2>/dev/null`" = 'X\t' &&
   echo_testing_string=`($echo "$echo_test_string") 2>/dev/null` &&
   test "X$echo_testing_string" = "X$echo_test_string"; then
  :
else
  # The Solaris, AIX, and Digital Unix default echo programs unquote
  # backslashes.  This makes it impossible to quote backslashes using
  #   echo "$something" | sed 's/\\/\\\\/g'
  #
  # So, first we look for a working echo in the user's PATH.

  IFS="${IFS= 	}"; save_ifs="$IFS"; IFS=$PATH_SEPARATOR
  for dir in $PATH /usr/ucb; do
    if (test -f $dir/echo || test -f $dir/echo$ac_exeext) &&
       test "X`($dir/echo '\t') 2>/dev/null`" = 'X\t' &&
       echo_testing_string=`($dir/echo "$echo_test_string") 2>/dev/null` &&
       test "X$echo_testing_string" = "X$echo_test_string"; then
      echo="$dir/echo"
      break
    fi
  done
  IFS="$save_ifs"

  if test "X$echo" = Xecho; then
    # We didn't find a better echo, so look for alternatives.
    if test "X`(print -r '\t') 2>/dev/null`" = 'X\t' &&
       echo_testing_string=`(print -r "$echo_test_string") 2>/dev/null` &&
       test "X$echo_testing_string" = "X$echo_test_string"; then
      # This shell has a builtin print -r that does the trick.
      echo='print -r'
    elif (test -f /bin/ksh || test -f /bin/ksh$ac_exeext) &&
	 test "X$CONFIG_SHELL" != X/bin/ksh; then
      # If we have ksh, try running configure again with it.
      ORIGINAL_CONFIG_SHELL=${CONFIG_SHELL-/bin/sh}
      export ORIGINAL_CONFIG_SHELL
      CONFIG_SHELL=/bin/ksh
      export CONFIG_SHELL
      exec $CONFIG_SHELL "$0" --no-reexec ${1+"$@"}
    else
      # Try using printf.
      echo='printf %s\n'
      if test "X`($echo '\t') 2>/dev/null`" = 'X\t' &&
	 echo_testing_string=`($echo "$echo_test_string") 2>/dev/null` &&
	 test "X$echo_testing_string" = "X$echo_test_string"; then
	# Cool, printf works
	:
      elif echo_testing_string=`($ORIGINAL_CONFIG_SHELL "$0" --fallback-echo '\t') 2>/dev/null` &&
	   test "X$echo_testing_string" = 'X\t' &&
	   echo_testing_string=`($ORIGINAL_CONFIG_SHELL "$0" --fallback-echo "$echo_test_string") 2>/dev/null` &&
	   test "X$echo_testing_string" = "X$echo_test_string"; then
	CONFIG_SHELL=$ORIGINAL_CONFIG_SHELL
	export CONFIG_SHELL
	SHELL="$CONFIG_SHELL"
	export SHELL
	echo="$CONFIG_SHELL $0 --fallback-echo"
      elif echo_testing_string=`($CONFIG_SHELL "$0" --fallback-echo '\t') 2>/dev/null` &&
	   test "X$echo_testing_string" = 'X\t' &&
	   echo_testing_string=`($CONFIG_SHELL "$0" --fallback-echo "$echo_test_string") 2>/dev/null` &&
	   test "X$echo_testing_string" = "X$echo_test_string"; then
	echo="$CONFIG_SHELL $0 --fallback-echo"
      else
	# maybe with a smaller string...
	prev=:

	for cmd in 'echo test' 'sed 2q "$0"' 'sed 10q "$0"' 'sed 20q "$0"' 'sed 50q "$0"'; do
	  if (test "X$echo_test_string" = "X`eval $cmd`") 2>/dev/null
	  then
	    break
	  fi
	  prev="$cmd"
	done

	if test "$prev" != 'sed 50q "$0"'; then
	  echo_test_string=`eval $prev`
	  export echo_test_string
	  exec ${ORIGINAL_CONFIG_SHELL-${CONFIG_SHELL-/bin/sh}} "$0" ${1+"$@"}
	else
	  # Oops.  We lost completely, so just stick with echo.
	  echo=echo
	fi
      fi
    fi
  fi
fi
fi

# Copy echo and quote the copy suitably for passing to libtool from
# the Makefile, instead of quoting the original, which is used later.
ECHO=$echo
if test "X$ECHO" = "X$CONFIG_SHELL $0 --fallback-echo"; then
   ECHO="$CONFIG_SHELL \\\$\$0 --fallback-echo"
fi


ac_help="$ac_help
  --disable-libtool-lock  avoid locking (might break parallel builds)"
ac_help="$ac_help
  --with-pic              try to use only PIC/non-PIC objects [default=use both]"

# Initialize some variables set by options.
# The variables have the same names as the options, with
# dashes changed to underlines.
build=NONE
cache_file=./config.cache
exec_prefix=NONE
host=NONE
no_create=
nonopt=NONE
no_recursion=
prefix=NONE
program_prefix=NONE
program_suffix=NONE
program_transform_name=s,x,x,
silent=
site=
srcdir=
target=NONE
verbose=
x_includes=NONE
x_libraries=NONE
bindir='${exec_prefix}/bin'
sbindir='${exec_prefix}/sbin'
libexecdir='${exec_prefix}/libexec'
datadir='${prefix}/share'
sysconfdir='${prefix}/etc'
sharedstatedir='${prefix}/com'
localstatedir='${prefix}/var'
libdir='${exec_prefix}/lib'
includedir='${prefix}/include'
oldincludedir='/usr/include'
infodir='${prefix}/info'
mandir='${prefix}/man'

# Initialize some other variables.
subdirs=
MFLAGS= MAKEFLAGS=
SHELL=${CONFIG_SHELL-/bin/sh}
# Maximum number of lines to put in a shell here document.
ac_max_here_lines=12

ac_prev=
for ac_option
do

  # If the previous option needs an argument, assign it.
  if test -n "$ac_prev"; then
    eval "$ac_prev=\$ac_option"
    ac_prev=
    continue
  fi

  case "$ac_option" in
  -*=*) ac_optarg=`echo "$ac_option" | sed 's/[-_a-zA-Z0-9]*=//'` ;;
  *) ac_optarg= ;;
  esac

  # Accept the important Cygnus configure options, so we can diagnose typos.

  case "$ac_option" in

  -bindir | --bindir | --bindi | --bind | --bin | --bi)
    ac_prev=bindir ;;
  -bindir=* | --bindir=* | --bindi=* | --bind=* | --bin=* | --bi=*)
    bindir="$ac_optarg" ;;

  -build | --build | --buil | --bui | --bu)
    ac_prev=build ;;
  -build=* | --build=* | --buil=* | --bui=* | --bu=*)
    build="$ac_optarg" ;;

  -cache-file | --cache-file | --cache-fil | --cache-fi \
  | --cache-f | --cache- | --cache | --cach | --cac | --ca | --c)
    ac_prev=cache_file ;;
  -cache-file=* | --cache-file=* | --cache-fil=* | --cache-fi=* \
  | --cache-f=* | --cache-=* | --cache=* | --cach=* | --cac=* | --ca=* | --c=*)
    cache_file="$ac_optarg" ;;

  -datadir | --datadir | --datadi | --datad | --data | --dat | --da)
    ac_prev=datadir ;;
  -datadir=* | --datadir=* | --datadi=* | --datad=* | --data=* | --dat=* \
  | --da=*)
    datadir="$ac_optarg" ;;

  -disable-* | --disable-*)
    ac_feature=`echo $ac_option|sed -e 's/-*disable-//'`
    # Reject names that are not valid shell variable names.
    if test -n "`echo $ac_feature| sed 's/[-a-zA-Z0-9_]//g'`"; then
      { echo "configure: error: $ac_feature: invalid feature name" 1>&2; exit 1; }
    fi
    ac_feature=`echo $ac_feature| sed 's/-/_/g'`
    eval "enable_${ac_feature}=no" ;;

  -enable-* | --enable-*)
    ac_feature=`echo $ac_option|sed -e 's/-*enable-//' -e 's/=.*//'`
    # Reject names that are not valid shell variable names.
    if test -n "`echo $ac_feature| sed 's/[-_a-zA-Z0-9]//g'`"; then
      { echo "configure: error: $ac_feature: invalid feature name" 1>&2; exit 1; }
    fi
    ac_feature=`echo $ac_feature| sed 's/-/_/g'`
    case "$ac_option" in
      *=*) ;;
      *) ac_optarg=yes ;;
    esac
    eval "enable_${ac_feature}='$ac_optarg'" ;;

  -exec-prefix | --exec_prefix | --exec-prefix | --exec-prefi \
  | --exec-pref | --exec-pre | --exec-pr | --exec-p | --exec- \
  | --exec | --exe | --ex)
    ac_prev=exec_prefix ;;
  -exec-prefix=* | --exec_prefix=* | --exec-prefix=* | --exec-prefi=* \
  | --exec-pref=* | --exec-pre=* | --exec-pr=* | --exec-p=* | --exec-=* \
  | --exec=* | --exe=* | --ex=*)
    exec_prefix="$ac_optarg" ;;

  -gas | --gas | --ga | --g)
    # Obsolete; use --with-gas.
    with_gas=yes ;;

  -help | --help | --hel | --he)
    # Omit some internal or obsolete options to make the list less imposing.
    # This message is too long to be a string in the A/UX 3.1 sh.
    cat << EOF
Usage: configure [options] [host]
Options: [defaults in brackets after descriptions]
Configuration:
  --cache-file=FILE       cache test results in FILE
  --help                  print this message
  --no-create             do not create output files
  --quiet, --silent       do not print \`checking...' messages
  --version               print the version of autoconf that created configure
Directory and file names:
  --prefix=PREFIX         install architecture-independent files in PREFIX
                          [$ac_default_prefix]
  --exec-prefix=EPREFIX   install architecture-dependent files in EPREFIX
                          [same as prefix]
  --bindir=DIR            user executables in DIR [EPREFIX/bin]
  --sbindir=DIR           system admin executables in DIR [EPREFIX/sbin]
  --libexecdir=DIR        program executables in DIR [EPREFIX/libexec]
  --datadir=DIR           read-only architecture-independent data in DIR
                          [PREFIX/share]
  --sysconfdir=DIR        read-only single-machine data in DIR [PREFIX/etc]
  --sharedstatedir=DIR    modifiable architecture-independent data in DIR
                          [PREFIX/com]
  --localstatedir=DIR     modifiable single-machine data in DIR [PREFIX/var]
  --libdir=DIR            object code libraries in DIR [EPREFIX/lib]
  --includedir=DIR        C header files in DIR [PREFIX/include]
  --oldincludedir=DIR     C header files for non-gcc in DIR [/usr/include]
  --infodir=DIR           info documentation in DIR [PREFIX/info]
  --mandir=DIR            man documentation in DIR [PREFIX/man]
  --srcdir=DIR            find the sources in DIR [configure dir or ..]
  --program-prefix=PREFIX prepend PREFIX to installed program names
  --program-suffix=SUFFIX append SUFFIX to installed program names
  --program-transform-name=PROGRAM
                          run sed PROGRAM on installed program names
EOF
    cat << EOF
Host type:
  --build=BUILD           configure for building on BUILD [BUILD=HOST]
  --host=HOST             configure for HOST [guessed]
  --target=TARGET         configure for TARGET [TARGET=HOST]
Features and packages:
  --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
  --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
  --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]
  --without-PACKAGE       do not use PACKAGE (same as --with-PACKAGE=no)
  --x-includes=DIR        X include files are in DIR
  --x-libraries=DIR       X library files are in DIR
EOF
    if test -n "$ac_help"; then
      echo "--enable and --with options recognized:$ac_help"
    fi
    exit 0 ;;

  -host | --host | --hos | --ho)
    ac_prev=host ;;
  -host=* | --host=* | --hos=* | --ho=*)
    host="$ac_optarg" ;;

  -includedir | --includedir | --includedi | --included | --include \
  | --includ | --inclu | --incl | --inc)
    ac_prev=includedir ;;
  -includedir=* | --includedir=* | --includedi=* | --included=* | --include=* \
  | --includ=* | --inclu=* | --incl=* | --inc=*)
    includedir="$ac_optarg" ;;

  -infodir | --infodir | --infodi | --infod | --info | --inf)
    ac_prev=infodir ;;
  -infodir=* | --infodir=* | --infodi=* | --infod=* | --info=* | --inf=*)
    infodir="$ac_optarg" ;;

  -libdir | --libdir | --libdi | --libd)
    ac_prev=libdir ;;
  -libdir=* | --libdir=* | --libdi=* | --libd=*)
    libdir="$ac_optarg" ;;

  -libexecdir | --libexecdir | --libexecdi | --libexecd | --libexec \
  | --libexe | --libex | --libe)
    ac_prev=libexecdir ;;
  -libexecdir=* | --libexecdir=* | --libexecdi=* | --libexecd=* | --libexec=* \
  | --libexe=* | --libex=* | --libe=*)
    libexecdir="$ac_optarg" ;;

  -localstatedir | --localstatedir | --localstatedi | --localstated \
  | --localstate | --localstat | --localsta | --localst \
  | --locals | --local | --loca | --loc | --lo)
    ac_prev=localstatedir ;;
  -localstatedir=* | --localstatedir=* | --localstatedi=* | --localstated=* \
  | --localstate=* | --localstat=* | --localsta=* | --localst=* \
  | --locals=* | --local=* | --loca=* | --loc=* | --lo=*)
    localstatedir="$ac_optarg" ;;

  -mandir | --mandir | --mandi | --mand | --man | --ma | --m)
    ac_prev=mandir ;;
  -mandir=* | --mandir=* | --mandi=* | --mand=* | --man=* | --ma=* | --m=*)
    mandir="$ac_optarg" ;;

  -nfp | --nfp | --nf)
    # Obsolete; use --without-fp.
    with_fp=no ;;

  -no-create | --no-create | --no-creat | --no-crea | --no-cre \
  | --no-cr | --no-c)
    no_create=yes ;;

  -no-recursion | --no-recursion | --no-recursio | --no-recursi \
  | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r)
    no_recursion=yes ;;

  -oldincludedir | --oldincludedir | --oldincludedi | --oldincluded \
  | --oldinclude | --oldinclud | --oldinclu | --oldincl | --oldinc \
  | --oldin | --oldi | --old | --ol | --o)
    ac_prev=oldincludedir ;;
  -oldincludedir=* | --oldincludedir=* | --oldincludedi=* | --oldincluded=* \
  | --oldinclude=* | --oldinclud=* | --oldinclu=* | --oldincl=* | --oldinc=* \
  | --oldin=* | --oldi=* | --old=* | --ol=* | --o=*)
    oldincludedir="$ac_optarg" ;;

  -prefix | --prefix | --prefi | --pref | --pre | --pr | --p)
    ac_prev=prefix ;;
  -prefix=* | --prefix=* | --prefi=* | --pref=* | --pre=* | --pr=* | --p=*)
    prefix="$ac_optarg" ;;

  -program-prefix | --program-prefix | --program-prefi | --program-pref \
  | --program-pre | --program-pr | --program-p)
    ac_prev=program_prefix ;;
  -program-prefix=* | --program-prefix=* | --program-prefi=* \
  | --program-pref=* | --program-pre=* | --program-pr=* | --program-p=*)
    program_prefix="$ac_optarg" ;;

  -program-suffix | --program-suffix | --program-suffi | --program-suff \
  | --program-suf | --program-su | --program-s)
    ac_prev=program_suffix ;;
  -program-suffix=* | --program-suffix=* | --program-suffi=* \
  | --program-suff=* | --program-suf=* | --program-su=* | --program-s=*)
    program_suffix="$ac_optarg" ;;

  -program-transform-name | --program-transform-name \
  | --program-transform-nam | --program-transform-na \
  | --program-transform-n | --program-transform- \
  | --program-transform | --program-transfor \
  | --program-transfo | --program-transf \
  | --program-trans | --program-tran \
  | --progr-tra | --program-tr | --program-t)
    ac_prev=program_transform_name ;;
  -program-transform-name=* | --program-transform-name=* \
  | --program-transform-nam=* | --program-transform-na=* \
  | --program-transform-n=* | --program-transform-=* \
  | --program-transform=* | --program-transfor=* \
  | --program-transfo=* | --program-transf=* \
  | --program-trans=* | --program-tran=* \
  | --progr-tra=* | --program-tr=* | --program-t=*)
    program_transform_name="$ac_optarg" ;;

  -q | -quiet | --quiet | --quie | --qui | --qu | --q \
  | -silent | --silent | --silen | --sile | --sil)
    silent=yes ;;

  -sbindir | --sbindir | --sbindi | --sbind | --sbin | --sbi | --sb)
    ac_prev=sbindir ;;
  -sbindir=* | --sbindir=* | --sbindi=* | --sbind=* | --sbin=* \
  | --sbi=* | --sb=*)
    sbindir="$ac_optarg" ;;

  -sharedstatedir | --sharedstatedir | --sharedstatedi \
  | --sharedstated | --sharedstate | --sharedstat | --sharedsta \
  | --sharedst | --shareds | --shared | --share | --shar \
  | --sha | --sh)
    ac_prev=sharedstatedir ;;
  -sharedstatedir=* | --sharedstatedir=* | --sharedstatedi=* \
  | --sharedstated=* | --sharedstate=* | --sharedstat=* | --sharedsta=* \
  | --sharedst=* | --shareds=* | --shared=* | --share=* | --shar=* \
  | --sha=* | --sh=*)
    sharedstatedir="$ac_optarg" ;;

  -site | --site | --sit)
    ac_prev=site ;;
  -site=* | --site=* | --sit=*)
    site="$ac_optarg" ;;

  -srcdir | --srcdir | --srcdi | --srcd | --src | --sr)
    ac_prev=srcdir ;;
  -srcdir=* | --srcdir=* | --srcdi=* | --srcd=* | --src=* | --sr=*)
    srcdir="$ac_optarg" ;;

  -sysconfdir | --sysconfdir | --sysconfdi | --sysconfd | --sysconf \
  | --syscon | --sysco | --sysc | --sys | --sy)
    ac_prev=sysconfdir ;;
  -sysconfdir=* | --sysconfdir=* | --sysconfdi=* | --sysconfd=* | --sysconf=* \
  | --syscon=* | --sysco=* | --sysc=* | --sys=* | --sy=*)
    sysconfdir="$ac_optarg" ;;

  -target | --target | --targe | --targ | --tar | --ta | --t)
    ac_prev=target ;;
  -target=* | --target=* | --targe=* | --targ=* | --tar=* | --ta=* | --t=*)
    target="$ac_optarg" ;;

  -v | -verbose | --verbose | --verbos | --verbo | --verb)
    verbose=yes ;;

  -version | --version | --versio | --versi | --vers)
    echo "configure generated by autoconf version 2.13"
    exit 0 ;;

  -with-* | --with-*)
    ac_package=`echo $ac_option|sed -e 's/-*with-//' -e 's/=.*//'`
    # Reject names that are not valid shell variable names.
    if test -n "`echo $ac_package| sed 's/[-_a-zA-Z0-9]//g'`"; then
      { echo "configure: error: $ac_package: invalid package name" 1>&2; exit 1; }
    fi
    ac_package=`echo $ac_package| sed 's/-/_/g'`
    case "$ac_option" in
      *=*) ;;
      *) ac_optarg=yes ;;
    esac
    eval "with_${ac_package}='$ac_optarg'" ;;

  -without-* | --without-*)
    ac_package=`echo $ac_option|sed -e 's/-*without-//'`
    # Reject names that are not valid shell variable names.
    if test -n "`echo $ac_package| sed 's/[-a-zA-Z0-9_]//g'`"; then
      { echo "configure: error: $ac_package: invalid package name" 1>&2; exit 1; }
    fi
    ac_package=`echo $ac_package| sed 's/-/_/g'`
    eval "with_${ac_package}=no" ;;

  --x)
    # Obsolete; use --with-x.
    with_x=yes ;;

  -x-includes | --x-includes | --x-include | --x-includ | --x-inclu \
  | --x-incl | --x-inc | --x-in | --x-i)
    ac_prev=x_includes ;;
  -x-includes=* | --x-includes=* | --x-include=* | --x-includ=* | --x-inclu=* \
  | --x-incl=* | --x-inc=* | --x-in=* | --x-i=*)
    x_includes="$ac_optarg" ;;

  -x-libraries | --x-libraries | --x-librarie | --x-librari \
  | --x-librar | --x-libra | --x-libr | --x-lib | --x-li | --x-l)
    ac_prev=x_libraries ;;
  -x-libraries=* | --x-libraries=* | --x-librarie=* | --x-librari=* \
  | --x-librar=* | --x-libra=* | --x-libr=* | --x-lib=* | --x-li=* | --x-l=*)
    x_libraries="$ac_optarg" ;;

  -*) { echo "configure: error: $ac_option: invalid option; use --help to show usage" 1>&2; exit 1; }
    ;;

  *)
    if test -n "`echo $ac_option| sed 's/[-a-z0-9.]//g'`"; then
      echo "configure: warning: $ac_option: invalid host type" 1>&2
    fi
    if test "x$nonopt" != xNONE; then
      { echo "configure: error: can only configure for one host and one target at a time" 1>&2; exit 1; }
    fi
    nonopt="$ac_option"
    ;;

  esac
done

if test -n "$ac_prev"; then
  { echo "configure: error: missing argument to --`echo $ac_prev | sed 's/_/-/g'`" 1>&2; exit 1; }
fi

trap 'rm -fr conftest* confdefs* core core.* *.core $ac_clean_files; exit 1' 1 2 15

# File descriptor usage:
# 0 standard input
# 1 file creation
# 2 errors and warnings
# 3 some systems may open it to /dev/tty
# 4 used on the Kubota Titan
# 6 checking for... messages and results
# 5 compiler messages saved in config.log
if test "$silent" = yes; then
  exec 6>/dev/null
else
  exec 6>&1
fi
exec 5>./config.log

echo "\
This file contains any messages produced by compilers while
running configure, to aid debugging if configure makes a mistake.
" 1>&5

# Strip out --no-create and --no-recursion so they do not pile up.
# Also quote any args containing shell metacharacters.
ac_configure_args=
for ac_arg
do
  case "$ac_arg" in
  -no-create | --no-create | --no-creat | --no-crea | --no-cre \
  | --no-cr | --no-c) ;;
  -no-recursion | --no-recursion | --no-recursio | --no-recursi \
  | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r) ;;
  *" "*|*"	"*|*[\[\]\~\#\$\^\&\*\(\)\{\}\\\|\;\<\>\?]*)
  ac_configure_args="$ac_configure_args '$ac_arg'" ;;
  *) ac_configure_args="$ac_configure_args $ac_arg" ;;
  esac
done

# NLS nuisances.
# Only set these to C if already set.  These must not be set unconditionally
# because not all systems understand e.g. LANG=C (notably SCO).
# Fixing LC_MESSAGES prevents Solaris sh from translating var values in `set'!
# Non-C LC_CTYPE values break the ctype check.
if test "${LANG+set}"   = set; then LANG=C;   export LANG;   fi
if test "${LC_ALL+set}" = set; then LC_ALL=C; export LC_ALL; fi
if test "${LC_MESSAGES+set}" = set; then LC_MESSAGES=C; export LC_MESSAGES; fi
if test "${LC_CTYPE+set}"    = set; then LC_CTYPE=C;    export LC_CTYPE;    fi

# confdefs.h avoids OS command line length limits that DEFS can exceed.
rm -rf conftest* confdefs.h
# AIX cpp loses on an empty file, so make sure it contains at least a newline.
echo > confdefs.h

# A filename unique to this package, relative to the directory that
# configure is in, which we can look for to find out if srcdir is correct.
ac_unique_file=README.CVS-RULES

# Find the source files, if location was not specified.
if test -z "$srcdir"; then
  ac_srcdir_defaulted=yes
  # Try the directory containing this script, then its parent.
  ac_prog=$0
  ac_confdir=`echo $ac_prog|sed 's%/[^/][^/]*$%%'`
  test "x$ac_confdir" = "x$ac_prog" && ac_confdir=.
  srcdir=$ac_confdir
  if test ! -r $srcdir/$ac_unique_file; then
    srcdir=..
  fi
else
  ac_srcdir_defaulted=no
fi
if test ! -r $srcdir/$ac_unique_file; then
  if test "$ac_srcdir_defaulted" = yes; then
    { echo "configure: error: can not find sources in $ac_confdir or .." 1>&2; exit 1; }
  else
    { echo "configure: error: can not find sources in $srcdir" 1>&2; exit 1; }
  fi
fi
srcdir=`echo "${srcdir}" | sed 's%\([^/]\)/*$%\1%'`

# Prefer explicitly selected file to automatically selected ones.
if test -z "$CONFIG_SITE"; then
  if test "x$prefix" != xNONE; then
    CONFIG_SITE="$prefix/share/config.site $prefix/etc/config.site"
  else
    CONFIG_SITE="$ac_default_prefix/share/config.site $ac_default_prefix/etc/config.site"
  fi
fi
for ac_site_file in $CONFIG_SITE; do
  if test -r "$ac_site_file"; then
    echo "loading site script $ac_site_file"
    . "$ac_site_file"
  fi
done

if test -r "$cache_file"; then
  echo "loading cache $cache_file"
  . $cache_file
else
  echo "creating cache $cache_file"
  > $cache_file
fi

ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

ac_exeext=
ac_objext=o
if (echo "testing\c"; echo 1,2,3) | grep c >/dev/null; then
  # Stardent Vistra SVR4 grep lacks -e, says ghazi@caip.rutgers.edu.
  if (echo -n testing; echo 1,2,3) | sed s/-n/xn/ | grep xn >/dev/null; then
    ac_n= ac_c='
' ac_t='	'
  else
    ac_n=-n ac_c= ac_t=
  fi
else
  ac_n= ac_c='\c' ac_t=
fi








  test -f config.nice && mv config.nice config.nice.old
  rm -f config.nice.old
  cat >config.nice<<EOF
#! /bin/sh
#
# Created by configure

EOF

  for var in CFLAGS CXXFLAGS CPPFLAGS LDFLAGS LIBS CC CXX; do
    eval val=\$$var
    if test -n "$val"; then
      echo "$var='$val' \\" >> config.nice
    fi
  done

  for arg in $0 "$@"; do
    echo "'$arg' \\" >> config.nice
  done
  echo '"$@"' >> config.nice
  chmod +x config.nice

for arg in $0 "$@"; do
  CONFIGURE_COMMAND="$CONFIGURE_COMMAND '$arg'"
done

ac_aux_dir=
for ac_dir in $srcdir $srcdir/.. $srcdir/../..; do
  if test -f $ac_dir/install-sh; then
    ac_aux_dir=$ac_dir
    ac_install_sh="$ac_aux_dir/install-sh -c"
    break
  elif test -f $ac_dir/install.sh; then
    ac_aux_dir=$ac_dir
    ac_install_sh="$ac_aux_dir/install.sh -c"
    break
  fi
done
if test -z "$ac_aux_dir"; then
  { echo "configure: error: can not find install-sh or install.sh in $srcdir $srcdir/.. $srcdir/../.." 1>&2; exit 1; }
fi
ac_config_guess=$ac_aux_dir/config.guess
ac_config_sub=$ac_aux_dir/config.sub
ac_configure=$ac_aux_dir/configure # This should be Cygnus configure.


# Make sure we can run config.sub.
if ${CONFIG_SHELL-/bin/sh} $ac_config_sub sun4 >/dev/null 2>&1; then :
else { echo "configure: error: can not run $ac_config_sub" 1>&2; exit 1; }
fi

echo $ac_n "checking host system type""... $ac_c" 1>&6
echo "configure:1601: checking host system type" >&5

host_alias=$host
case "$host_alias" in
NONE)
  case $nonopt in
  NONE)
    if host_alias=`${CONFIG_SHELL-/bin/sh} $ac_config_guess`; then :
    else { echo "configure: error: can not guess host type; you must specify one" 1>&2; exit 1; }
    fi ;;
  *) host_alias=$nonopt ;;
  esac ;;
esac

host=`${CONFIG_SHELL-/bin/sh} $ac_config_sub $host_alias`
host_cpu=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
host_vendor=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
host_os=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
echo "$ac_t""$host" 1>&6



MAJOR_VERSION=4
MINOR_VERSION=3
RELEASE_VERSION=2
EXTRA_VERSION=
VERSION="$MAJOR_VERSION.$MINOR_VERSION.$RELEASE_VERSION$EXTRA_VERSION"



PHP_VERSION=$VERSION
echo "/* automatically generated by configure */" > php_version.h.new
echo "/* edit configure.in to change version number */" >> php_version.h.new
echo "#define PHP_MAJOR_VERSION $MAJOR_VERSION" >> php_version.h.new
echo "#define PHP_MINOR_VERSION $MINOR_VERSION" >> php_version.h.new
echo "#define PHP_RELEASE_VERSION $RELEASE_VERSION" >> php_version.h.new
echo "#define PHP_EXTRA_VERSION \"$EXTRA_VERSION\"" >> php_version.h.new
echo "#define PHP_VERSION \"$PHP_VERSION\"" >> php_version.h.new
cmp php_version.h.new $srcdir/main/php_version.h >/dev/null 2>&1
if test $? -ne 0 ; then
    rm -f $srcdir/main/php_version.h && mv php_version.h.new $srcdir/main/php_version.h && \
    echo 'Updated main/php_version.h'
else
    rm -f php_version.h.new
fi



if test "$with_shared_apache" != "no" && test -n "$with_shared_apache" ; then
  { echo "configure: error: --with-shared-apache is not supported. Please refer to the documentation for using APXS" 1>&2; exit 1; }
fi

if test -n "$with_apache" && test -n "$with_apxs"; then
  { echo "configure: error: --with-apache and --with-apxs cannot be used together" 1>&2; exit 1; }
fi



cwd=`pwd`

php_shtool=$srcdir/build/shtool
T_MD=`$php_shtool echo -n -e %B`
T_ME=`$php_shtool echo -n -e %b`


test -d include || mkdir include
> Makefile.objects
> Makefile.fragments
pattern=define
egrep $pattern'.*include/php' $srcdir/configure|sed 's/.*>//'|xargs touch 2>/dev/null


test -z "$CFLAGS" && auto_cflags=1

abs_srcdir=`(cd $srcdir; pwd)`
abs_builddir=`pwd`

php_abs_top_srcdir=$abs_srcdir
php_abs_top_builddir=$abs_builddir


$php_shtool mkdir -p libs
rm -f libs/*


# Extract the first word of "gcc", so it can be a program name with args.
set dummy gcc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1689: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CC="gcc"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

if test -z "$CC"; then
  # Extract the first word of "cc", so it can be a program name with args.
set dummy cc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1719: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_prog_rejected=no
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      if test "$ac_dir/$ac_word" = "/usr/ucb/cc"; then
        ac_prog_rejected=yes
	continue
      fi
      ac_cv_prog_CC="cc"
      break
    fi
  done
  IFS="$ac_save_ifs"
if test $ac_prog_rejected = yes; then
  # We found a bogon in the path, so make sure we never use it.
  set dummy $ac_cv_prog_CC
  shift
  if test $# -gt 0; then
    # We chose a different compiler from the bogus one.
    # However, it has the same basename, so the bogon will be chosen
    # first if we set CC to just the basename; use the full file name.
    shift
    set dummy "$ac_dir/$ac_word" "$@"
    shift
    ac_cv_prog_CC="$@"
  fi
fi
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  if test -z "$CC"; then
    case "`uname -s`" in
    *win32* | *WIN32*)
      # Extract the first word of "cl", so it can be a program name with args.
set dummy cl; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1770: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CC="cl"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi
 ;;
    esac
  fi
  test -z "$CC" && { echo "configure: error: no acceptable cc found in \$PATH" 1>&2; exit 1; }
fi

echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works""... $ac_c" 1>&6
echo "configure:1802: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5

ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

cat > conftest.$ac_ext << EOF

#line 1813 "configure"
#include "confdefs.h"

main(){return(0);}
EOF
if { (eval echo configure:1818: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  ac_cv_prog_cc_works=yes
  # If we can't run a trivial program, we are probably using a cross compiler.
  if (./conftest; exit) 2>/dev/null; then
    ac_cv_prog_cc_cross=no
  else
    ac_cv_prog_cc_cross=yes
  fi
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  ac_cv_prog_cc_works=no
fi
rm -fr conftest*
ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

echo "$ac_t""$ac_cv_prog_cc_works" 1>&6
if test $ac_cv_prog_cc_works = no; then
  { echo "configure: error: installation or configuration problem: C compiler cannot create executables." 1>&2; exit 1; }
fi
echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
echo "configure:1844: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
echo "$ac_t""$ac_cv_prog_cc_cross" 1>&6
cross_compiling=$ac_cv_prog_cc_cross

echo $ac_n "checking whether we are using GNU C""... $ac_c" 1>&6
echo "configure:1849: checking whether we are using GNU C" >&5
if eval "test \"`echo '$''{'ac_cv_prog_gcc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.c <<EOF
#ifdef __GNUC__
  yes;
#endif
EOF
if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1858: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
  ac_cv_prog_gcc=yes
else
  ac_cv_prog_gcc=no
fi
fi

echo "$ac_t""$ac_cv_prog_gcc" 1>&6

if test $ac_cv_prog_gcc = yes; then
  GCC=yes
else
  GCC=
fi

ac_test_CFLAGS="${CFLAGS+set}"
ac_save_CFLAGS="$CFLAGS"
CFLAGS=
echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&6
echo "configure:1877: checking whether ${CC-cc} accepts -g" >&5
if eval "test \"`echo '$''{'ac_cv_prog_cc_g'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  echo 'void f(){}' > conftest.c
if test -z "`${CC-cc} -g -c conftest.c 2>&1`"; then
  ac_cv_prog_cc_g=yes
else
  ac_cv_prog_cc_g=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_prog_cc_g" 1>&6
if test "$ac_test_CFLAGS" = set; then
  CFLAGS="$ac_save_CFLAGS"
elif test $ac_cv_prog_cc_g = yes; then
  if test "$GCC" = yes; then
    CFLAGS="-g -O2"
  else
    CFLAGS="-g"
  fi
else
  if test "$GCC" = yes; then
    CFLAGS="-O2"
  else
    CFLAGS=
  fi
fi

if test "x$CC" != xcc; then
  echo $ac_n "checking whether $CC and cc understand -c and -o together""... $ac_c" 1>&6
echo "configure:1910: checking whether $CC and cc understand -c and -o together" >&5
else
  echo $ac_n "checking whether cc understands -c and -o together""... $ac_c" 1>&6
echo "configure:1913: checking whether cc understands -c and -o together" >&5
fi
set dummy $CC; ac_cc="`echo $2 |
		       sed -e 's/[^a-zA-Z0-9_]/_/g' -e 's/^[0-9]/_/'`"
if eval "test \"`echo '$''{'ac_cv_prog_cc_${ac_cc}_c_o'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  echo 'foo(){}' > conftest.c
# Make sure it works both with $CC and with simple cc.
# We do the test twice because some compilers refuse to overwrite an
# existing .o file with -o, though they will create one.
ac_try='${CC-cc} -c conftest.c -o conftest.o 1>&5'
if { (eval echo configure:1925: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; } &&
   test -f conftest.o && { (eval echo configure:1926: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; };
then
  eval ac_cv_prog_cc_${ac_cc}_c_o=yes
  if test "x$CC" != xcc; then
    # Test first that cc exists at all.
    if { ac_try='cc -c conftest.c 1>&5'; { (eval echo configure:1931: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; }; then
      ac_try='cc -c conftest.c -o conftest.o 1>&5'
      if { (eval echo configure:1933: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; } &&
	 test -f conftest.o && { (eval echo configure:1934: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; };
      then
        # cc works too.
        :
      else
        # cc exists but doesn't like -o.
        eval ac_cv_prog_cc_${ac_cc}_c_o=no
      fi
    fi
  fi
else
  eval ac_cv_prog_cc_${ac_cc}_c_o=no
fi
rm -f conftest*

fi
if eval "test \"`echo '$ac_cv_prog_cc_'${ac_cc}_c_o`\" = yes"; then
  echo "$ac_t""yes" 1>&6
else
  echo "$ac_t""no" 1>&6
  cat >> confdefs.h <<\EOF
#define NO_MINUS_C_MINUS_O 1
EOF

fi

echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
echo "configure:1961: checking how to run the C preprocessor" >&5
# On Suns, sometimes $CPP names a directory.
if test -n "$CPP" && test -d "$CPP"; then
  CPP=
fi
if test -z "$CPP"; then
if eval "test \"`echo '$''{'ac_cv_prog_CPP'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
    # This must be in double quotes, not single quotes, because CPP may get
  # substituted into the Makefile and "${CC-cc}" will confuse make.
  CPP="${CC-cc} -E"
  # On the NeXT, cc -E runs the code through the compiler's parser,
  # not just through cpp.
  cat > conftest.$ac_ext <<EOF
#line 1976 "configure"
#include "confdefs.h"
#include <assert.h>
Syntax Error
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:1982: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  CPP="${CC-cc} -E -traditional-cpp"
  cat > conftest.$ac_ext <<EOF
#line 1993 "configure"
#include "confdefs.h"
#include <assert.h>
Syntax Error
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:1999: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  CPP="${CC-cc} -nologo -E"
  cat > conftest.$ac_ext <<EOF
#line 2010 "configure"
#include "confdefs.h"
#include <assert.h>
Syntax Error
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:2016: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  CPP=/lib/cpp
fi
rm -f conftest*
fi
rm -f conftest*
fi
rm -f conftest*
  ac_cv_prog_CPP="$CPP"
fi
  CPP="$ac_cv_prog_CPP"
else
  ac_cv_prog_CPP="$CPP"
fi
echo "$ac_t""$CPP" 1>&6


echo $ac_n "checking for AIX""... $ac_c" 1>&6
echo "configure:2042: checking for AIX" >&5
cat > conftest.$ac_ext <<EOF
#line 2044 "configure"
#include "confdefs.h"
#ifdef _AIX
  yes
#endif

EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6; cat >> confdefs.h <<\EOF
#define _ALL_SOURCE 1
EOF

else
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*





echo $ac_n "checking if compiler supports -R""... $ac_c" 1>&6
echo "configure:2069: checking if compiler supports -R" >&5
if eval "test \"`echo '$''{'php_cv_cc_dashr'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
	SAVE_LIBS=$LIBS
	LIBS="-R /usr/lib $LIBS"
	cat > conftest.$ac_ext <<EOF
#line 2077 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:2084: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  php_cv_cc_dashr=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  php_cv_cc_dashr=no
fi
rm -f conftest*
	LIBS=$SAVE_LIBS
fi

echo "$ac_t""$php_cv_cc_dashr" 1>&6
if test $php_cv_cc_dashr = "yes"; then
	ld_runpath_switch=-R
else
	echo $ac_n "checking if compiler supports -Wl,-rpath,""... $ac_c" 1>&6
echo "configure:2102: checking if compiler supports -Wl,-rpath," >&5
	if eval "test \"`echo '$''{'php_cv_cc_rpath'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
		SAVE_LIBS=$LIBS
		LIBS="-Wl,-rpath,/usr/lib $LIBS"
		cat > conftest.$ac_ext <<EOF
#line 2110 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:2117: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  php_cv_cc_rpath=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  php_cv_cc_rpath=no
fi
rm -f conftest*
		LIBS=$SAVE_LIBS
fi

	echo "$ac_t""$php_cv_cc_rpath" 1>&6
	if test $php_cv_cc_rpath = "yes"; then
		ld_runpath_switch=-Wl,-rpath,
	else
				ld_runpath_switch=-L
	fi
fi


# Extract the first word of "ranlib", so it can be a program name with args.
set dummy ranlib; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2142: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$RANLIB"; then
  ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_RANLIB="ranlib"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_prog_RANLIB" && ac_cv_prog_RANLIB=":"
fi
fi
RANLIB="$ac_cv_prog_RANLIB"
if test -n "$RANLIB"; then
  echo "$ac_t""$RANLIB" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

echo $ac_n "checking whether ln -s works""... $ac_c" 1>&6
echo "configure:2170: checking whether ln -s works" >&5
if eval "test \"`echo '$''{'ac_cv_prog_LN_S'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  rm -f conftestdata
if ln -s X conftestdata 2>/dev/null
then
  rm -f conftestdata
  ac_cv_prog_LN_S="ln -s"
else
  ac_cv_prog_LN_S=ln
fi
fi
LN_S="$ac_cv_prog_LN_S"
if test "$ac_cv_prog_LN_S" = "ln -s"; then
  echo "$ac_t""yes" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

for ac_prog in gawk mawk nawk awk
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2195: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_AWK'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$AWK"; then
  ac_cv_prog_AWK="$AWK" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_AWK="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
AWK="$ac_cv_prog_AWK"
if test -n "$AWK"; then
  echo "$ac_t""$AWK" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$AWK" && break
done

for ac_prog in 'bison -y' byacc
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2229: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_YACC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$YACC"; then
  ac_cv_prog_YACC="$YACC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_YACC="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
YACC="$ac_cv_prog_YACC"
if test -n "$YACC"; then
  echo "$ac_t""$YACC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$YACC" && break
done
test -n "$YACC" || YACC="yacc"

if test "$YACC" != "bison -y"; then
    echo "configure: warning: You will need bison if you want to regenerate the PHP parsers." 1>&2
else
    echo $ac_n "checking bison version""... $ac_c" 1>&6
echo "configure:2263: checking bison version" >&5
    set `bison --version| grep 'GNU Bison' | cut -d ' ' -f 4 | sed -e 's/\./ /'|tr -d a-z`
    if test "${1}" = "1" -a "(" "${2}" -lt "75" -a "${2}" -ne "28" -a "${2}" -ne "35" -o "${2}" -ge "875" ")"; then
      echo "configure: warning: You will need bison 1.28" 1>&2
    fi
    echo "$ac_t""${1}.${2} (ok)" 1>&6
fi
# Extract the first word of "flex", so it can be a program name with args.
set dummy flex; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2273: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_LEX'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$LEX"; then
  ac_cv_prog_LEX="$LEX" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_LEX="flex"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_prog_LEX" && ac_cv_prog_LEX="lex"
fi
fi
LEX="$ac_cv_prog_LEX"
if test -n "$LEX"; then
  echo "$ac_t""$LEX" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

if test -z "$LEXLIB"
then
  case "$LEX" in
  flex*) ac_lib=fl ;;
  *) ac_lib=l ;;
  esac
  echo $ac_n "checking for yywrap in -l$ac_lib""... $ac_c" 1>&6
echo "configure:2307: checking for yywrap in -l$ac_lib" >&5
ac_lib_var=`echo $ac_lib'_'yywrap | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$ac_lib  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 2315 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char yywrap();

int main() {
yywrap()
; return 0; }
EOF
if { (eval echo configure:2326: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  LEXLIB="-l$ac_lib"
else
  echo "$ac_t""no" 1>&6
fi

fi

if test -n "$LEX"; then
  echo $ac_n "checking lex output file root""... $ac_c" 1>&6
echo "configure:2350: checking lex output file root" >&5
if eval "test \"`echo '$''{'ac_cv_prog_lex_root'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  # The minimal lex program is just a single line: %%.  But some broken lexes
# (Solaris, I think it was) want two %% lines, so accommodate them.
echo '%%
%%' | $LEX
if test -f lex.yy.c; then
  ac_cv_prog_lex_root=lex.yy
elif test -f lexyy.c; then
  ac_cv_prog_lex_root=lexyy
else
  { echo "configure: error: cannot find output from $LEX; giving up" 1>&2; exit 1; }
fi
fi

echo "$ac_t""$ac_cv_prog_lex_root" 1>&6
LEX_OUTPUT_ROOT=$ac_cv_prog_lex_root

echo $ac_n "checking whether yytext is a pointer""... $ac_c" 1>&6
echo "configure:2371: checking whether yytext is a pointer" >&5
if eval "test \"`echo '$''{'ac_cv_prog_lex_yytext_pointer'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  # POSIX says lex can declare yytext either as a pointer or an array; the
# default is implementation-dependent. Figure out which it is, since
# not all implementations provide the %pointer and %array declarations.
ac_cv_prog_lex_yytext_pointer=no
echo 'extern char *yytext;' >>$LEX_OUTPUT_ROOT.c
ac_save_LIBS="$LIBS"
LIBS="$LIBS $LEXLIB"
cat > conftest.$ac_ext <<EOF
#line 2383 "configure"
#include "confdefs.h"
`cat $LEX_OUTPUT_ROOT.c`
int main() {

; return 0; }
EOF
if { (eval echo configure:2390: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_prog_lex_yytext_pointer=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
LIBS="$ac_save_LIBS"
rm -f "${LEX_OUTPUT_ROOT}.c"

fi

echo "$ac_t""$ac_cv_prog_lex_yytext_pointer" 1>&6
if test $ac_cv_prog_lex_yytext_pointer = yes; then
  cat >> confdefs.h <<\EOF
#define YYTEXT_POINTER 1
EOF

fi

  :
fi
echo $ac_n "checking for working const""... $ac_c" 1>&6
echo "configure:2414: checking for working const" >&5
if eval "test \"`echo '$''{'ac_cv_c_const'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 2419 "configure"
#include "confdefs.h"

int main() {

/* Ultrix mips cc rejects this.  */
typedef int charset[2]; const charset x;
/* SunOS 4.1.1 cc rejects this.  */
char const *const *ccp;
char **p;
/* NEC SVR4.0.2 mips cc rejects this.  */
struct point {int x, y;};
static struct point const zero = {0,0};
/* AIX XL C 1.02.0.0 rejects this.
   It does not let you subtract one const X* pointer from another in an arm
   of an if-expression whose if-part is not a constant expression */
const char *g = "string";
ccp = &g + (g ? g-g : 0);
/* HPUX 7.0 cc rejects these. */
++ccp;
p = (char**) ccp;
ccp = (char const *const *) p;
{ /* SCO 3.2v4 cc rejects this.  */
  char *t;
  char const *s = 0 ? (char *) 0 : (char const *) 0;

  *t++ = 0;
}
{ /* Someone thinks the Sun supposedly-ANSI compiler will reject this.  */
  int x[] = {25, 17};
  const int *foo = &x[0];
  ++foo;
}
{ /* Sun SC1.0 ANSI compiler rejects this -- but not the above. */
  typedef const int *iptr;
  iptr p = 0;
  ++p;
}
{ /* AIX XL C 1.02.0.0 rejects this saying
     "k.c", line 2.27: 1506-025 (S) Operand must be a modifiable lvalue. */
  struct s { int j; const int *ap[3]; };
  struct s *b; b->j = 5;
}
{ /* ULTRIX-32 V3.1 (Rev 9) vcc rejects this */
  const int foo = 10;
}

; return 0; }
EOF
if { (eval echo configure:2468: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_c_const=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_c_const=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_c_const" 1>&6
if test $ac_cv_c_const = no; then
  cat >> confdefs.h <<\EOF
#define const 
EOF

fi

if test "$ac_cv_c_const" = "yes" ; then
  LEX_CFLAGS="-DYY_USE_CONST"
fi

echo $ac_n "checking flex version""... $ac_c" 1>&6
echo "configure:2493: checking flex version" >&5
if test "$LEX" ;then
	flexvers=`echo "" | $LEX -V -v --version 2>/dev/null | 
		sed -e 's/^.* //' -e 's/\./ /g'`
	if test ! -z "$flexvers"; then
		set $flexvers
		if test "${1}" != "2" -o "${2}" != "5" -o "${3}" -lt "4"; then
			echo "configure: warning: You will need flex 2.5.4 or later if you want to regenerate Zend/PHP lexical parsers." 1>&2
		fi
	fi
echo "$ac_t""${1}.${2}.${3} (ok)" 1>&6
else
	echo "configure: warning: You will need flex 2.5.4 or later if you want to regenerate Zend/PHP lexical parsers." 1>&2
fi


if test -z "$host_alias"; then
    host_alias=$ac_cv_host_alias
fi

case $host_alias in
*solaris*)
    CPPFLAGS="$CPPFLAGS -D_POSIX_PTHREAD_SEMANTICS"
    if test "${enable_libgcc+set}" != "set" && test "$GCC" = "yes"; then
      enable_libgcc=yes
    fi
    ;;
*dgux*)
    CPPFLAGS="$CPPFLAGS -D_BSD_TIMEOFDAY_FLAVOR";;
*darwin*|*rhapsody*)
    CPPFLAGS="$CPPFLAGS -no-cpp-precomp"
    php_multiple_shlib_versions_ok=yes;;
*beos*)
    beos_threads=1
    LIBS="$LIBS -lbe -lroot";;
*mips*)
    CPPFLAGS="$CPPFLAGS -D_XPG_IV";;
esac
































































if test "$beos_threads" = "1"; then
  pthreads_working="yes"
  ac_cv_pthreads_cflags=""
else
  save_CFLAGS=$CFLAGS
  save_LIBS=$LIBS
  
if test -n "$ac_cv_pthreads_lib"; then
  LIBS="$LIBS -l$ac_cv_pthreads_lib"
fi

if test -n "$ac_cv_pthreads_cflags"; then
  CFLAGS="$CFLAGS $ac_cv_pthreads_cflags"
fi

  
if test "$cross_compiling" = yes; then
  pthreads_working=no 
else
  cat > conftest.$ac_ext <<EOF
#line 2615 "configure"
#include "confdefs.h"

#include <pthread.h>
#include <stddef.h>

void *thread_routine(void *data) {
    return data;
}

int main() {
    pthread_t thd;
    pthread_mutexattr_t mattr;
    int data = 1;
    pthread_mutexattr_init(&mattr);
    return pthread_create(&thd, NULL, thread_routine, &data);
} 
EOF
if { (eval echo configure:2633: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
  pthreads_working=yes
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  pthreads_working=no
  
fi
rm -fr conftest*
fi
  
  LIBS=$save_LIBS
  CFLAGS=$save_CFLAGS

  echo $ac_n "checking for pthreads_cflags""... $ac_c" 1>&6
echo "configure:2653: checking for pthreads_cflags" >&5
if eval "test \"`echo '$''{'ac_cv_pthreads_cflags'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  ac_cv_pthreads_cflags=
  if test "$pthreads_working" != "yes"; then
    for flag in -kthread -pthread -pthreads -mthreads -Kthread -threads -mt -qthreaded; do 
      ac_save=$CFLAGS
      CFLAGS="$CFLAGS $flag"
      
if test "$cross_compiling" = yes; then
  pthreads_working=no 
else
  cat > conftest.$ac_ext <<EOF
#line 2668 "configure"
#include "confdefs.h"

#include <pthread.h>
#include <stddef.h>

void *thread_routine(void *data) {
    return data;
}

int main() {
    pthread_t thd;
    pthread_mutexattr_t mattr;
    int data = 1;
    pthread_mutexattr_init(&mattr);
    return pthread_create(&thd, NULL, thread_routine, &data);
} 
EOF
if { (eval echo configure:2686: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
  pthreads_working=yes
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  pthreads_working=no
  
fi
rm -fr conftest*
fi
  
      CFLAGS=$ac_save
      if test "$pthreads_working" = "yes"; then
        ac_cv_pthreads_cflags=$flag
        break
      fi
    done
  fi
fi

fi

echo "$ac_t""$ac_cv_pthreads_cflags" 1>&6

echo $ac_n "checking for pthreads_lib""... $ac_c" 1>&6
echo "configure:2716: checking for pthreads_lib" >&5
if eval "test \"`echo '$''{'ac_cv_pthreads_lib'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
ac_cv_pthreads_lib=
if test "$pthreads_working" != "yes"; then
  for lib in pthread pthreads c_r; do
    ac_save=$LIBS
    LIBS="$LIBS -l$lib"
    
if test "$cross_compiling" = yes; then
  pthreads_working=no 
else
  cat > conftest.$ac_ext <<EOF
#line 2731 "configure"
#include "confdefs.h"

#include <pthread.h>
#include <stddef.h>

void *thread_routine(void *data) {
    return data;
}

int main() {
    pthread_t thd;
    pthread_mutexattr_t mattr;
    int data = 1;
    pthread_mutexattr_init(&mattr);
    return pthread_create(&thd, NULL, thread_routine, &data);
} 
EOF
if { (eval echo configure:2749: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
  pthreads_working=yes
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  pthreads_working=no
  
fi
rm -fr conftest*
fi
  
    LIBS=$ac_save
    if test "$pthreads_working" = "yes"; then
      ac_cv_pthreads_lib=$lib
      break
    fi
  done
fi

fi

echo "$ac_t""$ac_cv_pthreads_lib" 1>&6

if test "$pthreads_working" = "yes"; then
  threads_result="POSIX-Threads found"
else
  threads_result="POSIX-Threads not found"
fi


# Check whether --enable- or --disable- was given.
if test "${enable_+set}" = set; then
  enableval="$enable_"
  :
fi



  
  PHP_VAR_SUBST="$PHP_VAR_SUBST SHLIB_SUFFIX_NAME"

  SHLIB_SUFFIX_NAME=so
  case $host_alias in
  *hpux*)
	SHLIB_SUFFIX_NAME=sl
	;;
  *darwin*)
	SHLIB_SUFFIX_NAME=dylib
	;;
  esac

PHP_SAPI=default

  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program





SAPI_SHARED=libs/libphp4.$SHLIB_SUFFIX_NAME
SAPI_STATIC=libs/libphp4.a
SAPI_LIBTOOL=libphp4.la


  echo "$ac_t""" 1>&6
  echo "$ac_t""${T_MD}Configuring SAPI modules${T_ME}" 1>&6




echo $ac_n "checking for AOLserver support""... $ac_c" 1>&6
echo "configure:2842: checking for AOLserver support" >&5
# Check whether --with-aolserver or --without-aolserver was given.
if test "${with_aolserver+set}" = set; then
  withval="$with_aolserver"
  
  PHP_AOLSERVER=$withval

else
  
  PHP_AOLSERVER=no

fi

echo "$ac_t""$PHP_AOLSERVER" 1>&6

if test "$PHP_AOLSERVER" != "no"; then
  if test -d "$PHP_AOLSERVER/include"; then
    PHP_AOLSERVER_SRC=$PHP_AOLSERVER
  fi
  if test -z "$PHP_AOLSERVER_SRC" || test ! -d $PHP_AOLSERVER_SRC/include; then
    { echo "configure: error: Please specify the path to the source distribution of AOLserver using --with-aolserver-src=DIR" 1>&2; exit 1; }
  fi
  if test ! -d $PHP_AOLSERVER/bin ; then
    { echo "configure: error: Please specify the path to the root of AOLserver using --with-aolserver=DIR" 1>&2; exit 1; }
  fi
  
  enable_experimental_zts=yes
  if test "$pthreads_working" != "yes"; then
    { echo "configure: error: ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." 1>&2; exit 1; }
  fi

  
  if test "$PHP_AOLSERVER_SRC/include" != "/usr/include"; then
    
  if test -z "$PHP_AOLSERVER_SRC/include" || echo "$PHP_AOLSERVER_SRC/include" | grep '^/' >/dev/null ; then
    ai_p=$PHP_AOLSERVER_SRC/include
  else
    
    ep_dir="`echo $PHP_AOLSERVER_SRC/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_AOLSERVER_SRC/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  cat >> confdefs.h <<\EOF
#define HAVE_AOLSERVER 1
EOF

  
  PHP_SAPI=aolserver
  
  case "shared" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp4.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/aolserver in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/aolserver"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/aolserver/"; ac_bdir="sapi/aolserver/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in aolserver.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



  INSTALL_IT="\$(INSTALL) -m 0755 $SAPI_SHARED \$(INSTALL_ROOT)$PHP_AOLSERVER/bin/"
fi



echo $ac_n "checking for Apache 1.x module support via DSO through APXS""... $ac_c" 1>&6
echo "configure:3062: checking for Apache 1.x module support via DSO through APXS" >&5
# Check whether --with-apxs or --without-apxs was given.
if test "${with_apxs+set}" = set; then
  withval="$with_apxs"
  
  if test "$withval" = "yes"; then
    APXS=apxs
    $APXS -q CFLAGS >/dev/null 2>&1
    if test "$?" != "0" && test -x /usr/sbin/apxs; then #SUSE 6.x 
      APXS=/usr/sbin/apxs
    fi
  else
    
  if test -z "$withval" || echo "$withval" | grep '^/' >/dev/null ; then
    APXS=$withval
  else
    
    ep_dir="`echo $withval|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    APXS="$ep_realdir/`basename \"$withval\"`"
  fi

  fi

  $APXS -q CFLAGS >/dev/null 2>&1
  if test "$?" != "0"; then
    echo "$ac_t""" 1>&6
    echo "$ac_t""" 1>&6
    echo "$ac_t""Sorry, I was not able to successfully run APXS.  Possible reasons:" 1>&6
    echo "$ac_t""" 1>&6
    echo "$ac_t""1.  Perl is not installed;" 1>&6
    echo "$ac_t""2.  Apache was not compiled with DSO support (--enable-module=so);" 1>&6
    echo "$ac_t""3.  'apxs' is not in your path.  Try to use --with-apxs=/path/to/apxs" 1>&6
    echo "$ac_t""The output of $APXS follows" 1>&6
    $APXS
    { echo "configure: error: Aborting" 1>&2; exit 1; } 
  fi 

  APXS_LDFLAGS="@SYBASE_LFLAGS@ @SYBASE_LIBS@ @SYBASE_CT_LFLAGS@ @SYBASE_CT_LIBS@"
  APXS_INCLUDEDIR=`$APXS -q INCLUDEDIR`
  APXS_CFLAGS=`$APXS -q CFLAGS`
  APXS_HTTPD=`$APXS -q SBINDIR`/`$APXS -q TARGET`
  APACHE_INCLUDE=-I$APXS_INCLUDEDIR

  # Test that we're trying to configure with apache 1.x
  
  ac_output=`$APXS_HTTPD -v 2>&1`
  ac_IFS=$IFS
IFS="- /.
"
  set $ac_output
  IFS=$ac_IFS

  APACHE_VERSION=`expr $4 \* 1000000 + $5 \* 1000 + $6`

  if test "$APACHE_VERSION" -ge 2000000; then
    { echo "configure: error: You have enabled Apache 1.3 support while your server is Apache 2.  Please use the appropiate switch --with-apxs2" 1>&2; exit 1; } 
  fi

  for flag in $APXS_CFLAGS; do
    case $flag in
    -D*) APACHE_CPPFLAGS="$APACHE_CPPFLAGS $flag";;
    esac
  done

  case $host_alias in
  *aix*)
    APXS_LIBEXECDIR=`$APXS -q LIBEXECDIR`
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS -Wl,-brtl -Wl,-bI:$APXS_LIBEXECDIR/httpd.exp"
    PHP_AIX_LDFLAGS="-Wl,-brtl"
    build_type=shared
    ;;
  *darwin*)
    MH_BUNDLE_FLAGS="-dynamic -twolevel_namespace -bundle -bundle_loader $APXS_HTTPD"
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST MH_BUNDLE_FLAGS"

    SAPI_SHARED=libs/libphp4.so
    build_type=bundle
    ;;
  *)
    build_type=shared
    ;;
  esac

  
  PHP_SAPI=apache
  
  case "$build_type" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp4.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/apache in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache/"; ac_bdir="sapi/apache/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache.c mod_php4.c php_apache.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $APACHE_CPPFLAGS -I$APXS_INCLUDEDIR $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $APACHE_CPPFLAGS -I$APXS_INCLUDEDIR $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




  # Test whether apxs support -S option
  $APXS -q -S CFLAGS="$APXS_CFLAGS" CFLAGS >/dev/null 2>&1

  if test "$?" != "0"; then
    APACHE_INSTALL="$APXS -i -a -n php4 $SAPI_SHARED" # Old apxs does not have -S option
  else 
    APXS_LIBEXECDIR='$(INSTALL_ROOT)'`$APXS -q LIBEXECDIR`
    if test -z `$APXS -q SYSCONFDIR`; then
      APACHE_INSTALL="\$(mkinstalldirs) '$APXS_LIBEXECDIR' && \
                       $APXS -S LIBEXECDIR='$APXS_LIBEXECDIR' \
                             -i -n php4 $SAPI_SHARED"
    else
      APXS_SYSCONFDIR='$(INSTALL_ROOT)'`$APXS -q SYSCONFDIR`
      APACHE_INSTALL="\$(mkinstalldirs) '$APXS_LIBEXECDIR' && \
                      \$(mkinstalldirs) '$APXS_SYSCONFDIR' && \
                       $APXS -S LIBEXECDIR='$APXS_LIBEXECDIR' \
                             -S SYSCONFDIR='$APXS_SYSCONFDIR' \
                             -i -a -n php4 $SAPI_SHARED"
    fi
  fi

  if test -z "`$APXS -q LD_SHLIB`" || test "`$APXS -q LIBEXECDIR`" = "modules"; then
    PHP_APXS_BROKEN=yes
  fi
  STRONGHOLD=
  cat >> confdefs.h <<\EOF
#define HAVE_AP_CONFIG_H 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_AP_COMPAT_H 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_APACHE 1
EOF

  echo "$ac_t""yes" 1>&6

else
  
  echo "$ac_t""no" 1>&6

fi


if test "$PHP_SAPI" != "apache"; then
echo $ac_n "checking for Apache 1.x module support""... $ac_c" 1>&6
echo "configure:3345: checking for Apache 1.x module support" >&5
# Check whether --with-apache or --without-apache was given.
if test "${with_apache+set}" = set; then
  withval="$with_apache"
  

  APACHE_INSTALL_FILES="\$(srcdir)/sapi/apache/mod_php4.* sapi/apache/libphp4.module"

  if test "$withval" = "yes"; then
    # Apache's default directory
    withval=/usr/local/apache
  fi
  if test "$withval" != "no"; then
    cat >> confdefs.h <<\EOF
#define HAVE_APACHE 1
EOF

    APACHE_MODULE=yes
    
  if test -z "$withval" || echo "$withval" | grep '^/' >/dev/null ; then
    withval=$withval
  else
    
    ep_dir="`echo $withval|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    withval="$ep_realdir/`basename \"$withval\"`"
  fi

    # For Apache 1.2.x
    if test -f $withval/src/httpd.h; then 
      APACHE_INCLUDE=-I$withval/src
      APACHE_TARGET=$withval/src
      
  PHP_SAPI=apache
  
  case "static" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp4.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/apache in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache/"; ac_bdir="sapi/apache/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache.c mod_php4.c php_apache.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $APACHE_INCLUDE $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



      APACHE_INSTALL="mkdir -p $APACHE_TARGET; cp $SAPI_STATIC $APACHE_INSTALL_FILES $APACHE_TARGET"
      PHP_LIBS="-L. -lphp3"
      echo "$ac_t""yes - Apache 1.2.x" 1>&6
      STRONGHOLD=
      if test -f $withval/src/ap_config.h; then
        cat >> confdefs.h <<\EOF
#define HAVE_AP_CONFIG_H 1
EOF

      fi
    # For Apache 2.0.x
    elif test -f $withval/include/httpd.h &&
         test -f $withval/srclib/apr/include/apr_general.h ; then
      { echo "configure: error: Use --with-apache2 with Apache 2.x!" 1>&2; exit 1; }
    # For Apache 1.3.x
    elif test -f $withval/src/main/httpd.h; then
      APACHE_HAS_REGEX=1
      APACHE_INCLUDE="-I$withval/src/main -I$withval/src/os/unix -I$withval/src/ap"
      APACHE_TARGET=$withval/src/modules/php4
      if test ! -d $APACHE_TARGET; then
        mkdir $APACHE_TARGET
      fi
      
  PHP_SAPI=apache
  
  case "static" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp4.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/apache in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache/"; ac_bdir="sapi/apache/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache.c mod_php4.c php_apache.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $APACHE_INCLUDE $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



      APACHE_INSTALL="mkdir -p $APACHE_TARGET; cp $SAPI_STATIC $APACHE_TARGET/libmodphp4.a; cp $APACHE_INSTALL_FILES $APACHE_TARGET; cp $srcdir/sapi/apache/apMakefile.tmpl $APACHE_TARGET/Makefile.tmpl; cp $srcdir/sapi/apache/apMakefile.libdir $APACHE_TARGET/Makefile.libdir"
      PHP_LIBS="-Lmodules/php4 -L../modules/php4 -L../../modules/php4 -lmodphp4"
      echo "$ac_t""yes - Apache 1.3.x" 1>&6
      STRONGHOLD=
      if test -f $withval/src/include/ap_config.h; then
        cat >> confdefs.h <<\EOF
#define HAVE_AP_CONFIG_H 1
EOF

      fi
      if test -f $withval/src/include/ap_compat.h; then
        cat >> confdefs.h <<\EOF
#define HAVE_AP_COMPAT_H 1
EOF

        if test ! -f $withval/src/include/ap_config_auto.h; then
          { echo "configure: error: Please run Apache\'s configure or src/Configure program once and try again" 1>&2; exit 1; }
        fi
      else
        if test -f $withval/src/include/compat.h; then
          cat >> confdefs.h <<\EOF
#define HAVE_OLD_COMPAT_H 1
EOF

        fi
      fi
    # Also for Apache 1.3.x
    elif test -f $withval/src/include/httpd.h; then
      APACHE_HAS_REGEX=1
      APACHE_INCLUDE="-I$withval/src/include -I$withval/src/os/unix"
      APACHE_TARGET=$withval/src/modules/php4
      if test ! -d $APACHE_TARGET; then
        mkdir $APACHE_TARGET
      fi
      
  PHP_SAPI=apache
  
  case "static" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp4.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/apache in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache/"; ac_bdir="sapi/apache/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache.c mod_php4.c php_apache.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $APACHE_INCLUDE $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



      PHP_LIBS="-Lmodules/php4 -L../modules/php4 -L../../modules/php4 -lmodphp4"
      APACHE_INSTALL="mkdir -p $APACHE_TARGET; cp $SAPI_STATIC $APACHE_TARGET/libmodphp4.a; cp $APACHE_INSTALL_FILES $APACHE_TARGET; cp $srcdir/sapi/apache/apMakefile.tmpl $APACHE_TARGET/Makefile.tmpl; cp $srcdir/sapi/apache/apMakefile.libdir $APACHE_TARGET/Makefile.libdir"
      echo "$ac_t""yes - Apache 1.3.x" 1>&6
      STRONGHOLD=
      if test -f $withval/src/include/ap_config.h; then
        cat >> confdefs.h <<\EOF
#define HAVE_AP_CONFIG_H 1
EOF

      fi
      if test -f $withval/src/include/ap_compat.h; then
        cat >> confdefs.h <<\EOF
#define HAVE_AP_COMPAT_H 1
EOF

        if test ! -f $withval/src/include/ap_config_auto.h; then
          { echo "configure: error: Please run Apache\'s configure or src/Configure program once and try again" 1>&2; exit 1; }
        fi
      else
        if test -f $withval/src/include/compat.h; then
          cat >> confdefs.h <<\EOF
#define HAVE_OLD_COMPAT_H 1
EOF

        fi
      fi
    # For StrongHold 2.2
    elif test -f $withval/apache/httpd.h; then
      APACHE_INCLUDE=-"I$withval/apache -I$withval/ssl/include"
      APACHE_TARGET=$withval/apache
      
  PHP_SAPI=apache
  
  case "static" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp4.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/apache in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache/"; ac_bdir="sapi/apache/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache.c mod_php4.c php_apache.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $APACHE_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $APACHE_INCLUDE $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



      PHP_LIBS="-Lmodules/php4 -L../modules/php4 -L../../modules/php4 -lmodphp4"
      APACHE_INSTALL="mkdir -p $APACHE_TARGET; cp $SAPI_STATIC $APACHE_TARGET/libmodphp4.a; cp $APACHE_INSTALL_FILES $APACHE_TARGET"
      STRONGHOLD=-DSTRONGHOLD=1
      echo "$ac_t""yes - StrongHold" 1>&6
      if test -f $withval/apache/ap_config.h; then
        cat >> confdefs.h <<\EOF
#define HAVE_AP_CONFIG_H 1
EOF

      fi
      if test -f $withval/src/ap_compat.h; then
        cat >> confdefs.h <<\EOF
#define HAVE_AP_COMPAT_H 1
EOF

        if test ! -f $withval/src/include/ap_config_auto.h; then
          { echo "configure: error: Please run Apache\'s configure or src/Configure program once and try again" 1>&2; exit 1; }
        fi
      else
        if test -f $withval/src/compat.h; then
          cat >> confdefs.h <<\EOF
#define HAVE_OLD_COMPAT_H 1
EOF

        fi
      fi
    else
      echo "$ac_t""no" 1>&6
      { echo "configure: error: Invalid Apache directory - unable to find httpd.h under $withval" 1>&2; exit 1; }
    fi
  else
    echo "$ac_t""no" 1>&6
  fi

else
  
  echo "$ac_t""no" 1>&6

fi


fi

if test "x$APXS" != "x" -a "`uname -sv`" = "AIX 4" -a "$GCC" != "yes"; then
  APXS_EXP=-bE:sapi/apache/mod_php4.exp
fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST APXS_EXP"


  PHP_VAR_SUBST="$PHP_VAR_SUBST APACHE_INCLUDE"


  PHP_VAR_SUBST="$PHP_VAR_SUBST APACHE_TARGET"


  PHP_VAR_SUBST="$PHP_VAR_SUBST APXS"


  PHP_VAR_SUBST="$PHP_VAR_SUBST APXS_LDFLAGS"


  PHP_VAR_SUBST="$PHP_VAR_SUBST APACHE_INSTALL"


  PHP_VAR_SUBST="$PHP_VAR_SUBST STRONGHOLD"


echo $ac_n "checking for member fd in BUFF *""... $ac_c" 1>&6
echo "configure:4126: checking for member fd in BUFF *" >&5
if eval "test \"`echo '$''{'ac_cv_php_fd_in_buff'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  save=$CPPFLAGS
  if test -n "$APXS_INCLUDEDIR"; then
    CPPFLAGS="$CPPFLAGS -I$APXS_INCLUDEDIR"
  else
    CPPFLAGS="$CPPFLAGS $APACHE_INCLUDE"
  fi
  cat > conftest.$ac_ext <<EOF
#line 4138 "configure"
#include "confdefs.h"
#include <httpd.h>
int main() {
conn_rec *c; int fd = c->client->fd;
; return 0; }
EOF
if { (eval echo configure:4145: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
    ac_cv_php_fd_in_buff=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_php_fd_in_buff=no
fi
rm -f conftest*
  CPPFLAGS=$save

fi

echo "$ac_t""$ac_cv_php_fd_in_buff" 1>&6
if test "$ac_cv_php_fd_in_buff" = "yes"; then
  cat >> confdefs.h <<\EOF
#define PHP_APACHE_HAVE_CLIENT_FD 1
EOF

fi
  
echo $ac_n "checking for mod_charset compatibility option""... $ac_c" 1>&6
echo "configure:4169: checking for mod_charset compatibility option" >&5
# Check whether --with-mod_charset or --without-mod_charset was given.
if test "${with_mod_charset+set}" = set; then
  withval="$with_mod_charset"
  
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define USE_TRANSFER_TABLES 1
EOF


else
  
  echo "$ac_t""no" 1>&6

fi


if test -n "$APACHE_MODULE"; then
  
  if test -n "$GCC"; then
        
  gcc_arg_name=ac_cv_gcc_arg_rdynamic
  echo $ac_n "checking whether $CC supports -rdynamic""... $ac_c" 1>&6
echo "configure:4193: checking whether $CC supports -rdynamic" >&5
if eval "test \"`echo '$''{'ac_cv_gcc_arg_rdynami'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  echo 'void somefunc() { };' > conftest.c
  cmd='$CC -rdynamic -c conftest.c'
  if eval $cmd 2>&1 | egrep -e -rdynamic >/dev/null ; then
    ac_result=no
  else
    ac_result=yes
  fi
  eval $gcc_arg_name=$ac_result
  rm -f conftest.*
  
fi

echo "$ac_t""$ac_cv_gcc_arg_rdynami" 1>&6
  if eval test "\$$gcc_arg_name" = "yes"; then
    gcc_rdynamic=yes
  else
    :
    
  fi

    if test "$gcc_rdynamic" = "yes"; then
      PHP_LDFLAGS="$PHP_LDFLAGS -rdynamic"
    fi
  fi

  $php_shtool mkdir -p sapi/apache
  
  PHP_OUTPUT_FILES="$PHP_OUTPUT_FILES sapi/apache/libphp4.module"

fi

if test -n "$APACHE_INSTALL"; then
  INSTALL_IT=$APACHE_INSTALL
fi



echo $ac_n "checking for Apache 2.0 module support via DSO through APXS""... $ac_c" 1>&6
echo "configure:4236: checking for Apache 2.0 module support via DSO through APXS" >&5
# Check whether --with-apxs2filter or --without-apxs2filter was given.
if test "${with_apxs2filter+set}" = set; then
  withval="$with_apxs2filter"
  
  if test "$withval" = "yes"; then
    APXS=apxs
    $APXS -q CFLAGS >/dev/null 2>&1
    if test "$?" != "0" && test -x /usr/sbin/apxs; then
      APXS=/usr/sbin/apxs
    fi
  else
    
  if test -z "$withval" || echo "$withval" | grep '^/' >/dev/null ; then
    APXS=$withval
  else
    
    ep_dir="`echo $withval|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    APXS="$ep_realdir/`basename \"$withval\"`"
  fi

  fi

  $APXS -q CFLAGS >/dev/null 2>&1
  if test "$?" != "0"; then
    echo "$ac_t""" 1>&6
    echo "$ac_t""" 1>&6
    echo "$ac_t""Sorry, I cannot run apxs.  Possible reasons follow:" 1>&6 
    echo "$ac_t""" 1>&6
    echo "$ac_t""1. Perl is not installed" 1>&6
    echo "$ac_t""2. apxs was not found. Try to pass the path using --with-apxs2filter=/path/to/apxs" 1>&6
    echo "$ac_t""3. Apache was not built using --enable-so (the apxs usage page is displayed)" 1>&6
    echo "$ac_t""" 1>&6
    echo "$ac_t""The output of $APXS follows:" 1>&6
    $APXS
    { echo "configure: error: Aborting" 1>&2; exit 1; }
  fi 

  APXS_INCLUDEDIR=`$APXS -q INCLUDEDIR`
  APXS_HTTPD=`$APXS -q SBINDIR`/`$APXS -q TARGET`
  APXS_CFLAGS=`$APXS -q CFLAGS`
  APXS_MPM=`$APXS -q MPM_NAME`

  for flag in $APXS_CFLAGS; do
    case $flag in
    -D*) CPPFLAGS="$CPPFLAGS $flag";;
    esac
  done

  # Test that we're trying to configure with apache 2.x
  
  ac_output=`$APXS_HTTPD -v 2>&1`
  ac_IFS=$IFS
IFS="- /.
"
  set $ac_output
  IFS=$ac_IFS

  APACHE_VERSION=`expr $4 \* 1000000 + $5 \* 1000 + $6`

  if test "$APACHE_VERSION" -le 2000000; then
    { echo "configure: error: You have enabled Apache 2 support while your server is Apache 1.3.  Please use the appropiate switch --with-apxs (without the 2)" 1>&2; exit 1; }
  elif test "$APACHE_VERSION" -lt 2000040; then
    { echo "configure: error: Please note that Apache version >= 2.0.40 is required." 1>&2; exit 1; }
  fi

  APXS_LIBEXECDIR='$(INSTALL_ROOT)'`$APXS -q LIBEXECDIR`
  if test -z `$APXS -q SYSCONFDIR`; then
    INSTALL_IT="\$(mkinstalldirs) '$APXS_LIBEXECDIR' && \
                 $APXS -S LIBEXECDIR='$APXS_LIBEXECDIR' \
                       -i -n php4"
  else
    APXS_SYSCONFDIR='$(INSTALL_ROOT)'`$APXS -q SYSCONFDIR`
    INSTALL_IT="\$(mkinstalldirs) '$APXS_LIBEXECDIR' && \
                \$(mkinstalldirs) '$APXS_SYSCONFDIR' && \
                 $APXS -S LIBEXECDIR='$APXS_LIBEXECDIR' \
                       -S SYSCONFDIR='$APXS_SYSCONFDIR' \
                       -i -a -n php4"
  fi

  case $host_alias in
  *aix*)
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS -Wl,-brtl -Wl,-bI:$APXS_LIBEXECDIR/httpd.exp"
    
  PHP_SAPI=apache2filter
  
  case "shared" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp4.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/apache2filter in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache2filter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache2filter/"; ac_bdir="sapi/apache2filter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache2.c apache_config.c php_functions.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



    INSTALL_IT="$INSTALL_IT $SAPI_LIBTOOL" 
    ;;
  *darwin*)
                    APXS_BINDIR=`$APXS -q BINDIR`
    if test -f $APXS_BINDIR/apr-config; then
        MH_BUNDLE_FLAGS="`$APXS_BINDIR/apr-config --ldflags --link-ld --libs`"
    fi
    if test -f $APXS_BINDIR/apu-config; then
        MH_BUNDLE_FLAGS="`$APXS_BINDIR/apu-config --ldflags --link-ld --libs` $MH_BUNDLE_FLAGS"
    fi
    MH_BUNDLE_FLAGS="-bundle -bundle_loader $APXS_HTTPD $MH_BUNDLE_FLAGS"
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST MH_BUNDLE_FLAGS"

    
  PHP_SAPI=apache2filter
  
  case "bundle" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp4.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/apache2filter in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache2filter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache2filter/"; ac_bdir="sapi/apache2filter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache2.c apache_config.c php_functions.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



    SAPI_SHARED=libs/libphp4.so
    INSTALL_IT="$INSTALL_IT $SAPI_SHARED"
    ;;
  *beos*)
    APXS_BINDIR=`$APXS -q BINDIR`
    if test -f _APP_; then `rm _APP_`; fi
    `ln -s $APXS_BINDIR/httpd _APP_`
    EXTRA_LIBS="$EXTRA_LIBS _APP_"
    
  PHP_SAPI=apache2filter
  
  case "shared" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp4.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/apache2filter in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache2filter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache2filter/"; ac_bdir="sapi/apache2filter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache2.c apache_config.c php_functions.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



    INSTALL_IT="$INSTALL_IT $SAPI_LIBTOOL" 
    ;;
  *)
    
  PHP_SAPI=apache2filter
  
  case "shared" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp4.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/apache2filter in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache2filter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache2filter/"; ac_bdir="sapi/apache2filter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache2.c apache_config.c php_functions.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


 
    INSTALL_IT="$INSTALL_IT $SAPI_LIBTOOL"
    ;;
  esac

  
  if test "$APXS_INCLUDEDIR" != "/usr/include"; then
    
  if test -z "$APXS_INCLUDEDIR" || echo "$APXS_INCLUDEDIR" | grep '^/' >/dev/null ; then
    ai_p=$APXS_INCLUDEDIR
  else
    
    ep_dir="`echo $APXS_INCLUDEDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$APXS_INCLUDEDIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  if test "$APXS_MPM" != "prefork"; then
    
  enable_experimental_zts=yes
  if test "$pthreads_working" != "yes"; then
    { echo "configure: error: ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." 1>&2; exit 1; }
  fi

  fi
  echo "$ac_t""yes" 1>&6

else
  
  echo "$ac_t""no" 1>&6

fi



  PHP_VAR_SUBST="$PHP_VAR_SUBST APXS"




echo $ac_n "checking for Apache 2.0 handler-module support via DSO through APXS""... $ac_c" 1>&6
echo "configure:4997: checking for Apache 2.0 handler-module support via DSO through APXS" >&5
# Check whether --with-apxs2 or --without-apxs2 was given.
if test "${with_apxs2+set}" = set; then
  withval="$with_apxs2"
  
  if test "$withval" = "yes"; then
    APXS=apxs
    $APXS -q CFLAGS >/dev/null 2>&1
    if test "$?" != "0" && test -x /usr/sbin/apxs; then
      APXS=/usr/sbin/apxs
    fi
  else
    
  if test -z "$withval" || echo "$withval" | grep '^/' >/dev/null ; then
    APXS=$withval
  else
    
    ep_dir="`echo $withval|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    APXS="$ep_realdir/`basename \"$withval\"`"
  fi

  fi

  $APXS -q CFLAGS >/dev/null 2>&1
  if test "$?" != "0"; then
    echo "$ac_t""" 1>&6
    echo "$ac_t""" 1>&6
    echo "$ac_t""Sorry, I cannot run apxs.  Possible reasons follow:" 1>&6 
    echo "$ac_t""" 1>&6
    echo "$ac_t""1. Perl is not installed" 1>&6
    echo "$ac_t""2. apxs was not found. Try to pass the path using --with-apxs2=/path/to/apxs" 1>&6
    echo "$ac_t""3. Apache was not built using --enable-so (the apxs usage page is displayed)" 1>&6
    echo "$ac_t""" 1>&6
    echo "$ac_t""The output of $APXS follows:" 1>&6
    $APXS
    { echo "configure: error: Aborting" 1>&2; exit 1; }
  fi 

  APXS_INCLUDEDIR=`$APXS -q INCLUDEDIR`
  APXS_HTTPD=`$APXS -q SBINDIR`/`$APXS -q TARGET`
  APXS_CFLAGS=`$APXS -q CFLAGS`
  APXS_MPM=`$APXS -q MPM_NAME`

  for flag in $APXS_CFLAGS; do
    case $flag in
    -D*) CPPFLAGS="$CPPFLAGS $flag";;
    esac
  done

  # Test that we're trying to configure with apache 2.x
  
  ac_output=`$APXS_HTTPD -v 2>&1`
  ac_IFS=$IFS
IFS="- /.
"
  set $ac_output
  IFS=$ac_IFS

  APACHE_VERSION=`expr $4 \* 1000000 + $5 \* 1000 + $6`

  if test "$APACHE_VERSION" -le 2000000; then
    { echo "configure: error: You have enabled Apache 2 support while your server is Apache 1.3.  Please use the appropiate switch --with-apxs (without the 2)" 1>&2; exit 1; }
  elif test "$APACHE_VERSION" -lt 2000044; then
    { echo "configure: error: Please note that Apache version >= 2.0.44 is required." 1>&2; exit 1; }
  fi

  APXS_LIBEXECDIR='$(INSTALL_ROOT)'`$APXS -q LIBEXECDIR`
  if test -z `$APXS -q SYSCONFDIR`; then
    INSTALL_IT="\$(mkinstalldirs) '$APXS_LIBEXECDIR' && \
                 $APXS -S LIBEXECDIR='$APXS_LIBEXECDIR' \
                       -i -n php4"
  else
    APXS_SYSCONFDIR='$(INSTALL_ROOT)'`$APXS -q SYSCONFDIR`
    INSTALL_IT="\$(mkinstalldirs) '$APXS_LIBEXECDIR' && \
                \$(mkinstalldirs) '$APXS_SYSCONFDIR' && \
                 $APXS -S LIBEXECDIR='$APXS_LIBEXECDIR' \
                       -S SYSCONFDIR='$APXS_SYSCONFDIR' \
                       -i -a -n php4"
  fi

  case $host_alias in
  *aix*)
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS -Wl,-brtl -Wl,-bI:$APXS_LIBEXECDIR/httpd.exp"
    
  PHP_SAPI=apache2handler
  
  case "shared" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp4.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/apache2handler in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache2handler"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache2handler/"; ac_bdir="sapi/apache2handler/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache2.c apache_config.c php_functions.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



    INSTALL_IT="$INSTALL_IT $SAPI_LIBTOOL" 
    ;;
  *darwin*)
                    APXS_BINDIR=`$APXS -q BINDIR`
    if test -f $APXS_BINDIR/apr-config; then
        MH_BUNDLE_FLAGS="`$APXS_BINDIR/apr-config --ldflags --link-ld --libs`"
    fi
    if test -f $APXS_BINDIR/apu-config; then
        MH_BUNDLE_FLAGS="`$APXS_BINDIR/apu-config --ldflags --link-ld --libs` $MH_BUNDLE_FLAGS"
    fi
    MH_BUNDLE_FLAGS="-bundle -bundle_loader $APXS_HTTPD $MH_BUNDLE_FLAGS"
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST MH_BUNDLE_FLAGS"

    
  PHP_SAPI=apache2handler
  
  case "bundle" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp4.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/apache2handler in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache2handler"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache2handler/"; ac_bdir="sapi/apache2handler/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache2.c apache_config.c php_functions.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



    SAPI_SHARED=libs/libphp4.so
    INSTALL_IT="$INSTALL_IT $SAPI_SHARED"
    ;;
  *beos*)
    APXS_BINDIR=`$APXS -q BINDIR`
    if test -f _APP_; then `rm _APP_`; fi
    `ln -s $APXS_BINDIR/httpd _APP_`
    EXTRA_LIBS="$EXTRA_LIBS _APP_"
    
  PHP_SAPI=apache2handler
  
  case "shared" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp4.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/apache2handler in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache2handler"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache2handler/"; ac_bdir="sapi/apache2handler/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache2.c apache_config.c php_functions.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



    INSTALL_IT="$INSTALL_IT $SAPI_LIBTOOL" 
    ;;
  *)
    
  PHP_SAPI=apache2handler
  
  case "shared" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp4.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/apache2handler in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/apache2handler"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/apache2handler/"; ac_bdir="sapi/apache2handler/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sapi_apache2.c apache_config.c php_functions.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


 
    INSTALL_IT="$INSTALL_IT $SAPI_LIBTOOL"
    ;;
  esac

  
  if test "$APXS_INCLUDEDIR" != "/usr/include"; then
    
  if test -z "$APXS_INCLUDEDIR" || echo "$APXS_INCLUDEDIR" | grep '^/' >/dev/null ; then
    ai_p=$APXS_INCLUDEDIR
  else
    
    ep_dir="`echo $APXS_INCLUDEDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$APXS_INCLUDEDIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  if test "$APXS_MPM" != "prefork"; then
    
  enable_experimental_zts=yes
  if test "$pthreads_working" != "yes"; then
    { echo "configure: error: ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." 1>&2; exit 1; }
  fi

  fi
  echo "$ac_t""yes" 1>&6

else
  
  echo "$ac_t""no" 1>&6

fi



  PHP_VAR_SUBST="$PHP_VAR_SUBST APXS"




RESULT=no
echo $ac_n "checking for Caudium support""... $ac_c" 1>&6
echo "configure:5759: checking for Caudium support" >&5
# Check whether --with-caudium or --without-caudium was given.
if test "${with_caudium+set}" = set; then
  withval="$with_caudium"
  
    if test "$prefix" = "NONE"; then CPREF=/usr/local/; fi
	if test ! -d $withval ; then
      if test "$prefix" = "NONE"; then
	     withval=/usr/local/caudium/server/
	  else
	     withval=$prefix/caudium/server/
      fi
	fi
	if test -f $withval/bin/caudium; then
		PIKE=$withval/bin/caudium
	elif test -f $withval/bin/pike; then
		PIKE=$withval/bin/pike
	else
		{ echo "configure: error: Couldn't find a pike in $withval/bin/" 1>&2; exit 1; }
	fi
    if $PIKE -e 'float v; int rel;sscanf(version(), "Pike v%f release %d", v, rel);v += rel/10000.0; if(v < 7.0268) exit(1); exit(0);'; then
		PIKE_MODULE_DIR=`$PIKE --show-paths 2>&1| grep '^Module' | sed -e 's/.*: //'`
	    PIKE_INCLUDE_DIR=`echo $PIKE_MODULE_DIR | sed -e 's,lib/pike/modules,include/pike,' -e 's,lib/modules,include/pike,' `
		if test -z "$PIKE_INCLUDE_DIR" -o -z "$PIKE_MODULE_DIR"; then
			{ echo "configure: error: Failed to figure out Pike module and include directories" 1>&2; exit 1; }
		fi
		echo "$ac_t""yes" 1>&6
        PIKE=`echo $PIKE | pike -e 'int tries=100;
		   string orig,pike=Stdio.File("stdin")->read()-"\n";
		   orig=pike;
		   if(search(orig, "/"))
		     orig = combine_path(getcwd(), orig);
		   while(!catch(pike=readlink(pike)) && tries--)
		     ;
		   write(combine_path(dirname(orig), pike)); '`
		
  if test "$PIKE_INCLUDE_DIR" != "/usr/include"; then
    
  if test -z "$PIKE_INCLUDE_DIR" || echo "$PIKE_INCLUDE_DIR" | grep '^/' >/dev/null ; then
    ai_p=$PIKE_INCLUDE_DIR
  else
    
    ep_dir="`echo $PIKE_INCLUDE_DIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PIKE_INCLUDE_DIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

		if test "$prefix" != "NONE"; then
		   PIKE_C_INCLUDE=$prefix/include/`basename $PIKE`
		else
		   PIKE_C_INCLUDE=/usr/local/include/`basename $PIKE`
		fi
		echo $ac_n "checking for C includes in $PIKE_C_INCLUDE""... $ac_c" 1>&6
echo "configure:5831: checking for C includes in $PIKE_C_INCLUDE" >&5
		if test -f $PIKE_C_INCLUDE/version.h; then
		  PIKE_TEST_VER=`$PIKE -e 'string v; int rel;sscanf(version(), "Pike v%s release %d", v, rel); write(v+"."+rel);'`
		      ###### VERSION MATCH CHECK #######
		      PMAJOR="^#define PIKE_MAJOR_VERSION"
		      PMINOR="^#define PIKE_MINOR_VERSION"
		      PBUILD="^#define PIKE_BUILD_VERSION"

		      PIKE_CMAJOR_VERSION=0
		      PIKE_CMINOR_VERSION=0
		      PIKE_CBUILD_VERSION=0

		      PIKE_CMAJOR_VERSION=`grep "$PMAJOR" $PIKE_C_INCLUDE/version.h | sed -e 's/\(#define.*N \)\(.*\)/\2/'`
    		      if test -z "$PIKE_CMAJOR_VERSION"; then
			if test -n "`grep f_version $PIKE_C_INCLUDE/version.h`"; then
			   PIKE_CMAJOR_VERSION=6
			fi
		      else
		        PIKE_CMINOR_VERSION=`grep "$PMINOR" $PIKE_C_INCLUDE/version.h | sed -e 's/\(#define.*N \)\(.*\)/\2/'`
			PIKE_CBUILD_VERSION=`grep "$PBUILD" $PIKE_C_INCLUDE/version.h | sed -e 's/\(#define.*N \)\(.*\)/\2/'`
                      fi
		      
		      if test "$PIKE_TEST_VER" = "${PIKE_CMAJOR_VERSION}.${PIKE_CMINOR_VERSION}.${PIKE_CBUILD_VERSION}"; then
		         
  if test "$PIKE_C_INCLUDE" != "/usr/include"; then
    
  if test -z "$PIKE_C_INCLUDE" || echo "$PIKE_C_INCLUDE" | grep '^/' >/dev/null ; then
    ai_p=$PIKE_C_INCLUDE
  else
    
    ep_dir="`echo $PIKE_C_INCLUDE|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PIKE_C_INCLUDE\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

				 PIKE_INCLUDE_DIR="$PIKE_INCLUDE_DIR, $PIKE_C_INCLUDE"
		         echo "$ac_t""found" 1>&6
		      else
		         echo "$ac_t""version mismatch" 1>&6
		      fi
		   else
			echo "$ac_t""not found" 1>&6
		   fi
	else
		{ echo "configure: error: Caudium PHP4 requires Pike 7.0 or newer" 1>&2; exit 1; }
	fi
    PIKE_VERSION=`$PIKE -e 'string v; int rel;sscanf(version(), "Pike v%s release %d", v, rel); write(v+"."+rel);'`   
	cat >> confdefs.h <<\EOF
#define HAVE_CAUDIUM 1
EOF

    
  PHP_SAPI=caudium
  
  case "shared" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp4.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/caudium in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/caudium"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/caudium/"; ac_bdir="sapi/caudium/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in caudium.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



	INSTALL_IT="\$(INSTALL) -m 0755 $SAPI_SHARED $withval/lib/$PIKE_VERSION/PHP4.so"
	RESULT="	*** Pike binary used:         $PIKE
	*** Pike include dir(s) used: $PIKE_INCLUDE_DIR
	*** Pike version:             $PIKE_VERSION"
        
  enable_experimental_zts=yes
  if test "$pthreads_working" != "yes"; then
    { echo "configure: error: ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." 1>&2; exit 1; }
  fi



fi

echo "$ac_t""$RESULT" 1>&6

	


echo $ac_n "checking for CLI build""... $ac_c" 1>&6
echo "configure:6069: checking for CLI build" >&5

# Check whether --enable-cli or --disable-cli was given.
if test "${enable_cli+set}" = set; then
  enableval="$enable_cli"
  
  PHP_SAPI_CLI=$enableval

else
  
  PHP_SAPI_CLI=yes

fi


if test "$PHP_SAPI_CLI" != "no"; then
  
  src=$abs_srcdir/sapi/cli/Makefile.frag
  ac_srcdir=$abs_srcdir/sapi/cli
  ac_builddir=sapi/cli
  sed -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments

  SAPI_CLI_PATH=sapi/cli/php
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST SAPI_CLI_PATH"


  case $host_alias in
  *darwin*)
    BUILD_CLI="\$(CC) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS) \$(LDFLAGS) \$(NATIVE_RPATHS) \$(PHP_GLOBAL_OBJS:.lo=.o) \$(PHP_CLI_OBJS:.lo=.o) \$(PHP_FRAMEWORKS) \$(EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -o \$(SAPI_CLI_PATH)"
    ;;
  *cygwin*)
    SAPI_CLI_PATH=sapi/cli/php.exe
    BUILD_CLI="\$(LIBTOOL) --mode=link \$(CC) -export-dynamic \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS) \$(LDFLAGS) \$(PHP_RPATHS) \$(PHP_GLOBAL_OBJS) \$(PHP_CLI_OBJS) \$(EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -o \$(SAPI_CLI_PATH)"
    ;;
  *)
    BUILD_CLI="\$(LIBTOOL) --mode=link \$(CC) -export-dynamic \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS) \$(LDFLAGS) \$(PHP_RPATHS) \$(PHP_GLOBAL_OBJS) \$(PHP_CLI_OBJS) \$(EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -o \$(SAPI_CLI_PATH)"
    ;;
  esac
  INSTALL_CLI="\$(mkinstalldirs) \$(INSTALL_ROOT)\$(bindir); \$(INSTALL) -m 0755 \$(SAPI_CLI_PATH) \$(INSTALL_ROOT)\$(bindir)/php"

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST BUILD_CLI"

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST INSTALL_CLI"

  
  PHP_OUTPUT_FILES="$PHP_OUTPUT_FILES sapi/cli/php.1"

else
  
  disable_cli=1

fi

echo "$ac_t""$PHP_SAPI_CLI" 1>&6


echo $ac_n "checking for embedded SAPI library support""... $ac_c" 1>&6
echo "configure:6129: checking for embedded SAPI library support" >&5

# Check whether --enable-embed or --disable-embed was given.
if test "${enable_embed+set}" = set; then
  enableval="$enable_embed"
   
  case $enableval in
    yes|shared)
      PHP_EMBED_TYPE=shared
      INSTALL_IT="\$(mkinstalldirs) \$(INSTALL_ROOT)\$(prefix)/lib; \$(INSTALL) -m 0755 $SAPI_SHARED \$(INSTALL_ROOT)\$(prefix)/lib"
      ;;
    static)
      PHP_EMBED_TYPE=static
      INSTALL_IT="\$(mkinstalldirs) \$(INSTALL_ROOT)\$(prefix)/lib; \$(INSTALL) -m 0644 $SAPI_STATIC \$(INSTALL_ROOT)\$(prefix)/lib"
      ;;
    *)
      PHP_EMBED_TYPE=no
      ;;
  esac

else
  
  PHP_EMBED_TYPE=no

fi


echo "$ac_t""$PHP_EMBED_TYPE" 1>&6

if test "$PHP_EMBED_TYPE" != "no"; then
  
  PHP_SAPI=embed
  
  case "$PHP_EMBED_TYPE" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp4.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/embed in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/embed"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/embed/"; ac_bdir="sapi/embed/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_embed.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



fi


RESULT=no
echo $ac_n "checking for Zeus ISAPI support""... $ac_c" 1>&6
echo "configure:6312: checking for Zeus ISAPI support" >&5
# Check whether --with-isapi or --without-isapi was given.
if test "${with_isapi+set}" = set; then
  withval="$with_isapi"
  
	if test "$withval" = "yes"; then
		ZEUSPATH=/usr/local/zeus # the default
	else
		ZEUSPATH=$withval
	fi
	test -f "$ZEUSPATH/web/include/httpext.h" || { echo "configure: error: Unable to find httpext.h in $ZEUSPATH/web/include" 1>&2; exit 1; }
	
  enable_experimental_zts=yes
  if test "$pthreads_working" != "yes"; then
    { echo "configure: error: ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." 1>&2; exit 1; }
  fi

	cat >> confdefs.h <<\EOF
#define WITH_ZEUS 1
EOF

	
  if test "$ZEUSPATH/web/include" != "/usr/include"; then
    
  if test -z "$ZEUSPATH/web/include" || echo "$ZEUSPATH/web/include" | grep '^/' >/dev/null ; then
    ai_p=$ZEUSPATH/web/include
  else
    
    ep_dir="`echo $ZEUSPATH/web/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ZEUSPATH/web/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    
  PHP_SAPI=isapi
  
  case "shared" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp4.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/isapi in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/isapi"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/isapi/"; ac_bdir="sapi/isapi/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php4isapi.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



	INSTALL_IT="\$(SHELL) \$(srcdir)/install-sh -m 0755 $SAPI_SHARED \$(INSTALL_ROOT)$ZEUSPATH/web/bin/"
	RESULT=yes

fi

echo "$ac_t""$RESULT" 1>&6



echo $ac_n "checking for NSAPI support""... $ac_c" 1>&6
echo "configure:6522: checking for NSAPI support" >&5
# Check whether --with-nsapi or --without-nsapi was given.
if test "${with_nsapi+set}" = set; then
  withval="$with_nsapi"
  
  PHP_NSAPI=$withval

else
  
  PHP_NSAPI=no

fi

echo "$ac_t""$PHP_NSAPI" 1>&6

if test "$PHP_NSAPI" != "no"; then
  if test ! -d $PHP_NSAPI/bin ; then
    { echo "configure: error: Please specify the path to the root of your Netscape server using --with-nsapi=DIR" 1>&2; exit 1; }
  fi
  echo $ac_n "checking for NSAPI include files""... $ac_c" 1>&6
echo "configure:6542: checking for NSAPI include files" >&5
  if test -d $PHP_NSAPI/include ; then
    NSAPI_INCLUDE=$PHP_NSAPI/include
    echo "$ac_t""Netscape-Enterprise/3.x style" 1>&6
    for ac_hdr in $NSAPI_INCLUDE/nsapi.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:6550: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 6555 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:6560: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

  fi
  if test -d $PHP_NSAPI/plugins/include ; then
    test -n "$NSAPI_INCLUDE" && NSAPI_INC_DIR="-I$NSAPI_INCLUDE"
    NSAPI_INCLUDE="$PHP_NSAPI/plugins/include"
    echo "$ac_t""iPlanet/4.x style" 1>&6
    for ac_hdr in $NSAPI_INCLUDE/nsapi.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:6595: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 6600 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:6605: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

    NSAPI_INCLUDE="$NSAPI_INC_DIR -I$NSAPI_INCLUDE"
  fi
  if test "$NSAPI_INCLUDE" = ""; then
    { echo "configure: error: Please check you have nsapi.h in either $PHP_NSAPI/include or $PHP_NSAPI/plugins/include" 1>&2; exit 1; }
  fi

  
  for ac_i in $NSAPI_INCLUDE; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/include"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    ;;
    esac
  done

  
  enable_experimental_zts=yes
  if test "$pthreads_working" != "yes"; then
    { echo "configure: error: ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." 1>&2; exit 1; }
  fi

  cat >> confdefs.h <<\EOF
#define HAVE_NSAPI 1
EOF

  
  PHP_SAPI=nsapi
  
  case "shared" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp4.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/nsapi in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/nsapi"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/nsapi/"; ac_bdir="sapi/nsapi/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in nsapi.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



  INSTALL_IT="\$(INSTALL) -m 0755 $SAPI_SHARED \$(INSTALL_ROOT)$PHP_NSAPI/bin/"
fi




RESULT=no
echo $ac_n "checking for PHTTPD support""... $ac_c" 1>&6
echo "configure:6843: checking for PHTTPD support" >&5
# Check whether --with-phttpd or --without-phttpd was given.
if test "${with_phttpd+set}" = set; then
  withval="$with_phttpd"
  
	if test ! -d $withval ; then
		{ echo "configure: error: You did not specify a directory" 1>&2; exit 1; }
	fi
	
  enable_experimental_zts=yes
  if test "$pthreads_working" != "yes"; then
    { echo "configure: error: ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." 1>&2; exit 1; }
  fi

	PHTTPD_DIR=$withval
	
  if test "$PHTTPD_DIR/include" != "/usr/include"; then
    
  if test -z "$PHTTPD_DIR/include" || echo "$PHTTPD_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$PHTTPD_DIR/include
  else
    
    ep_dir="`echo $PHTTPD_DIR/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHTTPD_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

	cat >> confdefs.h <<\EOF
#define HAVE_PHTTPD 1
EOF

	
  PHP_SAPI=phttpd
  
  case "shared" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp4.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/phttpd in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/phttpd"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/phttpd/"; ac_bdir="sapi/phttpd/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in phttpd.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



	INSTALL_IT="\$(INSTALL) -m 0755 $SAPI_SHARED \$(INSTALL_ROOT)$PHTTPD_DIR/modules/"
	RESULT=yes

fi

echo "$ac_t""$RESULT" 1>&6



RESULT=no
echo $ac_n "checking for Pi3Web support""... $ac_c" 1>&6
echo "configure:7052: checking for Pi3Web support" >&5

# Check whether --with-pi3web or --without-pi3web was given.
if test "${with_pi3web+set}" = set; then
  withval="$with_pi3web"
  
if test "$withval" != "no"; then
	if test "$withval" = "yes"; then
		PI3PATH=../.. # the default
	else
		PI3PATH=$withval
	fi
	test -f "$PI3PATH/PiAPI/PiAPI.h" || { echo "configure: error: Unable to find PiAPI.h in $PI3PATH/PiAPI" 1>&2; exit 1; }
	
  enable_experimental_zts=yes
  if test "$pthreads_working" != "yes"; then
    { echo "configure: error: ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." 1>&2; exit 1; }
  fi

	cat >> confdefs.h <<\EOF
#define WITH_PI3WEB 1
EOF

	
  if test "$PI3PATH/PiAPI" != "/usr/include"; then
    
  if test -z "$PI3PATH/PiAPI" || echo "$PI3PATH/PiAPI" | grep '^/' >/dev/null ; then
    ai_p=$PI3PATH/PiAPI
  else
    
    ep_dir="`echo $PI3PATH/PiAPI|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PI3PATH/PiAPI\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

	
  if test "$PI3PATH/Pi2API" != "/usr/include"; then
    
  if test -z "$PI3PATH/Pi2API" || echo "$PI3PATH/Pi2API" | grep '^/' >/dev/null ; then
    ai_p=$PI3PATH/Pi2API
  else
    
    ep_dir="`echo $PI3PATH/Pi2API|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PI3PATH/Pi2API\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

	
  if test "$PI3PATH/Pi3API" != "/usr/include"; then
    
  if test -z "$PI3PATH/Pi3API" || echo "$PI3PATH/Pi3API" | grep '^/' >/dev/null ; then
    ai_p=$PI3PATH/Pi3API
  else
    
    ep_dir="`echo $PI3PATH/Pi3API|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PI3PATH/Pi3API\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

	
  if test "$PI3PATH/PHP4" != "/usr/include"; then
    
  if test -z "$PI3PATH/PHP4" || echo "$PI3PATH/PHP4" | grep '^/' >/dev/null ; then
    ai_p=$PI3PATH/PHP4
  else
    
    ep_dir="`echo $PI3PATH/PHP4|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PI3PATH/PHP4\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

	
  PHP_SAPI=pi3web
  
  case "shared" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp4.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/pi3web in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/pi3web"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/pi3web/"; ac_bdir="sapi/pi3web/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pi3web_sapi.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



	INSTALL_IT="\$(SHELL) \$(srcdir)/install-sh -m 0755 $SAPI_SHARED \$(INSTALL_ROOT)$PI3PATH/bin/"
	RESULT=yes
else
	RESULT=no
fi

fi

echo "$ac_t""$RESULT" 1>&6



RESULT=no
echo $ac_n "checking for Roxen/Pike support""... $ac_c" 1>&6
echo "configure:7361: checking for Roxen/Pike support" >&5
# Check whether --with-roxen or --without-roxen was given.
if test "${with_roxen+set}" = set; then
  withval="$with_roxen"
  
	if test ! -d $withval ; then
		{ echo "configure: error: You did not specify a directory" 1>&2; exit 1; }
	fi
	if test -f $withval/bin/roxen; then
		PIKE=$withval/bin/roxen
	elif test -f $withval/bin/pike; then
		PIKE=$withval/bin/pike
	else
		{ echo "configure: error: Couldn't find a pike in $withval/bin/" 1>&2; exit 1; }
	fi
    if $PIKE -e 'float v; catch(v = __VERSION__ + (__BUILD__/10000.0)); if(v < 0.7079) exit(1); exit(0);'; then
		PIKE_MODULE_DIR=`$PIKE --show-paths 2>&1| grep '^Module' | sed -e 's/.*: //'`
	    PIKE_INCLUDE_DIR=`echo $PIKE_MODULE_DIR | sed -e 's,lib/pike/modules,include/pike,' -e 's,lib/modules,include/pike,'`
		if test -z "$PIKE_INCLUDE_DIR" -o -z "$PIKE_MODULE_DIR"; then
			{ echo "configure: error: Failed to figure out Pike module and include directories" 1>&2; exit 1; }
		fi
	else
		{ echo "configure: error: Roxen/PHP requires Pike 0.7.79 or newer" 1>&2; exit 1; }
	fi
   
	
  if test "$PIKE_INCLUDE_DIR" != "/usr/include"; then
    
  if test -z "$PIKE_INCLUDE_DIR" || echo "$PIKE_INCLUDE_DIR" | grep '^/' >/dev/null ; then
    ai_p=$PIKE_INCLUDE_DIR
  else
    
    ep_dir="`echo $PIKE_INCLUDE_DIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PIKE_INCLUDE_DIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

	cat >> confdefs.h <<\EOF
#define HAVE_ROXEN 1
EOF

	
  PHP_SAPI=roxen
  
  case "shared" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp4.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/roxen in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/roxen"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/roxen/"; ac_bdir="sapi/roxen/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in roxen.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



	INSTALL_IT="\$(INSTALL) -m 0755 $SAPI_SHARED $PIKE_MODULE_DIR/PHP4.so"
	RESULT="yes
	Pike binary used:      $PIKE
	Pike include dir:      $PIKE_INCLUDE_DIR
	Pike module directory: $PIKE_MODULE_DIR"
	PIKE_INCLUDE_DIR=" -I$PIKE_INCLUDE_DIR "

fi

echo "$ac_t""$RESULT" 1>&6

if test "$RESULT" != "no" ; then 
 RESULT=no
 echo $ac_n "checking if Roxen should use ZTS""... $ac_c" 1>&6
echo "configure:7583: checking if Roxen should use ZTS" >&5
 # Check whether --enable-roxen-zts or --disable-roxen-zts was given.
if test "${enable_roxen_zts+set}" = set; then
  enableval="$enable_roxen_zts"
  
 	
  enable_experimental_zts=yes
  if test "$pthreads_working" != "yes"; then
    { echo "configure: error: ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." 1>&2; exit 1; }
  fi

	cat >> confdefs.h <<\EOF
#define ROXEN_USE_ZTS 1
EOF

	RESULT=yes

 
fi

 echo "$ac_t""$RESULT" 1>&6
fi

	


echo $ac_n "checking for Servlet support""... $ac_c" 1>&6
echo "configure:7610: checking for Servlet support" >&5
# Check whether --with-servlet or --without-servlet was given.
if test "${with_servlet+set}" = set; then
  withval="$with_servlet"
  
  if test "$withval" != "no"; then

    if test "$withval" = "yes"; then
      SERVLET_CLASSPATH=.
    else
      if test -f $withval/lib/servlet.jar; then
        SERVLET_CLASSPATH=$withval/lib/servlet.jar
      fi

      if test -f $withval/lib/jsdk.jar; then
        SERVLET_CLASSPATH=$withval/lib/jsdk.jar
      fi

      if test -d $withval/javax; then
        SERVLET_CLASSPATH=$withval
      fi

      if test -z "$SERVLET_CLASSPATH"; then
        echo "$ac_t""no" 1>&6
        { echo "configure: error: unable to find servlet libraries" 1>&2; exit 1; }
      fi
    fi

    cat >> confdefs.h <<\EOF
#define SAPI_SERVLET 1
EOF


    INSTALL_IT="\$(mkinstalldirs) \$(libdir)"
    INSTALL_IT="$INSTALL_IT; \$(INSTALL) -m 0755 \$(top_srcdir)/sapi/servlet/phpsrvlt.jar \$(libdir)"
    INSTALL_IT="$INSTALL_IT; \$(INSTALL) -m 0755 $SAPI_SHARED \$(libdir)"
    PHP_SAPI=servlet
    
  enable_experimental_zts=yes
  if test "$pthreads_working" != "yes"; then
    { echo "configure: error: ZTS currently requires working POSIX threads. We were unable to verify that your system supports Pthreads." 1>&2; exit 1; }
  fi

    EXTRA_INCLUDES="$EXTRA_INCLUDES \$(JAVA_INCLUDE)"
    
  PHP_SAPI=servlet
  
  case "shared" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp4.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/servlet in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/servlet"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/servlet/"; ac_bdir="sapi/servlet/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in servlet.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



    
  
  case /sapi/servlet in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "/sapi/servlet"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir//sapi/servlet/"; ac_bdir="/sapi/servlet/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in java.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    
  src=sapi/servlet/Makefile.frag
  ac_srcdir=$ext_srcdir
  ac_builddir=$ext_builddir
  sed -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments


    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

else
  
  echo "$ac_t""no" 1>&6

fi



  PHP_VAR_SUBST="$PHP_VAR_SUBST SERVLET_CLASSPATH"



# Check whether --with-thttpd or --without-thttpd was given.
if test "${with_thttpd+set}" = set; then
  withval="$with_thttpd"
  
  if test ! -d $withval; then
    echo "$ac_t""thttpd directory does not exist ($withval)" 1>&6
  fi

  
  if test -z "$withval" || echo "$withval" | grep '^/' >/dev/null ; then
    THTTPD=$withval
  else
    
    ep_dir="`echo $withval|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    THTTPD="$ep_realdir/`basename \"$withval\"`"
  fi

  
  if grep thttpd.2.21b $withval/version.h >/dev/null; then
    patch="test -f $THTTPD/php_patched || \
    (cd $THTTPD && patch -p 1 < $abs_srcdir/sapi/thttpd/thttpd_patch && touch php_patched)"

  elif grep Premium $withval/version.h >/dev/null; then
    patch=
  else
    { echo "configure: error: This version only supports thttpd-2.21b and Premium thttpd" 1>&2; exit 1; }
  fi
  
  if test -n "$GCC"; then
        
  gcc_arg_name=ac_cv_gcc_arg_rdynamic
  echo $ac_n "checking whether $CC supports -rdynamic""... $ac_c" 1>&6
echo "configure:7901: checking whether $CC supports -rdynamic" >&5
if eval "test \"`echo '$''{'ac_cv_gcc_arg_rdynamic'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  echo 'void somefunc() { };' > conftest.c
  cmd='$CC -rdynamic -c conftest.c'
  if eval $cmd 2>&1 | egrep -e -rdynamic >/dev/null ; then
    ac_result=no
  else
    ac_result=yes
  fi
  eval $gcc_arg_name=$ac_result
  rm -f conftest.*
  
fi

echo "$ac_t""$ac_cv_gcc_arg_rdynamic" 1>&6
  if eval test "\$$gcc_arg_name" = "yes"; then
    gcc_rdynamic=yes
  else
    :
    
  fi

    if test "$gcc_rdynamic" = "yes"; then
      PHP_LDFLAGS="$PHP_LDFLAGS -rdynamic"
    fi
  fi

  INSTALL_IT="\
    echo 'PHP_LIBS = -L. -lphp4 \$(PHP_LIBS) \$(EXTRA_LIBS)' > $THTTPD/php_makefile; \
    echo 'PHP_LDFLAGS = \$(NATIVE_RPATHS) \$(PHP_LDFLAGS)' >> $THTTPD/php_makefile; \
    echo 'PHP_CFLAGS = \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(CPPFLAGS) \$(EXTRA_CFLAGS)' >> $THTTPD/php_makefile; \
    rm -f $THTTPD/php_thttpd.c $THTTPD/php_thttpd.h $THTTPD/libphp4.a; \
    \$(LN_S) $abs_srcdir/sapi/thttpd/thttpd.c $THTTPD/php_thttpd.c; \
    \$(LN_S) $abs_srcdir/sapi/thttpd/php_thttpd.h $abs_builddir/$SAPI_STATIC $THTTPD/;\
    $patch"
  PHP_THTTPD="yes, using $THTTPD"
  
  if test "$THTTPD" != "/usr/include"; then
    
  if test -z "$THTTPD" || echo "$THTTPD" | grep '^/' >/dev/null ; then
    ai_p=$THTTPD
  else
    
    ep_dir="`echo $THTTPD|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THTTPD\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  
  PHP_SAPI=thttpd
  
  case "static" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp4.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  


else
  
  PHP_THTTPD=no

fi


echo $ac_n "checking for thttpd""... $ac_c" 1>&6
echo "configure:8088: checking for thttpd" >&5
echo "$ac_t""$PHP_THTTPD" 1>&6


PHP_TUX=no

# Check whether --with-tux or --without-tux was given.
if test "${with_tux+set}" = set; then
  withval="$with_tux"
  
  INSTALL_IT="\$(INSTALL) -m 0755 $SAPI_SHARED $withval/php4.tux.so"
  for ac_hdr in tuxmodule.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:8103: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 8108 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:8113: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 :
else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: Cannot find tuxmodule.h" 1>&2; exit 1; }
fi
done

  
  PHP_SAPI=tux
  
  case "shared" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp4.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/tux in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/tux"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/tux/"; ac_bdir="sapi/tux/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_tux.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



  PHP_TUX=yes

fi


echo $ac_n "checking for TUX""... $ac_c" 1>&6
echo "configure:8294: checking for TUX" >&5
echo "$ac_t""$PHP_TUX" 1>&6

unset PHP_TUX


# Check whether --with-webjames or --without-webjames was given.
if test "${with_webjames+set}" = set; then
  withval="$with_webjames"
  
  
  if test -z "$withval" || echo "$withval" | grep '^/' >/dev/null ; then
    WEBJAMES=$withval
  else
    
    ep_dir="`echo $withval|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    WEBJAMES="$ep_realdir/`basename \"$withval\"`"
  fi

  INSTALL_IT="\
    echo 'PHP_LIBS = -l$abs_srcdir/$SAPI_STATIC \$(PHP_LIBS) \$(EXTRA_LIBS)' > $WEBJAMES/build/php; \
    echo 'PHP_LDFLAGS = \$(NATIVE_RPATHS) \$(PHP_LDFLAGS)' >> $WEBJAMES/build/php; \
    echo 'PHP_CFLAGS = -DPHP \$(COMMON_FLAGS) \$(EXTRA_CFLAGS) -I$abs_srcdir/sapi/webjames' >> $WEBJAMES/build/php;"
  PHP_WEBJAMES="yes, using $WEBJAMES"
  
  if test "$WEBJAMES" != "/usr/include"; then
    
  if test -z "$WEBJAMES" || echo "$WEBJAMES" | grep '^/' >/dev/null ; then
    ai_p=$WEBJAMES
  else
    
    ep_dir="`echo $WEBJAMES|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$WEBJAMES\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  
  PHP_SAPI=webjames
  
  case "static" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp4.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/webjames in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/webjames"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/webjames/"; ac_bdir="sapi/webjames/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in webjames.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




else
  
  PHP_WEBJAMES="no"

fi


echo $ac_n "checking for webjames""... $ac_c" 1>&6
echo "configure:8508: checking for webjames" >&5
echo "$ac_t""$PHP_WEBJAMES" 1>&6


# Check whether --enable-cgi or --disable-cgi was given.
if test "${enable_cgi+set}" = set; then
  enableval="$enable_cgi"
  
  PHP_SAPI_CGI=$enableval

else
  
  PHP_SAPI_CGI=yes

fi


# Check whether --enable-force-cgi-redirect or --disable-force-cgi-redirect was given.
if test "${enable_force_cgi_redirect+set}" = set; then
  enableval="$enable_force_cgi_redirect"
  
  PHP_FORCE_CGI_REDIRECT=$enableval

else
  
  PHP_FORCE_CGI_REDIRECT=no

fi


# Check whether --enable-discard-path or --disable-discard-path was given.
if test "${enable_discard_path+set}" = set; then
  enableval="$enable_discard_path"
  
  PHP_DISCARD_PATH=$enableval

else
  
  PHP_DISCARD_PATH=no

fi


# Check whether --enable-fastcgi or --disable-fastcgi was given.
if test "${enable_fastcgi+set}" = set; then
  enableval="$enable_fastcgi"
  
  PHP_ENABLE_FASTCGI=$enableval

else
  
  PHP_ENABLE_FASTCGI=no

fi


# Check whether --enable-path-info-check or --disable-path-info-check was given.
if test "${enable_path_info_check+set}" = set; then
  enableval="$enable_path_info_check"
  
  PHP_ENABLE_PATHINFO_CHECK=$enableval

else
  
  PHP_ENABLE_PATHINFO_CHECK=yes

fi





if test "$PHP_SAPI" = "default"; then
  echo $ac_n "checking for CGI build""... $ac_c" 1>&6
echo "configure:8582: checking for CGI build" >&5
  if test "$PHP_SAPI_CGI" != "no"; then
    echo "$ac_t""yes" 1>&6

    
  src=$abs_srcdir/sapi/cgi/Makefile.frag
  ac_srcdir=$ext_srcdir
  ac_builddir=$ext_builddir
  sed -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments

    case $host_alias in
      *cygwin* )
        SAPI_CGI_PATH=sapi/cgi/php.exe
        ;;
      * )
        SAPI_CGI_PATH=sapi/cgi/php
        ;;
    esac
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST SAPI_CGI_PATH"


    
  echo $ac_n "checking whether writing to stdout works""... $ac_c" 1>&6
echo "configure:8606: checking whether writing to stdout works" >&5
if eval "test \"`echo '$''{'ac_cv_write_stdout'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    if test "$cross_compiling" = yes; then
  
      ac_cv_write_stdout=no
    
else
  cat > conftest.$ac_ext <<EOF
#line 8617 "configure"
#include "confdefs.h"

#ifdef HAVE_UNISTD_H
#include <unistd.h>
#endif

#define TEXT "This is the test message -- "
        
main()
{
  int n;

  n = write(1, TEXT, sizeof(TEXT)-1);
  return (!(n == sizeof(TEXT)-1));
}
    
EOF
if { (eval echo configure:8635: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
      ac_cv_write_stdout=yes
    
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
      ac_cv_write_stdout=no
    
fi
rm -fr conftest*
fi

  
fi

echo "$ac_t""$ac_cv_write_stdout" 1>&6
  if test "$ac_cv_write_stdout" = "yes"; then
    cat >> confdefs.h <<\EOF
#define PHP_WRITE_STDOUT 1
EOF

  fi


    echo $ac_n "checking whether to force Apache CGI redirect""... $ac_c" 1>&6
echo "configure:8664: checking whether to force Apache CGI redirect" >&5
    if test "$PHP_FORCE_CGI_REDIRECT" = "yes"; then
      REDIRECT=1
    else
      REDIRECT=0
    fi
    cat >> confdefs.h <<EOF
#define FORCE_CGI_REDIRECT $REDIRECT
EOF

    echo "$ac_t""$PHP_FORCE_CGI_REDIRECT" 1>&6


    echo $ac_n "checking whether to discard path_info + path_translated""... $ac_c" 1>&6
echo "configure:8678: checking whether to discard path_info + path_translated" >&5
    if test "$PHP_DISCARD_PATH" = "yes"; then
      DISCARD_PATH=1
    else
      DISCARD_PATH=0
    fi
    cat >> confdefs.h <<EOF
#define DISCARD_PATH $DISCARD_PATH
EOF

    echo "$ac_t""$PHP_DISCARD_PATH" 1>&6

    echo $ac_n "checking whether to enable path info checking""... $ac_c" 1>&6
echo "configure:8691: checking whether to enable path info checking" >&5
    if test "$PHP_ENABLE_PATHINFO_CHECK" = "yes"; then
      ENABLE_PATHINFO_CHECK=1
    else
      ENABLE_PATHINFO_CHECK=0
    fi
    cat >> confdefs.h <<EOF
#define ENABLE_PATHINFO_CHECK $ENABLE_PATHINFO_CHECK
EOF

    echo "$ac_t""$PHP_ENABLE_PATHINFO_CHECK" 1>&6

    echo $ac_n "checking whether to enable fastcgi support""... $ac_c" 1>&6
echo "configure:8704: checking whether to enable fastcgi support" >&5
    PHP_LIBFCGI_DIR="$abs_srcdir/sapi/cgi/libfcgi"
    if test -z $PHP_LIBFCGI_DIR; then
      echo "$PHP_LIBFCGI_DIR does not exist"
      exit 1
    fi
    if test "$PHP_ENABLE_FASTCGI" = "yes"; then
      PHP_FASTCGI=1
      PHP_FCGI_FILES="libfcgi/fcgi_stdio.c libfcgi/fcgiapp.c libfcgi/os_unix.c"
      PHP_FCGI_INCLUDE="-I$PHP_LIBFCGI_DIR/include"
      PHP_FCGI_STATIC=1
    else
      PHP_FASTCGI=0
      PHP_FCGI_FILES=""
      PHP_FCGI_INCLUDE=""
      PHP_FCGI_STATIC=0
    fi
    cat >> confdefs.h <<EOF
#define PHP_FASTCGI $PHP_FASTCGI
EOF

    cat >> confdefs.h <<EOF
#define PHP_FCGI_STATIC $PHP_FCGI_STATIC
EOF

    echo "$ac_t""$PHP_ENABLE_FASTCGI" 1>&6

    INSTALL_IT="\$(INSTALL) -m 0755 \$(SAPI_CGI_PATH) \$(INSTALL_ROOT)\$(bindir)/php"
    
  PHP_SAPI=cgi
  
  case "program" in
  static) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=static
;;
  shared) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libphp4.la
  php_build_target=shared
  
  php_c_pre=$shared_c_pre
  php_c_meta=$shared_c_meta
  php_c_post=$shared_c_post
  php_cxx_pre=$shared_cxx_pre
  php_cxx_meta=$shared_cxx_meta
  php_cxx_post=$shared_cxx_post
  php_lo=$shared_lo
;;
  bundle) 
  
  OVERALL_TARGET=php
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program

  OVERALL_TARGET=libs/libphp4.bundle
  php_build_target=static
;;
  program) 
  OVERALL_TARGET='$(SAPI_CGI_PATH)'
  php_c_pre='$(CC)'
  php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
  php_c_post=' && echo > $@'
  php_cxx_pre='$(CXX)'
  php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
  php_cxx_post=' && echo > $@'
  php_lo=o
  
  shared_c_pre='$(LIBTOOL) --mode=compile $(CC)'
  shared_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -prefer-pic'
  shared_c_post=
  shared_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
  shared_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS) -prefer-pic'
  shared_cxx_post=
  shared_lo=lo

  php_build_target=program
;;
  esac
    
  
  
  case sapi/cgi in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/cgi"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/cgi/"; ac_bdir="sapi/cgi/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in $PHP_FCGI_FILES cgi_main.c getopt.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $PHP_FCGI_INCLUDE $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $PHP_FCGI_INCLUDE $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




    case $host_alias in
      *darwin*)
        BUILD_CGI="\$(CC) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS) \$(LDFLAGS) \$(NATIVE_RPATHS) \$(PHP_GLOBAL_OBJS:.lo=.o) \$(PHP_SAPI_OBJS:.lo=.o) \$(PHP_FRAMEWORKS) \$(EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -o \$(SAPI_CGI_PATH)"
      ;;
      *)
        BUILD_CGI="\$(LIBTOOL) --mode=link \$(CC) -export-dynamic \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(EXTRA_LDFLAGS) \$(LDFLAGS) \$(PHP_RPATHS) \$(PHP_GLOBAL_OBJS) \$(PHP_SAPI_OBJS) \$(EXTRA_LIBS) \$(ZEND_EXTRA_LIBS) -o \$(SAPI_CGI_PATH)"
      ;;
    esac

    
  PHP_VAR_SUBST="$PHP_VAR_SUBST BUILD_CGI"


  elif test "$PHP_SAPI_CLI" != "no"; then
    echo "$ac_t""no" 1>&6
    OVERALL_TARGET=
    PHP_SAPI=cli   
  else
    { echo "configure: error: No SAPIs selected." 1>&2; exit 1; }  
  fi
fi



echo $ac_n "checking for chosen SAPI module""... $ac_c" 1>&6
echo "configure:8906: checking for chosen SAPI module" >&5
echo "$ac_t""$PHP_SAPI" 1>&6

if test "$enable_experimental_zts" = "yes"; then
  
if test -n "$ac_cv_pthreads_lib"; then
  LIBS="$LIBS -l$ac_cv_pthreads_lib"
fi

if test -n "$ac_cv_pthreads_cflags"; then
  CFLAGS="$CFLAGS $ac_cv_pthreads_cflags"
fi

  
  if test -z "$host_alias" && test -n "$host"; then
    host_alias=$host
  fi
  if test -z "$host_alias"; then
    { echo "configure: error: host_alias is not set. Make sure to run config.guess" 1>&2; exit 1; }
  fi
  case $host_alias in
  *solaris*)
    PTHREAD_FLAGS="-D_POSIX_PTHREAD_SEMANTICS -D_REENTRANT";;
  *freebsd*)
    PTHREAD_FLAGS="-D_REENTRANT -D_THREAD_SAFE";;
  *linux*)
    PTHREAD_FLAGS=-D_REENTRANT;;
  *aix*)
    PTHREAD_FLAGS=-D_THREAD_SAFE;;
  *irix*)
    PTHREAD_FLAGS=-D_POSIX_THREAD_SAFE_FUNCTIONS;;
  *hpux*)
    PTHREAD_FLAGS=-D_REENTRANT;;
  *sco*)
    PTHREAD_FLAGS=-D_REENTRANT;;
  esac

  if test -n "$PTHREAD_FLAGS"; then
    CPPFLAGS="$CPPFLAGS $PTHREAD_FLAGS"
  fi

fi

if test "$PHP_ENABLE_FASTCGI" = "yes"; then
  
  echo "$ac_t""" 1>&6
  echo "$ac_t""${T_MD}Running FastCGI checks${T_ME}" 1>&6

  











  
#AC_INIT
#AM_INIT_AUTOMAKE(fcgi, 2.2.3-SNAP-0203171857)

#AM_CONFIG_HEADER(include/fcgi_config.h)

#AC_PROG_CC
#AC_PROG_CPP 
#AC_PROG_INSTALL 
#AC_PROG_LIBTOOL

#AC_PROG_CXX

#AC_LANG([C++])

#dnl autoconf defaults CXX to 'g++', so its unclear whether it exists/works
#AC_MSG_CHECKING([whether $CXX works])
#AC_TRY_COMPILE([#include <iostream>], 
#               [std::cout << "ok";], 
#               [AC_MSG_RESULT(yes)
#                LIBFCGIXX=libfcgi++.la
#                ECHO_CPP=echo-cpp${EXEEXT}
#                AC_MSG_CHECKING([whether cin has a streambuf assignment operator])
#                AC_TRY_COMPILE([#include <iostream>], 
#                               [cin = static_cast<streambuf *>(0);], 
#                               [AC_MSG_RESULT(yes)
#                                AC_DEFINE([HAVE_IOSTREAM_WITHASSIGN_STREAMBUF],  [1], 
#                                          [Define if cin/cout/cerr has a streambuf assignment operator])],
#                               [AC_MSG_RESULT(no)]) 
#                AC_MSG_CHECKING([whether char_type is defined in the context of streambuf])
#                AC_TRY_COMPILE([#include <iostream>],
#                               [class fcgi_streambuf : public std::streambuf { char_type ct; }],
#                               [AC_MSG_RESULT(yes)
#                                AC_DEFINE([HAVE_STREAMBUF_CHAR_TYPE], [1], 
#                                          [Define if char_type is defined in the context of streambuf])],
#                               [AC_MSG_RESULT(no)])],
#               [AC_MSG_RESULT(no)])
#AC_SUBST(LIBFCGIXX)
#AC_SUBST(ECHO_CPP)

#AC_LANG([C])

echo $ac_n "checking for gethostbyname in -lnsl""... $ac_c" 1>&6
echo "configure:9009: checking for gethostbyname in -lnsl" >&5
ac_lib_var=`echo nsl'_'gethostbyname | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lnsl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 9017 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gethostbyname();

int main() {
gethostbyname()
; return 0; }
EOF
if { (eval echo configure:9028: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo nsl | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lnsl $LIBS"

else
  echo "$ac_t""no" 1>&6
fi

echo $ac_n "checking for socket in -lsocket""... $ac_c" 1>&6
echo "configure:9056: checking for socket in -lsocket" >&5
ac_lib_var=`echo socket'_'socket | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsocket  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 9064 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char socket();

int main() {
socket()
; return 0; }
EOF
if { (eval echo configure:9075: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo socket | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lsocket $LIBS"

else
  echo "$ac_t""no" 1>&6
fi
 



acx_pthread_ok=no

# First, check if the POSIX threads header, pthread.h, is available.
# If it isn't, don't bother looking for the threads libraries.
ac_safe=`echo "pthread.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for pthread.h""... $ac_c" 1>&6
echo "configure:9111: checking for pthread.h" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 9116 "configure"
#include "confdefs.h"
#include <pthread.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:9121: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
acx_pthread_ok=noheader
fi


# We must check for the threads library under a number of different
# names; the ordering is very important because some systems
# (e.g. DEC) have both -lpthread and -lpthreads, where one of the
# libraries is broken (non-POSIX).

# First of all, check if the user has set any of the PTHREAD_LIBS,
# etcetera environment variables, and if threads linking works using
# them:
if test x"$PTHREAD_LIBS$PTHREAD_CFLAGS" != x; then
        save_CFLAGS="$CFLAGS"
        CFLAGS="$CFLAGS $PTHREAD_CFLAGS"
        save_LIBS="$LIBS"
        LIBS="$PTHREAD_LIBS $LIBS"
        echo $ac_n "checking for pthread_join in LIBS=$PTHREAD_LIBS with CFLAGS=$PTHREAD_CFLAGS""... $ac_c" 1>&6
echo "configure:9158: checking for pthread_join in LIBS=$PTHREAD_LIBS with CFLAGS=$PTHREAD_CFLAGS" >&5
        cat > conftest.$ac_ext <<EOF
#line 9160 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char pthread_join();

int main() {
pthread_join()
; return 0; }
EOF
if { (eval echo configure:9171: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  acx_pthread_ok=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
        echo "$ac_t""$acx_pthread_ok" 1>&6
        if test x"$acx_pthread_ok" = xno; then
                PTHREAD_LIBS=""
                PTHREAD_CFLAGS=""
        fi
        LIBS="$save_LIBS"
        CFLAGS="$save_CFLAGS"
fi

# Create a list of thread flags to try.  Items starting with a "-" are
# C compiler flags, and other items are library names, except for "none"
# which indicates that we try without any flags at all.

acx_pthread_flags="pthreads none -Kthread -kthread lthread -pthread -pthreads -mthreads pthread --thread-safe -mt"

# The ordering *is* (sometimes) important.  Some notes on the
# individual items follow:

# pthreads: AIX (must check this before -lpthread)
# none: in case threads are in libc; should be tried before -Kthread and
#       other compiler flags to prevent continual compiler warnings
# -Kthread: Sequent (threads in libc, but -Kthread needed for pthread.h)
# -kthread: FreeBSD kernel threads (preferred to -pthread since SMP-able)
# lthread: LinuxThreads port on FreeBSD (also preferred to -pthread)
# -pthread: Linux/gcc (kernel threads), BSD/gcc (userland threads)
# -pthreads: Solaris/gcc
# -mthreads: Mingw32/gcc, Lynx/gcc
# -mt: Sun Workshop C (may only link SunOS threads [-lthread], but it
#      doesn't hurt to check since this sometimes defines pthreads too;
#      also defines -D_REENTRANT)
# pthread: Linux, etcetera
# --thread-safe: KAI C++

case "${host_cpu}-${host_os}" in
        *solaris*)

        # On Solaris (at least, for some versions), libc contains stubbed
        # (non-functional) versions of the pthreads routines, so link-based
        # tests will erroneously succeed.  (We need to link with -pthread or
        # -lpthread.)  (The stubs are missing pthread_cleanup_push, or rather
        # a function called by this macro, so we could check for that, but
        # who knows whether they'll stub that too in a future libc.)  So,
        # we'll just look for -pthreads and -lpthread first:

        acx_pthread_flags="-pthread -pthreads pthread -mt $acx_pthread_flags"
        ;;
esac

if test x"$acx_pthread_ok" = xno; then
for flag in $acx_pthread_flags; do

        case $flag in
                none)
                echo $ac_n "checking whether pthreads work without any flags""... $ac_c" 1>&6
echo "configure:9233: checking whether pthreads work without any flags" >&5
                ;;

                -*)
                echo $ac_n "checking whether pthreads work with $flag""... $ac_c" 1>&6
echo "configure:9238: checking whether pthreads work with $flag" >&5
                PTHREAD_CFLAGS="$flag"
                ;;

                *)
                echo $ac_n "checking for the pthreads library -l$flag""... $ac_c" 1>&6
echo "configure:9244: checking for the pthreads library -l$flag" >&5
                PTHREAD_LIBS="-l$flag"
                ;;
        esac

        save_LIBS="$LIBS"
        save_CFLAGS="$CFLAGS"
        LIBS="$PTHREAD_LIBS $LIBS"
        CFLAGS="$CFLAGS $PTHREAD_CFLAGS"

        # Check for various functions.  We must include pthread.h,
        # since some functions may be macros.  (On the Sequent, we
        # need a special flag -Kthread to make this header compile.)
        # We check for pthread_join because it is in -lpthread on IRIX
        # while pthread_create is in libc.  We check for pthread_attr_init
        # due to DEC craziness with -lpthreads.  We check for
        # pthread_cleanup_push because it is one of the few pthread
        # functions on Solaris that doesn't have a non-functional libc stub.
        # We try pthread_create on general principles.
        cat > conftest.$ac_ext <<EOF
#line 9264 "configure"
#include "confdefs.h"
#include <pthread.h>
int main() {
pthread_t th; pthread_join(th, 0);
                     pthread_attr_init(0); pthread_cleanup_push(0, 0);
                     pthread_create(0,0,0,0); pthread_cleanup_pop(0); 
; return 0; }
EOF
if { (eval echo configure:9273: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  acx_pthread_ok=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*

        LIBS="$save_LIBS"
        CFLAGS="$save_CFLAGS"

        echo "$ac_t""$acx_pthread_ok" 1>&6
        if test "x$acx_pthread_ok" = xyes; then
                break;
        fi

        PTHREAD_LIBS=""
        PTHREAD_CFLAGS=""
done
fi

# Various other checks:
if test "x$acx_pthread_ok" = xyes; then
        save_LIBS="$LIBS"
        LIBS="$PTHREAD_LIBS $LIBS"
        save_CFLAGS="$CFLAGS"
        CFLAGS="$CFLAGS $PTHREAD_CFLAGS"

        # Detect AIX lossage: threads are created detached by default
        # and the JOINABLE attribute has a nonstandard name (UNDETACHED).
        echo $ac_n "checking for joinable pthread attribute""... $ac_c" 1>&6
echo "configure:9305: checking for joinable pthread attribute" >&5
        cat > conftest.$ac_ext <<EOF
#line 9307 "configure"
#include "confdefs.h"
#include <pthread.h>
int main() {
int attr=PTHREAD_CREATE_JOINABLE;
; return 0; }
EOF
if { (eval echo configure:9314: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ok=PTHREAD_CREATE_JOINABLE
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ok=unknown
fi
rm -f conftest*
        if test x"$ok" = xunknown; then
                cat > conftest.$ac_ext <<EOF
#line 9326 "configure"
#include "confdefs.h"
#include <pthread.h>
int main() {
int attr=PTHREAD_CREATE_UNDETACHED;
; return 0; }
EOF
if { (eval echo configure:9333: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ok=PTHREAD_CREATE_UNDETACHED
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ok=unknown
fi
rm -f conftest*
        fi
        if test x"$ok" != xPTHREAD_CREATE_JOINABLE; then
                cat >> confdefs.h <<\EOF
#define PTHREAD_CREATE_JOINABLE $ok
EOF

        fi
        echo "$ac_t""${ok}" 1>&6
        if test x"$ok" = xunknown; then
                echo "configure: warning: we do not know how to create joinable pthreads" 1>&2
        fi

        echo $ac_n "checking if more special flags are required for pthreads""... $ac_c" 1>&6
echo "configure:9356: checking if more special flags are required for pthreads" >&5
        flag=no
        case "${host_cpu}-${host_os}" in
                *-aix* | *-freebsd*)     flag="-D_THREAD_SAFE";;
                *solaris* | alpha*-osf*) flag="-D_REENTRANT";;
        esac
        echo "$ac_t""${flag}" 1>&6
        if test "x$flag" != xno; then
                PTHREAD_CFLAGS="$flag $PTHREAD_CFLAGS"
        fi

        LIBS="$save_LIBS"
        CFLAGS="$save_CFLAGS"

        # More AIX lossage: must compile with cc_r
        # Extract the first word of "cc_r", so it can be a program name with args.
set dummy cc_r; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:9374: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_PTHREAD_CC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$PTHREAD_CC"; then
  ac_cv_prog_PTHREAD_CC="$PTHREAD_CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_PTHREAD_CC="cc_r"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_prog_PTHREAD_CC" && ac_cv_prog_PTHREAD_CC="${CC}"
fi
fi
PTHREAD_CC="$ac_cv_prog_PTHREAD_CC"
if test -n "$PTHREAD_CC"; then
  echo "$ac_t""$PTHREAD_CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

else
        PTHREAD_CC="$CC"
fi





# Finally, execute ACTION-IF-FOUND/ACTION-IF-NOT-FOUND:
if test x"$acx_pthread_ok" = xyes; then
        THREADED=threaded${EXEEXT}
        :
else
        acx_pthread_ok=no
        
fi





    echo $ac_n "checking for sun_len in sys/un.h""... $ac_c" 1>&6
echo "configure:9423: checking for sun_len in sys/un.h" >&5
    cat > conftest.$ac_ext <<EOF
#line 9425 "configure"
#include "confdefs.h"
#include <sys/un.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "sun_len" >/dev/null 2>&1; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
	 cat >> confdefs.h <<\EOF
#define HAVE_SOCKADDR_UN_SUN_LEN 1
EOF

else
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*


    echo $ac_n "checking for fpos_t in stdio.h""... $ac_c" 1>&6
echo "configure:9445: checking for fpos_t in stdio.h" >&5
    cat > conftest.$ac_ext <<EOF
#line 9447 "configure"
#include "confdefs.h"
#include <stdio.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "fpos_t" >/dev/null 2>&1; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
	 cat >> confdefs.h <<\EOF
#define HAVE_FPOS 1
EOF

else
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*


    for ac_hdr in sys/socket.h netdb.h netinet/in.h arpa/inet.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:9470: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 9475 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:9480: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

    for ac_hdr in sys/time.h limits.h sys/param.h unistd.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:9510: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 9515 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:9520: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


    echo $ac_n "checking for a fileno() prototype in stdio.h""... $ac_c" 1>&6
echo "configure:9548: checking for a fileno() prototype in stdio.h" >&5
    cat > conftest.$ac_ext <<EOF
#line 9550 "configure"
#include "confdefs.h"
#include <stdio.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "fileno" >/dev/null 2>&1; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6 
	     cat >> confdefs.h <<\EOF
#define HAVE_FILENO_PROTO 1
EOF

else
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*


    if test "$HAVE_SYS_SOCKET_H"; then
	echo $ac_n "checking for socklen_t in sys/socket.h""... $ac_c" 1>&6
echo "configure:9571: checking for socklen_t in sys/socket.h" >&5
	cat > conftest.$ac_ext <<EOF
#line 9573 "configure"
#include "confdefs.h"
#include <sys/socket.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "socklen_t" >/dev/null 2>&1; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
	     cat >> confdefs.h <<\EOF
#define HAVE_SOCKLEN 1
EOF

else
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*

    fi

    #--------------------------------------------------------------------
    #  Do we need cross-process locking on this platform?
    #--------------------------------------------------------------------
    echo $ac_n "checking whether cross-process locking is required by accept()""... $ac_c" 1>&6
echo "configure:9597: checking whether cross-process locking is required by accept()" >&5
    case "`uname -sr`" in
	IRIX\ 5.* | SunOS\ 5.* | UNIX_System_V\ 4.0)	
		    echo "$ac_t""yes" 1>&6
		    cat >> confdefs.h <<\EOF
#define USE_LOCKING 1
EOF

	    ;;
	*)
		    echo "$ac_t""no" 1>&6
		;;
    esac

    #--------------------------------------------------------------------
    #  Does va_arg(arg, long double) crash the compiler?
    #  hpux 9.04 compiler does and so does Stratus FTX (uses HP's compiler)
    #--------------------------------------------------------------------
    echo $ac_n "checking whether va_arg(arg, long double) crashes the compiler""... $ac_c" 1>&6
echo "configure:9616: checking whether va_arg(arg, long double) crashes the compiler" >&5
    cat > conftest.$ac_ext <<EOF
#line 9618 "configure"
#include "confdefs.h"
#include <stdarg.h>
int main() {
long double lDblArg; va_list arg; lDblArg = va_arg(arg, long double);
; return 0; }
EOF
if { (eval echo configure:9625: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
	cat >> confdefs.h <<\EOF
#define HAVE_VA_ARG_LONG_DOUBLE_BUG 1
EOF

fi
rm -f conftest*

    echo $ac_n "checking for working const""... $ac_c" 1>&6
echo "configure:9641: checking for working const" >&5
if eval "test \"`echo '$''{'ac_cv_c_const'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 9646 "configure"
#include "confdefs.h"

int main() {

/* Ultrix mips cc rejects this.  */
typedef int charset[2]; const charset x;
/* SunOS 4.1.1 cc rejects this.  */
char const *const *ccp;
char **p;
/* NEC SVR4.0.2 mips cc rejects this.  */
struct point {int x, y;};
static struct point const zero = {0,0};
/* AIX XL C 1.02.0.0 rejects this.
   It does not let you subtract one const X* pointer from another in an arm
   of an if-expression whose if-part is not a constant expression */
const char *g = "string";
ccp = &g + (g ? g-g : 0);
/* HPUX 7.0 cc rejects these. */
++ccp;
p = (char**) ccp;
ccp = (char const *const *) p;
{ /* SCO 3.2v4 cc rejects this.  */
  char *t;
  char const *s = 0 ? (char *) 0 : (char const *) 0;

  *t++ = 0;
}
{ /* Someone thinks the Sun supposedly-ANSI compiler will reject this.  */
  int x[] = {25, 17};
  const int *foo = &x[0];
  ++foo;
}
{ /* Sun SC1.0 ANSI compiler rejects this -- but not the above. */
  typedef const int *iptr;
  iptr p = 0;
  ++p;
}
{ /* AIX XL C 1.02.0.0 rejects this saying
     "k.c", line 2.27: 1506-025 (S) Operand must be a modifiable lvalue. */
  struct s { int j; const int *ap[3]; };
  struct s *b; b->j = 5;
}
{ /* ULTRIX-32 V3.1 (Rev 9) vcc rejects this */
  const int foo = 10;
}

; return 0; }
EOF
if { (eval echo configure:9695: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_c_const=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_c_const=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_c_const" 1>&6
if test $ac_cv_c_const = no; then
  cat >> confdefs.h <<\EOF
#define const 
EOF

fi
 


for ac_func in strerror
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:9720: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 9725 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:9748: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
LIBOBJS="$LIBOBJS ${ac_func}.${ac_objext}"
fi
done



#AC_C_INLINE

#--------------------------------------------------------------------
#  This is a little hokie in that it avoids including config.guess
#  and config.sub in the distribution, but its been working so far.
#  Windows builds don't run configure so we should be safe fixing
#  this to 'unix' (at least for now).
#--------------------------------------------------------------------
#SYSTEM=unix
#AC_SUBST([SYSTEM])

#AC_PROG_CC_WARNINGS

#AC_CONFIG_FILES([Makefile
#                 cgi-fcgi/Makefile
#                 include/Makefile
#                 libfcgi/Makefile
#                 examples/Makefile])

#AC_OUTPUT

fi








  echo "$ac_t""" 1>&6
  echo "$ac_t""${T_MD}Running system checks${T_ME}" 1>&6



  echo $ac_n "checking for missing declarations of reentrant functions""... $ac_c" 1>&6
echo "configure:9811: checking for missing declarations of reentrant functions" >&5
  cat > conftest.$ac_ext <<EOF
#line 9813 "configure"
#include "confdefs.h"
#include <time.h>
int main() {
struct tm *(*func)() = localtime_r
; return 0; }
EOF
if { (eval echo configure:9820: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
    :
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
    cat >> confdefs.h <<\EOF
#define MISSING_LOCALTIME_R_DECL 1
EOF

  
fi
rm -f conftest*
  cat > conftest.$ac_ext <<EOF
#line 9838 "configure"
#include "confdefs.h"
#include <time.h>
int main() {
struct tm *(*func)() = gmtime_r
; return 0; }
EOF
if { (eval echo configure:9845: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
    :
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
    cat >> confdefs.h <<\EOF
#define MISSING_GMTIME_R_DECL 1
EOF

  
fi
rm -f conftest*
  cat > conftest.$ac_ext <<EOF
#line 9863 "configure"
#include "confdefs.h"
#include <time.h>
int main() {
char *(*func)() = asctime_r
; return 0; }
EOF
if { (eval echo configure:9870: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
    :
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
    cat >> confdefs.h <<\EOF
#define MISSING_ASCTIME_R_DECL 1
EOF

  
fi
rm -f conftest*
  cat > conftest.$ac_ext <<EOF
#line 9888 "configure"
#include "confdefs.h"
#include <time.h>
int main() {
char *(*func)() = ctime_r
; return 0; }
EOF
if { (eval echo configure:9895: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
    :
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
    cat >> confdefs.h <<\EOF
#define MISSING_CTIME_R_DECL 1
EOF

  
fi
rm -f conftest*
  cat > conftest.$ac_ext <<EOF
#line 9913 "configure"
#include "confdefs.h"
#include <string.h>
int main() {
char *(*func)() = strtok_r
; return 0; }
EOF
if { (eval echo configure:9920: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
    :
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
    cat >> confdefs.h <<\EOF
#define MISSING_STRTOK_R_DECL 1
EOF

  
fi
rm -f conftest*
  echo "$ac_t""done" 1>&6


PHP_ALT_PATH=/usr/bin:/usr/sbin:/usr/etc:/etc:/usr/ucblib:/usr/lib
# Extract the first word of "sendmail", so it can be a program name with args.
set dummy sendmail; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:9944: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PROG_SENDMAIL'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PROG_SENDMAIL" in
  /*)
  ac_cv_path_PROG_SENDMAIL="$PROG_SENDMAIL" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PROG_SENDMAIL="$PROG_SENDMAIL" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH:$PHP_ALT_PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PROG_SENDMAIL="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
fi
PROG_SENDMAIL="$ac_cv_path_PROG_SENDMAIL"
if test -n "$PROG_SENDMAIL"; then
  echo "$ac_t""$PROG_SENDMAIL" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

if test -n "$PROG_SENDMAIL"; then
  cat >> confdefs.h <<\EOF
#define HAVE_SENDMAIL 1
EOF

fi


  echo $ac_n "checking whether system uses EBCDIC""... $ac_c" 1>&6
echo "configure:9985: checking whether system uses EBCDIC" >&5
if eval "test \"`echo '$''{'ac_cv_ebcdic'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  if test "$cross_compiling" = yes; then
  
  ac_cv_ebcdic=no

else
  cat > conftest.$ac_ext <<EOF
#line 9996 "configure"
#include "confdefs.h"

int main(void) { 
  return (unsigned char)'A' != (unsigned char)0xC1; 
} 

EOF
if { (eval echo configure:10004: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
  ac_cv_ebcdic=yes

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  ac_cv_ebcdic=no

fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_ebcdic" 1>&6
  if test "$ac_cv_ebcdic" = "yes"; then
    cat >> confdefs.h <<\EOF
#define CHARSET_EBCDIC 1
EOF

  fi

if test -d /usr/pkg/include -a -d /usr/pkg/lib ; then
       CPPFLAGS="$CPPFLAGS -I/usr/pkg/include"
       LDFLAGS="$LDFLAGS -L/usr/pkg/lib"
fi
INCLUDES="$INCLUDES -I\$(top_builddir)/Zend"
test -d /usr/ucblib && 
  if test "/usr/ucblib" != "/usr/lib"; then
    
  if test -z "/usr/ucblib" || echo "/usr/ucblib" | grep '^/' >/dev/null ; then
    ai_p=/usr/ucblib
  else
    
    ep_dir="`echo /usr/ucblib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"/usr/ucblib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi






  unset ac_cv_func_socket
  unset ac_cv_func___socket
  unset found
  
  echo $ac_n "checking for socket""... $ac_c" 1>&6
echo "configure:10078: checking for socket" >&5
if eval "test \"`echo '$''{'ac_cv_func_socket'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 10083 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char socket(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char socket();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_socket) || defined (__stub___socket)
choke me
#else
socket();
#endif

; return 0; }
EOF
if { (eval echo configure:10106: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_socket=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_socket=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'socket`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
 echo $ac_n "checking for __socket""... $ac_c" 1>&6
echo "configure:10124: checking for __socket" >&5
if eval "test \"`echo '$''{'ac_cv_func___socket'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 10129 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char __socket(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __socket();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub___socket) || defined (__stub_____socket)
choke me
#else
__socket();
#endif

; return 0; }
EOF
if { (eval echo configure:10152: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func___socket=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func___socket=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'__socket`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi
 
fi


  case $found in
  yes) 
    cat >> confdefs.h <<\EOF
#define HAVE_SOCKET 1
EOF

    ac_cv_func_socket=yes
  ;;
  
    *) 
  
  unset ac_cv_lib_socket_socket
  unset ac_cv_lib_socket___socket
  unset found
  echo $ac_n "checking for socket in -lsocket""... $ac_c" 1>&6
echo "configure:10190: checking for socket in -lsocket" >&5
ac_lib_var=`echo socket'_'socket | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsocket  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 10198 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char socket();

int main() {
socket()
; return 0; }
EOF
if { (eval echo configure:10209: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __socket in -lsocket""... $ac_c" 1>&6
echo "configure:10229: checking for __socket in -lsocket" >&5
ac_lib_var=`echo socket'_'__socket | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsocket  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 10237 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __socket();

int main() {
__socket()
; return 0; }
EOF
if { (eval echo configure:10248: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lsocket"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 10280 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:10284: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case socket in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsocket $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_SOCKET 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBSOCKET 1
EOF

    ac_cv_func_socket=yes
  else
    
  :

  fi
  
 ;;
  
  esac


  unset ac_cv_func_htonl
  unset ac_cv_func___htonl
  unset found
  
  echo $ac_n "checking for htonl""... $ac_c" 1>&6
echo "configure:10335: checking for htonl" >&5
if eval "test \"`echo '$''{'ac_cv_func_htonl'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 10340 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char htonl(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char htonl();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_htonl) || defined (__stub___htonl)
choke me
#else
htonl();
#endif

; return 0; }
EOF
if { (eval echo configure:10363: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_htonl=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_htonl=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'htonl`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
 echo $ac_n "checking for __htonl""... $ac_c" 1>&6
echo "configure:10381: checking for __htonl" >&5
if eval "test \"`echo '$''{'ac_cv_func___htonl'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 10386 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char __htonl(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __htonl();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub___htonl) || defined (__stub_____htonl)
choke me
#else
__htonl();
#endif

; return 0; }
EOF
if { (eval echo configure:10409: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func___htonl=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func___htonl=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'__htonl`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi
 
fi


  case $found in
  yes) 
    cat >> confdefs.h <<\EOF
#define HAVE_HTONL 1
EOF

    ac_cv_func_htonl=yes
  ;;
  
    *) 
  
  unset ac_cv_lib_socket_htonl
  unset ac_cv_lib_socket___htonl
  unset found
  echo $ac_n "checking for htonl in -lsocket""... $ac_c" 1>&6
echo "configure:10447: checking for htonl in -lsocket" >&5
ac_lib_var=`echo socket'_'htonl | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsocket  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 10455 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char htonl();

int main() {
htonl()
; return 0; }
EOF
if { (eval echo configure:10466: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __htonl in -lsocket""... $ac_c" 1>&6
echo "configure:10486: checking for __htonl in -lsocket" >&5
ac_lib_var=`echo socket'_'__htonl | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsocket  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 10494 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __htonl();

int main() {
__htonl()
; return 0; }
EOF
if { (eval echo configure:10505: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lsocket"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 10537 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:10541: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case socket in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsocket $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_HTONL 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBSOCKET 1
EOF

    ac_cv_func_htonl=yes
  else
    
  :

  fi
  
 ;;
  
  esac


  unset ac_cv_func_gethostname
  unset ac_cv_func___gethostname
  unset found
  
  echo $ac_n "checking for gethostname""... $ac_c" 1>&6
echo "configure:10592: checking for gethostname" >&5
if eval "test \"`echo '$''{'ac_cv_func_gethostname'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 10597 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char gethostname(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gethostname();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_gethostname) || defined (__stub___gethostname)
choke me
#else
gethostname();
#endif

; return 0; }
EOF
if { (eval echo configure:10620: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_gethostname=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_gethostname=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'gethostname`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
 echo $ac_n "checking for __gethostname""... $ac_c" 1>&6
echo "configure:10638: checking for __gethostname" >&5
if eval "test \"`echo '$''{'ac_cv_func___gethostname'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 10643 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char __gethostname(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __gethostname();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub___gethostname) || defined (__stub_____gethostname)
choke me
#else
__gethostname();
#endif

; return 0; }
EOF
if { (eval echo configure:10666: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func___gethostname=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func___gethostname=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'__gethostname`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi
 
fi


  case $found in
  yes) 
    cat >> confdefs.h <<\EOF
#define HAVE_GETHOSTNAME 1
EOF

    ac_cv_func_gethostname=yes
  ;;
  
    *) 
  
  unset ac_cv_lib_nsl_gethostname
  unset ac_cv_lib_nsl___gethostname
  unset found
  echo $ac_n "checking for gethostname in -lnsl""... $ac_c" 1>&6
echo "configure:10704: checking for gethostname in -lnsl" >&5
ac_lib_var=`echo nsl'_'gethostname | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lnsl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 10712 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gethostname();

int main() {
gethostname()
; return 0; }
EOF
if { (eval echo configure:10723: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __gethostname in -lnsl""... $ac_c" 1>&6
echo "configure:10743: checking for __gethostname in -lnsl" >&5
ac_lib_var=`echo nsl'_'__gethostname | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lnsl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 10751 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __gethostname();

int main() {
__gethostname()
; return 0; }
EOF
if { (eval echo configure:10762: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lnsl"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 10794 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:10798: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case nsl in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lnsl $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_GETHOSTNAME 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBNSL 1
EOF

    ac_cv_func_gethostname=yes
  else
    
  :

  fi
  
 ;;
  
  esac


  unset ac_cv_func_gethostbyaddr
  unset ac_cv_func___gethostbyaddr
  unset found
  
  echo $ac_n "checking for gethostbyaddr""... $ac_c" 1>&6
echo "configure:10849: checking for gethostbyaddr" >&5
if eval "test \"`echo '$''{'ac_cv_func_gethostbyaddr'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 10854 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char gethostbyaddr(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gethostbyaddr();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_gethostbyaddr) || defined (__stub___gethostbyaddr)
choke me
#else
gethostbyaddr();
#endif

; return 0; }
EOF
if { (eval echo configure:10877: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_gethostbyaddr=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_gethostbyaddr=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'gethostbyaddr`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
 echo $ac_n "checking for __gethostbyaddr""... $ac_c" 1>&6
echo "configure:10895: checking for __gethostbyaddr" >&5
if eval "test \"`echo '$''{'ac_cv_func___gethostbyaddr'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 10900 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char __gethostbyaddr(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __gethostbyaddr();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub___gethostbyaddr) || defined (__stub_____gethostbyaddr)
choke me
#else
__gethostbyaddr();
#endif

; return 0; }
EOF
if { (eval echo configure:10923: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func___gethostbyaddr=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func___gethostbyaddr=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'__gethostbyaddr`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi
 
fi


  case $found in
  yes) 
    cat >> confdefs.h <<\EOF
#define HAVE_GETHOSTBYADDR 1
EOF

    ac_cv_func_gethostbyaddr=yes
  ;;
  
    *) 
  
  unset ac_cv_lib_nsl_gethostbyaddr
  unset ac_cv_lib_nsl___gethostbyaddr
  unset found
  echo $ac_n "checking for gethostbyaddr in -lnsl""... $ac_c" 1>&6
echo "configure:10961: checking for gethostbyaddr in -lnsl" >&5
ac_lib_var=`echo nsl'_'gethostbyaddr | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lnsl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 10969 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gethostbyaddr();

int main() {
gethostbyaddr()
; return 0; }
EOF
if { (eval echo configure:10980: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __gethostbyaddr in -lnsl""... $ac_c" 1>&6
echo "configure:11000: checking for __gethostbyaddr in -lnsl" >&5
ac_lib_var=`echo nsl'_'__gethostbyaddr | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lnsl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 11008 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __gethostbyaddr();

int main() {
__gethostbyaddr()
; return 0; }
EOF
if { (eval echo configure:11019: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lnsl"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 11051 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:11055: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case nsl in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lnsl $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_GETHOSTBYADDR 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBNSL 1
EOF

    ac_cv_func_gethostbyaddr=yes
  else
    
  :

  fi
  
 ;;
  
  esac


  unset ac_cv_func_yp_get_default_domain
  unset ac_cv_func___yp_get_default_domain
  unset found
  
  echo $ac_n "checking for yp_get_default_domain""... $ac_c" 1>&6
echo "configure:11106: checking for yp_get_default_domain" >&5
if eval "test \"`echo '$''{'ac_cv_func_yp_get_default_domain'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 11111 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char yp_get_default_domain(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char yp_get_default_domain();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_yp_get_default_domain) || defined (__stub___yp_get_default_domain)
choke me
#else
yp_get_default_domain();
#endif

; return 0; }
EOF
if { (eval echo configure:11134: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_yp_get_default_domain=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_yp_get_default_domain=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'yp_get_default_domain`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
 echo $ac_n "checking for __yp_get_default_domain""... $ac_c" 1>&6
echo "configure:11152: checking for __yp_get_default_domain" >&5
if eval "test \"`echo '$''{'ac_cv_func___yp_get_default_domain'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 11157 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char __yp_get_default_domain(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __yp_get_default_domain();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub___yp_get_default_domain) || defined (__stub_____yp_get_default_domain)
choke me
#else
__yp_get_default_domain();
#endif

; return 0; }
EOF
if { (eval echo configure:11180: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func___yp_get_default_domain=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func___yp_get_default_domain=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'__yp_get_default_domain`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi
 
fi


  case $found in
  yes) 
    cat >> confdefs.h <<\EOF
#define HAVE_YP_GET_DEFAULT_DOMAIN 1
EOF

    ac_cv_func_yp_get_default_domain=yes
  ;;
  
    *) 
  
  unset ac_cv_lib_nsl_yp_get_default_domain
  unset ac_cv_lib_nsl___yp_get_default_domain
  unset found
  echo $ac_n "checking for yp_get_default_domain in -lnsl""... $ac_c" 1>&6
echo "configure:11218: checking for yp_get_default_domain in -lnsl" >&5
ac_lib_var=`echo nsl'_'yp_get_default_domain | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lnsl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 11226 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char yp_get_default_domain();

int main() {
yp_get_default_domain()
; return 0; }
EOF
if { (eval echo configure:11237: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __yp_get_default_domain in -lnsl""... $ac_c" 1>&6
echo "configure:11257: checking for __yp_get_default_domain in -lnsl" >&5
ac_lib_var=`echo nsl'_'__yp_get_default_domain | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lnsl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 11265 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __yp_get_default_domain();

int main() {
__yp_get_default_domain()
; return 0; }
EOF
if { (eval echo configure:11276: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lnsl"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 11308 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:11312: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case nsl in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lnsl $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_YP_GET_DEFAULT_DOMAIN 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBNSL 1
EOF

    ac_cv_func_yp_get_default_domain=yes
  else
    
  :

  fi
  
 ;;
  
  esac



  unset ac_cv_func_dlopen
  unset ac_cv_func___dlopen
  unset found
  
  echo $ac_n "checking for dlopen""... $ac_c" 1>&6
echo "configure:11364: checking for dlopen" >&5
if eval "test \"`echo '$''{'ac_cv_func_dlopen'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 11369 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char dlopen(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dlopen();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_dlopen) || defined (__stub___dlopen)
choke me
#else
dlopen();
#endif

; return 0; }
EOF
if { (eval echo configure:11392: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_dlopen=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_dlopen=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'dlopen`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
 echo $ac_n "checking for __dlopen""... $ac_c" 1>&6
echo "configure:11410: checking for __dlopen" >&5
if eval "test \"`echo '$''{'ac_cv_func___dlopen'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 11415 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char __dlopen(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __dlopen();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub___dlopen) || defined (__stub_____dlopen)
choke me
#else
__dlopen();
#endif

; return 0; }
EOF
if { (eval echo configure:11438: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func___dlopen=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func___dlopen=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'__dlopen`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi
 
fi


  case $found in
  yes) 
    cat >> confdefs.h <<\EOF
#define HAVE_DLOPEN 1
EOF

    ac_cv_func_dlopen=yes
  ;;
  
    *) 
  
  unset ac_cv_lib_dl_dlopen
  unset ac_cv_lib_dl___dlopen
  unset found
  echo $ac_n "checking for dlopen in -ldl""... $ac_c" 1>&6
echo "configure:11476: checking for dlopen in -ldl" >&5
ac_lib_var=`echo dl'_'dlopen | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ldl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 11484 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dlopen();

int main() {
dlopen()
; return 0; }
EOF
if { (eval echo configure:11495: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __dlopen in -ldl""... $ac_c" 1>&6
echo "configure:11515: checking for __dlopen in -ldl" >&5
ac_lib_var=`echo dl'_'__dlopen | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ldl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 11523 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __dlopen();

int main() {
__dlopen()
; return 0; }
EOF
if { (eval echo configure:11534: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -ldl"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 11566 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:11570: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case dl in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-ldl $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_DLOPEN 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBDL 1
EOF

    ac_cv_func_dlopen=yes
  else
    
  :

  fi
  
 ;;
  
  esac

if test "$ac_cv_func_dlopen" = "yes"; then
  cat >> confdefs.h <<\EOF
#define HAVE_LIBDL 1
EOF

fi
echo $ac_n "checking for sin in -lm""... $ac_c" 1>&6
echo "configure:11622: checking for sin in -lm" >&5
ac_lib_var=`echo m'_'sin | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lm  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 11630 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char sin();

int main() {
sin()
; return 0; }
EOF
if { (eval echo configure:11641: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo m | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lm $LIBS"

else
  echo "$ac_t""no" 1>&6
fi



  unset ac_cv_func_res_search
  unset ac_cv_func___res_search
  unset found
  
  echo $ac_n "checking for res_search""... $ac_c" 1>&6
echo "configure:11675: checking for res_search" >&5
if eval "test \"`echo '$''{'ac_cv_func_res_search'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 11680 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char res_search(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char res_search();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_res_search) || defined (__stub___res_search)
choke me
#else
res_search();
#endif

; return 0; }
EOF
if { (eval echo configure:11703: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_res_search=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_res_search=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'res_search`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
 echo $ac_n "checking for __res_search""... $ac_c" 1>&6
echo "configure:11721: checking for __res_search" >&5
if eval "test \"`echo '$''{'ac_cv_func___res_search'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 11726 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char __res_search(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __res_search();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub___res_search) || defined (__stub_____res_search)
choke me
#else
__res_search();
#endif

; return 0; }
EOF
if { (eval echo configure:11749: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func___res_search=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func___res_search=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'__res_search`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi
 
fi


  case $found in
  yes) 
    cat >> confdefs.h <<\EOF
#define HAVE_RES_SEARCH 1
EOF

    ac_cv_func_res_search=yes
  ;;
  
    *) 
  
  unset ac_cv_lib_resolv_res_search
  unset ac_cv_lib_resolv___res_search
  unset found
  echo $ac_n "checking for res_search in -lresolv""... $ac_c" 1>&6
echo "configure:11787: checking for res_search in -lresolv" >&5
ac_lib_var=`echo resolv'_'res_search | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lresolv  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 11795 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char res_search();

int main() {
res_search()
; return 0; }
EOF
if { (eval echo configure:11806: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __res_search in -lresolv""... $ac_c" 1>&6
echo "configure:11826: checking for __res_search in -lresolv" >&5
ac_lib_var=`echo resolv'_'__res_search | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lresolv  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 11834 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __res_search();

int main() {
__res_search()
; return 0; }
EOF
if { (eval echo configure:11845: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lresolv"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 11877 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:11881: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case resolv in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lresolv $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_RES_SEARCH 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBRESOLV 1
EOF

    ac_cv_func_res_search=yes
  else
    
  
  unset ac_cv_lib_bind_res_search
  unset ac_cv_lib_bind___res_search
  unset found
  echo $ac_n "checking for res_search in -lbind""... $ac_c" 1>&6
echo "configure:11923: checking for res_search in -lbind" >&5
ac_lib_var=`echo bind'_'res_search | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lbind  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 11931 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char res_search();

int main() {
res_search()
; return 0; }
EOF
if { (eval echo configure:11942: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __res_search in -lbind""... $ac_c" 1>&6
echo "configure:11962: checking for __res_search in -lbind" >&5
ac_lib_var=`echo bind'_'__res_search | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lbind  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 11970 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __res_search();

int main() {
__res_search()
; return 0; }
EOF
if { (eval echo configure:11981: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lbind"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 12013 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:12017: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case bind in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lbind $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_RES_SEARCH 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBBIND 1
EOF

    ac_cv_func_res_search=yes
  else
    
  
  unset ac_cv_lib_socket_res_search
  unset ac_cv_lib_socket___res_search
  unset found
  echo $ac_n "checking for res_search in -lsocket""... $ac_c" 1>&6
echo "configure:12059: checking for res_search in -lsocket" >&5
ac_lib_var=`echo socket'_'res_search | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsocket  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 12067 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char res_search();

int main() {
res_search()
; return 0; }
EOF
if { (eval echo configure:12078: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __res_search in -lsocket""... $ac_c" 1>&6
echo "configure:12098: checking for __res_search in -lsocket" >&5
ac_lib_var=`echo socket'_'__res_search | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsocket  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 12106 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __res_search();

int main() {
__res_search()
; return 0; }
EOF
if { (eval echo configure:12117: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lsocket"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 12149 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:12153: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case socket in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsocket $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_RES_SEARCH 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBSOCKET 1
EOF

    ac_cv_func_res_search=yes
  else
    
  :

  fi
  

  fi
  

  fi
  
 ;;
  
  esac



  unset ac_cv_func_inet_aton
  unset ac_cv_func___inet_aton
  unset found
  
  echo $ac_n "checking for inet_aton""... $ac_c" 1>&6
echo "configure:12211: checking for inet_aton" >&5
if eval "test \"`echo '$''{'ac_cv_func_inet_aton'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 12216 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char inet_aton(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char inet_aton();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_inet_aton) || defined (__stub___inet_aton)
choke me
#else
inet_aton();
#endif

; return 0; }
EOF
if { (eval echo configure:12239: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_inet_aton=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_inet_aton=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'inet_aton`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
 echo $ac_n "checking for __inet_aton""... $ac_c" 1>&6
echo "configure:12257: checking for __inet_aton" >&5
if eval "test \"`echo '$''{'ac_cv_func___inet_aton'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 12262 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char __inet_aton(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __inet_aton();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub___inet_aton) || defined (__stub_____inet_aton)
choke me
#else
__inet_aton();
#endif

; return 0; }
EOF
if { (eval echo configure:12285: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func___inet_aton=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func___inet_aton=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'__inet_aton`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi
 
fi


  case $found in
  yes) 
    cat >> confdefs.h <<\EOF
#define HAVE_INET_ATON 1
EOF

    ac_cv_func_inet_aton=yes
  ;;
  
    *) 
  
  unset ac_cv_lib_resolv_inet_aton
  unset ac_cv_lib_resolv___inet_aton
  unset found
  echo $ac_n "checking for inet_aton in -lresolv""... $ac_c" 1>&6
echo "configure:12323: checking for inet_aton in -lresolv" >&5
ac_lib_var=`echo resolv'_'inet_aton | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lresolv  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 12331 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char inet_aton();

int main() {
inet_aton()
; return 0; }
EOF
if { (eval echo configure:12342: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __inet_aton in -lresolv""... $ac_c" 1>&6
echo "configure:12362: checking for __inet_aton in -lresolv" >&5
ac_lib_var=`echo resolv'_'__inet_aton | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lresolv  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 12370 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __inet_aton();

int main() {
__inet_aton()
; return 0; }
EOF
if { (eval echo configure:12381: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lresolv"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 12413 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:12417: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case resolv in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lresolv $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_INET_ATON 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBRESOLV 1
EOF

    ac_cv_func_inet_aton=yes
  else
    
  
  unset ac_cv_lib_bind_inet_aton
  unset ac_cv_lib_bind___inet_aton
  unset found
  echo $ac_n "checking for inet_aton in -lbind""... $ac_c" 1>&6
echo "configure:12459: checking for inet_aton in -lbind" >&5
ac_lib_var=`echo bind'_'inet_aton | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lbind  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 12467 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char inet_aton();

int main() {
inet_aton()
; return 0; }
EOF
if { (eval echo configure:12478: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __inet_aton in -lbind""... $ac_c" 1>&6
echo "configure:12498: checking for __inet_aton in -lbind" >&5
ac_lib_var=`echo bind'_'__inet_aton | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lbind  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 12506 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __inet_aton();

int main() {
__inet_aton()
; return 0; }
EOF
if { (eval echo configure:12517: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lbind"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 12549 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:12553: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case bind in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lbind $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_INET_ATON 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBBIND 1
EOF

    ac_cv_func_inet_aton=yes
  else
    
  :

  fi
  

  fi
  
 ;;
  
  esac


  unset ac_cv_func_dn_skipname
  unset ac_cv_func___dn_skipname
  unset found
  
  echo $ac_n "checking for dn_skipname""... $ac_c" 1>&6
echo "configure:12607: checking for dn_skipname" >&5
if eval "test \"`echo '$''{'ac_cv_func_dn_skipname'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 12612 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char dn_skipname(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dn_skipname();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_dn_skipname) || defined (__stub___dn_skipname)
choke me
#else
dn_skipname();
#endif

; return 0; }
EOF
if { (eval echo configure:12635: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_dn_skipname=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_dn_skipname=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'dn_skipname`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
 echo $ac_n "checking for __dn_skipname""... $ac_c" 1>&6
echo "configure:12653: checking for __dn_skipname" >&5
if eval "test \"`echo '$''{'ac_cv_func___dn_skipname'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 12658 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char __dn_skipname(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __dn_skipname();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub___dn_skipname) || defined (__stub_____dn_skipname)
choke me
#else
__dn_skipname();
#endif

; return 0; }
EOF
if { (eval echo configure:12681: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func___dn_skipname=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func___dn_skipname=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'__dn_skipname`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi
 
fi


  case $found in
  yes) 
    cat >> confdefs.h <<\EOF
#define HAVE_DN_SKIPNAME 1
EOF

    ac_cv_func_dn_skipname=yes
  ;;
  
    *) 
  
  unset ac_cv_lib_resolv_dn_skipname
  unset ac_cv_lib_resolv___dn_skipname
  unset found
  echo $ac_n "checking for dn_skipname in -lresolv""... $ac_c" 1>&6
echo "configure:12719: checking for dn_skipname in -lresolv" >&5
ac_lib_var=`echo resolv'_'dn_skipname | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lresolv  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 12727 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dn_skipname();

int main() {
dn_skipname()
; return 0; }
EOF
if { (eval echo configure:12738: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __dn_skipname in -lresolv""... $ac_c" 1>&6
echo "configure:12758: checking for __dn_skipname in -lresolv" >&5
ac_lib_var=`echo resolv'_'__dn_skipname | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lresolv  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 12766 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __dn_skipname();

int main() {
__dn_skipname()
; return 0; }
EOF
if { (eval echo configure:12777: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lresolv"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 12809 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:12813: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case resolv in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lresolv $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_DN_SKIPNAME 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBRESOLV 1
EOF

    ac_cv_func_dn_skipname=yes
  else
    
  
  unset ac_cv_lib_bind_dn_skipname
  unset ac_cv_lib_bind___dn_skipname
  unset found
  echo $ac_n "checking for dn_skipname in -lbind""... $ac_c" 1>&6
echo "configure:12855: checking for dn_skipname in -lbind" >&5
ac_lib_var=`echo bind'_'dn_skipname | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lbind  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 12863 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dn_skipname();

int main() {
dn_skipname()
; return 0; }
EOF
if { (eval echo configure:12874: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for __dn_skipname in -lbind""... $ac_c" 1>&6
echo "configure:12894: checking for __dn_skipname in -lbind" >&5
ac_lib_var=`echo bind'_'__dn_skipname | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lbind  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 12902 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __dn_skipname();

int main() {
__dn_skipname()
; return 0; }
EOF
if { (eval echo configure:12913: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  found=yes
else
  echo "$ac_t""no" 1>&6
found=no
fi

  
fi


  if test "$found" = "yes"; then
    ac_libs=$LIBS
    LIBS="$LIBS -lbind"
    if test "$cross_compiling" = yes; then
  found=no
else
  cat > conftest.$ac_ext <<EOF
#line 12945 "configure"
#include "confdefs.h"
main() { return (0); }
EOF
if { (eval echo configure:12949: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  found=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  found=no
fi
rm -fr conftest*
fi

    LIBS=$ac_libs
  fi

  if test "$found" = "yes"; then
    
  
  case bind in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lbind $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_DN_SKIPNAME 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_LIBBIND 1
EOF

    ac_cv_func_dn_skipname=yes
  else
    
  :

  fi
  

  fi
  
 ;;
  
  esac




echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
echo "configure:13001: checking for ANSI C header files" >&5
if eval "test \"`echo '$''{'ac_cv_header_stdc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 13006 "configure"
#include "confdefs.h"
#include <stdlib.h>
#include <stdarg.h>
#include <string.h>
#include <float.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:13014: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  ac_cv_header_stdc=yes
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

if test $ac_cv_header_stdc = yes; then
  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
cat > conftest.$ac_ext <<EOF
#line 13031 "configure"
#include "confdefs.h"
#include <string.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "memchr" >/dev/null 2>&1; then
  :
else
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
cat > conftest.$ac_ext <<EOF
#line 13049 "configure"
#include "confdefs.h"
#include <stdlib.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "free" >/dev/null 2>&1; then
  :
else
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
if test "$cross_compiling" = yes; then
  :
else
  cat > conftest.$ac_ext <<EOF
#line 13070 "configure"
#include "confdefs.h"
#include <ctype.h>
#define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
#define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
int main () { int i; for (i = 0; i < 256; i++)
if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);
exit (0); }

EOF
if { (eval echo configure:13081: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  :
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_header_stdc=no
fi
rm -fr conftest*
fi

fi
fi

echo "$ac_t""$ac_cv_header_stdc" 1>&6
if test $ac_cv_header_stdc = yes; then
  cat >> confdefs.h <<\EOF
#define STDC_HEADERS 1
EOF

fi


if test "`uname -s 2>/dev/null`" != "QNX"; then
  ac_header_dirent=no
for ac_hdr in dirent.h sys/ndir.h sys/dir.h ndir.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr that defines DIR""... $ac_c" 1>&6
echo "configure:13111: checking for $ac_hdr that defines DIR" >&5
if eval "test \"`echo '$''{'ac_cv_header_dirent_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 13116 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <$ac_hdr>
int main() {
DIR *dirp = 0;
; return 0; }
EOF
if { (eval echo configure:13124: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_dirent_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_dirent_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_dirent_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 ac_header_dirent=$ac_hdr; break
else
  echo "$ac_t""no" 1>&6
fi
done
# Two versions of opendir et al. are in -ldir and -lx on SCO Xenix.
if test $ac_header_dirent = dirent.h; then
echo $ac_n "checking for opendir in -ldir""... $ac_c" 1>&6
echo "configure:13149: checking for opendir in -ldir" >&5
ac_lib_var=`echo dir'_'opendir | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ldir  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 13157 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char opendir();

int main() {
opendir()
; return 0; }
EOF
if { (eval echo configure:13168: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  LIBS="$LIBS -ldir"
else
  echo "$ac_t""no" 1>&6
fi

else
echo $ac_n "checking for opendir in -lx""... $ac_c" 1>&6
echo "configure:13190: checking for opendir in -lx" >&5
ac_lib_var=`echo x'_'opendir | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lx  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 13198 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char opendir();

int main() {
opendir()
; return 0; }
EOF
if { (eval echo configure:13209: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  LIBS="$LIBS -lx"
else
  echo "$ac_t""no" 1>&6
fi

fi

else
  for ac_hdr in dirent.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:13236: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 13241 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:13246: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

fi

  echo $ac_n "checking for fclose declaration""... $ac_c" 1>&6
echo "configure:13275: checking for fclose declaration" >&5
  cat > conftest.$ac_ext <<EOF
#line 13277 "configure"
#include "confdefs.h"
#include <stdio.h>
int main() {
int (*func)() = fclose
; return 0; }
EOF
if { (eval echo configure:13284: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
    cat >> confdefs.h <<\EOF
#define MISSING_FCLOSE_DECL 0
EOF

    echo "$ac_t""ok" 1>&6
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
    cat >> confdefs.h <<\EOF
#define MISSING_FCLOSE_DECL 1
EOF

    echo "$ac_t""missing" 1>&6
  
fi
rm -f conftest*

for ac_hdr in  \
ApplicationServices/ApplicationServices.h \
sys/types.h \
sys/time.h \
netinet/in.h \
alloca.h \
arpa/inet.h \
arpa/nameser.h \
assert.h \
crypt.h \
fcntl.h \
grp.h \
ieeefp.h \
langinfo.h \
limits.h \
locale.h \
monetary.h \
mach-o/dyld.h \
netdb.h \
pwd.h \
resolv.h \
signal.h \
stdarg.h \
stdlib.h \
string.h \
syslog.h \
sysexits.h \
sys/file.h \
sys/mman.h \
sys/mount.h \
sys/poll.h \
sys/resource.h \
sys/select.h \
sys/socket.h \
sys/statfs.h \
sys/statvfs.h \
sys/vfs.h \
sys/sysexits.h \
sys/varargs.h \
sys/wait.h \
unistd.h \
unix.h \
utime.h \
sys/utsname.h \
sys/ipc.h \

do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:13356: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 13361 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:13366: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done



	echo $ac_n "checking for fopencookie""... $ac_c" 1>&6
echo "configure:13395: checking for fopencookie" >&5
if eval "test \"`echo '$''{'ac_cv_func_fopencookie'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 13400 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char fopencookie(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char fopencookie();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_fopencookie) || defined (__stub___fopencookie)
choke me
#else
fopencookie();
#endif

; return 0; }
EOF
if { (eval echo configure:13423: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_fopencookie=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_fopencookie=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'fopencookie`\" = yes"; then
  echo "$ac_t""yes" 1>&6
   have_glibc_fopencookie=yes 
else
  echo "$ac_t""no" 1>&6
fi


	if test "$have_glibc_fopencookie" = "yes" ; then
	  	            		  cat > conftest.$ac_ext <<EOF
#line 13445 "configure"
#include "confdefs.h"
 #define _GNU_SOURCE
                       #include <stdio.h>
									   
int main() {
 cookie_io_functions_t cookie; 
; return 0; }
EOF
if { (eval echo configure:13454: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
   have_cookie_io_functions_t=yes 
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
   
fi
rm -f conftest*

      if test "$have_cookie_io_functions_t" = "yes" ; then
        cookie_io_functions_t=cookie_io_functions_t
        have_fopen_cookie=yes

		
		if test "$cross_compiling" = yes; then
    { echo "configure: error: can not run test program while cross compiling" 1>&2; exit 1; }
else
  cat > conftest.$ac_ext <<EOF
#line 13474 "configure"
#include "confdefs.h"

#define _GNU_SOURCE
#include <stdio.h>

struct cookiedata {
	__off64_t pos;
};

__ssize_t reader(void *cookie, char *buffer, size_t size)
{ return size; }
__ssize_t writer(void *cookie, const char *buffer, size_t size)
{ return size; }
int closer(void *cookie)
{ return 0; }
int seeker(void *cookie, __off64_t *position, int whence)
{ ((struct cookiedata*)cookie)->pos = *position; return 0; }

cookie_io_functions_t funcs = {reader, writer, seeker, closer};

main() {
  struct cookiedata g = { 0 };
  FILE *fp = fopencookie(&g, "r", funcs);

  if (fp && fseek(fp, 8192, SEEK_SET) == 0 && g.pos == 8192)
	  exit(0);
  exit(1);
}

					   
EOF
if { (eval echo configure:13506: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
   cookie_io_functions_use_off64_t=yes 
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
    
fi
rm -fr conftest*
fi

		
      else
  	            		    cat > conftest.$ac_ext <<EOF
#line 13521 "configure"
#include "confdefs.h"
 #define _GNU_SOURCE
                       #include <stdio.h>
									   
int main() {
 _IO_cookie_io_functions_t cookie; 
; return 0; }
EOF
if { (eval echo configure:13530: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
   have_IO_cookie_io_functions_t=yes 
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
   
fi
rm -f conftest*
		    if test "$have_cookie_io_functions_t" = "yes" ; then
              cookie_io_functions_t=_IO_cookie_io_functions_t
              have_fopen_cookie=yes
		    fi
      fi

      if test "$have_fopen_cookie" = "yes" ; then
        cat >> confdefs.h <<\EOF
#define HAVE_FOPENCOOKIE 1
EOF

        cat >> confdefs.h <<EOF
#define COOKIE_IO_FUNCTIONS_T $cookie_io_functions_t
EOF

		if test "$cookie_io_functions_use_off64_t" = "yes" ; then
          cat >> confdefs.h <<\EOF
#define COOKIE_SEEKER_USES_OFF64_T 1
EOF

		fi
      fi      

  	fi


  echo $ac_n "checking for broken getcwd""... $ac_c" 1>&6
echo "configure:13567: checking for broken getcwd" >&5
  os=`uname -sr 2>/dev/null`
  case $os in
    SunOS*)
	  cat >> confdefs.h <<\EOF
#define HAVE_BROKEN_GETCWD 1
EOF

	  echo "$ac_t""yes" 1>&6;;
	*)
	  echo "$ac_t""no" 1>&6;;
  esac


  echo $ac_n "checking for broken libc stdio""... $ac_c" 1>&6
echo "configure:13582: checking for broken libc stdio" >&5
  if eval "test \"`echo '$''{'have_broken_glibc_fopen_append'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  if test "$cross_compiling" = yes; then
  cat > conftest.$ac_ext <<EOF
#line 13589 "configure"
#include "confdefs.h"

#include <features.h>

int main() {

#if !__GLIBC_PREREQ(2,2)
choke me
#endif

; return 0; }
EOF
if { (eval echo configure:13602: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  have_broken_glibc_fopen_append=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  have_broken_glibc_fopen_append=no 
fi
rm -f conftest*

else
  cat > conftest.$ac_ext <<EOF
#line 13615 "configure"
#include "confdefs.h"

#include <stdio.h>
int main(int argc, char *argv[])
{
  FILE *fp;
  long position;
  char *filename = "/tmp/phpglibccheck";
  
  fp = fopen(filename, "w");
  if (fp == NULL) {
	  perror("fopen");
	  exit(2);
  }
  fputs("foobar", fp);
  fclose(fp);

  fp = fopen(filename, "a+");
  position = ftell(fp);
  fclose(fp);
  unlink(filename);
  if (position == 0)
	return 1;
  return 0;
}

EOF
if { (eval echo configure:13643: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  have_broken_glibc_fopen_append=no
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  have_broken_glibc_fopen_append=yes 
fi
rm -fr conftest*
fi

fi


  if test "$have_broken_glibc_fopen_append" = "yes"; then
	echo "$ac_t""yes" 1>&6
	cat >> confdefs.h <<\EOF
#define HAVE_BROKEN_GLIBC_FOPEN_APPEND 1
EOF

  else
	echo "$ac_t""no" 1>&6
  fi



echo $ac_n "checking whether struct tm is in sys/time.h or time.h""... $ac_c" 1>&6
echo "configure:13671: checking whether struct tm is in sys/time.h or time.h" >&5
if eval "test \"`echo '$''{'ac_cv_struct_tm'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 13676 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <time.h>
int main() {
struct tm *tp; tp->tm_sec;
; return 0; }
EOF
if { (eval echo configure:13684: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_struct_tm=time.h
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_struct_tm=sys/time.h
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_struct_tm" 1>&6
if test $ac_cv_struct_tm = sys/time.h; then
  cat >> confdefs.h <<\EOF
#define TM_IN_SYS_TIME 1
EOF

fi

echo $ac_n "checking for tm_zone in struct tm""... $ac_c" 1>&6
echo "configure:13705: checking for tm_zone in struct tm" >&5
if eval "test \"`echo '$''{'ac_cv_struct_tm_zone'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 13710 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <$ac_cv_struct_tm>
int main() {
struct tm tm; tm.tm_zone;
; return 0; }
EOF
if { (eval echo configure:13718: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_struct_tm_zone=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_struct_tm_zone=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_struct_tm_zone" 1>&6
if test "$ac_cv_struct_tm_zone" = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_TM_ZONE 1
EOF

else
  echo $ac_n "checking for tzname""... $ac_c" 1>&6
echo "configure:13738: checking for tzname" >&5
if eval "test \"`echo '$''{'ac_cv_var_tzname'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 13743 "configure"
#include "confdefs.h"
#include <time.h>
#ifndef tzname /* For SGI.  */
extern char *tzname[]; /* RS6000 and others reject char **tzname.  */
#endif
int main() {
atoi(*tzname);
; return 0; }
EOF
if { (eval echo configure:13753: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_var_tzname=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_var_tzname=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_var_tzname" 1>&6
  if test $ac_cv_var_tzname = yes; then
    cat >> confdefs.h <<\EOF
#define HAVE_TZNAME 1
EOF

  fi
fi



echo $ac_n "checking for tm_gmtoff in struct tm""... $ac_c" 1>&6
echo "configure:13777: checking for tm_gmtoff in struct tm" >&5
if eval "test \"`echo '$''{'ac_cv_struct_tm_gmtoff'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 13782 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <$ac_cv_struct_tm>
int main() {
struct tm tm; tm.tm_gmtoff;
; return 0; }
EOF
if { (eval echo configure:13790: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_struct_tm_gmtoff=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_struct_tm_gmtoff=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_struct_tm_gmtoff" 1>&6

if test "$ac_cv_struct_tm_gmtoff" = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_TM_GMTOFF 1
EOF

fi


echo $ac_n "checking for struct flock""... $ac_c" 1>&6
echo "configure:13813: checking for struct flock" >&5
if eval "test \"`echo '$''{'ac_cv_struct_flock'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 13818 "configure"
#include "confdefs.h"

#include <unistd.h>
#include <fcntl.h>
        
int main() {
struct flock x;
; return 0; }
EOF
if { (eval echo configure:13828: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
          ac_cv_struct_flock=yes
        
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
          ac_cv_struct_flock=no
        
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_struct_flock" 1>&6
if test "$ac_cv_struct_flock" = "yes" ; then
    cat >> confdefs.h <<\EOF
#define HAVE_STRUCT_FLOCK 1
EOF

fi


echo $ac_n "checking for socklen_t""... $ac_c" 1>&6
echo "configure:13855: checking for socklen_t" >&5
if eval "test \"`echo '$''{'ac_cv_socklen_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 13860 "configure"
#include "confdefs.h"

#include <sys/types.h>
#include <sys/socket.h>

int main() {

socklen_t x;

; return 0; }
EOF
if { (eval echo configure:13872: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
  ac_cv_socklen_t=yes

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
  ac_cv_socklen_t=no

fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_socklen_t" 1>&6
if test "$ac_cv_socklen_t" = "yes"; then
  cat >> confdefs.h <<\EOF
#define HAVE_SOCKLEN_T 1
EOF

fi


echo $ac_n "checking size of long""... $ac_c" 1>&6
echo "configure:13898: checking size of long" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_long'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_long=8
else
  cat > conftest.$ac_ext <<EOF
#line 13906 "configure"
#include "confdefs.h"
#include <stdio.h>
int main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) return(1);
  fprintf(f, "%d\n", sizeof(long));
  return(0);
}
EOF
if { (eval echo configure:13917: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_long=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_long=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_long" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_LONG $ac_cv_sizeof_long
EOF


echo $ac_n "checking size of int""... $ac_c" 1>&6
echo "configure:13937: checking size of int" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_int'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_int=4
else
  cat > conftest.$ac_ext <<EOF
#line 13945 "configure"
#include "confdefs.h"
#include <stdio.h>
int main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) return(1);
  fprintf(f, "%d\n", sizeof(int));
  return(0);
}
EOF
if { (eval echo configure:13956: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_int=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_int=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_int" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_INT $ac_cv_sizeof_int
EOF



echo $ac_n "checking for st_blksize in struct stat""... $ac_c" 1>&6
echo "configure:13977: checking for st_blksize in struct stat" >&5
if eval "test \"`echo '$''{'ac_cv_struct_st_blksize'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 13982 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/stat.h>
int main() {
struct stat s; s.st_blksize;
; return 0; }
EOF
if { (eval echo configure:13990: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_struct_st_blksize=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_struct_st_blksize=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_struct_st_blksize" 1>&6
if test $ac_cv_struct_st_blksize = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_ST_BLKSIZE 1
EOF

fi

if test "`uname -s 2>/dev/null`" != "QNX"; then
  echo $ac_n "checking for st_blocks in struct stat""... $ac_c" 1>&6
echo "configure:14012: checking for st_blocks in struct stat" >&5
if eval "test \"`echo '$''{'ac_cv_struct_st_blocks'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 14017 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/stat.h>
int main() {
struct stat s; s.st_blocks;
; return 0; }
EOF
if { (eval echo configure:14025: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_struct_st_blocks=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_struct_st_blocks=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_struct_st_blocks" 1>&6
if test $ac_cv_struct_st_blocks = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_ST_BLOCKS 1
EOF

else
  LIBOBJS="$LIBOBJS fileblocks.${ac_objext}"
fi

else
  echo "configure: warning: warnings level for cc set to 0" 1>&2
  WARNING_LEVEL=0
fi
echo $ac_n "checking for st_rdev in struct stat""... $ac_c" 1>&6
echo "configure:14052: checking for st_rdev in struct stat" >&5
if eval "test \"`echo '$''{'ac_cv_struct_st_rdev'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 14057 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/stat.h>
int main() {
struct stat s; s.st_rdev;
; return 0; }
EOF
if { (eval echo configure:14065: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_struct_st_rdev=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_struct_st_rdev=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_struct_st_rdev" 1>&6
if test $ac_cv_struct_st_rdev = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_ST_RDEV 1
EOF

fi


echo $ac_n "checking for size_t""... $ac_c" 1>&6
echo "configure:14087: checking for size_t" >&5
if eval "test \"`echo '$''{'ac_cv_type_size_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 14092 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "(^|[^a-zA-Z_0-9])size_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_size_t=yes
else
  rm -rf conftest*
  ac_cv_type_size_t=no
fi
rm -f conftest*

fi
echo "$ac_t""$ac_cv_type_size_t" 1>&6
if test $ac_cv_type_size_t = no; then
  cat >> confdefs.h <<\EOF
#define size_t unsigned
EOF

fi

echo $ac_n "checking for uid_t in sys/types.h""... $ac_c" 1>&6
echo "configure:14120: checking for uid_t in sys/types.h" >&5
if eval "test \"`echo '$''{'ac_cv_type_uid_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 14125 "configure"
#include "confdefs.h"
#include <sys/types.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "uid_t" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_uid_t=yes
else
  rm -rf conftest*
  ac_cv_type_uid_t=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_type_uid_t" 1>&6
if test $ac_cv_type_uid_t = no; then
  cat >> confdefs.h <<\EOF
#define uid_t int
EOF

  cat >> confdefs.h <<\EOF
#define gid_t int
EOF

fi


echo $ac_n "checking for struct sockaddr_storage""... $ac_c" 1>&6
echo "configure:14155: checking for struct sockaddr_storage" >&5
if eval "test \"`echo '$''{'ac_cv_sockaddr_storage'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 14160 "configure"
#include "confdefs.h"
 #include <sys/types.h>
#include <sys/socket.h>
int main() {
struct sockaddr_storage s; s
; return 0; }
EOF
if { (eval echo configure:14168: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_sockaddr_storage=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_sockaddr_storage=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_sockaddr_storage" 1>&6
if test "$ac_cv_sockaddr_storage" = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_SOCKADDR_STORAGE 1
EOF

fi


cat > conftest.$ac_ext <<EOF
#line 14190 "configure"
#include "confdefs.h"

#include <sys/types.h>
#include <sys/socket.h>

int main() {
static struct sockaddr sa; int n = (int) sa.sa_len; return n
; return 0; }
EOF
if { (eval echo configure:14200: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  cat >> confdefs.h <<\EOF
#define HAVE_SOCKADDR_LEN 1
EOF

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*

echo $ac_n "checking for IPv6 support""... $ac_c" 1>&6
echo "configure:14213: checking for IPv6 support" >&5
if eval "test \"`echo '$''{'ac_cv_ipv6_support'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 14218 "configure"
#include "confdefs.h"
 #include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
int main() {
struct sockaddr_in6 s; struct in6_addr t=in6addr_any; int i=AF_INET6; s; t.s6_addr[0] = 0;
; return 0; }
EOF
if { (eval echo configure:14227: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_ipv6_support=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_ipv6_support=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_ipv6_support" 1>&6




echo $ac_n "checking for vprintf""... $ac_c" 1>&6
echo "configure:14245: checking for vprintf" >&5
if eval "test \"`echo '$''{'ac_cv_func_vprintf'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 14250 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char vprintf(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char vprintf();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_vprintf) || defined (__stub___vprintf)
choke me
#else
vprintf();
#endif

; return 0; }
EOF
if { (eval echo configure:14273: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_vprintf=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_vprintf=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'vprintf`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_VPRINTF 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

if test "$ac_cv_func_vprintf" != yes; then
echo $ac_n "checking for _doprnt""... $ac_c" 1>&6
echo "configure:14297: checking for _doprnt" >&5
if eval "test \"`echo '$''{'ac_cv_func__doprnt'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 14302 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char _doprnt(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char _doprnt();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub__doprnt) || defined (__stub____doprnt)
choke me
#else
_doprnt();
#endif

; return 0; }
EOF
if { (eval echo configure:14325: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func__doprnt=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func__doprnt=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'_doprnt`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_DOPRNT 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

fi

for ac_func in alphasort \
asctime_r \
chroot \
ctime_r \
cuserid \
crypt \
flock \
ftok \
funopen \
gai_strerror \
gcvt \
getlogin \
getprotobyname \
getprotobynumber \
getservbyname \
getservbyport \
getrusage \
gettimeofday \
gmtime_r \
isascii \
link \
localtime_r \
lockf \
lrand48 \
memcpy \
memmove \
mkstemp \
mmap \
nl_langinfo \
perror \
poll \
putenv \
realpath \
random \
rand_r \
regcomp \
res_search \
scandir \
setitimer \
setlocale \
localeconv \
setsockopt \
setvbuf \
shutdown \
sin \
snprintf \
srand48 \
srandom \
statfs \
statvfs \
std_syslog \
strcasecmp \
strcoll \
strdup \
strerror \
strftime \
strstr \
strtok_r \
symlink \
tempnam \
tzset \
unsetenv \
usleep \
utime \
vsnprintf \

do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:14417: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 14422 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:14445: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


echo $ac_n "checking for getaddrinfo""... $ac_c" 1>&6
echo "configure:14471: checking for getaddrinfo" >&5
if eval "test \"`echo '$''{'ac_cv_func_getaddrinfo'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 14476 "configure"
#include "confdefs.h"
#include <netdb.h>
int main() {
struct addrinfo *g,h;g=&h;getaddrinfo("","",g,&g);
; return 0; }
EOF
if { (eval echo configure:14483: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_func_getaddrinfo=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_func_getaddrinfo=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_func_getaddrinfo" 1>&6
if test "$ac_cv_func_getaddrinfo" = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_GETADDRINFO 1
EOF

fi

for ac_func in strlcat strlcpy getopt
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:14506: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 14511 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:14534: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
LIBOBJS="$LIBOBJS ${ac_func}.${ac_objext}"
fi
done


echo $ac_n "checking whether utime accepts a null argument""... $ac_c" 1>&6
echo "configure:14561: checking whether utime accepts a null argument" >&5
if eval "test \"`echo '$''{'ac_cv_func_utime_null'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  rm -f conftestdata; > conftestdata
# Sequent interprets utime(file, 0) to mean use start of epoch.  Wrong.
if test "$cross_compiling" = yes; then
  ac_cv_func_utime_null=no
else
  cat > conftest.$ac_ext <<EOF
#line 14571 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/stat.h>
main() {
struct stat s, t;
exit(!(stat ("conftestdata", &s) == 0 && utime("conftestdata", (long *)0) == 0
&& stat("conftestdata", &t) == 0 && t.st_mtime >= s.st_mtime
&& t.st_mtime - s.st_mtime < 120));
}
EOF
if { (eval echo configure:14582: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_func_utime_null=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_func_utime_null=no
fi
rm -fr conftest*
fi

rm -f core core.* *.core
fi

echo "$ac_t""$ac_cv_func_utime_null" 1>&6
if test $ac_cv_func_utime_null = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_UTIME_NULL 1
EOF

fi

# The Ultrix 4.2 mips builtin alloca declared by alloca.h only works
# for constant arguments.  Useless!
echo $ac_n "checking for working alloca.h""... $ac_c" 1>&6
echo "configure:14608: checking for working alloca.h" >&5
if eval "test \"`echo '$''{'ac_cv_header_alloca_h'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 14613 "configure"
#include "confdefs.h"
#include <alloca.h>
int main() {
char *p = alloca(2 * sizeof(int));
; return 0; }
EOF
if { (eval echo configure:14620: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_header_alloca_h=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_alloca_h=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_header_alloca_h" 1>&6
if test $ac_cv_header_alloca_h = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_ALLOCA_H 1
EOF

fi

echo $ac_n "checking for alloca""... $ac_c" 1>&6
echo "configure:14641: checking for alloca" >&5
if eval "test \"`echo '$''{'ac_cv_func_alloca_works'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 14646 "configure"
#include "confdefs.h"

#ifdef __GNUC__
# define alloca __builtin_alloca
#else
# ifdef _MSC_VER
#  include <malloc.h>
#  define alloca _alloca
# else
#  if HAVE_ALLOCA_H
#   include <alloca.h>
#  else
#   ifdef _AIX
 #pragma alloca
#   else
#    ifndef alloca /* predefined by HP cc +Olibcalls */
char *alloca ();
#    endif
#   endif
#  endif
# endif
#endif

int main() {
char *p = (char *) alloca(1);
; return 0; }
EOF
if { (eval echo configure:14674: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_func_alloca_works=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_func_alloca_works=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_func_alloca_works" 1>&6
if test $ac_cv_func_alloca_works = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_ALLOCA 1
EOF

fi

if test $ac_cv_func_alloca_works = no; then
  # The SVR3 libPW and SVR4 libucb both contain incompatible functions
  # that cause trouble.  Some versions do not even contain alloca or
  # contain a buggy version.  If you still want to use their alloca,
  # use ar to extract alloca.o from them instead of compiling alloca.c.
  ALLOCA=alloca.${ac_objext}
  cat >> confdefs.h <<\EOF
#define C_ALLOCA 1
EOF


echo $ac_n "checking whether alloca needs Cray hooks""... $ac_c" 1>&6
echo "configure:14706: checking whether alloca needs Cray hooks" >&5
if eval "test \"`echo '$''{'ac_cv_os_cray'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 14711 "configure"
#include "confdefs.h"
#if defined(CRAY) && ! defined(CRAY2)
webecray
#else
wenotbecray
#endif

EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "webecray" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_os_cray=yes
else
  rm -rf conftest*
  ac_cv_os_cray=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_os_cray" 1>&6
if test $ac_cv_os_cray = yes; then
for ac_func in _getb67 GETB67 getb67; do
  echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:14736: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 14741 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:14764: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<EOF
#define CRAY_STACKSEG_END $ac_func
EOF

  break
else
  echo "$ac_t""no" 1>&6
fi

done
fi

echo $ac_n "checking stack direction for C alloca""... $ac_c" 1>&6
echo "configure:14791: checking stack direction for C alloca" >&5
if eval "test \"`echo '$''{'ac_cv_c_stack_direction'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_c_stack_direction=0
else
  cat > conftest.$ac_ext <<EOF
#line 14799 "configure"
#include "confdefs.h"
find_stack_direction ()
{
  static char *addr = 0;
  auto char dummy;
  if (addr == 0)
    {
      addr = &dummy;
      return find_stack_direction ();
    }
  else
    return (&dummy > addr) ? 1 : -1;
}
main ()
{
  exit (find_stack_direction() < 0);
}
EOF
if { (eval echo configure:14818: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_c_stack_direction=1
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_c_stack_direction=-1
fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_c_stack_direction" 1>&6
cat >> confdefs.h <<EOF
#define STACK_DIRECTION $ac_cv_c_stack_direction
EOF

fi


  echo $ac_n "checking whether sprintf is broken""... $ac_c" 1>&6
echo "configure:14841: checking whether sprintf is broken" >&5
if eval "test \"`echo '$''{'ac_cv_broken_sprintf'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    if test "$cross_compiling" = yes; then
  
      ac_cv_broken_sprintf=no
    
else
  cat > conftest.$ac_ext <<EOF
#line 14852 "configure"
#include "confdefs.h"
main() {char buf[20];exit(sprintf(buf,"testing 123")!=11); }
EOF
if { (eval echo configure:14856: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
      ac_cv_broken_sprintf=no
    
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
      ac_cv_broken_sprintf=yes
    
fi
rm -fr conftest*
fi

  
fi

echo "$ac_t""$ac_cv_broken_sprintf" 1>&6
  if test "$ac_cv_broken_sprintf" = "yes"; then
    cat >> confdefs.h <<\EOF
#define PHP_BROKEN_SPRINTF 1
EOF

  else
    cat >> confdefs.h <<\EOF
#define PHP_BROKEN_SPRINTF 0
EOF

  fi


  echo $ac_n "checking whether snprintf is broken""... $ac_c" 1>&6
echo "configure:14890: checking whether snprintf is broken" >&5
if eval "test \"`echo '$''{'ac_cv_broken_snprintf'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    if test "$cross_compiling" = yes; then
  
      ac_cv_broken_snprintf=no
    
else
  cat > conftest.$ac_ext <<EOF
#line 14901 "configure"
#include "confdefs.h"

#define NULL (0L)
main() {
	char buf[20];
	int res = 0;
	res = res || (snprintf(buf, 2, "marcus") != 6); 
	res = res || (buf[1] != '\0');
	res = res || (snprintf(buf, 0, "boerger") != 7);
	res = res || (buf[0] != 'm');
	res = res || (snprintf(NULL, 0, "boerger") != 7);
	res = res || (snprintf(buf, sizeof(buf), "%f", 0.12345678) != 8);
	exit(res); 
}
    
EOF
if { (eval echo configure:14918: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
      ac_cv_broken_snprintf=no
    
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
      ac_cv_broken_snprintf=yes
    
fi
rm -fr conftest*
fi

  
fi

echo "$ac_t""$ac_cv_broken_snprintf" 1>&6
  if test "$ac_cv_broken_snprintf" = "yes"; then
    cat >> confdefs.h <<\EOF
#define PHP_BROKEN_SNPRINTF 1
EOF

  else
    cat >> confdefs.h <<\EOF
#define PHP_BROKEN_SNPRINTF 0
EOF

  fi


  echo $ac_n "checking for declared timezone""... $ac_c" 1>&6
echo "configure:14952: checking for declared timezone" >&5
if eval "test \"`echo '$''{'ac_cv_declared_timezone'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    cat > conftest.$ac_ext <<EOF
#line 14958 "configure"
#include "confdefs.h"

#include <sys/types.h>
#include <time.h>
#ifdef HAVE_SYS_TIME_H
#include <sys/time.h>
#endif

int main() {

    time_t foo = (time_t) timezone;

; return 0; }
EOF
if { (eval echo configure:14973: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
  ac_cv_declared_timezone=yes

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
  ac_cv_declared_timezone=no

fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_declared_timezone" 1>&6
  if test "$ac_cv_declared_timezone" = "yes"; then
    cat >> confdefs.h <<\EOF
#define HAVE_DECLARED_TIMEZONE 1
EOF

  fi


echo $ac_n "checking for type of reentrant time-related functions""... $ac_c" 1>&6
echo "configure:14999: checking for type of reentrant time-related functions" >&5
if eval "test \"`echo '$''{'ac_cv_time_r_type'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
if test "$cross_compiling" = yes; then
  
  ac_cv_time_r_type=POSIX

else
  cat > conftest.$ac_ext <<EOF
#line 15010 "configure"
#include "confdefs.h"

#include <time.h>

main() {
char buf[27];
struct tm t;
time_t old = 0;
int r, s;

s = gmtime_r(&old, &t);
r = (int) asctime_r(&t, buf, 26);
if (r == s && s == 0) return (0);
return (1);
}

EOF
if { (eval echo configure:15028: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
  ac_cv_time_r_type=hpux

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  if test "$cross_compiling" = yes; then
    { echo "configure: error: can not run test program while cross compiling" 1>&2; exit 1; }
else
  cat > conftest.$ac_ext <<EOF
#line 15042 "configure"
#include "confdefs.h"

#include <time.h>
main() {
  struct tm t, *s;
  time_t old = 0;
  char buf[27], *p;
  
  s = gmtime_r(&old, &t);
  p = asctime_r(&t, buf, 26);
  if (p == buf && s == &t) return (0);
  return (1);
}
  
EOF
if { (eval echo configure:15058: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    ac_cv_time_r_type=irix
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    ac_cv_time_r_type=POSIX
  
fi
rm -fr conftest*
fi


fi
rm -fr conftest*
fi


fi

echo "$ac_t""$ac_cv_time_r_type" 1>&6
  case $ac_cv_time_r_type in
  hpux) cat >> confdefs.h <<\EOF
#define PHP_HPUX_TIME_R 1
EOF
 ;;
  irix) cat >> confdefs.h <<\EOF
#define PHP_IRIX_TIME_R 1
EOF
 ;;
  esac


    echo $ac_n "checking for readdir_r""... $ac_c" 1>&6
echo "configure:15096: checking for readdir_r" >&5
if eval "test \"`echo '$''{'ac_cv_func_readdir_r'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 15101 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char readdir_r(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char readdir_r();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_readdir_r) || defined (__stub___readdir_r)
choke me
#else
readdir_r();
#endif

; return 0; }
EOF
if { (eval echo configure:15124: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_readdir_r=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_readdir_r=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'readdir_r`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  ac_cv_func_readdir_r=yes
else
  echo "$ac_t""no" 1>&6
ac_cv_func_readdir=no
fi

  if test "$ac_cv_func_readdir_r" = "yes"; then
  echo $ac_n "checking for type of readdir_r""... $ac_c" 1>&6
echo "configure:15146: checking for type of readdir_r" >&5
if eval "test \"`echo '$''{'ac_cv_what_readdir_r'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    if test "$cross_compiling" = yes; then
  
      ac_cv_what_readdir_r=none
   
else
  cat > conftest.$ac_ext <<EOF
#line 15157 "configure"
#include "confdefs.h"

#define _REENTRANT
#include <sys/types.h>
#include <dirent.h>

#ifndef PATH_MAX
#define PATH_MAX 1024
#endif

main() {
	DIR *dir;
	char entry[sizeof(struct dirent)+PATH_MAX];
	struct dirent *pentry = (struct dirent *) &entry;

	dir = opendir("/");
	if (!dir) 
		exit(1);
	if (readdir_r(dir, (struct dirent *) entry, &pentry) == 0)
		exit(0);
	exit(1);
}
    
EOF
if { (eval echo configure:15182: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
      ac_cv_what_readdir_r=POSIX
    
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
      cat > conftest.$ac_ext <<EOF
#line 15193 "configure"
#include "confdefs.h"

#define _REENTRANT
#include <sys/types.h>
#include <dirent.h>
int readdir_r(DIR *, struct dirent *);
        
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:15203: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  
          ac_cv_what_readdir_r=old-style
        
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
          ac_cv_what_readdir_r=none
      
fi
rm -f conftest*
    
fi
rm -fr conftest*
fi

  
fi

echo "$ac_t""$ac_cv_what_readdir_r" 1>&6
    case $ac_cv_what_readdir_r in
    POSIX)
      cat >> confdefs.h <<\EOF
#define HAVE_POSIX_READDIR_R 1
EOF
;;
    old-style)
      cat >> confdefs.h <<\EOF
#define HAVE_OLD_READDIR_R 1
EOF
;;
    esac
  fi


if eval "test \"`echo '$''{'ac_cv_type_$1'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 15248 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
#ifdef HAVE_NETINET_IN_H
#include <netinet/in.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "in_addr_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_in_addr_t=yes
else
  rm -rf conftest*
  ac_cv_type_in_addr_t=no
fi
rm -f conftest*

fi

if test $ac_cv_type_in_addr_t = no; then
  cat >> confdefs.h <<\EOF
#define in_addr_t u_int
EOF

fi







  echo "$ac_t""" 1>&6
  echo "$ac_t""${T_MD}General settings${T_ME}" 1>&6



# Check whether --enable- or --disable- was given.
if test "${enable_+set}" = set; then
  enableval="$enable_"
  :
fi





echo $ac_n "checking whether to include debugging symbols""... $ac_c" 1>&6
echo "configure:15300: checking whether to include debugging symbols" >&5
# Check whether --enable-debug or --disable-debug was given.
if test "${enable_debug+set}" = set; then
  enableval="$enable_debug"
  PHP_DEBUG=$enableval
else
  
  PHP_DEBUG=no

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_DEBUG=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_DEBUG
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_DEBUG" = "yes"; then
  PHP_DEBUG=1
  ZEND_DEBUG=yes
else
  PHP_DEBUG=0
  ZEND_DEBUG=no
fi



echo $ac_n "checking layout of installed files""... $ac_c" 1>&6
echo "configure:15333: checking layout of installed files" >&5
# Check whether --with-layout or --without-layout was given.
if test "${with_layout+set}" = set; then
  withval="$with_layout"
  PHP_LAYOUT=$withval
else
  
  PHP_LAYOUT=PHP

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_LAYOUT=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_LAYOUT
echo "$ac_t""$ext_output" 1>&6




case $PHP_LAYOUT in
  GNU)
    oldstyleextdir=no
    ;;
  *)
    oldstyleextdir=yes
    ;;
esac



echo $ac_n "checking path to configuration file""... $ac_c" 1>&6
echo "configure:15367: checking path to configuration file" >&5
# Check whether --with-config-file-path or --without-config-file-path was given.
if test "${with_config_file_path+set}" = set; then
  withval="$with_config_file_path"
  PHP_CONFIG_FILE_PATH=$withval
else
  
  PHP_CONFIG_FILE_PATH=DEFAULT

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_CONFIG_FILE_PATH=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_CONFIG_FILE_PATH
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_CONFIG_FILE_PATH" = "DEFAULT"; then
  case $PHP_LAYOUT in
    GNU)
      PHP_CONFIG_FILE_PATH=$sysconfdir
      ;;
    *)
      PHP_CONFIG_FILE_PATH=$libdir
      ;;
  esac
fi



echo $ac_n "checking directory to be scanned for configuration files""... $ac_c" 1>&6
echo "configure:15403: checking directory to be scanned for configuration files" >&5
# Check whether --with-config-file-scan-dir or --without-config-file-scan-dir was given.
if test "${with_config_file_scan_dir+set}" = set; then
  withval="$with_config_file_scan_dir"
  PHP_CONFIG_FILE_SCAN_DIR=$withval
else
  
  PHP_CONFIG_FILE_SCAN_DIR=DEFAULT

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_CONFIG_FILE_SCAN_DIR=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_CONFIG_FILE_SCAN_DIR
echo "$ac_t""$ext_output" 1>&6


 
if test "$PHP_CONFIG_FILE_SCAN_DIR" = "DEFAULT"; then
	PHP_CONFIG_FILE_SCAN_DIR=""
fi

# compatibility
if test -z "$with_pear" && test "$enable_pear" = "no"; then
  with_pear=no
fi



echo $ac_n "checking whether to install PEAR, and where""... $ac_c" 1>&6
echo "configure:15436: checking whether to install PEAR, and where" >&5
# Check whether --with-pear or --without-pear was given.
if test "${with_pear+set}" = set; then
  withval="$with_pear"
  PHP_PEAR=$withval
else
  
  PHP_PEAR=DEFAULT

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_PEAR=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_PEAR in
shared,*)
  PHP_PEAR=`echo "$PHP_PEAR"|sed 's/^shared,//'`
  ;;
shared)
  PHP_PEAR=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_PEAR" != "no" && test "$disable_cli" != "1"; then
  install_pear="install-pear"
  PEAR_INSTALLDIR=$PHP_PEAR
fi

if test "$PHP_PEAR" = "DEFAULT" || test "$PHP_PEAR" = "yes"; then
  case $PHP_LAYOUT in
    GNU) PEAR_INSTALLDIR=$datadir/pear;;
    *)   PEAR_INSTALLDIR=$libdir/php;;
  esac
fi

test -n "$DEBUG_CFLAGS" && CFLAGS="$CFLAGS $DEBUG_CFLAGS"



echo $ac_n "checking whether to enable safe mode by default""... $ac_c" 1>&6
echo "configure:15496: checking whether to enable safe mode by default" >&5
# Check whether --enable-safe-mode or --disable-safe-mode was given.
if test "${enable_safe_mode+set}" = set; then
  enableval="$enable_safe_mode"
  PHP_SAFE_MODE=$enableval
else
  
  PHP_SAFE_MODE=no

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_SAFE_MODE=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_SAFE_MODE
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_SAFE_MODE" = "yes"; then
  cat >> confdefs.h <<\EOF
#define PHP_SAFE_MODE 1
EOF

else
  cat >> confdefs.h <<\EOF
#define PHP_SAFE_MODE 0
EOF

fi

echo $ac_n "checking for safe mode exec dir""... $ac_c" 1>&6
echo "configure:15531: checking for safe mode exec dir" >&5
# Check whether --with-exec-dir or --without-exec-dir was given.
if test "${with_exec_dir+set}" = set; then
  withval="$with_exec_dir"
  
  if test "$withval" != "no"; then
    if test "$withval" = "yes"; then
      cat >> confdefs.h <<\EOF
#define PHP_SAFE_MODE_EXEC_DIR "/usr/local/php/bin"
EOF

      echo "$ac_t""/usr/local/php/bin" 1>&6
    else
      cat >> confdefs.h <<EOF
#define PHP_SAFE_MODE_EXEC_DIR "$withval"
EOF

      echo "$ac_t""$withval" 1>&6
    fi
  else
    cat >> confdefs.h <<\EOF
#define PHP_SAFE_MODE_EXEC_DIR "/usr/local/php/bin"
EOF

    echo "$ac_t""/usr/local/php/bin" 1>&6
  fi

else
  
  cat >> confdefs.h <<\EOF
#define PHP_SAFE_MODE_EXEC_DIR "/usr/local/php/bin"
EOF

  echo "$ac_t""/usr/local/php/bin" 1>&6

fi




echo $ac_n "checking whether to enable PHP's own SIGCHLD handler""... $ac_c" 1>&6
echo "configure:15572: checking whether to enable PHP's own SIGCHLD handler" >&5
# Check whether --enable-sigchild or --disable-sigchild was given.
if test "${enable_sigchild+set}" = set; then
  enableval="$enable_sigchild"
  PHP_SIGCHILD=$enableval
else
  
  PHP_SIGCHILD=no

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_SIGCHILD=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_SIGCHILD
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_SIGCHILD" = "yes"; then
  cat >> confdefs.h <<\EOF
#define PHP_SIGCHILD 1
EOF

else
  cat >> confdefs.h <<\EOF
#define PHP_SIGCHILD 0
EOF

fi



echo $ac_n "checking whether to enable magic quotes by default""... $ac_c" 1>&6
echo "configure:15609: checking whether to enable magic quotes by default" >&5
# Check whether --enable-magic-quotes or --disable-magic-quotes was given.
if test "${enable_magic_quotes+set}" = set; then
  enableval="$enable_magic_quotes"
  PHP_MAGIC_QUOTES=$enableval
else
  
  PHP_MAGIC_QUOTES=no

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_MAGIC_QUOTES=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_MAGIC_QUOTES
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_MAGIC_QUOTES" = "yes"; then
  cat >> confdefs.h <<\EOF
#define MAGIC_QUOTES 1
EOF

else
  cat >> confdefs.h <<\EOF
#define MAGIC_QUOTES 0
EOF

fi



echo $ac_n "checking whether to enable runpaths""... $ac_c" 1>&6
echo "configure:15646: checking whether to enable runpaths" >&5
# Check whether --enable-rpath or --disable-rpath was given.
if test "${enable_rpath+set}" = set; then
  enableval="$enable_rpath"
  PHP_RPATH=$enableval
else
  
  PHP_RPATH=yes

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_RPATH=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_RPATH
echo "$ac_t""$ext_output" 1>&6






echo $ac_n "checking whether to explicitly link against libgcc""... $ac_c" 1>&6
echo "configure:15671: checking whether to explicitly link against libgcc" >&5
# Check whether --enable-libgcc or --disable-libgcc was given.
if test "${enable_libgcc+set}" = set; then
  enableval="$enable_libgcc"
  PHP_LIBGCC=$enableval
else
  
  PHP_LIBGCC=no

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_LIBGCC=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_LIBGCC
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_LIBGCC" = "yes"; then
  
  
  libgcc_libpath=`gcc --print-libgcc-file-name|sed 's%/*[^/][^/]*$%%'`
  

  if test -z "$libgcc_libpath"; then
    { echo "configure: error: Cannot locate libgcc. Make sure that gcc is in your path" 1>&2; exit 1; }
  fi
  
  if test "$libgcc_libpath" != "/usr/lib"; then
    
  if test -z "$libgcc_libpath" || echo "$libgcc_libpath" | grep '^/' >/dev/null ; then
    ai_p=$libgcc_libpath
  else
    
    ep_dir="`echo $libgcc_libpath|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$libgcc_libpath\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  
  
  case gcc in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -lgcc" 
   ;;
  esac


fi



echo $ac_n "checking whether to enable short tags by default""... $ac_c" 1>&6
echo "configure:15750: checking whether to enable short tags by default" >&5
# Check whether --enable-short-tags or --disable-short-tags was given.
if test "${enable_short_tags+set}" = set; then
  enableval="$enable_short_tags"
  PHP_SHORT_TAGS=$enableval
else
  
  PHP_SHORT_TAGS=yes

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_SHORT_TAGS=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_SHORT_TAGS
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_SHORT_TAGS" = "yes"; then
  cat >> confdefs.h <<\EOF
#define DEFAULT_SHORT_OPEN_TAG "1"
EOF

else
  cat >> confdefs.h <<\EOF
#define DEFAULT_SHORT_OPEN_TAG "0"
EOF

fi



echo $ac_n "checking whether to enable dmalloc""... $ac_c" 1>&6
echo "configure:15787: checking whether to enable dmalloc" >&5
# Check whether --enable-dmalloc or --disable-dmalloc was given.
if test "${enable_dmalloc+set}" = set; then
  enableval="$enable_dmalloc"
  PHP_DMALLOC=$enableval
else
  
  PHP_DMALLOC=no

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_DMALLOC=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_DMALLOC
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_DMALLOC" = "yes"; then
  
  echo $ac_n "checking for dmalloc_error in -ldmalloc""... $ac_c" 1>&6
echo "configure:15812: checking for dmalloc_error in -ldmalloc" >&5
ac_lib_var=`echo dmalloc'_'dmalloc_error | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ldmalloc  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 15820 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dmalloc_error();

int main() {
dmalloc_error()
; return 0; }
EOF
if { (eval echo configure:15831: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    
  
  case dmalloc in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-ldmalloc $LIBS" 
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_DMALLOC 1
EOF

    CPPFLAGS="$CPPFLAGS -DDMALLOC_FUNC_CHECK"
  
else
  echo "$ac_t""no" 1>&6

    { echo "configure: error: Problem with enabling dmalloc. Please check config.log for details." 1>&2; exit 1; }
  
fi

fi



echo $ac_n "checking whether to enable IPv6 support""... $ac_c" 1>&6
echo "configure:15875: checking whether to enable IPv6 support" >&5
# Check whether --enable-ipv6 or --disable-ipv6 was given.
if test "${enable_ipv6+set}" = set; then
  enableval="$enable_ipv6"
  PHP_IPV6=$enableval
else
  
  PHP_IPV6=yes

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_IPV6=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_IPV6
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_IPV6" != "no" && test "$ac_cv_ipv6_support" = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_IPV6 1
EOF

fi




echo $ac_n "checking for OpenSSL support""... $ac_c" 1>&6
echo "configure:15908: checking for OpenSSL support" >&5
# Check whether --with-openssl or --without-openssl was given.
if test "${with_openssl+set}" = set; then
  withval="$with_openssl"
  PHP_OPENSSL=$withval
else
  
  PHP_OPENSSL=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_OPENSSL=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_OPENSSL in
shared,*)
  PHP_OPENSSL=`echo "$PHP_OPENSSL"|sed 's/^shared,//'`
  ;;
shared)
  PHP_OPENSSL=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_OPENSSL" != "no"; then
  ext_openssl_shared=$ext_shared
  
  if test "$PHP_OPENSSL" = "yes"; then
    PHP_OPENSSL="/usr/local/ssl /usr/local /usr /usr/local/openssl"
  fi

  for i in $PHP_OPENSSL; do
    if test -r $i/include/openssl/evp.h; then
      OPENSSL_INCDIR=$i/include
    fi
    if test -r $i/lib/libssl.a -o -r $i/lib/libssl.$SHLIB_SUFFIX_NAME; then
      OPENSSL_LIBDIR=$i/lib
    fi
  done

  if test -z "$OPENSSL_INCDIR"; then
    { echo "configure: error: Cannot find OpenSSL's <evp.h>" 1>&2; exit 1; }
  fi

  if test -z "$OPENSSL_LIBDIR"; then
    { echo "configure: error: Cannot find OpenSSL's libraries" 1>&2; exit 1; }
  fi

  old_CPPFLAGS=$CPPFLAGS
  CPPFLAGS=-I$OPENSSL_INCDIR
  echo $ac_n "checking for OpenSSL version""... $ac_c" 1>&6
echo "configure:15978: checking for OpenSSL version" >&5
  cat > conftest.$ac_ext <<EOF
#line 15980 "configure"
#include "confdefs.h"

#include <openssl/opensslv.h>
#if OPENSSL_VERSION_NUMBER >= 0x0090600fL
  yes
#endif
  
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  
    echo "$ac_t"">= 0.9.6" 1>&6
  
else
  rm -rf conftest*
  
    { echo "configure: error: OpenSSL version 0.9.6 or greater required." 1>&2; exit 1; }
  
fi
rm -f conftest*

  CPPFLAGS=$old_CPPFLAGS

  
  if test "$OPENSSL_INCDIR" != "/usr/include"; then
    
  if test -z "$OPENSSL_INCDIR" || echo "$OPENSSL_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$OPENSSL_INCDIR
  else
    
    ep_dir="`echo $OPENSSL_INCDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OPENSSL_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  
  if test "$OPENSSL_LIBDIR" != "/usr/lib"; then
    
  if test -z "$OPENSSL_LIBDIR" || echo "$OPENSSL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$OPENSSL_LIBDIR
  else
    
    ep_dir="`echo $OPENSSL_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OPENSSL_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi


  
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
    -L$OPENSSL_LIBDIR
   $LDFLAGS"
  echo $ac_n "checking for CRYPTO_free in -lcrypto""... $ac_c" 1>&6
echo "configure:16076: checking for CRYPTO_free in -lcrypto" >&5
ac_lib_var=`echo crypto'_'CRYPTO_free | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lcrypto  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 16084 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char CRYPTO_free();

int main() {
CRYPTO_free()
; return 0; }
EOF
if { (eval echo configure:16095: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
    
  
  case crypto in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lcrypto $LIBS" 
   ;;
  esac


  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_crypto
    
    { echo "configure: error: libcrypto not found!" 1>&2; exit 1; }
  
  
fi


  
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
    -L$OPENSSL_LIBDIR
   $LDFLAGS"
  echo $ac_n "checking for SSL_CTX_set_ssl_version in -lssl""... $ac_c" 1>&6
echo "configure:16143: checking for SSL_CTX_set_ssl_version in -lssl" >&5
ac_lib_var=`echo ssl'_'SSL_CTX_set_ssl_version | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lssl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 16151 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char SSL_CTX_set_ssl_version();

int main() {
SSL_CTX_set_ssl_version()
; return 0; }
EOF
if { (eval echo configure:16162: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
    
  
  case ssl in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lssl $LIBS" 
   ;;
  esac


  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_ssl
    
    { echo "configure: error: libssl not found!" 1>&2; exit 1; }
  
  
fi


  OPENSSL_INCDIR_OPT=-I$OPENSSL_INCDIR
  

fi






# Check whether --enable- or --disable- was given.
if test "${enable_+set}" = set; then
  enableval="$enable_"
  :
fi




  echo "$ac_t""" 1>&6
  echo "$ac_t""${T_MD}Configuring extensions${T_ME}" 1>&6



# Check whether --enable-all or --disable-all was given.
if test "${enable_all+set}" = set; then
  enableval="$enable_all"
  
  PHP_ENABLE_ALL=$enableval

fi


# reading config stubs



echo $ac_n "checking for ZLIB support""... $ac_c" 1>&6
echo "configure:16242: checking for ZLIB support" >&5
# Check whether --with-zlib or --without-zlib was given.
if test "${with_zlib+set}" = set; then
  withval="$with_zlib"
  PHP_ZLIB=$withval
else
  
  PHP_ZLIB=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_ZLIB=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_ZLIB in
shared,*)
  PHP_ZLIB=`echo "$PHP_ZLIB"|sed 's/^shared,//'`
  ;;
shared)
  PHP_ZLIB=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6






echo $ac_n "checking if the location of ZLIB install directory is defined""... $ac_c" 1>&6
echo "configure:16288: checking if the location of ZLIB install directory is defined" >&5
# Check whether --with-zlib-dir or --without-zlib-dir was given.
if test "${with_zlib_dir+set}" = set; then
  withval="$with_zlib_dir"
  PHP_ZLIB_DIR=$withval
else
  
  PHP_ZLIB_DIR=no

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_ZLIB_DIR=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_ZLIB_DIR
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_ZLIB" != "no" -o "$PHP_ZLIB_DIR" != "no"; then
  
  ext_builddir=ext/zlib
  ext_srcdir=$abs_srcdir/ext/zlib

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/zlib in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/zlib"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/zlib/"; ac_bdir="ext/zlib/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in zlib.c zlib_fopen_wrapper.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC zlib"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC zlib"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/zlib in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/zlib"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/zlib/"; ac_bdir="ext/zlib/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in zlib.c zlib_fopen_wrapper.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_zlib="$shared_objects_zlib $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/zlib.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_zlib"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/zlib.la: $ext_builddir/zlib.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/zlib.la \$(phplibdir)

$ext_builddir/zlib.la: \$(shared_objects_zlib) \$(ZLIB_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_zlib) \$(ZLIB_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_ZLIB 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/zlib in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/zlib"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/zlib/"; ac_bdir="ext/zlib/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in zlib.c zlib_fopen_wrapper.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC zlib"
    else
      
  
  case ext/zlib in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/zlib"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/zlib/"; ac_bdir="ext/zlib/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in zlib.c zlib_fopen_wrapper.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC zlib"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST ZLIB_SHARED_LIBADD"

  
  if test "$PHP_ZLIB" != "yes" -a "$PHP_ZLIB" != "no"; then 
    if test -f $PHP_ZLIB/include/zlib/zlib.h; then
      ZLIB_DIR=$PHP_ZLIB
      ZLIB_INCDIR=$ZLIB_DIR/include/zlib
    elif test -f $PHP_ZLIB/include/zlib.h; then
      ZLIB_DIR=$PHP_ZLIB
      ZLIB_INCDIR=$ZLIB_DIR/include
    fi
  else 
    for i in /usr/local /usr $PHP_ZLIB_DIR; do
      if test -f $i/include/zlib/zlib.h; then
        ZLIB_DIR=$i
        ZLIB_INCDIR=$i/include/zlib
      elif test -f $i/include/zlib.h; then
        ZLIB_DIR=$i
        ZLIB_INCDIR=$i/include
      fi
    done
  fi
  
  if test -z "$ZLIB_DIR"; then
    { echo "configure: error: Cannot find libz" 1>&2; exit 1; }
  fi

  
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
    -L$ZLIB_DIR/lib
   $LDFLAGS"
  echo $ac_n "checking for gzgets in -lz""... $ac_c" 1>&6
echo "configure:16553: checking for gzgets in -lz" >&5
ac_lib_var=`echo z'_'gzgets | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lz  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 16561 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gzgets();

int main() {
gzgets()
; return 0; }
EOF
if { (eval echo configure:16572: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
    cat >> confdefs.h <<\EOF
#define HAVE_ZLIB 1
EOF
 
  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_z
    
    { echo "configure: error: ZLIB extension requires zlib >= 1.0.9" 1>&2; exit 1; }
  
  
fi


  
  if test "$ZLIB_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ZLIB_DIR/lib" || echo "$ZLIB_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ZLIB_DIR/lib
  else
    
    ep_dir="`echo $ZLIB_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ZLIB_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ZLIB_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ZLIB_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi


  PHP_ZLIB_DIR=$ZLIB_DIR
  
  
  case z in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        ZLIB_SHARED_LIBADD="-lz $ZLIB_SHARED_LIBADD" 
    else
      
  
  case z in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lz $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


  
  if test "$ZLIB_INCDIR" != "/usr/include"; then
    
  if test -z "$ZLIB_INCDIR" || echo "$ZLIB_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$ZLIB_INCDIR
  else
    
    ep_dir="`echo $ZLIB_INCDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ZLIB_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi


fi




echo $ac_n "checking whether to enable bc style precision math functions""... $ac_c" 1>&6
echo "configure:16708: checking whether to enable bc style precision math functions" >&5
# Check whether --enable-bcmath or --disable-bcmath was given.
if test "${enable_bcmath+set}" = set; then
  enableval="$enable_bcmath"
  PHP_BCMATH=$enableval
else
  
  PHP_BCMATH=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_BCMATH=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_BCMATH in
shared,*)
  PHP_BCMATH=`echo "$PHP_BCMATH"|sed 's/^shared,//'`
  ;;
shared)
  PHP_BCMATH=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_BCMATH" != "no"; then
  cat >> confdefs.h <<\EOF
#define WITH_BCMATH 1
EOF

  
  ext_builddir=ext/bcmath
  ext_srcdir=$abs_srcdir/ext/bcmath

  ac_extra=`echo "-I@ext_srcdir@/libbcmath/src"|sed s#@ext_srcdir@#$ext_srcdir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/bcmath in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/bcmath"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/bcmath/"; ac_bdir="ext/bcmath/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in bcmath.c number.c \
libbcmath/src/add.c libbcmath/src/div.c libbcmath/src/init.c libbcmath/src/neg.c libbcmath/src/outofmem.c libbcmath/src/raisemod.c libbcmath/src/rt.c libbcmath/src/sub.c \
libbcmath/src/compare.c libbcmath/src/divmod.c libbcmath/src/int2num.c libbcmath/src/num2long.c libbcmath/src/output.c libbcmath/src/recmul.c \
libbcmath/src/sqrt.c libbcmath/src/zero.c libbcmath/src/debug.c libbcmath/src/doaddsub.c libbcmath/src/nearzero.c libbcmath/src/num2str.c libbcmath/src/raise.c \
libbcmath/src/rmzero.c libbcmath/src/str2num.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC bcmath"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC bcmath"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/bcmath in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/bcmath"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/bcmath/"; ac_bdir="ext/bcmath/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in bcmath.c number.c \
libbcmath/src/add.c libbcmath/src/div.c libbcmath/src/init.c libbcmath/src/neg.c libbcmath/src/outofmem.c libbcmath/src/raisemod.c libbcmath/src/rt.c libbcmath/src/sub.c \
libbcmath/src/compare.c libbcmath/src/divmod.c libbcmath/src/int2num.c libbcmath/src/num2long.c libbcmath/src/output.c libbcmath/src/recmul.c \
libbcmath/src/sqrt.c libbcmath/src/zero.c libbcmath/src/debug.c libbcmath/src/doaddsub.c libbcmath/src/nearzero.c libbcmath/src/num2str.c libbcmath/src/raise.c \
libbcmath/src/rmzero.c libbcmath/src/str2num.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_bcmath="$shared_objects_bcmath $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/bcmath.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_bcmath"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/bcmath.la: $ext_builddir/bcmath.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/bcmath.la \$(phplibdir)

$ext_builddir/bcmath.la: \$(shared_objects_bcmath) \$(BCMATH_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_bcmath) \$(BCMATH_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_BCMATH 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/bcmath in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/bcmath"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/bcmath/"; ac_bdir="ext/bcmath/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in bcmath.c number.c \
libbcmath/src/add.c libbcmath/src/div.c libbcmath/src/init.c libbcmath/src/neg.c libbcmath/src/outofmem.c libbcmath/src/raisemod.c libbcmath/src/rt.c libbcmath/src/sub.c \
libbcmath/src/compare.c libbcmath/src/divmod.c libbcmath/src/int2num.c libbcmath/src/num2long.c libbcmath/src/output.c libbcmath/src/recmul.c \
libbcmath/src/sqrt.c libbcmath/src/zero.c libbcmath/src/debug.c libbcmath/src/doaddsub.c libbcmath/src/nearzero.c libbcmath/src/num2str.c libbcmath/src/raise.c \
libbcmath/src/rmzero.c libbcmath/src/str2num.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC bcmath"
    else
      
  
  case ext/bcmath in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/bcmath"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/bcmath/"; ac_bdir="ext/bcmath/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in bcmath.c number.c \
libbcmath/src/add.c libbcmath/src/div.c libbcmath/src/init.c libbcmath/src/neg.c libbcmath/src/outofmem.c libbcmath/src/raisemod.c libbcmath/src/rt.c libbcmath/src/sub.c \
libbcmath/src/compare.c libbcmath/src/divmod.c libbcmath/src/int2num.c libbcmath/src/num2long.c libbcmath/src/output.c libbcmath/src/recmul.c \
libbcmath/src/sqrt.c libbcmath/src/zero.c libbcmath/src/debug.c libbcmath/src/doaddsub.c libbcmath/src/nearzero.c libbcmath/src/num2str.c libbcmath/src/raise.c \
libbcmath/src/rmzero.c libbcmath/src/str2num.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC bcmath"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


  
  BUILD_DIR="$BUILD_DIR $ext_builddir/libbcmath/src"

fi




echo $ac_n "checking for BZip2 support""... $ac_c" 1>&6
echo "configure:16989: checking for BZip2 support" >&5
# Check whether --with-bz2 or --without-bz2 was given.
if test "${with_bz2+set}" = set; then
  withval="$with_bz2"
  PHP_BZ2=$withval
else
  
  PHP_BZ2=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_BZ2=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_BZ2 in
shared,*)
  PHP_BZ2=`echo "$PHP_BZ2"|sed 's/^shared,//'`
  ;;
shared)
  PHP_BZ2=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_BZ2" != "no"; then
  if test -r $PHP_BZ2/include/bzlib.h; then
    BZIP_DIR=$PHP_BZ2
  else
    echo $ac_n "checking for BZip2 in default path""... $ac_c" 1>&6
echo "configure:17037: checking for BZip2 in default path" >&5
    for i in /usr/local /usr; do
      if test -r $i/include/bzlib.h; then
        BZIP_DIR=$i
        echo "$ac_t""found in $i" 1>&6
      fi
    done
  fi

  if test -z "$BZIP_DIR"; then
    echo "$ac_t""not found" 1>&6
    { echo "configure: error: Please reinstall the BZip2 distribution" 1>&2; exit 1; }
  fi

  
  if test "$BZIP_DIR/include" != "/usr/include"; then
    
  if test -z "$BZIP_DIR/include" || echo "$BZIP_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$BZIP_DIR/include
  else
    
    ep_dir="`echo $BZIP_DIR/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$BZIP_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST BZ2_SHARED_LIBADD"

  

  if test "$ext_shared" = "yes"; then
    BZ2_SHARED_LIBADD="-lbz2 $BZ2_SHARED_LIBADD"
    if test -n "$BZIP_DIR/lib"; then
      
  if test "$BZIP_DIR/lib" != "/usr/lib"; then
    
  if test -z "$BZIP_DIR/lib" || echo "$BZIP_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$BZIP_DIR/lib
  else
    
    ep_dir="`echo $BZIP_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$BZIP_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        BZ2_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $BZ2_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$BZIP_DIR/lib"; then
    
  if test "$BZIP_DIR/lib" != "/usr/lib"; then
    
  if test -z "$BZIP_DIR/lib" || echo "$BZIP_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$BZIP_DIR/lib
  else
    
    ep_dir="`echo $BZIP_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$BZIP_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case bz2 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lbz2 $LIBS" 
   ;;
  esac




  fi


  echo $ac_n "checking for BZ2_bzerror in -lbz2""... $ac_c" 1>&6
echo "configure:17183: checking for BZ2_bzerror in -lbz2" >&5
ac_lib_var=`echo bz2'_'BZ2_bzerror | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lbz2  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 17191 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char BZ2_bzerror();

int main() {
BZ2_bzerror()
; return 0; }
EOF
if { (eval echo configure:17202: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_BZ2 1
EOF

else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: bz2 module requires libbz2 >= 1.0.0" 1>&2; exit 1; }
fi


  
  ext_builddir=ext/bz2
  ext_srcdir=$abs_srcdir/ext/bz2

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/bz2 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/bz2"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/bz2/"; ac_bdir="ext/bz2/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in bz2.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC bz2"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC bz2"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/bz2 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/bz2"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/bz2/"; ac_bdir="ext/bz2/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in bz2.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_bz2="$shared_objects_bz2 $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/bz2.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_bz2"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/bz2.la: $ext_builddir/bz2.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/bz2.la \$(phplibdir)

$ext_builddir/bz2.la: \$(shared_objects_bz2) \$(BZ2_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_bz2) \$(BZ2_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_BZ2 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/bz2 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/bz2"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/bz2/"; ac_bdir="ext/bz2/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in bz2.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC bz2"
    else
      
  
  case ext/bz2 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/bz2"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/bz2/"; ac_bdir="ext/bz2/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in bz2.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC bz2"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


fi




echo $ac_n "checking whether to enable calendar conversion support""... $ac_c" 1>&6
echo "configure:17441: checking whether to enable calendar conversion support" >&5
# Check whether --enable-calendar or --disable-calendar was given.
if test "${enable_calendar+set}" = set; then
  enableval="$enable_calendar"
  PHP_CALENDAR=$enableval
else
  
  PHP_CALENDAR=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_CALENDAR=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_CALENDAR in
shared,*)
  PHP_CALENDAR=`echo "$PHP_CALENDAR"|sed 's/^shared,//'`
  ;;
shared)
  PHP_CALENDAR=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_CALENDAR" = "yes"; then
  cat >> confdefs.h <<\EOF
#define HAVE_CALENDAR 1
EOF

  
  ext_builddir=ext/calendar
  ext_srcdir=$abs_srcdir/ext/calendar

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/calendar in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/calendar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/calendar/"; ac_bdir="ext/calendar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in calendar.c dow.c french.c gregor.c jewish.c julian.c easter.c cal_unix.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC calendar"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC calendar"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/calendar in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/calendar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/calendar/"; ac_bdir="ext/calendar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in calendar.c dow.c french.c gregor.c jewish.c julian.c easter.c cal_unix.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_calendar="$shared_objects_calendar $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/calendar.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_calendar"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/calendar.la: $ext_builddir/calendar.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/calendar.la \$(phplibdir)

$ext_builddir/calendar.la: \$(shared_objects_calendar) \$(CALENDAR_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_calendar) \$(CALENDAR_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_CALENDAR 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/calendar in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/calendar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/calendar/"; ac_bdir="ext/calendar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in calendar.c dow.c french.c gregor.c jewish.c julian.c easter.c cal_unix.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC calendar"
    else
      
  
  case ext/calendar in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/calendar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/calendar/"; ac_bdir="ext/calendar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in calendar.c dow.c french.c gregor.c jewish.c julian.c easter.c cal_unix.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC calendar"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


fi








echo $ac_n "checking for cpdflib support""... $ac_c" 1>&6
echo "configure:17707: checking for cpdflib support" >&5
# Check whether --with-cpdflib or --without-cpdflib was given.
if test "${with_cpdflib+set}" = set; then
  withval="$with_cpdflib"
  
  if test "$withval" = "no"; then
    echo "$ac_t""no" 1>&6
  else
    echo "$ac_t""yes" 1>&6
    
  ext_builddir=ext/cpdf
  ext_srcdir=$abs_srcdir/ext/cpdf

  ac_extra=

  if test "" != "shared" && test "" != "yes" && test "" != "cli"; then

    
  
  case ext/cpdf in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/cpdf"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/cpdf/"; ac_bdir="ext/cpdf/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in cpdf.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC cpdf"
    if test "" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC cpdf"
    fi
  else
    if test "" = "shared" || test "" = "yes"; then
      
  case ext/cpdf in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/cpdf"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/cpdf/"; ac_bdir="ext/cpdf/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in cpdf.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_cpdf="$shared_objects_cpdf $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/cpdf.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_cpdf"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/cpdf.la: $ext_builddir/cpdf.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/cpdf.la \$(phplibdir)

$ext_builddir/cpdf.la: \$(shared_objects_cpdf) \$(CPDF_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_cpdf) \$(CPDF_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_CPDF 1
EOF

    fi
  fi

  if test "" != "shared" && test "" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/cpdf in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/cpdf"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/cpdf/"; ac_bdir="ext/cpdf/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in cpdf.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC cpdf"
    else
      
  
  case ext/cpdf in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/cpdf"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/cpdf/"; ac_bdir="ext/cpdf/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in cpdf.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC cpdf"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


    
  
  old_LIBS=$LIBS
  
    # Check whether --with-jpeg-dir or --without-jpeg-dir was given.
if test "${with_jpeg_dir+set}" = set; then
  withval="$with_jpeg_dir"
  
      for i in $withval /usr/local /usr; do
        if test -f "$i/lib/libjpeg.$SHLIB_SUFFIX_NAME" -o -f "$i/lib/libjpeg.a"; then
          CPDF_JPEG_DIR=$i
          break;
        fi
      done
      if test -z "$CPDF_JPEG_DIR"; then
        echo $ac_n "checking for libjpeg (needed by cpdflib 2.x)""... $ac_c" 1>&6
echo "configure:17940: checking for libjpeg (needed by cpdflib 2.x)" >&5
        { echo "configure: error: libjpeg.(a|so) not found." 1>&2; exit 1; }
      fi
      LIBS="$LIBS -L$CPDF_JPEG_DIR/lib"
    
fi
 
    echo $ac_n "checking for jpeg_read_header in -ljpeg""... $ac_c" 1>&6
echo "configure:17948: checking for jpeg_read_header in -ljpeg" >&5
ac_lib_var=`echo jpeg'_'jpeg_read_header | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ljpeg  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 17956 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char jpeg_read_header();

int main() {
jpeg_read_header()
; return 0; }
EOF
if { (eval echo configure:17967: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo jpeg | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-ljpeg $LIBS"

else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: Problem with libjpeg.(a|so). Please check config.log for more information." 1>&2; exit 1; }
fi

    if test -z "$CPDF_JPEG_DIR"; then
      
  
  case jpeg in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-ljpeg $LIBS" 
   ;;
  esac


    else
      

  if test -n "$CPDF_JPEG_DIR/lib"; then
    
  if test "$CPDF_JPEG_DIR/lib" != "/usr/lib"; then
    
  if test -z "$CPDF_JPEG_DIR/lib" || echo "$CPDF_JPEG_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$CPDF_JPEG_DIR/lib
  else
    
    ep_dir="`echo $CPDF_JPEG_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$CPDF_JPEG_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case jpeg in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-ljpeg $LIBS" 
   ;;
  esac




    fi
  
  LIBS=$old_LIBS


    
  
  old_LIBS=$LIBS
  
    # Check whether --with-tiff-dir or --without-tiff-dir was given.
if test "${with_tiff_dir+set}" = set; then
  withval="$with_tiff_dir"
  
      for i in $withval /usr/local /usr; do
        if test -f "$i/lib/libtiff.$SHLIB_SUFFIX_NAME" -o -f "$i/lib/libtiff.a"; then
          CPDF_TIFF_DIR=$i
          break;
        fi
      done
      if test -z "$CPDF_TIFF_DIR"; then
        echo $ac_n "checking for libtiff (needed by cpdflib 2.x)""... $ac_c" 1>&6
echo "configure:18077: checking for libtiff (needed by cpdflib 2.x)" >&5
        { echo "configure: error: libtiff.(a|so) not found." 1>&2; exit 1; }
      fi
      LIBS="$LIBS -L$CPDF_TIFF_DIR/lib"
    
fi
 
    echo $ac_n "checking for TIFFOpen in -ltiff""... $ac_c" 1>&6
echo "configure:18085: checking for TIFFOpen in -ltiff" >&5
ac_lib_var=`echo tiff'_'TIFFOpen | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ltiff  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 18093 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char TIFFOpen();

int main() {
TIFFOpen()
; return 0; }
EOF
if { (eval echo configure:18104: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo tiff | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-ltiff $LIBS"

else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: Problem with libtiff.(a|so). Please check config.log for more information." 1>&2; exit 1; }
fi

    if test -z "$CPDF_TIFF_DIR"; then
      
  
  case tiff in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-ltiff $LIBS" 
   ;;
  esac


    else
      

  if test -n "$CPDF_TIFF_DIR/lib"; then
    
  if test "$CPDF_TIFF_DIR/lib" != "/usr/lib"; then
    
  if test -z "$CPDF_TIFF_DIR/lib" || echo "$CPDF_TIFF_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$CPDF_TIFF_DIR/lib
  else
    
    ep_dir="`echo $CPDF_TIFF_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$CPDF_TIFF_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case tiff in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-ltiff $LIBS" 
   ;;
  esac




    fi
  
  LIBS=$old_LIBS


    for i in $withval /usr /usr/local; do
      if test -f "$i/include/cpdflib.h"; then
        CPDFLIB_INCLUDE=$i/include
        echo $ac_n "checking for cpdflib.h""... $ac_c" 1>&6
echo "configure:18202: checking for cpdflib.h" >&5
        echo "$ac_t""in $i/include" 1>&6
        
  old_LIBS=$LIBS
  
          LIBS="$LIBS -L$i/lib"
          echo $ac_n "checking for cpdf_open in -lcpdf""... $ac_c" 1>&6
echo "configure:18209: checking for cpdf_open in -lcpdf" >&5
ac_lib_var=`echo cpdf'_'cpdf_open | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lcpdf  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 18217 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char cpdf_open();

int main() {
cpdf_open()
; return 0; }
EOF
if { (eval echo configure:18228: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_CPDFLIB 1
EOF

else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: Cpdflib module requires cpdflib >= 2." 1>&2; exit 1; }
fi

        
  LIBS=$old_LIBS

        if test "$i" != "/usr" -a "$i" != "/usr/local"; then
          

  if test -n "$i/lib"; then
    
  if test "$i/lib" != "/usr/lib"; then
    
  if test -z "$i/lib" || echo "$i/lib" | grep '^/' >/dev/null ; then
    ai_p=$i/lib
  else
    
    ep_dir="`echo $i/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$i/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case cpdf in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lcpdf $LIBS" 
   ;;
  esac




          
  if test "$CPDFLIB_INCLUDE" != "/usr/include"; then
    
  if test -z "$CPDFLIB_INCLUDE" || echo "$CPDFLIB_INCLUDE" | grep '^/' >/dev/null ; then
    ai_p=$CPDFLIB_INCLUDE
  else
    
    ep_dir="`echo $CPDFLIB_INCLUDE|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$CPDFLIB_INCLUDE\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

        else
          
  
  case cpdf in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lcpdf $LIBS" 
   ;;
  esac


        fi
        break
      fi
    done  
    if test -z "$CPDFLIB_INCLUDE"; then
      echo $ac_n "checking for cpdflib.h""... $ac_c" 1>&6
echo "configure:18353: checking for cpdflib.h" >&5
      { echo "configure: error: not found" 1>&2; exit 1; }
    fi
  fi

else
  
  echo "$ac_t""no" 1>&6

fi





echo $ac_n "checking for CRACKlib support""... $ac_c" 1>&6
echo "configure:18369: checking for CRACKlib support" >&5
# Check whether --with-crack or --without-crack was given.
if test "${with_crack+set}" = set; then
  withval="$with_crack"
  PHP_CRACK=$withval
else
  
  PHP_CRACK=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_CRACK=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_CRACK in
shared,*)
  PHP_CRACK=`echo "$PHP_CRACK"|sed 's/^shared,//'`
  ;;
shared)
  PHP_CRACK=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_CRACK" != "no"; then

	for i in /usr/local/lib /usr/lib $PHP_CRACK/lib $PHP_CRACK/cracklib; do
		test -f $i/libcrack.$SHLIB_SUFFIX_NAME -o -f $i/libcrack.a && CRACK_LIBDIR=$i
	done

	for i in /usr/local/include /usr/include $PHP_CRACK/include $PHP_CRACK/cracklib; do
		test -f $i/packer.h && CRACK_INCLUDEDIR=$i
	done
  
	if test -z "$CRACK_LIBDIR"; then
		{ echo "configure: error: Cannot find the cracklib library file" 1>&2; exit 1; }
	fi

	if test -z "$CRACK_INCLUDEDIR"; then
		{ echo "configure: error: Cannot find a cracklib header file" 1>&2; exit 1; }
	fi

	
  if test "$CRACK_INCLUDEDIR" != "/usr/include"; then
    
  if test -z "$CRACK_INCLUDEDIR" || echo "$CRACK_INCLUDEDIR" | grep '^/' >/dev/null ; then
    ai_p=$CRACK_INCLUDEDIR
  else
    
    ep_dir="`echo $CRACK_INCLUDEDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$CRACK_INCLUDEDIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

	

  if test "$ext_shared" = "yes"; then
    CRACK_SHARED_LIBADD="-lcrack $CRACK_SHARED_LIBADD"
    if test -n "$CRACK_LIBDIR"; then
      
  if test "$CRACK_LIBDIR" != "/usr/lib"; then
    
  if test -z "$CRACK_LIBDIR" || echo "$CRACK_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$CRACK_LIBDIR
  else
    
    ep_dir="`echo $CRACK_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$CRACK_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        CRACK_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $CRACK_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$CRACK_LIBDIR"; then
    
  if test "$CRACK_LIBDIR" != "/usr/lib"; then
    
  if test -z "$CRACK_LIBDIR" || echo "$CRACK_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$CRACK_LIBDIR
  else
    
    ep_dir="`echo $CRACK_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$CRACK_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case crack in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lcrack $LIBS" 
   ;;
  esac




  fi



	
  ext_builddir=ext/crack
  ext_srcdir=$abs_srcdir/ext/crack

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/crack in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/crack"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/crack/"; ac_bdir="ext/crack/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in crack.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC crack"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC crack"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/crack in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/crack"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/crack/"; ac_bdir="ext/crack/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in crack.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_crack="$shared_objects_crack $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/crack.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_crack"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/crack.la: $ext_builddir/crack.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/crack.la \$(phplibdir)

$ext_builddir/crack.la: \$(shared_objects_crack) \$(CRACK_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_crack) \$(CRACK_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_CRACK 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/crack in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/crack"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/crack/"; ac_bdir="ext/crack/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in crack.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC crack"
    else
      
  
  case ext/crack in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/crack"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/crack/"; ac_bdir="ext/crack/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in crack.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC crack"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


	
  PHP_VAR_SUBST="$PHP_VAR_SUBST CRACK_SHARED_LIBADD"

	cat >> confdefs.h <<\EOF
#define HAVE_CRACK 1
EOF

fi





echo $ac_n "checking whether to enable ctype functions""... $ac_c" 1>&6
echo "configure:18780: checking whether to enable ctype functions" >&5
# Check whether --enable-ctype or --disable-ctype was given.
if test "${enable_ctype+set}" = set; then
  enableval="$enable_ctype"
  PHP_CTYPE=$enableval
else
  
  PHP_CTYPE=yes

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_CTYPE=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_CTYPE in
shared,*)
  PHP_CTYPE=`echo "$PHP_CTYPE"|sed 's/^shared,//'`
  ;;
shared)
  PHP_CTYPE=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_CTYPE" != "no"; then
  cat >> confdefs.h <<\EOF
#define HAVE_CTYPE 1
EOF

  
  ext_builddir=ext/ctype
  ext_srcdir=$abs_srcdir/ext/ctype

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/ctype in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ctype"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ctype/"; ac_bdir="ext/ctype/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ctype.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC ctype"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC ctype"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/ctype in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ctype"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ctype/"; ac_bdir="ext/ctype/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in ctype.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_ctype="$shared_objects_ctype $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/ctype.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_ctype"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/ctype.la: $ext_builddir/ctype.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/ctype.la \$(phplibdir)

$ext_builddir/ctype.la: \$(shared_objects_ctype) \$(CTYPE_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_ctype) \$(CTYPE_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_CTYPE 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/ctype in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ctype"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ctype/"; ac_bdir="ext/ctype/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ctype.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC ctype"
    else
      
  
  case ext/ctype in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ctype"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ctype/"; ac_bdir="ext/ctype/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ctype.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC ctype"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


fi




echo $ac_n "checking for CURL support""... $ac_c" 1>&6
echo "configure:19042: checking for CURL support" >&5
# Check whether --with-curl or --without-curl was given.
if test "${with_curl+set}" = set; then
  withval="$with_curl"
  PHP_CURL=$withval
else
  
  PHP_CURL=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_CURL=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_CURL in
shared,*)
  PHP_CURL=`echo "$PHP_CURL"|sed 's/^shared,//'`
  ;;
shared)
  PHP_CURL=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6





if test "$PHP_CURL" != "no"; then
  if test -r $PHP_CURL/include/curl/easy.h; then
    CURL_DIR=$PHP_CURL
  else
    echo $ac_n "checking for CURL in default path""... $ac_c" 1>&6
echo "configure:19091: checking for CURL in default path" >&5
    for i in /usr/local /usr; do
      if test -r $i/include/curl/easy.h; then
        CURL_DIR=$i
        echo "$ac_t""found in $i" 1>&6
        break
      fi
    done
  fi

  if test -z "$CURL_DIR"; then
    echo "$ac_t""not found" 1>&6
    { echo "configure: error: Please reinstall the libcurl distribution -
    easy.h should be in <curl-dir>/include/curl/" 1>&2; exit 1; }
  fi

  CURL_CONFIG="curl-config"
  echo $ac_n "checking for cURL 7.9.8 or greater""... $ac_c" 1>&6
echo "configure:19109: checking for cURL 7.9.8 or greater" >&5

  if ${CURL_DIR}/bin/curl-config --libs print > /dev/null 2>&1; then
    CURL_CONFIG=${CURL_DIR}/bin/curl-config
  else
    if ${CURL_DIR}/curl-config --libs print > /dev/null 2>&1; then
       CURL_CONFIG=${CURL_DIR}/curl-config
    fi
  fi

  curl_version_full=`$CURL_CONFIG --version`
  curl_version=`echo ${curl_version_full} | sed -e 's/libcurl //' | awk 'BEGIN { FS = "."; } { printf "%d", ($1 * 1000 + $2) * 1000 + $3;}'`
  if test "$curl_version" -ge 7009008; then
    echo "$ac_t""$curl_version_full" 1>&6
    CURL_LIBS=`$CURL_CONFIG --libs`
  else
    { echo "configure: error: cURL version 7.9.8 or later is required to compile php with cURL support" 1>&2; exit 1; }
  fi

  
  if test "$CURL_DIR/include" != "/usr/include"; then
    
  if test -z "$CURL_DIR/include" || echo "$CURL_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$CURL_DIR/include
  else
    
    ep_dir="`echo $CURL_DIR/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$CURL_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  
  for ac_i in $CURL_LIBS; do
    case $ac_i in
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        CURL_SHARED_LIBADD="$CURL_SHARED_LIBADD -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        CURL_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $CURL_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  

  if test "$ext_shared" = "yes"; then
    CURL_SHARED_LIBADD="-lcurl $CURL_SHARED_LIBADD"
    if test -n "$CURL_DIR/lib"; then
      
  if test "$CURL_DIR/lib" != "/usr/lib"; then
    
  if test -z "$CURL_DIR/lib" || echo "$CURL_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$CURL_DIR/lib
  else
    
    ep_dir="`echo $CURL_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$CURL_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        CURL_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $CURL_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$CURL_DIR/lib"; then
    
  if test "$CURL_DIR/lib" != "/usr/lib"; then
    
  if test -z "$CURL_DIR/lib" || echo "$CURL_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$CURL_DIR/lib
  else
    
    ep_dir="`echo $CURL_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$CURL_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case curl in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lcurl $LIBS" 
   ;;
  esac




  fi



  
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
    $CURL_LIBS -L$CURL_DIR/lib
   $LDFLAGS"
  echo $ac_n "checking for curl_easy_perform in -lcurl""... $ac_c" 1>&6
echo "configure:19334: checking for curl_easy_perform in -lcurl" >&5
ac_lib_var=`echo curl'_'curl_easy_perform | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lcurl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 19342 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char curl_easy_perform();

int main() {
curl_easy_perform()
; return 0; }
EOF
if { (eval echo configure:19353: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
     
    cat >> confdefs.h <<\EOF
#define HAVE_CURL 1
EOF

  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_curl
    
    { echo "configure: error: There is something wrong. Please check config.log for more information." 1>&2; exit 1; }
  
  
fi


  
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
    $CURL_LIBS -L$CURL_DIR/lib
   $LDFLAGS"
  echo $ac_n "checking for curl_version_info in -lcurl""... $ac_c" 1>&6
echo "configure:19395: checking for curl_version_info in -lcurl" >&5
ac_lib_var=`echo curl'_'curl_version_info | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lcurl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 19403 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char curl_version_info();

int main() {
curl_version_info()
; return 0; }
EOF
if { (eval echo configure:19414: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
    cat >> confdefs.h <<\EOF
#define HAVE_CURL_VERSION_INFO 1
EOF

  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_curl
    
  
fi



  
  ext_builddir=ext/curl
  ext_srcdir=$abs_srcdir/ext/curl

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/curl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/curl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/curl/"; ac_bdir="ext/curl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in curl.c curlstreams.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC curl"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC curl"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/curl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/curl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/curl/"; ac_bdir="ext/curl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in curl.c curlstreams.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_curl="$shared_objects_curl $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/curl.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_curl"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/curl.la: $ext_builddir/curl.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/curl.la \$(phplibdir)

$ext_builddir/curl.la: \$(shared_objects_curl) \$(CURL_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_curl) \$(CURL_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_CURL 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/curl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/curl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/curl/"; ac_bdir="ext/curl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in curl.c curlstreams.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC curl"
    else
      
  
  case ext/curl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/curl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/curl/"; ac_bdir="ext/curl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in curl.c curlstreams.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC curl"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST CURL_SHARED_LIBADD"

fi




echo $ac_n "checking for cyrus imap support""... $ac_c" 1>&6
echo "configure:19666: checking for cyrus imap support" >&5
# Check whether --with-cyrus or --without-cyrus was given.
if test "${with_cyrus+set}" = set; then
  withval="$with_cyrus"
  PHP_CYRUS=$withval
else
  
  PHP_CYRUS=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_CYRUS=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_CYRUS in
shared,*)
  PHP_CYRUS=`echo "$PHP_CYRUS"|sed 's/^shared,//'`
  ;;
shared)
  PHP_CYRUS=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_CYRUS" != "no"; then
  found_cyrus=no
  found_sasl=no
  found_openssl=no

        for i in $PHP_CYRUS /usr/local /usr; do
    if test -r $i/include/cyrus/imclient.h && test "$found_cyrus" = "no"; then
      
  if test "$i/include" != "/usr/include"; then
    
  if test -z "$i/include" || echo "$i/include" | grep '^/' >/dev/null ; then
    ai_p=$i/include
  else
    
    ep_dir="`echo $i/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$i/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      

  if test "$ext_shared" = "yes"; then
    CYRUS_SHARED_LIBADD="-lcyrus $CYRUS_SHARED_LIBADD"
    if test -n "$i/lib"; then
      
  if test "$i/lib" != "/usr/lib"; then
    
  if test -z "$i/lib" || echo "$i/lib" | grep '^/' >/dev/null ; then
    ai_p=$i/lib
  else
    
    ep_dir="`echo $i/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$i/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        CYRUS_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $CYRUS_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$i/lib"; then
    
  if test "$i/lib" != "/usr/lib"; then
    
  if test -z "$i/lib" || echo "$i/lib" | grep '^/' >/dev/null ; then
    ai_p=$i/lib
  else
    
    ep_dir="`echo $i/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$i/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case cyrus in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lcyrus $LIBS" 
   ;;
  esac




  fi


      found_cyrus=yes
      CYRUS_INCPATH=$i/include
      break 2
    fi
  done

    old_CPPFLAGS=$CPPFLAGS
  CPPFLAGS=-I$CYRUS_INCPATH
  cat > conftest.$ac_ext <<EOF
#line 19852 "configure"
#include "confdefs.h"
#include <stdio.h>
#include <cyrus/imclient.h>
int main() {
imclient_connect(0,0,0,0)
; return 0; }
EOF
if { (eval echo configure:19860: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  :
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
    { echo "configure: error: cyrus-imap version 2.0.8 or greater required" 1>&2; exit 1; }
  
fi
rm -f conftest*
  CPPFLAGS=$old_CPPFLAGS
  
  if test "$found_cyrus" = "no"; then
    echo "$ac_t""not found" 1>&6
    { echo "configure: error: Please Re-install the cyrus distribution" 1>&2; exit 1; }
  fi

        for i in $PHP_CYRUS /usr/local /usr; do
    if test -r $i/include/sasl.h && test "$found_sasl" = "no"; then
      
  if test "$i/include" != "/usr/include"; then
    
  if test -z "$i/include" || echo "$i/include" | grep '^/' >/dev/null ; then
    ai_p=$i/include
  else
    
    ep_dir="`echo $i/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$i/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      found_sasl=yes
    elif test -r $i/include/sasl/sasl.h && test "$found_sasl" = "no"; then
      
  if test "$i/include/sasl" != "/usr/include"; then
    
  if test -z "$i/include/sasl" || echo "$i/include/sasl" | grep '^/' >/dev/null ; then
    ai_p=$i/include/sasl
  else
    
    ep_dir="`echo $i/include/sasl|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$i/include/sasl\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      found_sasl=yes
    fi

    if test "$found_sasl" = "yes"; then
      if test -f $i/lib/libsasl2.a || test -f $i/lib/libsasl2.$SHLIB_SUFFIX_NAME; then
        

  if test "$ext_shared" = "yes"; then
    CYRUS_SHARED_LIBADD="-lsasl2 $CYRUS_SHARED_LIBADD"
    if test -n "$i/lib"; then
      
  if test "$i/lib" != "/usr/lib"; then
    
  if test -z "$i/lib" || echo "$i/lib" | grep '^/' >/dev/null ; then
    ai_p=$i/lib
  else
    
    ep_dir="`echo $i/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$i/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        CYRUS_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $CYRUS_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$i/lib"; then
    
  if test "$i/lib" != "/usr/lib"; then
    
  if test -z "$i/lib" || echo "$i/lib" | grep '^/' >/dev/null ; then
    ai_p=$i/lib
  else
    
    ep_dir="`echo $i/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$i/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case sasl2 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsasl2 $LIBS" 
   ;;
  esac




  fi


      else
        

  if test "$ext_shared" = "yes"; then
    CYRUS_SHARED_LIBADD="-lsasl $CYRUS_SHARED_LIBADD"
    if test -n "$i/lib"; then
      
  if test "$i/lib" != "/usr/lib"; then
    
  if test -z "$i/lib" || echo "$i/lib" | grep '^/' >/dev/null ; then
    ai_p=$i/lib
  else
    
    ep_dir="`echo $i/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$i/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        CYRUS_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $CYRUS_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$i/lib"; then
    
  if test "$i/lib" != "/usr/lib"; then
    
  if test -z "$i/lib" || echo "$i/lib" | grep '^/' >/dev/null ; then
    ai_p=$i/lib
  else
    
    ep_dir="`echo $i/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$i/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case sasl in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsasl $LIBS" 
   ;;
  esac




  fi


      fi
      break 2
    fi
  done
  
  if test "$found_sasl" = "no"; then
    echo "$ac_t""sasl not found" 1>&6
    { echo "configure: error: Please Re-install the cyrus distribution" 1>&2; exit 1; }
  fi

        if test "$PHP_OPENSSL" = "no"; then
    for i in $PHP_CYRUS /usr/local /usr; do
      if test -r $i/include/openssl/ssl.h; then
        

  if test "$ext_shared" = "yes"; then
    CYRUS_SHARED_LIBADD="-lssl $CYRUS_SHARED_LIBADD"
    if test -n "$i/lib"; then
      
  if test "$i/lib" != "/usr/lib"; then
    
  if test -z "$i/lib" || echo "$i/lib" | grep '^/' >/dev/null ; then
    ai_p=$i/lib
  else
    
    ep_dir="`echo $i/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$i/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        CYRUS_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $CYRUS_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$i/lib"; then
    
  if test "$i/lib" != "/usr/lib"; then
    
  if test -z "$i/lib" || echo "$i/lib" | grep '^/' >/dev/null ; then
    ai_p=$i/lib
  else
    
    ep_dir="`echo $i/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$i/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case ssl in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lssl $LIBS" 
   ;;
  esac




  fi


        

  if test "$ext_shared" = "yes"; then
    CYRUS_SHARED_LIBADD="-lcrypto $CYRUS_SHARED_LIBADD"
    if test -n "$i/lib"; then
      
  if test "$i/lib" != "/usr/lib"; then
    
  if test -z "$i/lib" || echo "$i/lib" | grep '^/' >/dev/null ; then
    ai_p=$i/lib
  else
    
    ep_dir="`echo $i/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$i/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        CYRUS_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $CYRUS_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$i/lib"; then
    
  if test "$i/lib" != "/usr/lib"; then
    
  if test -z "$i/lib" || echo "$i/lib" | grep '^/' >/dev/null ; then
    ai_p=$i/lib
  else
    
    ep_dir="`echo $i/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$i/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case crypto in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lcrypto $LIBS" 
   ;;
  esac




  fi


        break 2
      fi
    done
  fi
  
  
  ext_builddir=ext/cyrus
  ext_srcdir=$abs_srcdir/ext/cyrus

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/cyrus in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/cyrus"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/cyrus/"; ac_bdir="ext/cyrus/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in cyrus.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC cyrus"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC cyrus"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/cyrus in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/cyrus"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/cyrus/"; ac_bdir="ext/cyrus/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in cyrus.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_cyrus="$shared_objects_cyrus $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/cyrus.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_cyrus"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/cyrus.la: $ext_builddir/cyrus.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/cyrus.la \$(phplibdir)

$ext_builddir/cyrus.la: \$(shared_objects_cyrus) \$(CYRUS_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_cyrus) \$(CYRUS_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_CYRUS 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/cyrus in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/cyrus"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/cyrus/"; ac_bdir="ext/cyrus/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in cyrus.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC cyrus"
    else
      
  
  case ext/cyrus in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/cyrus"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/cyrus/"; ac_bdir="ext/cyrus/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in cyrus.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC cyrus"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST CYRUS_SHARED_LIBADD"

  cat >> confdefs.h <<\EOF
#define HAVE_CYRUS 1
EOF

fi


# Checks for libraries.
# Prefer gdbm, Berkeley DB and ndbm/dbm, in that order





echo $ac_n "checking for xDBM support""... $ac_c" 1>&6
echo "configure:20578: checking for xDBM support" >&5
# Check whether --with-db or --without-db was given.
if test "${with_db+set}" = set; then
  withval="$with_db"
  PHP_DB=$withval
else
  
  PHP_DB=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_DB=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_DB in
shared,*)
  PHP_DB=`echo "$PHP_DB"|sed 's/^shared,//'`
  ;;
shared)
  PHP_DB=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_DB" != "no"; then

  
  echo $ac_n "checking for gdbm_open in -lgdbm""... $ac_c" 1>&6
echo "configure:20625: checking for gdbm_open in -lgdbm" >&5
ac_lib_var=`echo gdbm'_'gdbm_open | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgdbm  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 20633 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdbm_open();

int main() {
gdbm_open()
; return 0; }
EOF
if { (eval echo configure:20644: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define GDBM 1
EOF
 DBM_TYPE=gdbm; DBM_LIB=-lgdbm
else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for dbm_open in -lc""... $ac_c" 1>&6
echo "configure:20666: checking for dbm_open in -lc" >&5
ac_lib_var=`echo c'_'dbm_open | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lc  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 20674 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dbm_open();

int main() {
dbm_open()
; return 0; }
EOF
if { (eval echo configure:20685: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define NDBM 1
EOF
 DBM_TYPE=ndbm; DBM_LIB=
else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for dbm_open in -ldbm""... $ac_c" 1>&6
echo "configure:20707: checking for dbm_open in -ldbm" >&5
ac_lib_var=`echo dbm'_'dbm_open | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ldbm  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 20715 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dbm_open();

int main() {
dbm_open()
; return 0; }
EOF
if { (eval echo configure:20726: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define NDBM 1
EOF
 DBM_TYPE=ndbm; DBM_LIB=-ldbm
else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for dbm_open in -ldb""... $ac_c" 1>&6
echo "configure:20748: checking for dbm_open in -ldb" >&5
ac_lib_var=`echo db'_'dbm_open | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ldb  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 20756 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dbm_open();

int main() {
dbm_open()
; return 0; }
EOF
if { (eval echo configure:20767: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define NDBM 1
EOF
 DBM_TYPE=ndbm; DBM_LIB=-ldb
else
  echo "$ac_t""no" 1>&6
DBM_TYPE=""
fi

    
fi

   
fi

  
fi

  echo $ac_n "checking preferred dbm library""... $ac_c" 1>&6
echo "configure:20801: checking preferred dbm library" >&5
  if test "a$DBM_TYPE" = a; then
    echo "$ac_t""none found" 1>&6
    echo "configure: warning: No dbm library found - using built-in flatfile support" 1>&2
  else
    echo "$ac_t""$DBM_TYPE chosen" 1>&6
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST DBM_LIB"

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST DBM_TYPE"



  if test "$DBM_LIB" = "-lgdbm"; then
    ac_safe=`echo "gdbm.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for gdbm.h""... $ac_c" 1>&6
echo "configure:20819: checking for gdbm.h" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 20824 "configure"
#include "confdefs.h"
#include <gdbm.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:20829: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
   GDBM_INCLUDE="" 
else
  echo "$ac_t""no" 1>&6
 
      echo "$ac_t"""Try /usr/local/include/gdbm.h"" 1>&6; 
      ac_safe=`echo "/usr/local/include/gdbm.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for /usr/local/include/gdbm.h""... $ac_c" 1>&6
echo "configure:20852: checking for /usr/local/include/gdbm.h" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 20857 "configure"
#include "confdefs.h"
#include </usr/local/include/gdbm.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:20862: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
   GDBM_INCLUDE=-I/usr/local/include 
else
  echo "$ac_t""no" 1>&6

        echo "$ac_t"""Try /opt/local/include/gdbm.h"" 1>&6;
        ac_safe=`echo "/opt/local/include/gdbm.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for /opt/local/include/gdbm.h""... $ac_c" 1>&6
echo "configure:20885: checking for /opt/local/include/gdbm.h" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 20890 "configure"
#include "confdefs.h"
#include </opt/local/include/gdbm.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:20895: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
   GDBM_INCLUDE=-I/opt/local/include 
else
  echo "$ac_t""no" 1>&6

                    echo "$ac_t"""Try /usr/pkg/include/gdbm.h"" 1>&6;
          ac_safe=`echo "/usr/pkg/include/gdbm.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for /usr/pkg/include/gdbm.h""... $ac_c" 1>&6
echo "configure:20918: checking for /usr/pkg/include/gdbm.h" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 20923 "configure"
#include "confdefs.h"
#include </usr/pkg/include/gdbm.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:20928: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
   GDBM_INCLUDE="" 
else
  echo "$ac_t""no" 1>&6

            echo "$ac_t"""Giving up - You need to install gdbm.h somewhere"" 1>&6;
            exit
          
fi

        
fi

      
fi
  
    
fi

  fi

  if test -n "$DBM_LIB"; then
    INCLUDES="$INCLUDES $GDBM_INCLUDE"
    EXTRA_LIBS="$EXTRA_LIBS $DBM_LIB"
  fi

  
  ext_builddir=ext/db
  ext_srcdir=$abs_srcdir/ext/db

  ac_extra=

  if test "" != "shared" && test "" != "yes" && test "" != "cli"; then

    
  
  case ext/db in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/db"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/db/"; ac_bdir="ext/db/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in db.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC db"
    if test "" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC db"
    fi
  else
    if test "" = "shared" || test "" = "yes"; then
      
  case ext/db in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/db"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/db/"; ac_bdir="ext/db/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in db.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_db="$shared_objects_db $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/db.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_db"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/db.la: $ext_builddir/db.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/db.la \$(phplibdir)

$ext_builddir/db.la: \$(shared_objects_db) \$(DB_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_db) \$(DB_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_DB 1
EOF

    fi
  fi

  if test "" != "shared" && test "" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/db in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/db"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/db/"; ac_bdir="ext/db/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in db.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC db"
    else
      
  
  case ext/db in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/db"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/db/"; ac_bdir="ext/db/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in db.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC db"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


fi

















echo $ac_n "checking whether to enable DBA""... $ac_c" 1>&6
echo "configure:21196: checking whether to enable DBA" >&5
# Check whether --enable-dba or --disable-dba was given.
if test "${enable_dba+set}" = set; then
  enableval="$enable_dba"
  PHP_DBA=$enableval
else
  
  PHP_DBA=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_DBA=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_DBA in
shared,*)
  PHP_DBA=`echo "$PHP_DBA"|sed 's/^shared,//'`
  ;;
shared)
  PHP_DBA=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




# Check whether --with-gdbm or --without-gdbm was given.
if test "${with_gdbm+set}" = set; then
  withval="$with_gdbm"
  
  if test "$withval" != "no"; then
    
  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX THIS_RESULT

    for i in $withval /usr/local /usr; do
      if test -f "$i/include/gdbm.h"; then
        THIS_PREFIX=$i
        THIS_INCLUDE=$i/include/gdbm.h
        break
      fi
    done

    if test -n "$THIS_INCLUDE"; then
      unset ac_cv_lib_gdbm_gdbm_open
      
  old_LDFLAGS=$LDFLAGS
  LDFLAGS="-L$THIS_PREFIX/lib $LDFLAGS"
  
        echo $ac_n "checking for gdbm_open in -lgdbm""... $ac_c" 1>&6
echo "configure:21262: checking for gdbm_open in -lgdbm" >&5
ac_lib_var=`echo gdbm'_'gdbm_open | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgdbm  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 21270 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdbm_open();

int main() {
gdbm_open()
; return 0; }
EOF
if { (eval echo configure:21281: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
          cat >> confdefs.h <<EOF
#define GDBM_INCLUDE_FILE "$THIS_INCLUDE"
EOF

          cat >> confdefs.h <<\EOF
#define DBA_GDBM 1
EOF
 
          THIS_LIBS=gdbm
        
else
  echo "$ac_t""no" 1>&6
fi

      
  LDFLAGS=$old_LDFLAGS

    fi
    
    
  if test -n "$THIS_PREFIX" && test "$THIS_PREFIX" != "/usr"; then
    THIS_LFLAGS=$THIS_PREFIX/lib
  fi

    
  THIS_RESULT="yes"
  if test -z "$THIS_INCLUDE"; then
    { echo "configure: error: cannot find necessary header file(s)" 1>&2; exit 1; }
  fi
  if test -z "$THIS_LIBS"; then
    { echo "configure: error: cannot find necessary library" 1>&2; exit 1; }
  fi

    
  

  if test "$ext_shared" = "yes"; then
    DBA_SHARED_LIBADD="-l$THIS_LIBS $DBA_SHARED_LIBADD"
    if test -n "$THIS_LFLAGS"; then
      
  if test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else
    
    ep_dir="`echo $THIS_LFLAGS|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        DBA_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $DBA_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$THIS_LFLAGS"; then
    
  if test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else
    
    ep_dir="`echo $THIS_LFLAGS|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case $THIS_LIBS in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$THIS_LIBS $LIBS" 
   ;;
  esac




  fi


  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX

  fi

fi


  THIS_NAME=GDBM
  if test -n ""; then
    THIS_FULL_NAME=""
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
echo "configure:21441: checking for $THIS_FULL_NAME support" >&5
  if test -n ""; then
    { echo "configure: error: " 1>&2; exit 1; }
  fi
  if test "$THIS_RESULT" = "yes" -o "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    echo "$ac_t""$THIS_RESULT" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME


# Check whether --with-ndbm or --without-ndbm was given.
if test "${with_ndbm+set}" = set; then
  withval="$with_ndbm"
  
  if test "$withval" != "no"; then
    
  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX THIS_RESULT

    for i in $withval /usr/local /usr; do
      if test -f "$i/include/ndbm.h"; then
        THIS_PREFIX=$i
        THIS_INCLUDE=$i/include/ndbm.h
        break
      elif test -f "$i/include/db1/ndbm.h"; then
        THIS_PREFIX=$i
        THIS_INCLUDE=$i/include/db1/ndbm.h
        break
      fi
    done
    
    if test -n "$THIS_INCLUDE"; then
      for LIB in ndbm db1 c; do
        
  old_LDFLAGS=$LDFLAGS
  LDFLAGS="-L$THIS_PREFIX/lib $LDFLAGS"
  
          echo $ac_n "checking for dbm_open in -l$LIB""... $ac_c" 1>&6
echo "configure:21482: checking for dbm_open in -l$LIB" >&5
ac_lib_var=`echo $LIB'_'dbm_open | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$LIB  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 21490 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dbm_open();

int main() {
dbm_open()
; return 0; }
EOF
if { (eval echo configure:21501: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
            cat >> confdefs.h <<EOF
#define NDBM_INCLUDE_FILE "$THIS_INCLUDE"
EOF

            cat >> confdefs.h <<\EOF
#define DBA_NDBM 1
EOF
 
            THIS_LIBS=$LIB
            break
          
else
  echo "$ac_t""no" 1>&6
fi

        
  LDFLAGS=$old_LDFLAGS

      done
    fi

    
  if test -n "$THIS_PREFIX" && test "$THIS_PREFIX" != "/usr"; then
    THIS_LFLAGS=$THIS_PREFIX/lib
  fi

    
  THIS_RESULT="yes"
  if test -z "$THIS_INCLUDE"; then
    { echo "configure: error: cannot find necessary header file(s)" 1>&2; exit 1; }
  fi
  if test -z "$THIS_LIBS"; then
    { echo "configure: error: cannot find necessary library" 1>&2; exit 1; }
  fi

    
  

  if test "$ext_shared" = "yes"; then
    DBA_SHARED_LIBADD="-l$THIS_LIBS $DBA_SHARED_LIBADD"
    if test -n "$THIS_LFLAGS"; then
      
  if test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else
    
    ep_dir="`echo $THIS_LFLAGS|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        DBA_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $DBA_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$THIS_LFLAGS"; then
    
  if test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else
    
    ep_dir="`echo $THIS_LFLAGS|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case $THIS_LIBS in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$THIS_LIBS $LIBS" 
   ;;
  esac




  fi


  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX

  fi

fi


  THIS_NAME=NDBM
  if test -n ""; then
    THIS_FULL_NAME=""
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
echo "configure:21663: checking for $THIS_FULL_NAME support" >&5
  if test -n ""; then
    { echo "configure: error: " 1>&2; exit 1; }
  fi
  if test "$THIS_RESULT" = "yes" -o "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    echo "$ac_t""$THIS_RESULT" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME




# Check whether --with-db4 or --without-db4 was given.
if test "${with_db4+set}" = set; then
  withval="$with_db4"
  
  if test "$withval" != "no"; then
    
  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX THIS_RESULT

    for i in $withval /usr/local/BerkeleyDB.4.1 /usr/local/BerkeleyDB.4.0 /usr/local /usr; do
      if test -f "$i/db4/db.h"; then
        THIS_PREFIX=$i
        THIS_INCLUDE=$i/db4/db.h
        break
      elif test -f "$i/include/db4/db.h"; then
        THIS_PREFIX=$i
        THIS_INCLUDE=$i/include/db4/db.h
        break
      elif test -f "$i/include/db/db4.h"; then
        THIS_PREFIX=$i
        THIS_INCLUDE=$i/include/db/db4.h
        break
      elif test -f "$i/include/db4.h"; then
        THIS_PREFIX=$i
        THIS_INCLUDE=$i/include/db4.h
        break
      elif test -f "$i/include/db.h"; then
        THIS_PREFIX=$i
        THIS_INCLUDE=$i/include/db.h
        break
      fi
    done
    
  for LIB in db-4.1 db-4.0 db-4 db4 db; do
    if test -f $THIS_PREFIX/lib/lib$LIB.a -o -f $THIS_PREFIX/lib/lib$LIB.$SHLIB_SUFFIX_NAME; then
      
  old_LDFLAGS=$LDFLAGS
  LDFLAGS="-L$THIS_PREFIX/lib -l$LIB $LDFLAGS"
  
        cat > conftest.$ac_ext <<EOF
#line 21718 "configure"
#include "confdefs.h"

#include "$THIS_INCLUDE"
        
int main() {

          (void)db_create((DB**)0, (DB_ENV*)0, 0);
        
; return 0; }
EOF
if { (eval echo configure:21729: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  
          cat > conftest.$ac_ext <<EOF
#line 21733 "configure"
#include "confdefs.h"

#include "$THIS_INCLUDE"
#if DB_VERSION_MAJOR == 4
            yes
#endif
          
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  
            THIS_LIBS=$LIB
            break
          
fi
rm -f conftest*

        
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
      
  LDFLAGS=$old_LDFLAGS

    fi
  done
  if test -z "$THIS_LIBS"; then
	echo $ac_n "checking for db4 major version""... $ac_c" 1>&6
echo "configure:21765: checking for db4 major version" >&5
    { echo "configure: error: Header contains different version" 1>&2; exit 1; }
  fi
  if test "4" = "4"; then
    echo $ac_n "checking for db4 minor version and patch level""... $ac_c" 1>&6
echo "configure:21770: checking for db4 minor version and patch level" >&5
    cat > conftest.$ac_ext <<EOF
#line 21772 "configure"
#include "confdefs.h"

#include "$THIS_INCLUDE"
#if DB_VERSION_MINOR != 1 || DB_VERSION_PATCH >= 25
      yes
#endif
    
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  
      echo "$ac_t""ok" 1>&6
    
else
  rm -rf conftest*
  
      { echo "configure: error: Version 4.1 requires patch level 25" 1>&2; exit 1; }
    
fi
rm -f conftest*

  fi
  if test "$ext_shared" = "yes"; then
    echo $ac_n "checking if db can be used as shared extension""... $ac_c" 1>&6
echo "configure:21798: checking if db can be used as shared extension" >&5
    cat > conftest.$ac_ext <<EOF
#line 21800 "configure"
#include "confdefs.h"

#include "$THIS_INCLUDE"
#if DB_VERSION_MAJOR > 3 || (DB_VERSION_MAJOR == 3 && DB_VERSION_MINOR > 2)
      yes
#endif
    
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  
      echo "$ac_t""yes" 1>&6
    
else
  rm -rf conftest*
  
      { echo "configure: error: At least version 3.3 is required" 1>&2; exit 1; }
    
fi
rm -f conftest*

  fi
  if test -n "$THIS_LIBS"; then
    cat >> confdefs.h <<\EOF
#define DBA_DB4 1
EOF
 
    if test -n "$THIS_INCLUDE"; then
      cat >> confdefs.h <<EOF
#define DB4_INCLUDE_FILE "$THIS_INCLUDE"
EOF

    fi
  fi
  
  if test -n "$THIS_PREFIX" && test "$THIS_PREFIX" != "/usr"; then
    THIS_LFLAGS=$THIS_PREFIX/lib
  fi

  
  THIS_RESULT="yes"
  if test -z "$THIS_INCLUDE"; then
    { echo "configure: error: cannot find necessary header file(s)" 1>&2; exit 1; }
  fi
  if test -z "$THIS_LIBS"; then
    { echo "configure: error: cannot find necessary library" 1>&2; exit 1; }
  fi

  
  

  if test "$ext_shared" = "yes"; then
    DBA_SHARED_LIBADD="-l$THIS_LIBS $DBA_SHARED_LIBADD"
    if test -n "$THIS_LFLAGS"; then
      
  if test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else
    
    ep_dir="`echo $THIS_LFLAGS|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        DBA_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $DBA_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$THIS_LFLAGS"; then
    
  if test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else
    
    ep_dir="`echo $THIS_LFLAGS|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case $THIS_LIBS in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$THIS_LIBS $LIBS" 
   ;;
  esac




  fi


  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX


  fi

fi


  THIS_NAME=DB4
  if test -n "Berkeley DB4"; then
    THIS_FULL_NAME="Berkeley DB4"
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
echo "configure:21962: checking for $THIS_FULL_NAME support" >&5
  if test -n ""; then
    { echo "configure: error: " 1>&2; exit 1; }
  fi
  if test "$THIS_RESULT" = "yes" -o "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    echo "$ac_t""$THIS_RESULT" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME


# Check whether --with-db3 or --without-db3 was given.
if test "${with_db3+set}" = set; then
  withval="$with_db3"
  
  if test "$withval" != "no"; then
    
  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX THIS_RESULT

    if test "$HAVE_DB4" = "1"; then
      
  THIS_NAME=DB3
  if test -n "Berkeley DB3"; then
    THIS_FULL_NAME="Berkeley DB3"
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
echo "configure:21993: checking for $THIS_FULL_NAME support" >&5
  if test -n "You cannot combine --with-db3 with --with-db4"; then
    { echo "configure: error: You cannot combine --with-db3 with --with-db4" 1>&2; exit 1; }
  fi
  if test "$THIS_RESULT" = "yes" -o "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    echo "$ac_t""$THIS_RESULT" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME

    fi
    for i in $withval /usr/local/BerkeleyDB.3.3 /usr/local/BerkeleyDB.3.2 /usr/local/BerkeleyDB.3.1 /usr/local/BerkeleyDB.3.0 /usr/local /usr; do
      if test -f "$i/db3/db.h"; then
        THIS_PREFIX=$i
        THIS_INCLUDE=$i/include/db3/db.h
        break
      elif test -f "$i/include/db3/db.h"; then
        THIS_PREFIX=$i
        THIS_INCLUDE=$i/include/db3/db.h
        break
      elif test -f "$i/include/db/db3.h"; then
        THIS_PREFIX=$i
        THIS_INCLUDE=$i/include/db/db3.h
        break
      elif test -f "$i/include/db3.h"; then
        THIS_PREFIX=$i
        THIS_INCLUDE=$i/include/db3.h
        break
      elif test -f "$i/include/db.h"; then
        THIS_PREFIX=$i
        THIS_INCLUDE=$i/include/db.h
        break
      fi
    done
    
  for LIB in db-3.3 db-3.2 db-3.1 db-3.0 db-3 db3 db; do
    if test -f $THIS_PREFIX/lib/lib$LIB.a -o -f $THIS_PREFIX/lib/lib$LIB.$SHLIB_SUFFIX_NAME; then
      
  old_LDFLAGS=$LDFLAGS
  LDFLAGS="-L$THIS_PREFIX/lib -l$LIB $LDFLAGS"
  
        cat > conftest.$ac_ext <<EOF
#line 22038 "configure"
#include "confdefs.h"

#include "$THIS_INCLUDE"
        
int main() {

          (void)db_create((DB**)0, (DB_ENV*)0, 0);
        
; return 0; }
EOF
if { (eval echo configure:22049: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  
          cat > conftest.$ac_ext <<EOF
#line 22053 "configure"
#include "confdefs.h"

#include "$THIS_INCLUDE"
#if DB_VERSION_MAJOR == 3
            yes
#endif
          
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  
            THIS_LIBS=$LIB
            break
          
fi
rm -f conftest*

        
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
      
  LDFLAGS=$old_LDFLAGS

    fi
  done
  if test -z "$THIS_LIBS"; then
	echo $ac_n "checking for db3 major version""... $ac_c" 1>&6
echo "configure:22085: checking for db3 major version" >&5
    { echo "configure: error: Header contains different version" 1>&2; exit 1; }
  fi
  if test "3" = "4"; then
    echo $ac_n "checking for db4 minor version and patch level""... $ac_c" 1>&6
echo "configure:22090: checking for db4 minor version and patch level" >&5
    cat > conftest.$ac_ext <<EOF
#line 22092 "configure"
#include "confdefs.h"

#include "$THIS_INCLUDE"
#if DB_VERSION_MINOR != 1 || DB_VERSION_PATCH >= 25
      yes
#endif
    
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  
      echo "$ac_t""ok" 1>&6
    
else
  rm -rf conftest*
  
      { echo "configure: error: Version 4.1 requires patch level 25" 1>&2; exit 1; }
    
fi
rm -f conftest*

  fi
  if test "$ext_shared" = "yes"; then
    echo $ac_n "checking if db can be used as shared extension""... $ac_c" 1>&6
echo "configure:22118: checking if db can be used as shared extension" >&5
    cat > conftest.$ac_ext <<EOF
#line 22120 "configure"
#include "confdefs.h"

#include "$THIS_INCLUDE"
#if DB_VERSION_MAJOR > 3 || (DB_VERSION_MAJOR == 3 && DB_VERSION_MINOR > 2)
      yes
#endif
    
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  
      echo "$ac_t""yes" 1>&6
    
else
  rm -rf conftest*
  
      { echo "configure: error: At least version 3.3 is required" 1>&2; exit 1; }
    
fi
rm -f conftest*

  fi
  if test -n "$THIS_LIBS"; then
    cat >> confdefs.h <<\EOF
#define DBA_DB3 1
EOF
 
    if test -n "$THIS_INCLUDE"; then
      cat >> confdefs.h <<EOF
#define DB3_INCLUDE_FILE "$THIS_INCLUDE"
EOF

    fi
  fi
  
  if test -n "$THIS_PREFIX" && test "$THIS_PREFIX" != "/usr"; then
    THIS_LFLAGS=$THIS_PREFIX/lib
  fi

  
  THIS_RESULT="yes"
  if test -z "$THIS_INCLUDE"; then
    { echo "configure: error: cannot find necessary header file(s)" 1>&2; exit 1; }
  fi
  if test -z "$THIS_LIBS"; then
    { echo "configure: error: cannot find necessary library" 1>&2; exit 1; }
  fi

  
  

  if test "$ext_shared" = "yes"; then
    DBA_SHARED_LIBADD="-l$THIS_LIBS $DBA_SHARED_LIBADD"
    if test -n "$THIS_LFLAGS"; then
      
  if test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else
    
    ep_dir="`echo $THIS_LFLAGS|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        DBA_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $DBA_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$THIS_LFLAGS"; then
    
  if test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else
    
    ep_dir="`echo $THIS_LFLAGS|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case $THIS_LIBS in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$THIS_LIBS $LIBS" 
   ;;
  esac




  fi


  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX


  fi
      
fi


  THIS_NAME=DB3
  if test -n "Berkeley DB3"; then
    THIS_FULL_NAME="Berkeley DB3"
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
echo "configure:22282: checking for $THIS_FULL_NAME support" >&5
  if test -n ""; then
    { echo "configure: error: " 1>&2; exit 1; }
  fi
  if test "$THIS_RESULT" = "yes" -o "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    echo "$ac_t""$THIS_RESULT" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME


# Check whether --with-db2 or --without-db2 was given.
if test "${with_db2+set}" = set; then
  withval="$with_db2"
  
  if test "$withval" != "no"; then
    
  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX THIS_RESULT

    if test "$HAVE_DB3" = "1" -o "$HAVE_DB4" = "1"; then
      
  THIS_NAME=DB2
  if test -n "Berkeley DB2"; then
    THIS_FULL_NAME="Berkeley DB2"
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
echo "configure:22313: checking for $THIS_FULL_NAME support" >&5
  if test -n "You cannot combine --with-db2 with --with-db3 or --with-db4"; then
    { echo "configure: error: You cannot combine --with-db2 with --with-db3 or --with-db4" 1>&2; exit 1; }
  fi
  if test "$THIS_RESULT" = "yes" -o "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    echo "$ac_t""$THIS_RESULT" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME

    fi
    for i in $withval $withval/BerkeleyDB /usr/BerkeleyDB /usr/local /usr; do
      if test -f "$i/db2/db.h"; then
        THIS_PREFIX=$i
        THIS_INCLUDE=$i/db2/db.h
        break
      elif test -f "$i/include/db2/db.h"; then
        THIS_PREFIX=$i
        THIS_INCLUDE=$i/include/db2/db.h
        break
      elif test -f "$i/include/db/db2.h"; then
        THIS_PREFIX=$i
        THIS_INCLUDE=$i/include/db/db2.h
        break
      elif test -f "$i/include/db2.h"; then
        THIS_PREFIX=$i
        THIS_INCLUDE=$i/include/db2.h
        break
      elif test -f "$i/include/db.h"; then
        THIS_PREFIX=$i
        THIS_INCLUDE=$i/include/db.h
        break
      fi
    done
    
  for LIB in db-2 db2 db; do
    if test -f $THIS_PREFIX/lib/lib$LIB.a -o -f $THIS_PREFIX/lib/lib$LIB.$SHLIB_SUFFIX_NAME; then
      
  old_LDFLAGS=$LDFLAGS
  LDFLAGS="-L$THIS_PREFIX/lib -l$LIB $LDFLAGS"
  
        cat > conftest.$ac_ext <<EOF
#line 22358 "configure"
#include "confdefs.h"

#include "$THIS_INCLUDE"
        
int main() {

          (void)db_appinit("", NULL, (DB_ENV*)0, 0);
        
; return 0; }
EOF
if { (eval echo configure:22369: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  
          cat > conftest.$ac_ext <<EOF
#line 22373 "configure"
#include "confdefs.h"

#include "$THIS_INCLUDE"
#if DB_VERSION_MAJOR == 2
            yes
#endif
          
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  
            THIS_LIBS=$LIB
            break
          
fi
rm -f conftest*

        
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
      
  LDFLAGS=$old_LDFLAGS

    fi
  done
  if test -z "$THIS_LIBS"; then
	echo $ac_n "checking for db2 major version""... $ac_c" 1>&6
echo "configure:22405: checking for db2 major version" >&5
    { echo "configure: error: Header contains different version" 1>&2; exit 1; }
  fi
  if test "2" = "4"; then
    echo $ac_n "checking for db4 minor version and patch level""... $ac_c" 1>&6
echo "configure:22410: checking for db4 minor version and patch level" >&5
    cat > conftest.$ac_ext <<EOF
#line 22412 "configure"
#include "confdefs.h"

#include "$THIS_INCLUDE"
#if DB_VERSION_MINOR != 1 || DB_VERSION_PATCH >= 25
      yes
#endif
    
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  
      echo "$ac_t""ok" 1>&6
    
else
  rm -rf conftest*
  
      { echo "configure: error: Version 4.1 requires patch level 25" 1>&2; exit 1; }
    
fi
rm -f conftest*

  fi
  if test "$ext_shared" = "yes"; then
    echo $ac_n "checking if db can be used as shared extension""... $ac_c" 1>&6
echo "configure:22438: checking if db can be used as shared extension" >&5
    cat > conftest.$ac_ext <<EOF
#line 22440 "configure"
#include "confdefs.h"

#include "$THIS_INCLUDE"
#if DB_VERSION_MAJOR > 3 || (DB_VERSION_MAJOR == 3 && DB_VERSION_MINOR > 2)
      yes
#endif
    
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  
      echo "$ac_t""yes" 1>&6
    
else
  rm -rf conftest*
  
      { echo "configure: error: At least version 3.3 is required" 1>&2; exit 1; }
    
fi
rm -f conftest*

  fi
  if test -n "$THIS_LIBS"; then
    cat >> confdefs.h <<\EOF
#define DBA_DB2 1
EOF
 
    if test -n "$THIS_INCLUDE"; then
      cat >> confdefs.h <<EOF
#define DB2_INCLUDE_FILE "$THIS_INCLUDE"
EOF

    fi
  fi
  
  if test -n "$THIS_PREFIX" && test "$THIS_PREFIX" != "/usr"; then
    THIS_LFLAGS=$THIS_PREFIX/lib
  fi

  
  THIS_RESULT="yes"
  if test -z "$THIS_INCLUDE"; then
    { echo "configure: error: cannot find necessary header file(s)" 1>&2; exit 1; }
  fi
  if test -z "$THIS_LIBS"; then
    { echo "configure: error: cannot find necessary library" 1>&2; exit 1; }
  fi

  
  

  if test "$ext_shared" = "yes"; then
    DBA_SHARED_LIBADD="-l$THIS_LIBS $DBA_SHARED_LIBADD"
    if test -n "$THIS_LFLAGS"; then
      
  if test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else
    
    ep_dir="`echo $THIS_LFLAGS|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        DBA_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $DBA_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$THIS_LFLAGS"; then
    
  if test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else
    
    ep_dir="`echo $THIS_LFLAGS|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case $THIS_LIBS in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$THIS_LIBS $LIBS" 
   ;;
  esac




  fi


  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX


  fi

fi


  THIS_NAME=DB2
  if test -n "Berkeley DB2"; then
    THIS_FULL_NAME="Berkeley DB2"
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
echo "configure:22602: checking for $THIS_FULL_NAME support" >&5
  if test -n ""; then
    { echo "configure: error: " 1>&2; exit 1; }
  fi
  if test "$THIS_RESULT" = "yes" -o "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    echo "$ac_t""$THIS_RESULT" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME


# Check whether --with-dbm or --without-dbm was given.
if test "${with_dbm+set}" = set; then
  withval="$with_dbm"
  
  if test "$withval" != "no"; then
    
  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX THIS_RESULT

    for i in $withval /usr/local /usr; do
      if test -f "$i/include/dbm.h"; then
        THIS_PREFIX=$i
        THIS_INCLUDE=$i/include/dbm.h
        break
      elif test -f "$i/include/gdbm/dbm.h"; then
        THIS_PREFIX=$i
        THIS_INCLUDE=$i/include/gdbm/dbm.h
        break
      fi
    done

    if test -n "$THIS_INCLUDE"; then
      for LIB in dbm c gdbm; do
        
  old_LDFLAGS=$LDFLAGS
  LDFLAGS="-L$THIS_PREFIX/lib $LDFLAGS"
  
          echo $ac_n "checking for dbminit in -l$LIB""... $ac_c" 1>&6
echo "configure:22643: checking for dbminit in -l$LIB" >&5
ac_lib_var=`echo $LIB'_'dbminit | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$LIB  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 22651 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dbminit();

int main() {
dbminit()
; return 0; }
EOF
if { (eval echo configure:22662: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
            echo $ac_n "checking for DBM using GDBM""... $ac_c" 1>&6
echo "configure:22679: checking for DBM using GDBM" >&5
            cat >> confdefs.h <<EOF
#define DBM_INCLUDE_FILE "$THIS_INCLUDE"
EOF

            if test "$LIB" = "gdbm"; then
              cat >> confdefs.h <<EOF
#define DBM_VERSION "GDBM"
EOF

              echo "$ac_t""yes" 1>&6
            else
              cat >> confdefs.h <<EOF
#define DBM_VERSION "DBM"
EOF

              echo "$ac_t""no" 1>&6
            fi
            cat >> confdefs.h <<\EOF
#define DBA_DBM 1
EOF
 
            THIS_LIBS=$LIB
          
else
  echo "$ac_t""no" 1>&6
fi

          if test -n "$THIS_LIBS"; then
            break
          fi
        
  LDFLAGS=$old_LDFLAGS

      done
    fi
    
    
  if test -n "$THIS_PREFIX" && test "$THIS_PREFIX" != "/usr"; then
    THIS_LFLAGS=$THIS_PREFIX/lib
  fi

    
  THIS_RESULT="yes"
  if test -z "$THIS_INCLUDE"; then
    { echo "configure: error: cannot find necessary header file(s)" 1>&2; exit 1; }
  fi
  if test -z "$THIS_LIBS"; then
    { echo "configure: error: cannot find necessary library" 1>&2; exit 1; }
  fi

    
  

  if test "$ext_shared" = "yes"; then
    DBA_SHARED_LIBADD="-l$THIS_LIBS $DBA_SHARED_LIBADD"
    if test -n "$THIS_LFLAGS"; then
      
  if test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else
    
    ep_dir="`echo $THIS_LFLAGS|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        DBA_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $DBA_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$THIS_LFLAGS"; then
    
  if test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else
    
    ep_dir="`echo $THIS_LFLAGS|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case $THIS_LIBS in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$THIS_LIBS $LIBS" 
   ;;
  esac




  fi


  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX

  fi

fi


  THIS_NAME=DBM
  if test -n ""; then
    THIS_FULL_NAME=""
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
echo "configure:22841: checking for $THIS_FULL_NAME support" >&5
  if test -n ""; then
    { echo "configure: error: " 1>&2; exit 1; }
  fi
  if test "$THIS_RESULT" = "yes" -o "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    echo "$ac_t""$THIS_RESULT" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME




# Check whether --with-cdb or --without-cdb was given.
if test "${with_cdb+set}" = set; then
  withval="$with_cdb"
  
  if test "$withval" = "yes" -o "$HAVE_DBA" = "1"; then
    
  cat >> confdefs.h <<\EOF
#define DBA_CDB_BUILTIN 1
EOF

  cat >> confdefs.h <<\EOF
#define DBA_CDB_MAKE 1
EOF

  cat >> confdefs.h <<\EOF
#define DBA_CDB 1
EOF

  cdb_sources="libcdb/cdb.c libcdb/cdb_make.c libcdb/uint32.c"
  THIS_RESULT="builtin"

  elif test "$withval" != "no"; then
    
  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX THIS_RESULT

    for i in $withval /usr/local /usr; do
      if test -f "$i/include/cdb.h"; then
        THIS_PREFIX=$i
        THIS_INCLUDE=$i/include/cdb.h
        break
      fi
    done

    if test -n "$THIS_INCLUDE"; then
      for LIB in cdb c; do
        
  old_LDFLAGS=$LDFLAGS
  LDFLAGS="-L$THIS_PREFIX/lib $LDFLAGS"
  
          echo $ac_n "checking for cdb_read in -l$LIB""... $ac_c" 1>&6
echo "configure:22897: checking for cdb_read in -l$LIB" >&5
ac_lib_var=`echo $LIB'_'cdb_read | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$LIB  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 22905 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char cdb_read();

int main() {
cdb_read()
; return 0; }
EOF
if { (eval echo configure:22916: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
            cat >> confdefs.h <<EOF
#define CDB_INCLUDE_FILE "$THIS_INCLUDE"
EOF

            cat >> confdefs.h <<\EOF
#define DBA_CDB 1
EOF
 
            THIS_LIBS=$LIB
            break
          
else
  echo "$ac_t""no" 1>&6
fi

        
  LDFLAGS=$old_LDFLAGS

      done
    fi
    
    
  if test -n "$THIS_PREFIX" && test "$THIS_PREFIX" != "/usr"; then
    THIS_LFLAGS=$THIS_PREFIX/lib
  fi

    
  THIS_RESULT="yes"
  if test -z "$THIS_INCLUDE"; then
    { echo "configure: error: cannot find necessary header file(s)" 1>&2; exit 1; }
  fi
  if test -z "$THIS_LIBS"; then
    { echo "configure: error: cannot find necessary library" 1>&2; exit 1; }
  fi

    
  

  if test "$ext_shared" = "yes"; then
    DBA_SHARED_LIBADD="-l$THIS_LIBS $DBA_SHARED_LIBADD"
    if test -n "$THIS_LFLAGS"; then
      
  if test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else
    
    ep_dir="`echo $THIS_LFLAGS|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        DBA_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $DBA_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$THIS_LFLAGS"; then
    
  if test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p=$THIS_LFLAGS
  else
    
    ep_dir="`echo $THIS_LFLAGS|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case $THIS_LIBS in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$THIS_LIBS $LIBS" 
   ;;
  esac




  fi


  unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX

  fi

else
  
  if test "$PHP_DBA" != "no" -o "$HAVE_DBA" = "1"; then
    
  cat >> confdefs.h <<\EOF
#define DBA_CDB_BUILTIN 1
EOF

  cat >> confdefs.h <<\EOF
#define DBA_CDB_MAKE 1
EOF

  cat >> confdefs.h <<\EOF
#define DBA_CDB 1
EOF

  cdb_sources="libcdb/cdb.c libcdb/cdb_make.c libcdb/uint32.c"
  THIS_RESULT="builtin"

  fi

fi


  THIS_NAME=CDB
  if test -n ""; then
    THIS_FULL_NAME=""
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
echo "configure:23099: checking for $THIS_FULL_NAME support" >&5
  if test -n ""; then
    { echo "configure: error: " 1>&2; exit 1; }
  fi
  if test "$THIS_RESULT" = "yes" -o "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    echo "$ac_t""$THIS_RESULT" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME




# Check whether --with-flatfile or --without-flatfile was given.
if test "${with_flatfile+set}" = set; then
  withval="$with_flatfile"
  
  if test "$withval" != "no"; then
    
  cat >> confdefs.h <<\EOF
#define DBA_FLATFILE 1
EOF

  flat_sources="libflatfile/flatfile.c"
  THIS_RESULT="builtin"

  fi

else
  
  if test "$PHP_DBA" != "no" -o "$HAVE_DBA" = "1"; then
    
  cat >> confdefs.h <<\EOF
#define DBA_FLATFILE 1
EOF

  flat_sources="libflatfile/flatfile.c"
  THIS_RESULT="builtin"

  fi

fi


  THIS_NAME=FLATFILE
  if test -n "FlatFile"; then
    THIS_FULL_NAME="FlatFile"
  else
    THIS_FULL_NAME="$THIS_NAME"
  fi
  echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
echo "configure:23153: checking for $THIS_FULL_NAME support" >&5
  if test -n ""; then
    { echo "configure: error: " 1>&2; exit 1; }
  fi
  if test "$THIS_RESULT" = "yes" -o "$THIS_RESULT" = "builtin"; then
    HAVE_DBA=1
    eval HAVE_$THIS_NAME=1
    echo "$ac_t""$THIS_RESULT" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi
  unset THIS_RESULT THIS_NAME THIS_FULL_NAME


echo $ac_n "checking whether to enable DBA interface""... $ac_c" 1>&6
echo "configure:23168: checking whether to enable DBA interface" >&5
if test "$HAVE_DBA" = "1"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_DBA 1
EOF

  
  ext_builddir=ext/dba
  ext_srcdir=$abs_srcdir/ext/dba

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/dba in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/dba"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/dba/"; ac_bdir="ext/dba/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in dba.c dba_cdb.c dba_db2.c dba_dbm.c dba_gdbm.c dba_ndbm.c dba_db3.c dba_db4.c dba_flatfile.c $cdb_sources $flat_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC dba"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC dba"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/dba in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/dba"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/dba/"; ac_bdir="ext/dba/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in dba.c dba_cdb.c dba_db2.c dba_dbm.c dba_gdbm.c dba_ndbm.c dba_db3.c dba_db4.c dba_flatfile.c $cdb_sources $flat_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_dba="$shared_objects_dba $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/dba.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_dba"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/dba.la: $ext_builddir/dba.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/dba.la \$(phplibdir)

$ext_builddir/dba.la: \$(shared_objects_dba) \$(DBA_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_dba) \$(DBA_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_DBA 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/dba in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/dba"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/dba/"; ac_bdir="ext/dba/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in dba.c dba_cdb.c dba_db2.c dba_dbm.c dba_gdbm.c dba_ndbm.c dba_db3.c dba_db4.c dba_flatfile.c $cdb_sources $flat_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC dba"
    else
      
  
  case ext/dba in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/dba"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/dba/"; ac_bdir="ext/dba/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in dba.c dba_cdb.c dba_db2.c dba_dbm.c dba_gdbm.c dba_ndbm.c dba_db3.c dba_db4.c dba_flatfile.c $cdb_sources $flat_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC dba"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


  
  BUILD_DIR="$BUILD_DIR $ext_builddir/libcdb"

  
  BUILD_DIR="$BUILD_DIR $ext_builddir/libflatfile"

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST DBA_SHARED_LIBADD"

else
  echo "$ac_t""no" 1>&6
fi


# Check whether --with-dbase or --without-dbase was given.
if test "${with_dbase+set}" = set; then
  withval="$with_dbase"
  enable_dbase=$withval
fi




echo $ac_n "checking whether to enable dbase support""... $ac_c" 1>&6
echo "configure:23407: checking whether to enable dbase support" >&5
# Check whether --enable-dbase or --disable-dbase was given.
if test "${enable_dbase+set}" = set; then
  enableval="$enable_dbase"
  PHP_DBASE=$enableval
else
  
  PHP_DBASE=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_DBASE=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_DBASE in
shared,*)
  PHP_DBASE=`echo "$PHP_DBASE"|sed 's/^shared,//'`
  ;;
shared)
  PHP_DBASE=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_DBASE" = "yes"; then
  cat >> confdefs.h <<\EOF
#define DBASE 1
EOF

  
  ext_builddir=ext/dbase
  ext_srcdir=$abs_srcdir/ext/dbase

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/dbase in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/dbase"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/dbase/"; ac_bdir="ext/dbase/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in dbf_head.c dbf_rec.c dbf_misc.c dbf_ndx.c dbase.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC dbase"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC dbase"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/dbase in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/dbase"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/dbase/"; ac_bdir="ext/dbase/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in dbf_head.c dbf_rec.c dbf_misc.c dbf_ndx.c dbase.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_dbase="$shared_objects_dbase $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/dbase.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_dbase"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/dbase.la: $ext_builddir/dbase.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/dbase.la \$(phplibdir)

$ext_builddir/dbase.la: \$(shared_objects_dbase) \$(DBASE_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_dbase) \$(DBASE_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_DBASE 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/dbase in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/dbase"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/dbase/"; ac_bdir="ext/dbase/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in dbf_head.c dbf_rec.c dbf_misc.c dbf_ndx.c dbase.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC dbase"
    else
      
  
  case ext/dbase in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/dbase"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/dbase/"; ac_bdir="ext/dbase/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in dbf_head.c dbf_rec.c dbf_misc.c dbf_ndx.c dbase.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC dbase"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


fi




echo $ac_n "checking whether to enable dbx support""... $ac_c" 1>&6
echo "configure:23669: checking whether to enable dbx support" >&5
# Check whether --enable-dbx or --disable-dbx was given.
if test "${enable_dbx+set}" = set; then
  enableval="$enable_dbx"
  PHP_DBX=$enableval
else
  
  PHP_DBX=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_DBX=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_DBX in
shared,*)
  PHP_DBX=`echo "$PHP_DBX"|sed 's/^shared,//'`
  ;;
shared)
  PHP_DBX=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_DBX" != "no"; then
  
  ext_builddir=ext/dbx
  ext_srcdir=$abs_srcdir/ext/dbx

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/dbx in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/dbx"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/dbx/"; ac_bdir="ext/dbx/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in dbx.c dbx_mysql.c dbx_odbc.c dbx_pgsql.c dbx_mssql.c dbx_fbsql.c dbx_oci8.c dbx_sybasect.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC dbx"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC dbx"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/dbx in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/dbx"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/dbx/"; ac_bdir="ext/dbx/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in dbx.c dbx_mysql.c dbx_odbc.c dbx_pgsql.c dbx_mssql.c dbx_fbsql.c dbx_oci8.c dbx_sybasect.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_dbx="$shared_objects_dbx $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/dbx.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_dbx"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/dbx.la: $ext_builddir/dbx.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/dbx.la \$(phplibdir)

$ext_builddir/dbx.la: \$(shared_objects_dbx) \$(DBX_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_dbx) \$(DBX_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_DBX 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/dbx in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/dbx"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/dbx/"; ac_bdir="ext/dbx/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in dbx.c dbx_mysql.c dbx_odbc.c dbx_pgsql.c dbx_mssql.c dbx_fbsql.c dbx_oci8.c dbx_sybasect.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC dbx"
    else
      
  
  case ext/dbx in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/dbx"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/dbx/"; ac_bdir="ext/dbx/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in dbx.c dbx_mysql.c dbx_odbc.c dbx_pgsql.c dbx_mssql.c dbx_fbsql.c dbx_oci8.c dbx_sybasect.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC dbx"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


fi




echo $ac_n "checking whether to enable direct I/O support""... $ac_c" 1>&6
echo "configure:23927: checking whether to enable direct I/O support" >&5
# Check whether --enable-dio or --disable-dio was given.
if test "${enable_dio+set}" = set; then
  enableval="$enable_dio"
  PHP_DIO=$enableval
else
  
  PHP_DIO=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_DIO=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_DIO in
shared,*)
  PHP_DIO=`echo "$PHP_DIO"|sed 's/^shared,//'`
  ;;
shared)
  PHP_DIO=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_DIO" != "no"; then
  
  ext_builddir=ext/dio
  ext_srcdir=$abs_srcdir/ext/dio

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/dio in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/dio"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/dio/"; ac_bdir="ext/dio/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in dio.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC dio"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC dio"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/dio in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/dio"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/dio/"; ac_bdir="ext/dio/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in dio.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_dio="$shared_objects_dio $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/dio.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_dio"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/dio.la: $ext_builddir/dio.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/dio.la \$(phplibdir)

$ext_builddir/dio.la: \$(shared_objects_dio) \$(DIO_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_dio) \$(DIO_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_DIO 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/dio in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/dio"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/dio/"; ac_bdir="ext/dio/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in dio.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC dio"
    else
      
  
  case ext/dio in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/dio"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/dio/"; ac_bdir="ext/dio/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in dio.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC dio"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


fi






echo $ac_n "checking for DOM support""... $ac_c" 1>&6
echo "configure:24187: checking for DOM support" >&5
# Check whether --with-dom or --without-dom was given.
if test "${with_dom+set}" = set; then
  withval="$with_dom"
  PHP_DOM=$withval
else
  
  PHP_DOM=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_DOM=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_DOM in
shared,*)
  PHP_DOM=`echo "$PHP_DOM"|sed 's/^shared,//'`
  ;;
shared)
  PHP_DOM=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test -z "$PHP_ZLIB_DIR"; then
  

echo $ac_n "checking for the location of libz""... $ac_c" 1>&6
echo "configure:24234: checking for the location of libz" >&5
# Check whether --with-zlib-dir or --without-zlib-dir was given.
if test "${with_zlib_dir+set}" = set; then
  withval="$with_zlib_dir"
  PHP_ZLIB_DIR=$withval
else
  
  PHP_ZLIB_DIR=no

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_ZLIB_DIR=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_ZLIB_DIR
echo "$ac_t""$ext_output" 1>&6



fi

if test "$PHP_DOM" != "no"; then

  DOMXML_DIR_ADD=""
  if test -r $PHP_DOM/include/libxml2/libxml/tree.h; then
    DOMXML_DIR=$PHP_DOM
    DOMXML_DIR_ADD="/libxml2"
  elif test -r $PHP_DOM/include/libxml/tree.h; then
    DOMXML_DIR=$PHP_DOM
  else
    for i in /usr/local /usr; do
      test -r $i/include/libxml/tree.h && DOMXML_DIR=$i
      test -r $i/include/libxml2/libxml/tree.h && DOMXML_DIR=$i && DOMXML_DIR_ADD="/libxml2"
    done
  fi

  if test -z "$DOMXML_DIR"; then
    echo "$ac_t""not found" 1>&6
    { echo "configure: error: Please reinstall the libxml >= 2.4.14 distribution" 1>&2; exit 1; }
  fi

  
  old_CPPFLAGS=$CPPFLAGS
  CPPFLAGS=-I$DOMXML_DIR/include$DOMXML_DIR_ADD
  echo $ac_n "checking for libxml version""... $ac_c" 1>&6
echo "configure:24281: checking for libxml version" >&5
  cat > conftest.$ac_ext <<EOF
#line 24283 "configure"
#include "confdefs.h"

#include <libxml/xmlversion.h>
#if LIBXML_VERSION >= 20414
  yes
#endif
  
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  
    echo "$ac_t"">= 2.4.14" 1>&6
  
else
  rm -rf conftest*
  
    { echo "configure: error: libxml version 2.4.14 or greater required." 1>&2; exit 1; }
  
fi
rm -f conftest*

  CPPFLAGS=$old_CPPFLAGS


  if test -f $DOMXML_DIR/lib/libxml2.a -o -f $DOMXML_DIR/lib/libxml2.$SHLIB_SUFFIX_NAME ; then
    DOM_LIBNAME=xml2
  else
    DOM_LIBNAME=xml
  fi

  XML2_CONFIG=$DOMXML_DIR/bin/xml2-config
 
  if test -x $XML2_CONFIG; then
    DOM_LIBS=`$XML2_CONFIG --libs`
    
  for ac_i in $DOM_LIBS; do
    case $ac_i in
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        DOMXML_SHARED_LIBADD="$DOMXML_SHARED_LIBADD -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        DOMXML_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $DOMXML_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  else 
    

  if test "$ext_shared" = "yes"; then
    DOMXML_SHARED_LIBADD="-l$DOM_LIBNAME $DOMXML_SHARED_LIBADD"
    if test -n "$DOMXML_DIR/lib"; then
      
  if test "$DOMXML_DIR/lib" != "/usr/lib"; then
    
  if test -z "$DOMXML_DIR/lib" || echo "$DOMXML_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$DOMXML_DIR/lib
  else
    
    ep_dir="`echo $DOMXML_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$DOMXML_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        DOMXML_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $DOMXML_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$DOMXML_DIR/lib"; then
    
  if test "$DOMXML_DIR/lib" != "/usr/lib"; then
    
  if test -z "$DOMXML_DIR/lib" || echo "$DOMXML_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$DOMXML_DIR/lib
  else
    
    ep_dir="`echo $DOMXML_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$DOMXML_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case $DOM_LIBNAME in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$DOM_LIBNAME $LIBS" 
   ;;
  esac




  fi


  fi

  
  if test "$DOMXML_DIR/include$DOMXML_DIR_ADD" != "/usr/include"; then
    
  if test -z "$DOMXML_DIR/include$DOMXML_DIR_ADD" || echo "$DOMXML_DIR/include$DOMXML_DIR_ADD" | grep '^/' >/dev/null ; then
    ai_p=$DOMXML_DIR/include$DOMXML_DIR_ADD
  else
    
    ep_dir="`echo $DOMXML_DIR/include$DOMXML_DIR_ADD|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$DOMXML_DIR/include$DOMXML_DIR_ADD\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi


  if test "$PHP_ZLIB_DIR" = "no"; then
    { echo "configure: error: DOMXML requires ZLIB. Use --with-zlib-dir=<DIR>" 1>&2; exit 1; }
  else
    

  if test "$ext_shared" = "yes"; then
    DOMXML_SHARED_LIBADD="-lz $DOMXML_SHARED_LIBADD"
    if test -n "$PHP_ZLIB_DIR/lib"; then
      
  if test "$PHP_ZLIB_DIR/lib" != "/usr/lib"; then
    
  if test -z "$PHP_ZLIB_DIR/lib" || echo "$PHP_ZLIB_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ZLIB_DIR/lib
  else
    
    ep_dir="`echo $PHP_ZLIB_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        DOMXML_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $DOMXML_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$PHP_ZLIB_DIR/lib"; then
    
  if test "$PHP_ZLIB_DIR/lib" != "/usr/lib"; then
    
  if test -z "$PHP_ZLIB_DIR/lib" || echo "$PHP_ZLIB_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ZLIB_DIR/lib
  else
    
    ep_dir="`echo $PHP_ZLIB_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case z in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lz $LIBS" 
   ;;
  esac




  fi


  fi
  
  cat >> confdefs.h <<\EOF
#define HAVE_DOMXML 1
EOF

  
  ext_builddir=ext/domxml
  ext_srcdir=$abs_srcdir/ext/domxml

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/domxml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/domxml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/domxml/"; ac_bdir="ext/domxml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_domxml.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC domxml"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC domxml"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/domxml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/domxml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/domxml/"; ac_bdir="ext/domxml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_domxml.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_domxml="$shared_objects_domxml $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/domxml.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_domxml"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/domxml.la: $ext_builddir/domxml.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/domxml.la \$(phplibdir)

$ext_builddir/domxml.la: \$(shared_objects_domxml) \$(DOMXML_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_domxml) \$(DOMXML_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_DOMXML 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/domxml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/domxml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/domxml/"; ac_bdir="ext/domxml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_domxml.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC domxml"
    else
      
  
  case ext/domxml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/domxml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/domxml/"; ac_bdir="ext/domxml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_domxml.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC domxml"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST DOMXML_SHARED_LIBADD"

fi







echo $ac_n "checking for DOM XSLT support""... $ac_c" 1>&6
echo "configure:24847: checking for DOM XSLT support" >&5
# Check whether --with-dom-xslt or --without-dom-xslt was given.
if test "${with_dom_xslt+set}" = set; then
  withval="$with_dom_xslt"
  PHP_DOM_XSLT=$withval
else
  
  PHP_DOM_XSLT=no

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_DOM_XSLT=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_DOM_XSLT
echo "$ac_t""$ext_output" 1>&6






echo $ac_n "checking for DOM EXSLT support""... $ac_c" 1>&6
echo "configure:24872: checking for DOM EXSLT support" >&5
# Check whether --with-dom-exslt or --without-dom-exslt was given.
if test "${with_dom_exslt+set}" = set; then
  withval="$with_dom_exslt"
  PHP_DOM_EXSLT=$withval
else
  
  PHP_DOM_EXSLT=no

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_DOM_EXSLT=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_DOM_EXSLT
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_DOM_XSLT" != "no"; then

  if test -r $PHP_DOM_XSLT/include/libxslt/transform.h; then
    DOMXSLT_DIR=$PHP_DOM_XSLT
  else
    for i in /usr/local /usr; do
      test -r $i/include/libxslt/transform.h && DOMXSLT_DIR=$i
    done
  fi

  if test -z "$DOMXSLT_DIR"; then
    echo "$ac_t""not found" 1>&6
    { echo "configure: error: Please reinstall the libxslt >= 1.0.3 distribution" 1>&2; exit 1; }
  fi

  
  old_CPPFLAGS=$CPPFLAGS
  CPPFLAGS=-I$DOMXSLT_DIR/include
  echo $ac_n "checking for libxslt version""... $ac_c" 1>&6
echo "configure:24913: checking for libxslt version" >&5
  cat > conftest.$ac_ext <<EOF
#line 24915 "configure"
#include "confdefs.h"

#include <libxslt/xsltconfig.h>
#if LIBXSLT_VERSION >= 10018
  yes
#endif
  
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  
    echo "$ac_t"">= 1.0.18" 1>&6
  
else
  rm -rf conftest*
  
    { echo "configure: error: libxslt version 1.0.18 or greater required." 1>&2; exit 1; }
  
fi
rm -f conftest*

  CPPFLAGS=$old_CPPFLAGS


  

  if test "$ext_shared" = "yes"; then
    DOMXML_SHARED_LIBADD="-lxslt $DOMXML_SHARED_LIBADD"
    if test -n "$DOMXSLT_DIR/lib"; then
      
  if test "$DOMXSLT_DIR/lib" != "/usr/lib"; then
    
  if test -z "$DOMXSLT_DIR/lib" || echo "$DOMXSLT_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$DOMXSLT_DIR/lib
  else
    
    ep_dir="`echo $DOMXSLT_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$DOMXSLT_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        DOMXML_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $DOMXML_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$DOMXSLT_DIR/lib"; then
    
  if test "$DOMXSLT_DIR/lib" != "/usr/lib"; then
    
  if test -z "$DOMXSLT_DIR/lib" || echo "$DOMXSLT_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$DOMXSLT_DIR/lib
  else
    
    ep_dir="`echo $DOMXSLT_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$DOMXSLT_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case xslt in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lxslt $LIBS" 
   ;;
  esac




  fi



  
  if test "$DOMXSLT_DIR/include" != "/usr/include"; then
    
  if test -z "$DOMXSLT_DIR/include" || echo "$DOMXSLT_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$DOMXSLT_DIR/include
  else
    
    ep_dir="`echo $DOMXSLT_DIR/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$DOMXSLT_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi


  if test "$PHP_DOM" = "no"; then
    { echo "configure: error: DOMXSLT requires DOMXML. Use --with-dom=<DIR>" 1>&2; exit 1; }
  fi
  
  if test -f $DOMXML_DIR/lib/libxml2.a -o -f $DOMXML_DIR/lib/libxml2.$SHLIB_SUFFIX_NAME ; then
    DOM_LIBNAME=xml2
  else
    DOM_LIBNAME=xml
  fi

  

  if test "$ext_shared" = "yes"; then
    DOMXML_SHARED_LIBADD="-l$DOM_LIBNAME $DOMXML_SHARED_LIBADD"
    if test -n "$DOMXML_DIR/lib"; then
      
  if test "$DOMXML_DIR/lib" != "/usr/lib"; then
    
  if test -z "$DOMXML_DIR/lib" || echo "$DOMXML_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$DOMXML_DIR/lib
  else
    
    ep_dir="`echo $DOMXML_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$DOMXML_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        DOMXML_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $DOMXML_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$DOMXML_DIR/lib"; then
    
  if test "$DOMXML_DIR/lib" != "/usr/lib"; then
    
  if test -z "$DOMXML_DIR/lib" || echo "$DOMXML_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$DOMXML_DIR/lib
  else
    
    ep_dir="`echo $DOMXML_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$DOMXML_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case $DOM_LIBNAME in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$DOM_LIBNAME $LIBS" 
   ;;
  esac




  fi


  
  if test "$DOMXML_DIR/include$DOMXML_DIR_ADD" != "/usr/include"; then
    
  if test -z "$DOMXML_DIR/include$DOMXML_DIR_ADD" || echo "$DOMXML_DIR/include$DOMXML_DIR_ADD" | grep '^/' >/dev/null ; then
    ai_p=$DOMXML_DIR/include$DOMXML_DIR_ADD
  else
    
    ep_dir="`echo $DOMXML_DIR/include$DOMXML_DIR_ADD|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$DOMXML_DIR/include$DOMXML_DIR_ADD\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi


  if test -f $DOMXML_DIR/lib/libxsltbreakpoint.a -o -f $DOMXML_DIR/lib/libxsltbreakpoint.$SHLIB_SUFFIX_NAME ; then
    

  if test "$ext_shared" = "yes"; then
    DOMXML_SHARED_LIBADD="-lxsltbreakpoint $DOMXML_SHARED_LIBADD"
    if test -n "$DOMXML_DIR/lib"; then
      
  if test "$DOMXML_DIR/lib" != "/usr/lib"; then
    
  if test -z "$DOMXML_DIR/lib" || echo "$DOMXML_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$DOMXML_DIR/lib
  else
    
    ep_dir="`echo $DOMXML_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$DOMXML_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        DOMXML_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $DOMXML_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$DOMXML_DIR/lib"; then
    
  if test "$DOMXML_DIR/lib" != "/usr/lib"; then
    
  if test -z "$DOMXML_DIR/lib" || echo "$DOMXML_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$DOMXML_DIR/lib
  else
    
    ep_dir="`echo $DOMXML_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$DOMXML_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case xsltbreakpoint in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lxsltbreakpoint $LIBS" 
   ;;
  esac




  fi


  fi

  cat >> confdefs.h <<\EOF
#define HAVE_DOMXSLT 1
EOF

  
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST DOMXML_SHARED_LIBADD"

fi

if test "$PHP_DOM_EXSLT" != "no"; then
  if test "$PHP_DOM" = "no"; then
    { echo "configure: error: DOMEXSLT requires DOMXML. Use --with-dom=<DIR>" 1>&2; exit 1; }
  fi

  if test "$PHP_DOM_XSLT" = "no"; then
    { echo "configure: error: DOMEXSLT requires DOMXSLT. Use --with-dom-xslt=<DIR>" 1>&2; exit 1; }
  fi
  
  if test -r $PHP_DOM_EXSLT/include/libexslt/exslt.h; then
    DOMEXSLT_DIR=$PHP_DOM_EXSLT
  else
    for i in /usr/local /usr; do
      test -r $i/include/libexslt/exslt.h && DOMEXSLT_DIR=$i
    done
  fi

  if test -z "$DOMEXSLT_DIR"; then
    echo "$ac_t""not found" 1>&6
    { echo "configure: error: Please reinstall the libxslt >= 1.0.3 distribution" 1>&2; exit 1; }
  fi

  
  old_CPPFLAGS=$CPPFLAGS
  CPPFLAGS=-I$DOMEXSLT_DIR/include
  echo $ac_n "checking for libexslt version""... $ac_c" 1>&6
echo "configure:25343: checking for libexslt version" >&5
  cat > conftest.$ac_ext <<EOF
#line 25345 "configure"
#include "confdefs.h"

#include <libexslt/exsltconfig.h>
#if LIBEXSLT_VERSION >= 600
  yes
#endif
  
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  
    echo "$ac_t"">= 1.0.3" 1>&6
  
else
  rm -rf conftest*
  
    { echo "configure: error: libxslt version 1.0.3 or greater required." 1>&2; exit 1; }
  
fi
rm -f conftest*

  CPPFLAGS=$old_CPPFLAGS


  

  if test "$ext_shared" = "yes"; then
    DOMXML_SHARED_LIBADD="-lexslt $DOMXML_SHARED_LIBADD"
    if test -n "$DOMEXSLT_DIR/lib"; then
      
  if test "$DOMEXSLT_DIR/lib" != "/usr/lib"; then
    
  if test -z "$DOMEXSLT_DIR/lib" || echo "$DOMEXSLT_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$DOMEXSLT_DIR/lib
  else
    
    ep_dir="`echo $DOMEXSLT_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$DOMEXSLT_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        DOMXML_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $DOMXML_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$DOMEXSLT_DIR/lib"; then
    
  if test "$DOMEXSLT_DIR/lib" != "/usr/lib"; then
    
  if test -z "$DOMEXSLT_DIR/lib" || echo "$DOMEXSLT_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$DOMEXSLT_DIR/lib
  else
    
    ep_dir="`echo $DOMEXSLT_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$DOMEXSLT_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case exslt in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lexslt $LIBS" 
   ;;
  esac




  fi



  
  if test "$DOMEXSLT_DIR/include" != "/usr/include"; then
    
  if test -z "$DOMEXSLT_DIR/include" || echo "$DOMEXSLT_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$DOMEXSLT_DIR/include
  else
    
    ep_dir="`echo $DOMEXSLT_DIR/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$DOMEXSLT_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi


  cat >> confdefs.h <<\EOF
#define HAVE_DOMEXSLT 1
EOF


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST DOMXML_SHARED_LIBADD"


fi




echo $ac_n "checking whether to enable EXIF (metadata from images) support""... $ac_c" 1>&6
echo "configure:25515: checking whether to enable EXIF (metadata from images) support" >&5
# Check whether --enable-exif or --disable-exif was given.
if test "${enable_exif+set}" = set; then
  enableval="$enable_exif"
  PHP_EXIF=$enableval
else
  
  PHP_EXIF=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_EXIF=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_EXIF in
shared,*)
  PHP_EXIF=`echo "$PHP_EXIF"|sed 's/^shared,//'`
  ;;
shared)
  PHP_EXIF=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_EXIF" != "no"; then
  cat >> confdefs.h <<\EOF
#define HAVE_EXIF 1
EOF

  
  ext_builddir=ext/exif
  ext_srcdir=$abs_srcdir/ext/exif

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/exif in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/exif"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/exif/"; ac_bdir="ext/exif/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in exif.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC exif"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC exif"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/exif in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/exif"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/exif/"; ac_bdir="ext/exif/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in exif.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_exif="$shared_objects_exif $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/exif.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_exif"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/exif.la: $ext_builddir/exif.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/exif.la \$(phplibdir)

$ext_builddir/exif.la: \$(shared_objects_exif) \$(EXIF_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_exif) \$(EXIF_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_EXIF 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/exif in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/exif"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/exif/"; ac_bdir="ext/exif/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in exif.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC exif"
    else
      
  
  case ext/exif in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/exif"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/exif/"; ac_bdir="ext/exif/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in exif.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC exif"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


fi




echo $ac_n "checking for FrontBase SQL92 (fbsql) support""... $ac_c" 1>&6
echo "configure:25777: checking for FrontBase SQL92 (fbsql) support" >&5
# Check whether --with-fbsql or --without-fbsql was given.
if test "${with_fbsql+set}" = set; then
  withval="$with_fbsql"
  PHP_FBSQL=$withval
else
  
  PHP_FBSQL=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_FBSQL=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_FBSQL in
shared,*)
  PHP_FBSQL=`echo "$PHP_FBSQL"|sed 's/^shared,//'`
  ;;
shared)
  PHP_FBSQL=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_FBSQL" != "no"; then

  cat >> confdefs.h <<\EOF
#define HAVE_FBSQL 1
EOF

  
  ext_builddir=ext/fbsql
  ext_srcdir=$abs_srcdir/ext/fbsql

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/fbsql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/fbsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/fbsql/"; ac_bdir="ext/fbsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_fbsql.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC fbsql"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC fbsql"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/fbsql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/fbsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/fbsql/"; ac_bdir="ext/fbsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_fbsql.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_fbsql="$shared_objects_fbsql $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/fbsql.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_fbsql"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/fbsql.la: $ext_builddir/fbsql.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/fbsql.la \$(phplibdir)

$ext_builddir/fbsql.la: \$(shared_objects_fbsql) \$(FBSQL_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_fbsql) \$(FBSQL_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_FBSQL 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/fbsql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/fbsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/fbsql/"; ac_bdir="ext/fbsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_fbsql.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC fbsql"
    else
      
  
  case ext/fbsql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/fbsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/fbsql/"; ac_bdir="ext/fbsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_fbsql.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC fbsql"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"



  FBSQL_INSTALLATION_DIR=""
  if test "$PHP_FBSQL" = "yes"; then

    for i in /Local/Library /usr /usr/local /opt /Library /usr/lib; do
      if test -f $i/FrontBase/include/FBCAccess/FBCAccess.h; then
        FBSQL_INSTALLATION_DIR=$i/FrontBase
        break
      fi
    done

    if test -z "$FBSQL_INSTALLATION_DIR"; then
      { echo "configure: error: Cannot find FrontBase in known installation directories" 1>&2; exit 1; }
    fi

  elif test "$PHP_FBSQL" != "no"; then

    if test -f $PHP_FBSQL/include/FBCAccess/FBCAccess.h; then
      FBSQL_INSTALLATION_DIR=$PHP_FBSQL
    else
      { echo "configure: error: Directory $PHP_FBSQL is not a FrontBase installation directory" 1>&2; exit 1; }
    fi
  fi  

  if test ! -r "$FBSQL_INSTALLATION_DIR/lib/libFBCAccess.a"; then
     { echo "configure: error: Could not find $FBSQL_INSTALLATION_DIR/lib/libFBCAccess.a" 1>&2; exit 1; }
  fi

  

  if test "$ext_shared" = "yes"; then
    FBSQL_SHARED_LIBADD="-lFBCAccess $FBSQL_SHARED_LIBADD"
    if test -n "$FBSQL_INSTALLATION_DIR/lib"; then
      
  if test "$FBSQL_INSTALLATION_DIR/lib" != "/usr/lib"; then
    
  if test -z "$FBSQL_INSTALLATION_DIR/lib" || echo "$FBSQL_INSTALLATION_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$FBSQL_INSTALLATION_DIR/lib
  else
    
    ep_dir="`echo $FBSQL_INSTALLATION_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$FBSQL_INSTALLATION_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        FBSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $FBSQL_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$FBSQL_INSTALLATION_DIR/lib"; then
    
  if test "$FBSQL_INSTALLATION_DIR/lib" != "/usr/lib"; then
    
  if test -z "$FBSQL_INSTALLATION_DIR/lib" || echo "$FBSQL_INSTALLATION_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$FBSQL_INSTALLATION_DIR/lib
  else
    
    ep_dir="`echo $FBSQL_INSTALLATION_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$FBSQL_INSTALLATION_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case FBCAccess in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lFBCAccess $LIBS" 
   ;;
  esac




  fi


  
  if test "$FBSQL_INSTALLATION_DIR/include" != "/usr/include"; then
    
  if test -z "$FBSQL_INSTALLATION_DIR/include" || echo "$FBSQL_INSTALLATION_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$FBSQL_INSTALLATION_DIR/include
  else
    
    ep_dir="`echo $FBSQL_INSTALLATION_DIR/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$FBSQL_INSTALLATION_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST FBSQL_SHARED_LIBADD"

fi




echo $ac_n "checking for FDF support""... $ac_c" 1>&6
echo "configure:26198: checking for FDF support" >&5
# Check whether --with-fdftk or --without-fdftk was given.
if test "${with_fdftk+set}" = set; then
  withval="$with_fdftk"
  PHP_FDFTK=$withval
else
  
  PHP_FDFTK=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_FDFTK=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_FDFTK in
shared,*)
  PHP_FDFTK=`echo "$PHP_FDFTK"|sed 's/^shared,//'`
  ;;
shared)
  PHP_FDFTK=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_FDFTK" != "no"; then

  case $host_os in
    aix*)
      libtype=aix
    ;;
    solaris* )
      libtype=solaris
    ;;
    linux*)
      libtype=linux
    ;;
    *)
      { echo "configure: error: The fdf toolkit is not available for $host_os." 1>&2; exit 1; }
    ;;
  esac

  if test "$PHP_FDFTK" = "yes"; then 
    PHP_FDFTK="/usr /usr/local ../FDFToolkitForUNIX ext/fdf/FDFToolkitForUNIX ../fdftk ext/fdf/fdftk"
  fi

  for dir in $PHP_FDFTK; do
    for subdir in include HeadersAndLibraries/headers; do
      if test -r $dir/$subdir/FdfTk.h; then
        FDFTK_DIR=$dir
        FDFTK_H_DIR=$dir/$subdir
        break 2
      elif test -r $dir/$subdir/fdftk.h; then
        cat >> confdefs.h <<\EOF
#define HAVE_FDFTK_H_LOWER 1
EOF

        FDFTK_DIR=$dir
        FDFTK_H_DIR=$dir/$subdir
        break 2
      fi
    done
  done

  if test -z "$FDFTK_DIR"; then
    { echo "configure: error: FdfTk.h or fdftk.h not found. Please reinstall the fdf toolkit." 1>&2; exit 1; }
  fi

  
  if test "$FDFTK_H_DIR" != "/usr/include"; then
    
  if test -z "$FDFTK_H_DIR" || echo "$FDFTK_H_DIR" | grep '^/' >/dev/null ; then
    ai_p=$FDFTK_H_DIR
  else
    
    ep_dir="`echo $FDFTK_H_DIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$FDFTK_H_DIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi


  FDFLIBRARY=""
  for file in fdftk FdfTk; do
    for dir in $FDFTK_DIR/lib $FDFTK_DIR/HeadersAndLibraries/$libtype/C; do
      if test -r $dir/lib$file.so; then
        
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="-L$dir -lm $LDFLAGS"
  echo $ac_n "checking for FDFOpen in -l$file""... $ac_c" 1>&6
echo "configure:26324: checking for FDFOpen in -l$file" >&5
ac_lib_var=`echo $file'_'FDFOpen | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$file  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 26332 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char FDFOpen();

int main() {
FDFOpen()
; return 0; }
EOF
if { (eval echo configure:26343: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    FDFLIBRARY=$file
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_$file
    
  
fi

        if test "$FDFLIBRARY"; then
          
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="-L$dir -lm $LDFLAGS"
  echo $ac_n "checking for FDFGetFDFVersion in -l$file""... $ac_c" 1>&6
echo "configure:26376: checking for FDFGetFDFVersion in -l$file" >&5
ac_lib_var=`echo $file'_'FDFGetFDFVersion | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$file  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 26384 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char FDFGetFDFVersion();

int main() {
FDFGetFDFVersion()
; return 0; }
EOF
if { (eval echo configure:26395: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    cat >> confdefs.h <<\EOF
#define HAVE_FDFTK_5 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_$file
    
  
fi

          FDFTK_LIB_DIR=$dir
          break 2
        fi
      fi
    done
  done

  if test -z "$FDFLIBRARY"; then
    { echo "configure: error: no usable fdf library found" 1>&2; exit 1; }
  fi

  

  if test "$ext_shared" = "yes"; then
    FDFTK_SHARED_LIBADD="-l$FDFLIBRARY $FDFTK_SHARED_LIBADD"
    if test -n "$FDFTK_LIB_DIR"; then
      
  if test "$FDFTK_LIB_DIR" != "/usr/lib"; then
    
  if test -z "$FDFTK_LIB_DIR" || echo "$FDFTK_LIB_DIR" | grep '^/' >/dev/null ; then
    ai_p=$FDFTK_LIB_DIR
  else
    
    ep_dir="`echo $FDFTK_LIB_DIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$FDFTK_LIB_DIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        FDFTK_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $FDFTK_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$FDFTK_LIB_DIR"; then
    
  if test "$FDFTK_LIB_DIR" != "/usr/lib"; then
    
  if test -z "$FDFTK_LIB_DIR" || echo "$FDFTK_LIB_DIR" | grep '^/' >/dev/null ; then
    ai_p=$FDFTK_LIB_DIR
  else
    
    ep_dir="`echo $FDFTK_LIB_DIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$FDFTK_LIB_DIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case $FDFLIBRARY in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$FDFLIBRARY $LIBS" 
   ;;
  esac




  fi



  
  ext_builddir=ext/fdf
  ext_srcdir=$abs_srcdir/ext/fdf

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/fdf in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/fdf"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/fdf/"; ac_bdir="ext/fdf/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in fdf.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC fdf"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC fdf"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/fdf in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/fdf"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/fdf/"; ac_bdir="ext/fdf/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in fdf.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_fdf="$shared_objects_fdf $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/fdf.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_fdf"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/fdf.la: $ext_builddir/fdf.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/fdf.la \$(phplibdir)

$ext_builddir/fdf.la: \$(shared_objects_fdf) \$(FDF_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_fdf) \$(FDF_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_FDF 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/fdf in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/fdf"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/fdf/"; ac_bdir="ext/fdf/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in fdf.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC fdf"
    else
      
  
  case ext/fdf in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/fdf"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/fdf/"; ac_bdir="ext/fdf/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in fdf.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC fdf"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST FDFTK_SHARED_LIBADD"

  cat >> confdefs.h <<\EOF
#define HAVE_FDFLIB 1
EOF

fi


# Check whether --with-filepro or --without-filepro was given.
if test "${with_filepro+set}" = set; then
  withval="$with_filepro"
  enable_filepro=$withval
fi




echo $ac_n "checking whether to enable the bundled filePro support""... $ac_c" 1>&6
echo "configure:26762: checking whether to enable the bundled filePro support" >&5
# Check whether --enable-filepro or --disable-filepro was given.
if test "${enable_filepro+set}" = set; then
  enableval="$enable_filepro"
  PHP_FILEPRO=$enableval
else
  
  PHP_FILEPRO=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_FILEPRO=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_FILEPRO in
shared,*)
  PHP_FILEPRO=`echo "$PHP_FILEPRO"|sed 's/^shared,//'`
  ;;
shared)
  PHP_FILEPRO=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_FILEPRO" = "yes"; then
  cat >> confdefs.h <<\EOF
#define HAVE_FILEPRO 1
EOF

  
  ext_builddir=ext/filepro
  ext_srcdir=$abs_srcdir/ext/filepro

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/filepro in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/filepro"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/filepro/"; ac_bdir="ext/filepro/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in filepro.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC filepro"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC filepro"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/filepro in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/filepro"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/filepro/"; ac_bdir="ext/filepro/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in filepro.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_filepro="$shared_objects_filepro $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/filepro.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_filepro"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/filepro.la: $ext_builddir/filepro.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/filepro.la \$(phplibdir)

$ext_builddir/filepro.la: \$(shared_objects_filepro) \$(FILEPRO_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_filepro) \$(FILEPRO_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_FILEPRO 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/filepro in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/filepro"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/filepro/"; ac_bdir="ext/filepro/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in filepro.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC filepro"
    else
      
  
  case ext/filepro in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/filepro"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/filepro/"; ac_bdir="ext/filepro/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in filepro.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC filepro"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


fi




echo $ac_n "checking for FriBidi support""... $ac_c" 1>&6
echo "configure:27024: checking for FriBidi support" >&5
# Check whether --with-fribidi or --without-fribidi was given.
if test "${with_fribidi+set}" = set; then
  withval="$with_fribidi"
  PHP_FRIBIDI=$withval
else
  
  PHP_FRIBIDI=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_FRIBIDI=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_FRIBIDI in
shared,*)
  PHP_FRIBIDI=`echo "$PHP_FRIBIDI"|sed 's/^shared,//'`
  ;;
shared)
  PHP_FRIBIDI=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_FRIBIDI" != "no"; then

  if test "$PHP_FRIBIDI" = "yes"; then
    # Extract the first word of "fribidi-config", so it can be a program name with args.
set dummy fribidi-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:27073: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_FRIBIDI_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$FRIBIDI_CONFIG" in
  /*)
  ac_cv_path_FRIBIDI_CONFIG="$FRIBIDI_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_FRIBIDI_CONFIG="$FRIBIDI_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="/usr/local/bin:$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_FRIBIDI_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
fi
FRIBIDI_CONFIG="$ac_cv_path_FRIBIDI_CONFIG"
if test -n "$FRIBIDI_CONFIG"; then
  echo "$ac_t""$FRIBIDI_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  else
    FRIBIDI_CONFIG="$PHP_FRIBIDI/bin/fribidi-config"
  fi

    echo $ac_n "checking for FriBidi version""... $ac_c" 1>&6
echo "configure:27110: checking for FriBidi version" >&5

  if test ! -x "$FRIBIDI_CONFIG"; then
    { echo "configure: error: fribidi-config not found." 1>&2; exit 1; }
  fi

  fribidi_version_full=`$FRIBIDI_CONFIG --version`
  fribidi_version=`echo ${fribidi_version_full} | awk 'BEGIN { FS = "."; } { printf "%d", ($1 * 1000 + $2) * 1000 + $3;}'`

  if test "$fribidi_version" -ge 10004; then
    echo "$ac_t""$fribidi_version_full" 1>&6
  else
    { echo "configure: error: FriBidi version 0.10.4 or later required." 1>&2; exit 1; }
  fi

    FRIBIDI_LIBS=`$FRIBIDI_CONFIG --libs`
  FRIBIDI_INCS=`$FRIBIDI_CONFIG --cflags`
  
  if  test -n "$FRIBIDI_INCS" && test -n "$FRIBIDI_LIBS"; then
    
  for ac_i in $FRIBIDI_INCS; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/include"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    ;;
    esac
  done

    
  for ac_i in $FRIBIDI_LIBS; do
    case $ac_i in
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        FRIBIDI_SHARED_LIBADD="$FRIBIDI_SHARED_LIBADD -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        FRIBIDI_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $FRIBIDI_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done


    
  ext_builddir=ext/fribidi
  ext_srcdir=$abs_srcdir/ext/fribidi

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/fribidi in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/fribidi"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/fribidi/"; ac_bdir="ext/fribidi/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in fribidi.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC fribidi"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC fribidi"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/fribidi in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/fribidi"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/fribidi/"; ac_bdir="ext/fribidi/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in fribidi.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_fribidi="$shared_objects_fribidi $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/fribidi.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_fribidi"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/fribidi.la: $ext_builddir/fribidi.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/fribidi.la \$(phplibdir)

$ext_builddir/fribidi.la: \$(shared_objects_fribidi) \$(FRIBIDI_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_fribidi) \$(FRIBIDI_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_FRIBIDI 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/fribidi in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/fribidi"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/fribidi/"; ac_bdir="ext/fribidi/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in fribidi.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC fribidi"
    else
      
  
  case ext/fribidi in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/fribidi"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/fribidi/"; ac_bdir="ext/fribidi/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in fribidi.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC fribidi"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


    
  PHP_VAR_SUBST="$PHP_VAR_SUBST FRIBIDI_SHARED_LIBADD"

    cat >> confdefs.h <<\EOF
#define HAVE_FRIBIDI 1
EOF

  else
    { echo "configure: error: Could not find the required paths. Please check your FriBidi installation." 1>&2; exit 1; }
  fi
fi




echo $ac_n "checking whether to enable FTP support""... $ac_c" 1>&6
echo "configure:27466: checking whether to enable FTP support" >&5
# Check whether --enable-ftp or --disable-ftp was given.
if test "${enable_ftp+set}" = set; then
  enableval="$enable_ftp"
  PHP_FTP=$enableval
else
  
  PHP_FTP=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_FTP=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_FTP in
shared,*)
  PHP_FTP=`echo "$PHP_FTP"|sed 's/^shared,//'`
  ;;
shared)
  PHP_FTP=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_FTP" = "yes"; then
  cat >> confdefs.h <<\EOF
#define HAVE_FTP 1
EOF

  
  ext_builddir=ext/ftp
  ext_srcdir=$abs_srcdir/ext/ftp

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/ftp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ftp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ftp/"; ac_bdir="ext/ftp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_ftp.c ftp.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC ftp"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC ftp"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/ftp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ftp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ftp/"; ac_bdir="ext/ftp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_ftp.c ftp.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_ftp="$shared_objects_ftp $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/ftp.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_ftp"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/ftp.la: $ext_builddir/ftp.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/ftp.la \$(phplibdir)

$ext_builddir/ftp.la: \$(shared_objects_ftp) \$(FTP_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_ftp) \$(FTP_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_FTP 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/ftp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ftp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ftp/"; ac_bdir="ext/ftp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_ftp.c ftp.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC ftp"
    else
      
  
  case ext/ftp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ftp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ftp/"; ac_bdir="ext/ftp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_ftp.c ftp.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC ftp"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


fi





echo $ac_n "checking for GD support""... $ac_c" 1>&6
echo "configure:27729: checking for GD support" >&5
# Check whether --with-gd or --without-gd was given.
if test "${with_gd+set}" = set; then
  withval="$with_gd"
  PHP_GD=$withval
else
  
  PHP_GD=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_GD=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_GD in
shared,*)
  PHP_GD=`echo "$PHP_GD"|sed 's/^shared,//'`
  ;;
shared)
  PHP_GD=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test -z "$PHP_JPEG_DIR"; then
  

echo $ac_n "checking for the location of libjpeg""... $ac_c" 1>&6
echo "configure:27776: checking for the location of libjpeg" >&5
# Check whether --with-jpeg-dir or --without-jpeg-dir was given.
if test "${with_jpeg_dir+set}" = set; then
  withval="$with_jpeg_dir"
  PHP_JPEG_DIR=$withval
else
  
  PHP_JPEG_DIR=no

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_JPEG_DIR=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_JPEG_DIR
echo "$ac_t""$ext_output" 1>&6



fi

if test -z "$PHP_PNG_DIR"; then
  

echo $ac_n "checking for the location of libpng""... $ac_c" 1>&6
echo "configure:27803: checking for the location of libpng" >&5
# Check whether --with-png-dir or --without-png-dir was given.
if test "${with_png_dir+set}" = set; then
  withval="$with_png_dir"
  PHP_PNG_DIR=$withval
else
  
  PHP_PNG_DIR=no

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_PNG_DIR=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_PNG_DIR
echo "$ac_t""$ext_output" 1>&6



fi

if test -z "$PHP_ZLIB_DIR"; then
  

echo $ac_n "checking for the location of libz""... $ac_c" 1>&6
echo "configure:27830: checking for the location of libz" >&5
# Check whether --with-zlib-dir or --without-zlib-dir was given.
if test "${with_zlib_dir+set}" = set; then
  withval="$with_zlib_dir"
  PHP_ZLIB_DIR=$withval
else
  
  PHP_ZLIB_DIR=no

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_ZLIB_DIR=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_ZLIB_DIR
echo "$ac_t""$ext_output" 1>&6



fi



echo $ac_n "checking for the location of libXpm""... $ac_c" 1>&6
echo "configure:27856: checking for the location of libXpm" >&5
# Check whether --with-xpm-dir or --without-xpm-dir was given.
if test "${with_xpm_dir+set}" = set; then
  withval="$with_xpm_dir"
  PHP_XPM_DIR=$withval
else
  
  PHP_XPM_DIR=no

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_XPM_DIR=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_XPM_DIR
echo "$ac_t""$ext_output" 1>&6






echo $ac_n "checking for FreeType 1.x support""... $ac_c" 1>&6
echo "configure:27881: checking for FreeType 1.x support" >&5
# Check whether --with-ttf or --without-ttf was given.
if test "${with_ttf+set}" = set; then
  withval="$with_ttf"
  PHP_TTF=$withval
else
  
  PHP_TTF=no

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_TTF=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_TTF
echo "$ac_t""$ext_output" 1>&6



  


echo $ac_n "checking for FreeType 2""... $ac_c" 1>&6
echo "configure:27906: checking for FreeType 2" >&5
# Check whether --with-freetype-dir or --without-freetype-dir was given.
if test "${with_freetype_dir+set}" = set; then
  withval="$with_freetype_dir"
  PHP_FREETYPE_DIR=$withval
else
  
  PHP_FREETYPE_DIR=no

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_FREETYPE_DIR=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_FREETYPE_DIR
echo "$ac_t""$ext_output" 1>&6






echo $ac_n "checking for T1lib support""... $ac_c" 1>&6
echo "configure:27931: checking for T1lib support" >&5
# Check whether --with-t1lib or --without-t1lib was given.
if test "${with_t1lib+set}" = set; then
  withval="$with_t1lib"
  PHP_T1LIB=$withval
else
  
  PHP_T1LIB=no

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_T1LIB=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_T1LIB
echo "$ac_t""$ext_output" 1>&6






echo $ac_n "checking whether to enable truetype string function in GD""... $ac_c" 1>&6
echo "configure:27956: checking whether to enable truetype string function in GD" >&5
# Check whether --enable-gd-native-ttf or --disable-gd-native-ttf was given.
if test "${enable_gd_native_ttf+set}" = set; then
  enableval="$enable_gd_native_ttf"
  PHP_GD_NATIVE_TTF=$enableval
else
  
  PHP_GD_NATIVE_TTF=no

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_GD_NATIVE_TTF=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_GD_NATIVE_TTF
echo "$ac_t""$ext_output" 1>&6






echo $ac_n "checking whether to enable JIS-mapped Japanese font support in GD""... $ac_c" 1>&6
echo "configure:27981: checking whether to enable JIS-mapped Japanese font support in GD" >&5
# Check whether --enable-gd-jis-conv or --disable-gd-jis-conv was given.
if test "${enable_gd_jis_conv+set}" = set; then
  enableval="$enable_gd_jis_conv"
  PHP_GD_JIS_CONV=$enableval
else
  
  PHP_GD_JIS_CONV=no

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_GD_JIS_CONV=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_GD_JIS_CONV
echo "$ac_t""$ext_output" 1>&6
























if test "$PHP_GD" = "yes"; then
  GD_MODULE_TYPE=builtin
  extra_sources="libgd/gd.c libgd/gd_gd.c libgd/gd_gd2.c libgd/gd_io.c libgd/gd_io_dp.c \
                 libgd/gd_io_file.c libgd/gd_ss.c libgd/gd_io_ss.c libgd/gd_png.c libgd/gd_jpeg.c \
                 libgd/gdxpm.c libgd/gdfontt.c libgd/gdfonts.c libgd/gdfontmb.c libgd/gdfontl.c \
                 libgd/gdfontg.c libgd/gdtables.c libgd/gdft.c libgd/gdcache.c libgd/gdkanji.c \
                 libgd/wbmp.c libgd/gd_wbmp.c libgd/gdhelpers.c libgd/gd_topal.c libgd/gd_gif_in.c \
                 libgd/xbm.c"

  for ac_func in fabsf floorf
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:28035: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 28040 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:28063: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


  test "$PHP_PNG_DIR" = "no" && PHP_PNG_DIR=yes
      
  
  if test "$PHP_GD_NATIVE_TTF" = "yes"; then
    cat >> confdefs.h <<\EOF
#define USE_GD_IMGSTRTTF 1
EOF

  fi

  
  if test "$PHP_GD_JIS_CONV" = "yes"; then
    USE_GD_JIS_CONV=1
  fi

  
  if test "$PHP_JPEG_DIR" != "no"; then

    for i in /usr /usr/local $PHP_JPEG_DIR; do
      test -f $i/lib/libjpeg.$SHLIB_SUFFIX_NAME -o -f $i/lib/libjpeg.a && GD_JPEG_DIR=$i
    done

    if test -z "$GD_JPEG_DIR"; then
      { echo "configure: error: libjpeg.(a|so) not found." 1>&2; exit 1; }
    fi

    
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
      -L$GD_JPEG_DIR/lib
     $LDFLAGS"
  echo $ac_n "checking for jpeg_read_header in -ljpeg""... $ac_c" 1>&6
echo "configure:28120: checking for jpeg_read_header in -ljpeg" >&5
ac_lib_var=`echo jpeg'_'jpeg_read_header | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ljpeg  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 28128 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char jpeg_read_header();

int main() {
jpeg_read_header()
; return 0; }
EOF
if { (eval echo configure:28139: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
      
  if test "$GD_JPEG_DIR/include" != "/usr/include"; then
    
  if test -z "$GD_JPEG_DIR/include" || echo "$GD_JPEG_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$GD_JPEG_DIR/include
  else
    
    ep_dir="`echo $GD_JPEG_DIR/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_JPEG_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      

  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-ljpeg $GD_SHARED_LIBADD"
    if test -n "$GD_JPEG_DIR/lib"; then
      
  if test "$GD_JPEG_DIR/lib" != "/usr/lib"; then
    
  if test -z "$GD_JPEG_DIR/lib" || echo "$GD_JPEG_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$GD_JPEG_DIR/lib
  else
    
    ep_dir="`echo $GD_JPEG_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_JPEG_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $GD_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$GD_JPEG_DIR/lib"; then
    
  if test "$GD_JPEG_DIR/lib" != "/usr/lib"; then
    
  if test -z "$GD_JPEG_DIR/lib" || echo "$GD_JPEG_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$GD_JPEG_DIR/lib
  else
    
    ep_dir="`echo $GD_JPEG_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_JPEG_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case jpeg in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-ljpeg $LIBS" 
   ;;
  esac




  fi


    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_jpeg
    
      { echo "configure: error: Problem with libjpeg.(a|so). Please check config.log for more information." 1>&2; exit 1; } 
    
  
fi

  else 
    echo "$ac_t""If configure fails try --with-jpeg-dir=<DIR>" 1>&6
  fi

  
  if test "$PHP_PNG_DIR" != "no"; then

    for i in /usr /usr/local $PHP_PNG_DIR; do
      test -f $i/lib/libpng.$SHLIB_SUFFIX_NAME -o -f $i/lib/libpng.a && GD_PNG_DIR=$i
    done

    if test -z "$GD_PNG_DIR"; then
      { echo "configure: error: libpng.(a|so) not found." 1>&2; exit 1; }
    fi

    if test "$PHP_ZLIB_DIR" = "no"; then
      { echo "configure: error: PNG support requires ZLIB. Use --with-zlib-dir=<DIR>" 1>&2; exit 1; }
    fi

    if test ! -f $GD_PNG_DIR/include/png.h; then
      { echo "configure: error: png.h not found." 1>&2; exit 1; }
    fi

    
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
      -L$PHP_ZLIB_DIR/lib -lz -L$GD_PNG_DIR/lib
     $LDFLAGS"
  echo $ac_n "checking for png_write_image in -lpng""... $ac_c" 1>&6
echo "configure:28326: checking for png_write_image in -lpng" >&5
ac_lib_var=`echo png'_'png_write_image | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpng  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 28334 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char png_write_image();

int main() {
png_write_image()
; return 0; }
EOF
if { (eval echo configure:28345: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
      
  if test "$GD_PNG_DIR/include" != "/usr/include"; then
    
  if test -z "$GD_PNG_DIR/include" || echo "$GD_PNG_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$GD_PNG_DIR/include
  else
    
    ep_dir="`echo $GD_PNG_DIR/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_PNG_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      

  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lz $GD_SHARED_LIBADD"
    if test -n "$PHP_ZLIB_DIR/lib"; then
      
  if test "$PHP_ZLIB_DIR/lib" != "/usr/lib"; then
    
  if test -z "$PHP_ZLIB_DIR/lib" || echo "$PHP_ZLIB_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ZLIB_DIR/lib
  else
    
    ep_dir="`echo $PHP_ZLIB_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $GD_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$PHP_ZLIB_DIR/lib"; then
    
  if test "$PHP_ZLIB_DIR/lib" != "/usr/lib"; then
    
  if test -z "$PHP_ZLIB_DIR/lib" || echo "$PHP_ZLIB_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ZLIB_DIR/lib
  else
    
    ep_dir="`echo $PHP_ZLIB_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case z in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lz $LIBS" 
   ;;
  esac




  fi


      

  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lpng $GD_SHARED_LIBADD"
    if test -n "$GD_PNG_DIR/lib"; then
      
  if test "$GD_PNG_DIR/lib" != "/usr/lib"; then
    
  if test -z "$GD_PNG_DIR/lib" || echo "$GD_PNG_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$GD_PNG_DIR/lib
  else
    
    ep_dir="`echo $GD_PNG_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_PNG_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $GD_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$GD_PNG_DIR/lib"; then
    
  if test "$GD_PNG_DIR/lib" != "/usr/lib"; then
    
  if test -z "$GD_PNG_DIR/lib" || echo "$GD_PNG_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$GD_PNG_DIR/lib
  else
    
    ep_dir="`echo $GD_PNG_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_PNG_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case png in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lpng $LIBS" 
   ;;
  esac




  fi


    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_png
    
      { echo "configure: error: Problem with libpng.(a|so) or libz.(a|so). Please check config.log for more information." 1>&2; exit 1; } 
    
  
fi


  else 
    echo "$ac_t""If configure fails try --with-png-dir=<DIR> and --with-zlib-dir=<DIR>" 1>&6
  fi

  
  if test "$PHP_XPM_DIR" != "no"; then

    for i in /usr /usr/local /usr/X11R6 $PHP_XPM_DIR; do
      test -f $i/lib/libXpm.$SHLIB_SUFFIX_NAME -o -f $i/lib/libXpm.a && GD_XPM_DIR=$i
    done

    if test -z "$GD_XPM_DIR"; then
      { echo "configure: error: libXpm.(a|so) not found." 1>&2; exit 1; }
    fi

    for i in include include/X11; do
      test -f $GD_XPM_DIR/$i/xpm.h && GD_XPM_INC=$GD_XPM_DIR/include
    done

    if test -z "$GD_XPM_INC"; then
      { echo "configure: error: xpm.h not found." 1>&2; exit 1; }
    fi

    
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
      -L$GD_XPM_DIR/lib -lX11
     $LDFLAGS"
  echo $ac_n "checking for XpmFreeXpmImage in -lXpm""... $ac_c" 1>&6
echo "configure:28629: checking for XpmFreeXpmImage in -lXpm" >&5
ac_lib_var=`echo Xpm'_'XpmFreeXpmImage | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lXpm  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 28637 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XpmFreeXpmImage();

int main() {
XpmFreeXpmImage()
; return 0; }
EOF
if { (eval echo configure:28648: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
      
  if test "$GD_XPM_INC" != "/usr/include"; then
    
  if test -z "$GD_XPM_INC" || echo "$GD_XPM_INC" | grep '^/' >/dev/null ; then
    ai_p=$GD_XPM_INC
  else
    
    ep_dir="`echo $GD_XPM_INC|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_XPM_INC\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      

  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lXpm $GD_SHARED_LIBADD"
    if test -n "$GD_XPM_DIR/lib"; then
      
  if test "$GD_XPM_DIR/lib" != "/usr/lib"; then
    
  if test -z "$GD_XPM_DIR/lib" || echo "$GD_XPM_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$GD_XPM_DIR/lib
  else
    
    ep_dir="`echo $GD_XPM_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_XPM_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $GD_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$GD_XPM_DIR/lib"; then
    
  if test "$GD_XPM_DIR/lib" != "/usr/lib"; then
    
  if test -z "$GD_XPM_DIR/lib" || echo "$GD_XPM_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$GD_XPM_DIR/lib
  else
    
    ep_dir="`echo $GD_XPM_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_XPM_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case Xpm in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lXpm $LIBS" 
   ;;
  esac




  fi


      

  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lX11 $GD_SHARED_LIBADD"
    if test -n "$GD_XPM_DIR/lib"; then
      
  if test "$GD_XPM_DIR/lib" != "/usr/lib"; then
    
  if test -z "$GD_XPM_DIR/lib" || echo "$GD_XPM_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$GD_XPM_DIR/lib
  else
    
    ep_dir="`echo $GD_XPM_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_XPM_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $GD_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$GD_XPM_DIR/lib"; then
    
  if test "$GD_XPM_DIR/lib" != "/usr/lib"; then
    
  if test -z "$GD_XPM_DIR/lib" || echo "$GD_XPM_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$GD_XPM_DIR/lib
  else
    
    ep_dir="`echo $GD_XPM_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_XPM_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case X11 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lX11 $LIBS" 
   ;;
  esac




  fi


    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_Xpm
    
      { echo "configure: error: Problem with libXpm.(a|so) or libX11.(a|so). Please check config.log for more information." 1>&2; exit 1; } 
    
  
fi

  else 
    echo "$ac_t""If configure fails try --with-xpm-dir=<DIR>" 1>&6
  fi

  
  if test "$PHP_FREETYPE_DIR" != "no"; then

    for i in /usr /usr/local $PHP_FREETYPE_DIR; do
      if test -f "$i/include/freetype2/freetype/freetype.h"; then
        FREETYPE2_DIR=$i
        FREETYPE2_INC_DIR=$i/include/freetype2
      fi
    done
    
    if test -n "$FREETYPE2_DIR" ; then
      

  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lfreetype $GD_SHARED_LIBADD"
    if test -n "$FREETYPE2_DIR/lib"; then
      
  if test "$FREETYPE2_DIR/lib" != "/usr/lib"; then
    
  if test -z "$FREETYPE2_DIR/lib" || echo "$FREETYPE2_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$FREETYPE2_DIR/lib
  else
    
    ep_dir="`echo $FREETYPE2_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$FREETYPE2_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $GD_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$FREETYPE2_DIR/lib"; then
    
  if test "$FREETYPE2_DIR/lib" != "/usr/lib"; then
    
  if test -z "$FREETYPE2_DIR/lib" || echo "$FREETYPE2_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$FREETYPE2_DIR/lib
  else
    
    ep_dir="`echo $FREETYPE2_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$FREETYPE2_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case freetype in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lfreetype $LIBS" 
   ;;
  esac




  fi


      
  if test "$FREETYPE2_DIR/include" != "/usr/include"; then
    
  if test -z "$FREETYPE2_DIR/include" || echo "$FREETYPE2_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$FREETYPE2_DIR/include
  else
    
    ep_dir="`echo $FREETYPE2_DIR/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$FREETYPE2_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      
  if test "$FREETYPE2_INC_DIR" != "/usr/include"; then
    
  if test -z "$FREETYPE2_INC_DIR" || echo "$FREETYPE2_INC_DIR" | grep '^/' >/dev/null ; then
    ai_p=$FREETYPE2_INC_DIR
  else
    
    ep_dir="`echo $FREETYPE2_INC_DIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$FREETYPE2_INC_DIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      cat >> confdefs.h <<\EOF
#define USE_GD_IMGSTRTTF 1
EOF

      cat >> confdefs.h <<\EOF
#define HAVE_LIBFREETYPE 1
EOF

    else
      { echo "configure: error: freetype2 not found!" 1>&2; exit 1; }
    fi
  else 
    echo "$ac_t""If configure fails try --with-freetype-dir=<DIR>" 1>&6
  fi

  
  if test "$PHP_TTF" != "no"; then
    if test "$PHP_FREETYPE_DIR" = "no" -o "$PHP_FREETYPE_DIR" = ""; then
      if test -n "$PHP_TTF" ; then
        for i in /usr /usr/local $PHP_TTF; do
          if test -f "$i/include/freetype.h" ; then
            TTF_DIR=$i
            unset TTF_INC_DIR
          fi
          if test -f "$i/include/freetype/freetype.h"; then
            TTF_DIR=$i
            TTF_INC_DIR=$i/include/freetype
          fi
          if test -f "$i/include/freetype1/freetype/freetype.h"; then
            TTF_DIR=$i
            TTF_INC_DIR=$i/include/freetype1/freetype
          fi
        done
      fi
      if test -n "$TTF_DIR" ; then
        cat >> confdefs.h <<\EOF
#define HAVE_LIBTTF 1
EOF

        

  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lttf $GD_SHARED_LIBADD"
    if test -n "$TTF_DIR/lib"; then
      
  if test "$TTF_DIR/lib" != "/usr/lib"; then
    
  if test -z "$TTF_DIR/lib" || echo "$TTF_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$TTF_DIR/lib
  else
    
    ep_dir="`echo $TTF_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$TTF_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $GD_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$TTF_DIR/lib"; then
    
  if test "$TTF_DIR/lib" != "/usr/lib"; then
    
  if test -z "$TTF_DIR/lib" || echo "$TTF_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$TTF_DIR/lib
  else
    
    ep_dir="`echo $TTF_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$TTF_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case ttf in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lttf $LIBS" 
   ;;
  esac




  fi


      fi
      if test -z "$TTF_INC_DIR"; then
        TTF_INC_DIR=$TTF_DIR/include
      fi
      
  if test "$TTF_INC_DIR" != "/usr/include"; then
    
  if test -z "$TTF_INC_DIR" || echo "$TTF_INC_DIR" | grep '^/' >/dev/null ; then
    ai_p=$TTF_INC_DIR
  else
    
    ep_dir="`echo $TTF_INC_DIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$TTF_INC_DIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    else
      echo "$ac_t""no - FreeType 2.x is to be used instead" 1>&6
    fi
  fi

  
  if test "$PHP_T1LIB" != "no"; then

    for i in /usr /usr/local $PHP_T1LIB; do
      test -f "$i/include/t1lib.h" && GD_T1_DIR=$i
    done

    if test -z "$GD_T1_DIR"; then
      { echo "configure: error: Your t1lib distribution is not installed correctly. Please reinstall it." 1>&2; exit 1; } 
    fi

    
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
      -L$GD_T1_DIR/lib
     $LDFLAGS"
  echo $ac_n "checking for T1_LoadFont in -lt1""... $ac_c" 1>&6
echo "configure:29267: checking for T1_LoadFont in -lt1" >&5
ac_lib_var=`echo t1'_'T1_LoadFont | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lt1  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 29275 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char T1_LoadFont();

int main() {
T1_LoadFont()
; return 0; }
EOF
if { (eval echo configure:29286: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
      cat >> confdefs.h <<\EOF
#define HAVE_LIBT1 1
EOF

      
  if test "$GD_T1_DIR/include" != "/usr/include"; then
    
  if test -z "$GD_T1_DIR/include" || echo "$GD_T1_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$GD_T1_DIR/include
  else
    
    ep_dir="`echo $GD_T1_DIR/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_T1_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      

  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lt1 $GD_SHARED_LIBADD"
    if test -n "$GD_T1_DIR/lib"; then
      
  if test "$GD_T1_DIR/lib" != "/usr/lib"; then
    
  if test -z "$GD_T1_DIR/lib" || echo "$GD_T1_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$GD_T1_DIR/lib
  else
    
    ep_dir="`echo $GD_T1_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_T1_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $GD_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$GD_T1_DIR/lib"; then
    
  if test "$GD_T1_DIR/lib" != "/usr/lib"; then
    
  if test -z "$GD_T1_DIR/lib" || echo "$GD_T1_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$GD_T1_DIR/lib
  else
    
    ep_dir="`echo $GD_T1_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_T1_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case t1 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lt1 $LIBS" 
   ;;
  esac




  fi


    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_t1
    
      { echo "configure: error: Problem with libt1.(a|so). Please check config.log for more information." 1>&2; exit 1; } 
    
  
fi

  fi


  cat >> confdefs.h <<\EOF
#define HAVE_LIBGD 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_LIBGD13 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_LIBGD15 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_LIBGD20 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_LIBGD204 1
EOF
  
  cat >> confdefs.h <<\EOF
#define HAVE_GD_IMAGESETTILE 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_GD_IMAGESETBRUSH 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_GDIMAGECOLORRESOLVE 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_COLORCLOSESTHWB 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_GD_WBMP 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_GD_GD2 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_GD_PNG 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_GD_XBM 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_GD_BUNDLED 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_GD_GIF_READ 1
EOF


  GDLIB_CFLAGS="-DHAVE_LIBPNG"


  if test -n "$GD_JPEG_DIR"; then
    cat >> confdefs.h <<\EOF
#define HAVE_GD_JPG 1
EOF

    GDLIB_CFLAGS="$GDLIB_CFLAGS -DHAVE_LIBJPEG"
  fi

  if test -n "$GD_XPM_DIR"; then
    cat >> confdefs.h <<\EOF
#define HAVE_GD_XPM 1
EOF

    GDLIB_CFLAGS="$GDLIB_CFLAGS -DHAVE_XPM"
  fi
  
  if test -n "$FREETYPE2_DIR"; then
    cat >> confdefs.h <<\EOF
#define HAVE_GD_STRINGFT 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_GD_STRINGFTEX 1
EOF

    GDLIB_CFLAGS="$GDLIB_CFLAGS -DHAVE_LIBFREETYPE"
  fi

  if test -n "$TTF_DIR"; then
    GDLIB_CFLAGS="$GDLIB_CFLAGS -DHAVE_LIBTTF"
  fi

  if test -n "$USE_GD_JIS_CONV"; then
    cat >> confdefs.h <<\EOF
#define USE_GD_JISX0208 1
EOF

    GDLIB_CFLAGS="$GDLIB_CFLAGS -DJISX0208"
  fi

else

 if test "$PHP_GD" != "no"; then
  GD_MODULE_TYPE=external
  extra_sources="gdcache.c"

  
  if test "$PHP_GD_NATIVE_TTF" = "yes"; then
    cat >> confdefs.h <<\EOF
#define USE_GD_IMGSTRTTF 1
EOF

  fi

  
  if test "$PHP_JPEG_DIR" != "no"; then

    for i in /usr /usr/local $PHP_JPEG_DIR; do
      test -f $i/lib/libjpeg.$SHLIB_SUFFIX_NAME -o -f $i/lib/libjpeg.a && GD_JPEG_DIR=$i
    done

    if test -z "$GD_JPEG_DIR"; then
      { echo "configure: error: libjpeg.(a|so) not found." 1>&2; exit 1; }
    fi

    
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
      -L$GD_JPEG_DIR/lib
     $LDFLAGS"
  echo $ac_n "checking for jpeg_read_header in -ljpeg""... $ac_c" 1>&6
echo "configure:29586: checking for jpeg_read_header in -ljpeg" >&5
ac_lib_var=`echo jpeg'_'jpeg_read_header | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ljpeg  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 29594 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char jpeg_read_header();

int main() {
jpeg_read_header()
; return 0; }
EOF
if { (eval echo configure:29605: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
      
  if test "$GD_JPEG_DIR/include" != "/usr/include"; then
    
  if test -z "$GD_JPEG_DIR/include" || echo "$GD_JPEG_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$GD_JPEG_DIR/include
  else
    
    ep_dir="`echo $GD_JPEG_DIR/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_JPEG_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      

  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-ljpeg $GD_SHARED_LIBADD"
    if test -n "$GD_JPEG_DIR/lib"; then
      
  if test "$GD_JPEG_DIR/lib" != "/usr/lib"; then
    
  if test -z "$GD_JPEG_DIR/lib" || echo "$GD_JPEG_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$GD_JPEG_DIR/lib
  else
    
    ep_dir="`echo $GD_JPEG_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_JPEG_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $GD_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$GD_JPEG_DIR/lib"; then
    
  if test "$GD_JPEG_DIR/lib" != "/usr/lib"; then
    
  if test -z "$GD_JPEG_DIR/lib" || echo "$GD_JPEG_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$GD_JPEG_DIR/lib
  else
    
    ep_dir="`echo $GD_JPEG_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_JPEG_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case jpeg in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-ljpeg $LIBS" 
   ;;
  esac




  fi


    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_jpeg
    
      { echo "configure: error: Problem with libjpeg.(a|so). Please check config.log for more information." 1>&2; exit 1; } 
    
  
fi

  else 
    echo "$ac_t""If configure fails try --with-jpeg-dir=<DIR>" 1>&6
  fi

  
  if test "$PHP_PNG_DIR" != "no"; then

    for i in /usr /usr/local $PHP_PNG_DIR; do
      test -f $i/lib/libpng.$SHLIB_SUFFIX_NAME -o -f $i/lib/libpng.a && GD_PNG_DIR=$i
    done

    if test -z "$GD_PNG_DIR"; then
      { echo "configure: error: libpng.(a|so) not found." 1>&2; exit 1; }
    fi

    if test "$PHP_ZLIB_DIR" = "no"; then
      { echo "configure: error: PNG support requires ZLIB. Use --with-zlib-dir=<DIR>" 1>&2; exit 1; }
    fi

    if test ! -f $GD_PNG_DIR/include/png.h; then
      { echo "configure: error: png.h not found." 1>&2; exit 1; }
    fi

    
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
      -L$PHP_ZLIB_DIR/lib -lz -L$GD_PNG_DIR/lib
     $LDFLAGS"
  echo $ac_n "checking for png_write_image in -lpng""... $ac_c" 1>&6
echo "configure:29792: checking for png_write_image in -lpng" >&5
ac_lib_var=`echo png'_'png_write_image | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpng  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 29800 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char png_write_image();

int main() {
png_write_image()
; return 0; }
EOF
if { (eval echo configure:29811: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
      
  if test "$GD_PNG_DIR/include" != "/usr/include"; then
    
  if test -z "$GD_PNG_DIR/include" || echo "$GD_PNG_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$GD_PNG_DIR/include
  else
    
    ep_dir="`echo $GD_PNG_DIR/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_PNG_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      

  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lz $GD_SHARED_LIBADD"
    if test -n "$PHP_ZLIB_DIR/lib"; then
      
  if test "$PHP_ZLIB_DIR/lib" != "/usr/lib"; then
    
  if test -z "$PHP_ZLIB_DIR/lib" || echo "$PHP_ZLIB_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ZLIB_DIR/lib
  else
    
    ep_dir="`echo $PHP_ZLIB_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $GD_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$PHP_ZLIB_DIR/lib"; then
    
  if test "$PHP_ZLIB_DIR/lib" != "/usr/lib"; then
    
  if test -z "$PHP_ZLIB_DIR/lib" || echo "$PHP_ZLIB_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ZLIB_DIR/lib
  else
    
    ep_dir="`echo $PHP_ZLIB_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case z in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lz $LIBS" 
   ;;
  esac




  fi


      

  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lpng $GD_SHARED_LIBADD"
    if test -n "$GD_PNG_DIR/lib"; then
      
  if test "$GD_PNG_DIR/lib" != "/usr/lib"; then
    
  if test -z "$GD_PNG_DIR/lib" || echo "$GD_PNG_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$GD_PNG_DIR/lib
  else
    
    ep_dir="`echo $GD_PNG_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_PNG_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $GD_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$GD_PNG_DIR/lib"; then
    
  if test "$GD_PNG_DIR/lib" != "/usr/lib"; then
    
  if test -z "$GD_PNG_DIR/lib" || echo "$GD_PNG_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$GD_PNG_DIR/lib
  else
    
    ep_dir="`echo $GD_PNG_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_PNG_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case png in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lpng $LIBS" 
   ;;
  esac




  fi


    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_png
    
      { echo "configure: error: Problem with libpng.(a|so) or libz.(a|so). Please check config.log for more information." 1>&2; exit 1; } 
    
  
fi


  else 
    echo "$ac_t""If configure fails try --with-png-dir=<DIR> and --with-zlib-dir=<DIR>" 1>&6
  fi

  
  if test "$PHP_XPM_DIR" != "no"; then

    for i in /usr /usr/local /usr/X11R6 $PHP_XPM_DIR; do
      test -f $i/lib/libXpm.$SHLIB_SUFFIX_NAME -o -f $i/lib/libXpm.a && GD_XPM_DIR=$i
    done

    if test -z "$GD_XPM_DIR"; then
      { echo "configure: error: libXpm.(a|so) not found." 1>&2; exit 1; }
    fi

    for i in include include/X11; do
      test -f $GD_XPM_DIR/$i/xpm.h && GD_XPM_INC=$GD_XPM_DIR/include
    done

    if test -z "$GD_XPM_INC"; then
      { echo "configure: error: xpm.h not found." 1>&2; exit 1; }
    fi

    
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
      -L$GD_XPM_DIR/lib -lX11
     $LDFLAGS"
  echo $ac_n "checking for XpmFreeXpmImage in -lXpm""... $ac_c" 1>&6
echo "configure:30095: checking for XpmFreeXpmImage in -lXpm" >&5
ac_lib_var=`echo Xpm'_'XpmFreeXpmImage | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lXpm  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 30103 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XpmFreeXpmImage();

int main() {
XpmFreeXpmImage()
; return 0; }
EOF
if { (eval echo configure:30114: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
      
  if test "$GD_XPM_INC" != "/usr/include"; then
    
  if test -z "$GD_XPM_INC" || echo "$GD_XPM_INC" | grep '^/' >/dev/null ; then
    ai_p=$GD_XPM_INC
  else
    
    ep_dir="`echo $GD_XPM_INC|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_XPM_INC\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      

  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lXpm $GD_SHARED_LIBADD"
    if test -n "$GD_XPM_DIR/lib"; then
      
  if test "$GD_XPM_DIR/lib" != "/usr/lib"; then
    
  if test -z "$GD_XPM_DIR/lib" || echo "$GD_XPM_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$GD_XPM_DIR/lib
  else
    
    ep_dir="`echo $GD_XPM_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_XPM_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $GD_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$GD_XPM_DIR/lib"; then
    
  if test "$GD_XPM_DIR/lib" != "/usr/lib"; then
    
  if test -z "$GD_XPM_DIR/lib" || echo "$GD_XPM_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$GD_XPM_DIR/lib
  else
    
    ep_dir="`echo $GD_XPM_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_XPM_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case Xpm in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lXpm $LIBS" 
   ;;
  esac




  fi


      

  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lX11 $GD_SHARED_LIBADD"
    if test -n "$GD_XPM_DIR/lib"; then
      
  if test "$GD_XPM_DIR/lib" != "/usr/lib"; then
    
  if test -z "$GD_XPM_DIR/lib" || echo "$GD_XPM_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$GD_XPM_DIR/lib
  else
    
    ep_dir="`echo $GD_XPM_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_XPM_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $GD_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$GD_XPM_DIR/lib"; then
    
  if test "$GD_XPM_DIR/lib" != "/usr/lib"; then
    
  if test -z "$GD_XPM_DIR/lib" || echo "$GD_XPM_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$GD_XPM_DIR/lib
  else
    
    ep_dir="`echo $GD_XPM_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_XPM_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case X11 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lX11 $LIBS" 
   ;;
  esac




  fi


    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_Xpm
    
      { echo "configure: error: Problem with libXpm.(a|so) or libX11.(a|so). Please check config.log for more information." 1>&2; exit 1; } 
    
  
fi

  else 
    echo "$ac_t""If configure fails try --with-xpm-dir=<DIR>" 1>&6
  fi

  
  if test "$PHP_FREETYPE_DIR" != "no"; then

    for i in /usr /usr/local $PHP_FREETYPE_DIR; do
      if test -f "$i/include/freetype2/freetype/freetype.h"; then
        FREETYPE2_DIR=$i
        FREETYPE2_INC_DIR=$i/include/freetype2
      fi
    done
    
    if test -n "$FREETYPE2_DIR" ; then
      

  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lfreetype $GD_SHARED_LIBADD"
    if test -n "$FREETYPE2_DIR/lib"; then
      
  if test "$FREETYPE2_DIR/lib" != "/usr/lib"; then
    
  if test -z "$FREETYPE2_DIR/lib" || echo "$FREETYPE2_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$FREETYPE2_DIR/lib
  else
    
    ep_dir="`echo $FREETYPE2_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$FREETYPE2_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $GD_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$FREETYPE2_DIR/lib"; then
    
  if test "$FREETYPE2_DIR/lib" != "/usr/lib"; then
    
  if test -z "$FREETYPE2_DIR/lib" || echo "$FREETYPE2_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$FREETYPE2_DIR/lib
  else
    
    ep_dir="`echo $FREETYPE2_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$FREETYPE2_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case freetype in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lfreetype $LIBS" 
   ;;
  esac




  fi


      
  if test "$FREETYPE2_DIR/include" != "/usr/include"; then
    
  if test -z "$FREETYPE2_DIR/include" || echo "$FREETYPE2_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$FREETYPE2_DIR/include
  else
    
    ep_dir="`echo $FREETYPE2_DIR/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$FREETYPE2_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      
  if test "$FREETYPE2_INC_DIR" != "/usr/include"; then
    
  if test -z "$FREETYPE2_INC_DIR" || echo "$FREETYPE2_INC_DIR" | grep '^/' >/dev/null ; then
    ai_p=$FREETYPE2_INC_DIR
  else
    
    ep_dir="`echo $FREETYPE2_INC_DIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$FREETYPE2_INC_DIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      cat >> confdefs.h <<\EOF
#define USE_GD_IMGSTRTTF 1
EOF

      cat >> confdefs.h <<\EOF
#define HAVE_LIBFREETYPE 1
EOF

    else
      { echo "configure: error: freetype2 not found!" 1>&2; exit 1; }
    fi
  else 
    echo "$ac_t""If configure fails try --with-freetype-dir=<DIR>" 1>&6
  fi

  
  if test "$PHP_TTF" != "no"; then
    if test "$PHP_FREETYPE_DIR" = "no" -o "$PHP_FREETYPE_DIR" = ""; then
      if test -n "$PHP_TTF" ; then
        for i in /usr /usr/local $PHP_TTF; do
          if test -f "$i/include/freetype.h" ; then
            TTF_DIR=$i
            unset TTF_INC_DIR
          fi
          if test -f "$i/include/freetype/freetype.h"; then
            TTF_DIR=$i
            TTF_INC_DIR=$i/include/freetype
          fi
          if test -f "$i/include/freetype1/freetype/freetype.h"; then
            TTF_DIR=$i
            TTF_INC_DIR=$i/include/freetype1/freetype
          fi
        done
      fi
      if test -n "$TTF_DIR" ; then
        cat >> confdefs.h <<\EOF
#define HAVE_LIBTTF 1
EOF

        

  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lttf $GD_SHARED_LIBADD"
    if test -n "$TTF_DIR/lib"; then
      
  if test "$TTF_DIR/lib" != "/usr/lib"; then
    
  if test -z "$TTF_DIR/lib" || echo "$TTF_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$TTF_DIR/lib
  else
    
    ep_dir="`echo $TTF_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$TTF_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $GD_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$TTF_DIR/lib"; then
    
  if test "$TTF_DIR/lib" != "/usr/lib"; then
    
  if test -z "$TTF_DIR/lib" || echo "$TTF_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$TTF_DIR/lib
  else
    
    ep_dir="`echo $TTF_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$TTF_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case ttf in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lttf $LIBS" 
   ;;
  esac




  fi


      fi
      if test -z "$TTF_INC_DIR"; then
        TTF_INC_DIR=$TTF_DIR/include
      fi
      
  if test "$TTF_INC_DIR" != "/usr/include"; then
    
  if test -z "$TTF_INC_DIR" || echo "$TTF_INC_DIR" | grep '^/' >/dev/null ; then
    ai_p=$TTF_INC_DIR
  else
    
    ep_dir="`echo $TTF_INC_DIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$TTF_INC_DIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    else
      echo "$ac_t""no - FreeType 2.x is to be used instead" 1>&6
    fi
  fi

  
  if test "$PHP_T1LIB" != "no"; then

    for i in /usr /usr/local $PHP_T1LIB; do
      test -f "$i/include/t1lib.h" && GD_T1_DIR=$i
    done

    if test -z "$GD_T1_DIR"; then
      { echo "configure: error: Your t1lib distribution is not installed correctly. Please reinstall it." 1>&2; exit 1; } 
    fi

    
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
      -L$GD_T1_DIR/lib
     $LDFLAGS"
  echo $ac_n "checking for T1_LoadFont in -lt1""... $ac_c" 1>&6
echo "configure:30733: checking for T1_LoadFont in -lt1" >&5
ac_lib_var=`echo t1'_'T1_LoadFont | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lt1  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 30741 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char T1_LoadFont();

int main() {
T1_LoadFont()
; return 0; }
EOF
if { (eval echo configure:30752: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
      cat >> confdefs.h <<\EOF
#define HAVE_LIBT1 1
EOF

      
  if test "$GD_T1_DIR/include" != "/usr/include"; then
    
  if test -z "$GD_T1_DIR/include" || echo "$GD_T1_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$GD_T1_DIR/include
  else
    
    ep_dir="`echo $GD_T1_DIR/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_T1_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      

  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lt1 $GD_SHARED_LIBADD"
    if test -n "$GD_T1_DIR/lib"; then
      
  if test "$GD_T1_DIR/lib" != "/usr/lib"; then
    
  if test -z "$GD_T1_DIR/lib" || echo "$GD_T1_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$GD_T1_DIR/lib
  else
    
    ep_dir="`echo $GD_T1_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_T1_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $GD_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$GD_T1_DIR/lib"; then
    
  if test "$GD_T1_DIR/lib" != "/usr/lib"; then
    
  if test -z "$GD_T1_DIR/lib" || echo "$GD_T1_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$GD_T1_DIR/lib
  else
    
    ep_dir="`echo $GD_T1_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_T1_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case t1 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lt1 $LIBS" 
   ;;
  esac




  fi


    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_t1
    
      { echo "configure: error: Problem with libt1.(a|so). Please check config.log for more information." 1>&2; exit 1; } 
    
  
fi

  fi


  for i in include/gd1.3 include/gd include gd1.3 gd ""; do
    test -f "$PHP_GD/$i/gd.h" && GD_INCLUDE="$PHP_GD/$i"
  done

  for i in lib/gd1.3 lib/gd lib gd1.3 gd ""; do
    test -f "$PHP_GD/$i/libgd.$SHLIB_SUFFIX_NAME" -o -f "$PHP_GD/$i/libgd.a" && GD_LIB="$PHP_GD/$i"
  done

  if test -n "$GD_INCLUDE" && test -n "$GD_LIB"; then
    

  if test "$ext_shared" = "yes"; then
    GD_SHARED_LIBADD="-lgd $GD_SHARED_LIBADD"
    if test -n "$GD_LIB"; then
      
  if test "$GD_LIB" != "/usr/lib"; then
    
  if test -z "$GD_LIB" || echo "$GD_LIB" | grep '^/' >/dev/null ; then
    ai_p=$GD_LIB
  else
    
    ep_dir="`echo $GD_LIB|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_LIB\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GD_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $GD_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$GD_LIB"; then
    
  if test "$GD_LIB" != "/usr/lib"; then
    
  if test -z "$GD_LIB" || echo "$GD_LIB" | grep '^/' >/dev/null ; then
    ai_p=$GD_LIB
  else
    
    ep_dir="`echo $GD_LIB|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_LIB\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case gd in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lgd $LIBS" 
   ;;
  esac




  fi


    cat >> confdefs.h <<\EOF
#define HAVE_LIBGD 1
EOF

    
  
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS=" -L$GD_LIB $GD_SHARED_LIBADD  $LDFLAGS"
  echo $ac_n "checking for gdImageString16 in -lgd""... $ac_c" 1>&6
echo "configure:31031: checking for gdImageString16 in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageString16 | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 31039 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageString16();

int main() {
gdImageString16()
; return 0; }
EOF
if { (eval echo configure:31050: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    cat >> confdefs.h <<\EOF
#define HAVE_LIBGD13 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_gd
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS=" -L$GD_LIB $GD_SHARED_LIBADD  $LDFLAGS"
  echo $ac_n "checking for gdImagePaletteCopy in -lgd""... $ac_c" 1>&6
echo "configure:31085: checking for gdImagePaletteCopy in -lgd" >&5
ac_lib_var=`echo gd'_'gdImagePaletteCopy | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 31093 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImagePaletteCopy();

int main() {
gdImagePaletteCopy()
; return 0; }
EOF
if { (eval echo configure:31104: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    cat >> confdefs.h <<\EOF
#define HAVE_LIBGD15 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_gd
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS=" -L$GD_LIB $GD_SHARED_LIBADD  $LDFLAGS"
  echo $ac_n "checking for gdImageCreateFromPng in -lgd""... $ac_c" 1>&6
echo "configure:31139: checking for gdImageCreateFromPng in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageCreateFromPng | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 31147 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageCreateFromPng();

int main() {
gdImageCreateFromPng()
; return 0; }
EOF
if { (eval echo configure:31158: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    cat >> confdefs.h <<\EOF
#define HAVE_GD_PNG 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_gd
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS=" -L$GD_LIB $GD_SHARED_LIBADD  $LDFLAGS"
  echo $ac_n "checking for gdImageCreateFromGif in -lgd""... $ac_c" 1>&6
echo "configure:31193: checking for gdImageCreateFromGif in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageCreateFromGif | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 31201 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageCreateFromGif();

int main() {
gdImageCreateFromGif()
; return 0; }
EOF
if { (eval echo configure:31212: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    cat >> confdefs.h <<\EOF
#define HAVE_GD_GIF_READ 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_gd
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS=" -L$GD_LIB $GD_SHARED_LIBADD  $LDFLAGS"
  echo $ac_n "checking for gdImageGif in -lgd""... $ac_c" 1>&6
echo "configure:31247: checking for gdImageGif in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageGif | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 31255 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageGif();

int main() {
gdImageGif()
; return 0; }
EOF
if { (eval echo configure:31266: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    cat >> confdefs.h <<\EOF
#define HAVE_GD_GIF_CREATE 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_gd
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS=" -L$GD_LIB $GD_SHARED_LIBADD  $LDFLAGS"
  echo $ac_n "checking for gdImageWBMP in -lgd""... $ac_c" 1>&6
echo "configure:31301: checking for gdImageWBMP in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageWBMP | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 31309 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageWBMP();

int main() {
gdImageWBMP()
; return 0; }
EOF
if { (eval echo configure:31320: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    cat >> confdefs.h <<\EOF
#define HAVE_GD_WBMP 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_gd
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS=" -L$GD_LIB $GD_SHARED_LIBADD  $LDFLAGS"
  echo $ac_n "checking for gdImageCreateFromJpeg in -lgd""... $ac_c" 1>&6
echo "configure:31355: checking for gdImageCreateFromJpeg in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageCreateFromJpeg | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 31363 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageCreateFromJpeg();

int main() {
gdImageCreateFromJpeg()
; return 0; }
EOF
if { (eval echo configure:31374: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    cat >> confdefs.h <<\EOF
#define HAVE_GD_JPG 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_gd
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS=" -L$GD_LIB $GD_SHARED_LIBADD  $LDFLAGS"
  echo $ac_n "checking for gdImageCreateFromXpm in -lgd""... $ac_c" 1>&6
echo "configure:31409: checking for gdImageCreateFromXpm in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageCreateFromXpm | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 31417 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageCreateFromXpm();

int main() {
gdImageCreateFromXpm()
; return 0; }
EOF
if { (eval echo configure:31428: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    cat >> confdefs.h <<\EOF
#define HAVE_GD_XPM 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_gd
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS=" -L$GD_LIB $GD_SHARED_LIBADD  $LDFLAGS"
  echo $ac_n "checking for gdImageCreateFromGd2 in -lgd""... $ac_c" 1>&6
echo "configure:31463: checking for gdImageCreateFromGd2 in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageCreateFromGd2 | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 31471 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageCreateFromGd2();

int main() {
gdImageCreateFromGd2()
; return 0; }
EOF
if { (eval echo configure:31482: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    cat >> confdefs.h <<\EOF
#define HAVE_GD_GD2 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_gd
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS=" -L$GD_LIB $GD_SHARED_LIBADD  $LDFLAGS"
  echo $ac_n "checking for gdImageCreateTrueColor in -lgd""... $ac_c" 1>&6
echo "configure:31517: checking for gdImageCreateTrueColor in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageCreateTrueColor | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 31525 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageCreateTrueColor();

int main() {
gdImageCreateTrueColor()
; return 0; }
EOF
if { (eval echo configure:31536: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    cat >> confdefs.h <<\EOF
#define HAVE_LIBGD20 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_gd
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS=" -L$GD_LIB $GD_SHARED_LIBADD  $LDFLAGS"
  echo $ac_n "checking for gdImageSetTile in -lgd""... $ac_c" 1>&6
echo "configure:31571: checking for gdImageSetTile in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageSetTile | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 31579 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageSetTile();

int main() {
gdImageSetTile()
; return 0; }
EOF
if { (eval echo configure:31590: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    cat >> confdefs.h <<\EOF
#define HAVE_GD_IMAGESETTILE 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_gd
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS=" -L$GD_LIB $GD_SHARED_LIBADD  $LDFLAGS"
  echo $ac_n "checking for gdImageEllipse in -lgd""... $ac_c" 1>&6
echo "configure:31625: checking for gdImageEllipse in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageEllipse | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 31633 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageEllipse();

int main() {
gdImageEllipse()
; return 0; }
EOF
if { (eval echo configure:31644: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    cat >> confdefs.h <<\EOF
#define HAVE_GD_IMAGEELLIPSE 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_gd
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS=" -L$GD_LIB $GD_SHARED_LIBADD  $LDFLAGS"
  echo $ac_n "checking for gdImageSetBrush in -lgd""... $ac_c" 1>&6
echo "configure:31679: checking for gdImageSetBrush in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageSetBrush | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 31687 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageSetBrush();

int main() {
gdImageSetBrush()
; return 0; }
EOF
if { (eval echo configure:31698: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    cat >> confdefs.h <<\EOF
#define HAVE_GD_IMAGESETBRUSH 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_gd
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS=" -L$GD_LIB $GD_SHARED_LIBADD  $LDFLAGS"
  echo $ac_n "checking for gdImageStringTTF in -lgd""... $ac_c" 1>&6
echo "configure:31733: checking for gdImageStringTTF in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageStringTTF | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 31741 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageStringTTF();

int main() {
gdImageStringTTF()
; return 0; }
EOF
if { (eval echo configure:31752: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    cat >> confdefs.h <<\EOF
#define HAVE_GD_STRINGTTF 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_gd
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS=" -L$GD_LIB $GD_SHARED_LIBADD  $LDFLAGS"
  echo $ac_n "checking for gdImageStringFT in -lgd""... $ac_c" 1>&6
echo "configure:31787: checking for gdImageStringFT in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageStringFT | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 31795 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageStringFT();

int main() {
gdImageStringFT()
; return 0; }
EOF
if { (eval echo configure:31806: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    cat >> confdefs.h <<\EOF
#define HAVE_GD_STRINGFT 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_gd
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS=" -L$GD_LIB $GD_SHARED_LIBADD  $LDFLAGS"
  echo $ac_n "checking for gdImageStringFTEx in -lgd""... $ac_c" 1>&6
echo "configure:31841: checking for gdImageStringFTEx in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageStringFTEx | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 31849 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageStringFTEx();

int main() {
gdImageStringFTEx()
; return 0; }
EOF
if { (eval echo configure:31860: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    cat >> confdefs.h <<\EOF
#define HAVE_GD_STRINGFTEX 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_gd
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS=" -L$GD_LIB $GD_SHARED_LIBADD  $LDFLAGS"
  echo $ac_n "checking for gdImageColorClosestHWB in -lgd""... $ac_c" 1>&6
echo "configure:31895: checking for gdImageColorClosestHWB in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageColorClosestHWB | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 31903 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageColorClosestHWB();

int main() {
gdImageColorClosestHWB()
; return 0; }
EOF
if { (eval echo configure:31914: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    cat >> confdefs.h <<\EOF
#define HAVE_COLORCLOSESTHWB 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_gd
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS=" -L$GD_LIB $GD_SHARED_LIBADD  $LDFLAGS"
  echo $ac_n "checking for gdImageColorResolve in -lgd""... $ac_c" 1>&6
echo "configure:31949: checking for gdImageColorResolve in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageColorResolve | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 31957 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageColorResolve();

int main() {
gdImageColorResolve()
; return 0; }
EOF
if { (eval echo configure:31968: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    cat >> confdefs.h <<\EOF
#define HAVE_GDIMAGECOLORRESOLVE 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_gd
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS=" -L$GD_LIB $GD_SHARED_LIBADD  $LDFLAGS"
  echo $ac_n "checking for gdImageGifCtx in -lgd""... $ac_c" 1>&6
echo "configure:32003: checking for gdImageGifCtx in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageGifCtx | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 32011 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageGifCtx();

int main() {
gdImageGifCtx()
; return 0; }
EOF
if { (eval echo configure:32022: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    cat >> confdefs.h <<\EOF
#define HAVE_GD_GIF_CTX 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_gd
    
  
fi

  
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS=" -L$GD_LIB $GD_SHARED_LIBADD  $LDFLAGS"
  echo $ac_n "checking for gdCacheCreate in -lgd""... $ac_c" 1>&6
echo "configure:32057: checking for gdCacheCreate in -lgd" >&5
ac_lib_var=`echo gd'_'gdCacheCreate | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 32065 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdCacheCreate();

int main() {
gdCacheCreate()
; return 0; }
EOF
if { (eval echo configure:32076: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    cat >> confdefs.h <<\EOF
#define HAVE_GD_CACHE_CREATE 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_gd
    
  
fi


  elif test -z "$GD_INCLUDE"; then
    { echo "configure: error: Unable to find gd.h anywhere under $PHP_GD" 1>&2; exit 1; }
  else
    { echo "configure: error: Unable to find libgd.(a|so) anywhere under $PHP_GD" 1>&2; exit 1; }
  fi 

  
  if test -z "$GD_INCLUDE" || echo "$GD_INCLUDE" | grep '^/' >/dev/null ; then
    GD_INCLUDE=$GD_INCLUDE
  else
    
    ep_dir="`echo $GD_INCLUDE|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    GD_INCLUDE="$ep_realdir/`basename \"$GD_INCLUDE\"`"
  fi


        old_CPPFLAGS=$CPPFLAGS
  CPPFLAGS=-I$GD_INCLUDE
  cat > conftest.$ac_ext <<EOF
#line 32129 "configure"
#include "confdefs.h"

#include <gd.h>
#include <stdlib.h>
  
int main() {

gdIOCtx *ctx;
ctx = malloc(sizeof(gdIOCtx));
ctx->gd_free = 1;
  
; return 0; }
EOF
if { (eval echo configure:32143: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
    cat >> confdefs.h <<\EOF
#define HAVE_LIBGD204 1
EOF

  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
  CPPFLAGS=$old_CPPFLAGS

 fi
fi

if test "$PHP_GD" != "no"; then
  
  ext_builddir=ext/gd
  ext_srcdir=$abs_srcdir/ext/gd

  ac_extra=`echo "\\$(GDLIB_CFLAGS)"|sed s#@ext_srcdir@#$ext_srcdir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/gd in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gd"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gd/"; ac_bdir="ext/gd/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in gd.c gdttf.c $extra_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC gd"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC gd"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/gd in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gd"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gd/"; ac_bdir="ext/gd/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in gd.c gdttf.c $extra_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_gd="$shared_objects_gd $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/gd.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_gd"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/gd.la: $ext_builddir/gd.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/gd.la \$(phplibdir)

$ext_builddir/gd.la: \$(shared_objects_gd) \$(GD_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_gd) \$(GD_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_GD 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/gd in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gd"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gd/"; ac_bdir="ext/gd/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in gd.c gdttf.c $extra_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC gd"
    else
      
  
  case ext/gd in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gd"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gd/"; ac_bdir="ext/gd/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in gd.c gdttf.c $extra_sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC gd"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$GD_MODULE_TYPE" = "builtin"; then
    GDLIB_CFLAGS="-I$ext_srcdir/libgd $GDLIB_CFLAGS"
    
  BUILD_DIR="$BUILD_DIR $ext_builddir/libgd"

  else
    GDLIB_CFLAGS="-I$GD_INCLUDE $GDLIB_CFLAGS"
    
  if test "$GD_INCLUDE" != "/usr/include"; then
    
  if test -z "$GD_INCLUDE" || echo "$GD_INCLUDE" | grep '^/' >/dev/null ; then
    ai_p=$GD_INCLUDE
  else
    
    ep_dir="`echo $GD_INCLUDE|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_INCLUDE\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  
    
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS=" -L$GD_LIB $GD_SHARED_LIBADD  $LDFLAGS"
  echo $ac_n "checking for gdImageCreate in -lgd""... $ac_c" 1>&6
echo "configure:32414: checking for gdImageCreate in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageCreate | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 32422 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageCreate();

int main() {
gdImageCreate()
; return 0; }
EOF
if { (eval echo configure:32433: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_gd
    
      { echo "configure: error: GD build test failed. Please check the config.log for details." 1>&2; exit 1; }
    
  
fi

  fi

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST GDLIB_CFLAGS"

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST GD_SHARED_LIBADD"

fi




echo $ac_n "checking for GNU gettext support""... $ac_c" 1>&6
echo "configure:32477: checking for GNU gettext support" >&5
# Check whether --with-gettext or --without-gettext was given.
if test "${with_gettext+set}" = set; then
  withval="$with_gettext"
  PHP_GETTEXT=$withval
else
  
  PHP_GETTEXT=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_GETTEXT=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_GETTEXT in
shared,*)
  PHP_GETTEXT=`echo "$PHP_GETTEXT"|sed 's/^shared,//'`
  ;;
shared)
  PHP_GETTEXT=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_GETTEXT" != "no"; then
  for i in /usr /usr/local $PHP_GETTEXT; do
    if test -r $i/include/libintl.h; then
	  GETTEXT_DIR=$i
    fi
  done

  if test -z "$GETTEXT_DIR"; then
    { echo "configure: error: Cannot locate header file libintl.h" 1>&2; exit 1; }
  fi

  GETTEXT_LIBDIR=$GETTEXT_DIR/lib
  GETTEXT_INCDIR=$GETTEXT_DIR/include
  
  O_LDFLAGS=$LDFLAGS
  LDFLAGS="$LDFLAGS -L$GETTEXT_LIBDIR"
  echo $ac_n "checking for bindtextdomain in -lintl""... $ac_c" 1>&6
echo "configure:32537: checking for bindtextdomain in -lintl" >&5
ac_lib_var=`echo intl'_'bindtextdomain | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lintl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 32545 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char bindtextdomain();

int main() {
bindtextdomain()
; return 0; }
EOF
if { (eval echo configure:32556: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
	GETTEXT_LIBS=intl
	GETTEXT_CHECK_IN_LIB=intl
	
else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for bindtextdomain in -lc""... $ac_c" 1>&6
echo "configure:32578: checking for bindtextdomain in -lc" >&5
ac_lib_var=`echo c'_'bindtextdomain | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lc  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 32586 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char bindtextdomain();

int main() {
bindtextdomain()
; return 0; }
EOF
if { (eval echo configure:32597: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
		GETTEXT_LIBS=
		GETTEXT_CHECK_IN_LIB=c
	
else
  echo "$ac_t""no" 1>&6

		{ echo "configure: error: Unable to find required gettext library" 1>&2; exit 1; }
	
fi

  
fi

  LDFLAGS=$O_LDFLAGS

  cat >> confdefs.h <<\EOF
#define HAVE_LIBINTL 1
EOF

  
  ext_builddir=ext/gettext
  ext_srcdir=$abs_srcdir/ext/gettext

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/gettext in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gettext"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gettext/"; ac_bdir="ext/gettext/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in gettext.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC gettext"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC gettext"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/gettext in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gettext"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gettext/"; ac_bdir="ext/gettext/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in gettext.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_gettext="$shared_objects_gettext $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/gettext.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_gettext"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/gettext.la: $ext_builddir/gettext.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/gettext.la \$(phplibdir)

$ext_builddir/gettext.la: \$(shared_objects_gettext) \$(GETTEXT_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_gettext) \$(GETTEXT_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_GETTEXT 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/gettext in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gettext"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gettext/"; ac_bdir="ext/gettext/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in gettext.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC gettext"
    else
      
  
  case ext/gettext in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gettext"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gettext/"; ac_bdir="ext/gettext/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in gettext.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC gettext"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST GETTEXT_SHARED_LIBADD"


  if test -n "$GETTEXT_LIBS"; then
    

  if test "$ext_shared" = "yes"; then
    GETTEXT_SHARED_LIBADD="-l$GETTEXT_LIBS $GETTEXT_SHARED_LIBADD"
    if test -n "$GETTEXT_LIBDIR"; then
      
  if test "$GETTEXT_LIBDIR" != "/usr/lib"; then
    
  if test -z "$GETTEXT_LIBDIR" || echo "$GETTEXT_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GETTEXT_LIBDIR
  else
    
    ep_dir="`echo $GETTEXT_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GETTEXT_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GETTEXT_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $GETTEXT_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$GETTEXT_LIBDIR"; then
    
  if test "$GETTEXT_LIBDIR" != "/usr/lib"; then
    
  if test -z "$GETTEXT_LIBDIR" || echo "$GETTEXT_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$GETTEXT_LIBDIR
  else
    
    ep_dir="`echo $GETTEXT_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GETTEXT_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case $GETTEXT_LIBS in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$GETTEXT_LIBS $LIBS" 
   ;;
  esac




  fi


  fi

  
  if test "$GETTEXT_INCDIR" != "/usr/include"; then
    
  if test -z "$GETTEXT_INCDIR" || echo "$GETTEXT_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$GETTEXT_INCDIR
  else
    
    ep_dir="`echo $GETTEXT_INCDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GETTEXT_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi


  echo $ac_n "checking for ngettext in -l$GETTEXT_CHECK_IN_LIB""... $ac_c" 1>&6
echo "configure:32976: checking for ngettext in -l$GETTEXT_CHECK_IN_LIB" >&5
ac_lib_var=`echo $GETTEXT_CHECK_IN_LIB'_'ngettext | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$GETTEXT_CHECK_IN_LIB  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 32984 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char ngettext();

int main() {
ngettext()
; return 0; }
EOF
if { (eval echo configure:32995: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_NGETTEXT 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for dngettext in -l$GETTEXT_CHECK_IN_LIB""... $ac_c" 1>&6
echo "configure:33019: checking for dngettext in -l$GETTEXT_CHECK_IN_LIB" >&5
ac_lib_var=`echo $GETTEXT_CHECK_IN_LIB'_'dngettext | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$GETTEXT_CHECK_IN_LIB  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 33027 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dngettext();

int main() {
dngettext()
; return 0; }
EOF
if { (eval echo configure:33038: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_DNGETTEXT 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for dcngettext in -l$GETTEXT_CHECK_IN_LIB""... $ac_c" 1>&6
echo "configure:33062: checking for dcngettext in -l$GETTEXT_CHECK_IN_LIB" >&5
ac_lib_var=`echo $GETTEXT_CHECK_IN_LIB'_'dcngettext | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$GETTEXT_CHECK_IN_LIB  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 33070 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dcngettext();

int main() {
dcngettext()
; return 0; }
EOF
if { (eval echo configure:33081: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_DCNGETTEXT 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for bind_textdomain_codeset in -l$GETTEXT_CHECK_IN_LIB""... $ac_c" 1>&6
echo "configure:33105: checking for bind_textdomain_codeset in -l$GETTEXT_CHECK_IN_LIB" >&5
ac_lib_var=`echo $GETTEXT_CHECK_IN_LIB'_'bind_textdomain_codeset | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$GETTEXT_CHECK_IN_LIB  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 33113 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char bind_textdomain_codeset();

int main() {
bind_textdomain_codeset()
; return 0; }
EOF
if { (eval echo configure:33124: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_BIND_TEXTDOMAIN_CODESET 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  
fi




echo $ac_n "checking for GNU MP support""... $ac_c" 1>&6
echo "configure:33154: checking for GNU MP support" >&5
# Check whether --with-gmp or --without-gmp was given.
if test "${with_gmp+set}" = set; then
  withval="$with_gmp"
  PHP_GMP=$withval
else
  
  PHP_GMP=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_GMP=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_GMP in
shared,*)
  PHP_GMP=`echo "$PHP_GMP"|sed 's/^shared,//'`
  ;;
shared)
  PHP_GMP=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_GMP" != "no"; then

  for i in /usr/local /usr $PHP_GMP; do
    if test -f $i/include/gmp.h; then
      GMP_DIR=$i
    fi
  done

  if test -z "$GMP_DIR"; then
    { echo "configure: error: Unable to locate gmp.h" 1>&2; exit 1; }
  fi
  
  if test "$GMP_DIR/include" != "/usr/include"; then
    
  if test -z "$GMP_DIR/include" || echo "$GMP_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$GMP_DIR/include
  else
    
    ep_dir="`echo $GMP_DIR/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GMP_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi


  
  ext_builddir=ext/gmp
  ext_srcdir=$abs_srcdir/ext/gmp

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/gmp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gmp/"; ac_bdir="ext/gmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in gmp.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC gmp"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC gmp"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/gmp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gmp/"; ac_bdir="ext/gmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in gmp.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_gmp="$shared_objects_gmp $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/gmp.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_gmp"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/gmp.la: $ext_builddir/gmp.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/gmp.la \$(phplibdir)

$ext_builddir/gmp.la: \$(shared_objects_gmp) \$(GMP_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_gmp) \$(GMP_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_GMP 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/gmp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gmp/"; ac_bdir="ext/gmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in gmp.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC gmp"
    else
      
  
  case ext/gmp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/gmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/gmp/"; ac_bdir="ext/gmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in gmp.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC gmp"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


  cat >> confdefs.h <<\EOF
#define HAVE_GMP 1
EOF

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST GMP_SHARED_LIBADD"

  

  if test "$ext_shared" = "yes"; then
    GMP_SHARED_LIBADD="-lgmp $GMP_SHARED_LIBADD"
    if test -n "$GMP_DIR/lib"; then
      
  if test "$GMP_DIR/lib" != "/usr/lib"; then
    
  if test -z "$GMP_DIR/lib" || echo "$GMP_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$GMP_DIR/lib
  else
    
    ep_dir="`echo $GMP_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GMP_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        GMP_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $GMP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$GMP_DIR/lib"; then
    
  if test "$GMP_DIR/lib" != "/usr/lib"; then
    
  if test -z "$GMP_DIR/lib" || echo "$GMP_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$GMP_DIR/lib
  else
    
    ep_dir="`echo $GMP_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GMP_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case gmp in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lgmp $LIBS" 
   ;;
  esac




  fi


fi




echo $ac_n "checking for hwapi support""... $ac_c" 1>&6
echo "configure:33557: checking for hwapi support" >&5
# Check whether --with-hwapi or --without-hwapi was given.
if test "${with_hwapi+set}" = set; then
  withval="$with_hwapi"
  PHP_HWAPI=$withval
else
  
  PHP_HWAPI=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_HWAPI=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_HWAPI in
shared,*)
  PHP_HWAPI=`echo "$PHP_HWAPI"|sed 's/^shared,//'`
  ;;
shared)
  PHP_HWAPI=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_HWAPI" != "no"; then
  if test -r $PHP_HWAPI/include/sdk/api/object.h; then
    HWAPI_DIR=$PHP_HWAPI
  else
    echo $ac_n "checking for HWAPI in default path""... $ac_c" 1>&6
echo "configure:33605: checking for HWAPI in default path" >&5
    for i in /usr/local /usr; do
      if test -r $i/include/hwapi/sdk/api/object.h; then
        HWAPI_DIR=$i
        echo "$ac_t""found in $i" 1>&6
      fi
    done
  fi

  if test -z "$HWAPI_DIR"; then
    echo "$ac_t""not found" 1>&6
    { echo "configure: error: Please install the hwapi >= 1.0.0 distribution" 1>&2; exit 1; }
  fi

  
  if test "$HWAPI_DIR/include/hwapi" != "/usr/include"; then
    
  if test -z "$HWAPI_DIR/include/hwapi" || echo "$HWAPI_DIR/include/hwapi" | grep '^/' >/dev/null ; then
    ai_p=$HWAPI_DIR/include/hwapi
  else
    
    ep_dir="`echo $HWAPI_DIR/include/hwapi|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$HWAPI_DIR/include/hwapi\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST HWAPI_SHARED_LIBADD"

  

  if test "$ext_shared" = "yes"; then
    HWAPI_SHARED_LIBADD="-lhwapi $HWAPI_SHARED_LIBADD"
    if test -n "$HWAPI_DIR/lib"; then
      
  if test "$HWAPI_DIR/lib" != "/usr/lib"; then
    
  if test -z "$HWAPI_DIR/lib" || echo "$HWAPI_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$HWAPI_DIR/lib
  else
    
    ep_dir="`echo $HWAPI_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$HWAPI_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        HWAPI_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $HWAPI_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$HWAPI_DIR/lib"; then
    
  if test "$HWAPI_DIR/lib" != "/usr/lib"; then
    
  if test -z "$HWAPI_DIR/lib" || echo "$HWAPI_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$HWAPI_DIR/lib
  else
    
    ep_dir="`echo $HWAPI_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$HWAPI_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case hwapi in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lhwapi $LIBS" 
   ;;
  esac




  fi


  cat >> confdefs.h <<\EOF
#define HAVE_HWAPI 1
EOF


  
  if test -z "$php_cxx_done"; then
    for ac_prog in $CCC c++ g++ gcc CC cxx cc++ cl
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:33761: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_CXX'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CXX"; then
  ac_cv_prog_CXX="$CXX" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CXX="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
CXX="$ac_cv_prog_CXX"
if test -n "$CXX"; then
  echo "$ac_t""$CXX" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$CXX" && break
done
test -n "$CXX" || CXX="gcc"


echo $ac_n "checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) works""... $ac_c" 1>&6
echo "configure:33793: checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) works" >&5

ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

cat > conftest.$ac_ext << EOF

#line 33804 "configure"
#include "confdefs.h"

int main(){return(0);}
EOF
if { (eval echo configure:33809: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  ac_cv_prog_cxx_works=yes
  # If we can't run a trivial program, we are probably using a cross compiler.
  if (./conftest; exit) 2>/dev/null; then
    ac_cv_prog_cxx_cross=no
  else
    ac_cv_prog_cxx_cross=yes
  fi
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  ac_cv_prog_cxx_works=no
fi
rm -fr conftest*
ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

echo "$ac_t""$ac_cv_prog_cxx_works" 1>&6
if test $ac_cv_prog_cxx_works = no; then
  { echo "configure: error: installation or configuration problem: C++ compiler cannot create executables." 1>&2; exit 1; }
fi
echo $ac_n "checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
echo "configure:33835: checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) is a cross-compiler" >&5
echo "$ac_t""$ac_cv_prog_cxx_cross" 1>&6
cross_compiling=$ac_cv_prog_cxx_cross

echo $ac_n "checking whether we are using GNU C++""... $ac_c" 1>&6
echo "configure:33840: checking whether we are using GNU C++" >&5
if eval "test \"`echo '$''{'ac_cv_prog_gxx'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.C <<EOF
#ifdef __GNUC__
  yes;
#endif
EOF
if { ac_try='${CXX-g++} -E conftest.C'; { (eval echo configure:33849: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
  ac_cv_prog_gxx=yes
else
  ac_cv_prog_gxx=no
fi
fi

echo "$ac_t""$ac_cv_prog_gxx" 1>&6

if test $ac_cv_prog_gxx = yes; then
  GXX=yes
else
  GXX=
fi

ac_test_CXXFLAGS="${CXXFLAGS+set}"
ac_save_CXXFLAGS="$CXXFLAGS"
CXXFLAGS=
echo $ac_n "checking whether ${CXX-g++} accepts -g""... $ac_c" 1>&6
echo "configure:33868: checking whether ${CXX-g++} accepts -g" >&5
if eval "test \"`echo '$''{'ac_cv_prog_cxx_g'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  echo 'void f(){}' > conftest.cc
if test -z "`${CXX-g++} -g -c conftest.cc 2>&1`"; then
  ac_cv_prog_cxx_g=yes
else
  ac_cv_prog_cxx_g=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_prog_cxx_g" 1>&6
if test "$ac_test_CXXFLAGS" = set; then
  CXXFLAGS="$ac_save_CXXFLAGS"
elif test $ac_cv_prog_cxx_g = yes; then
  if test "$GXX" = yes; then
    CXXFLAGS="-g -O2"
  else
    CXXFLAGS="-g"
  fi
else
  if test "$GXX" = yes; then
    CXXFLAGS="-O2"
  else
    CXXFLAGS=
  fi
fi

for ac_declaration in \
   ''\
   '#include <stdlib.h>' \
   'extern "C" void std::exit (int) throw (); using std::exit;' \
   'extern "C" void std::exit (int); using std::exit;' \
   'extern "C" void exit (int) throw ();' \
   'extern "C" void exit (int);' \
   'void exit (int);'
do
  cat > conftest.$ac_ext <<EOF
#line 33909 "configure"
#include "confdefs.h"
#include <stdlib.h>
$ac_declaration
int main() {
exit (42);
; return 0; }
EOF
if { (eval echo configure:33917: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  :
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  continue
fi
rm -f conftest*
  cat > conftest.$ac_ext <<EOF
#line 33927 "configure"
#include "confdefs.h"
$ac_declaration
int main() {
exit (42);
; return 0; }
EOF
if { (eval echo configure:33934: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  break
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
done
if test -n "$ac_declaration"; then
  echo '#ifdef __cplusplus' >>confdefs.h
  echo $ac_declaration      >>confdefs.h
  echo '#endif'             >>confdefs.h
fi


    echo $ac_n "checking how to run the C++ preprocessor""... $ac_c" 1>&6
echo "configure:33951: checking how to run the C++ preprocessor" >&5
if test -z "$CXXCPP"; then
if eval "test \"`echo '$''{'ac_cv_prog_CXXCPP'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross
  CXXCPP="${CXX-g++} -E"
  cat > conftest.$ac_ext <<EOF
#line 33964 "configure"
#include "confdefs.h"
#include <stdlib.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:33969: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  CXXCPP=/lib/cpp
fi
rm -f conftest*
  ac_cv_prog_CXXCPP="$CXXCPP"
ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross
fi
fi
CXXCPP="$ac_cv_prog_CXXCPP"
echo "$ac_t""$CXXCPP" 1>&6

    php_cxx_done=yes
  fi

  
  ext_builddir=ext/hwapi
  ext_srcdir=$abs_srcdir/ext/hwapi

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/hwapi in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/hwapi"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/hwapi/"; ac_bdir="ext/hwapi/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in hwapi.cpp; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC hwapi"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC hwapi"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/hwapi in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/hwapi"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/hwapi/"; ac_bdir="ext/hwapi/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in hwapi.cpp; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_hwapi="$shared_objects_hwapi $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/hwapi.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_hwapi"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/hwapi.la: $ext_builddir/hwapi.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/hwapi.la \$(phplibdir)

$ext_builddir/hwapi.la: \$(shared_objects_hwapi) \$(HWAPI_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_hwapi) \$(HWAPI_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_HWAPI 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/hwapi in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/hwapi"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/hwapi/"; ac_bdir="ext/hwapi/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in hwapi.cpp; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC hwapi"
    else
      
  
  case ext/hwapi in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/hwapi"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/hwapi/"; ac_bdir="ext/hwapi/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in hwapi.cpp; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC hwapi"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


  
  
  case hwapi in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lhwapi $LIBS" 
   ;;
  esac


  
  
  case pthread in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lpthread $LIBS" 
   ;;
  esac


  
  
  case stdc++ in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lstdc++ $LIBS" 
   ;;
  esac


  
  if test "$HWAPI_DIR/include" != "/usr/include"; then
    
  if test -z "$HWAPI_DIR/include" || echo "$HWAPI_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$HWAPI_DIR/include
  else
    
    ep_dir="`echo $HWAPI_DIR/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$HWAPI_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

fi


echo $ac_n "checking for Hyperwave support""... $ac_c" 1>&6
echo "configure:34269: checking for Hyperwave support" >&5
# Check whether --with-hyperwave or --without-hyperwave was given.
if test "${with_hyperwave+set}" = set; then
  withval="$with_hyperwave"
  
  if test "$withval" != "no"; then
    cat >> confdefs.h <<\EOF
#define HYPERWAVE 1
EOF

    echo "$ac_t""yes" 1>&6
    
  ext_builddir=ext/hyperwave
  ext_srcdir=$abs_srcdir/ext/hyperwave

  ac_extra=

  if test "" != "shared" && test "" != "yes" && test "" != "cli"; then

    
  
  case ext/hyperwave in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/hyperwave"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/hyperwave/"; ac_bdir="ext/hyperwave/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in hw.c hg_comm.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC hyperwave"
    if test "" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC hyperwave"
    fi
  else
    if test "" = "shared" || test "" = "yes"; then
      
  case ext/hyperwave in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/hyperwave"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/hyperwave/"; ac_bdir="ext/hyperwave/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in hw.c hg_comm.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_hyperwave="$shared_objects_hyperwave $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/hyperwave.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_hyperwave"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/hyperwave.la: $ext_builddir/hyperwave.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/hyperwave.la \$(phplibdir)

$ext_builddir/hyperwave.la: \$(shared_objects_hyperwave) \$(HYPERWAVE_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_hyperwave) \$(HYPERWAVE_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_HYPERWAVE 1
EOF

    fi
  fi

  if test "" != "shared" && test "" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/hyperwave in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/hyperwave"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/hyperwave/"; ac_bdir="ext/hyperwave/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in hw.c hg_comm.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC hyperwave"
    else
      
  
  case ext/hyperwave in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/hyperwave"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/hyperwave/"; ac_bdir="ext/hyperwave/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in hw.c hg_comm.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC hyperwave"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


  else
    cat >> confdefs.h <<\EOF
#define HYPERWAVE 0
EOF

    echo "$ac_t""no" 1>&6
  fi

else
  
  cat >> confdefs.h <<\EOF
#define HYPERWAVE 0
EOF

  echo "$ac_t""no" 1>&6

fi





echo $ac_n "checking for iconv support""... $ac_c" 1>&6
echo "configure:34511: checking for iconv support" >&5
# Check whether --with-iconv or --without-iconv was given.
if test "${with_iconv+set}" = set; then
  withval="$with_iconv"
  PHP_ICONV=$withval
else
  
  PHP_ICONV=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_ICONV=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_ICONV in
shared,*)
  PHP_ICONV=`echo "$PHP_ICONV"|sed 's/^shared,//'`
  ;;
shared)
  PHP_ICONV=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_ICONV" != "no"; then

  
  found_iconv=no
  unset ICONV_DIR

        if test "$PHP_ICONV" = "yes"; then
    echo $ac_n "checking for iconv""... $ac_c" 1>&6
echo "configure:34562: checking for iconv" >&5
if eval "test \"`echo '$''{'ac_cv_func_iconv'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 34567 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char iconv(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char iconv();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_iconv) || defined (__stub___iconv)
choke me
#else
iconv();
#endif

; return 0; }
EOF
if { (eval echo configure:34590: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_iconv=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_iconv=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'iconv`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
      
  echo "#define HAVE_ICONV 1" > include/php_have_iconv.h

      found_iconv=yes
    
else
  echo "$ac_t""no" 1>&6

      echo $ac_n "checking for libiconv""... $ac_c" 1>&6
echo "configure:34614: checking for libiconv" >&5
if eval "test \"`echo '$''{'ac_cv_func_libiconv'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 34619 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char libiconv(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char libiconv();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_libiconv) || defined (__stub___libiconv)
choke me
#else
libiconv();
#endif

; return 0; }
EOF
if { (eval echo configure:34642: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_libiconv=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_libiconv=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'libiconv`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
        
  echo "#define HAVE_LIBICONV 1" > include/php_have_libiconv.h

        found_iconv=yes
      
else
  echo "$ac_t""no" 1>&6
fi

    
fi

  fi

        if test "$found_iconv" = "no"; then

    for i in $PHP_ICONV /usr/local /usr; do
      if test -r $i/include/giconv.h; then
        cat >> confdefs.h <<\EOF
#define HAVE_GICONV_H 1
EOF

        ICONV_DIR=$i
        iconv_lib_name=giconv
        break
      elif test -r $i/include/iconv.h; then
        ICONV_DIR=$i
        iconv_lib_name=iconv
        break
      fi
    done

    if test -z "$ICONV_DIR"; then
      { echo "configure: error: Please specify the install prefix of iconv with --with-iconv=<DIR>" 1>&2; exit 1; }
    fi
  
    if test -f $ICONV_DIR/lib/lib$iconv_lib_name.a ||
       test -f $ICONV_DIR/lib/lib$iconv_lib_name.$SHLIB_SUFFIX_NAME
    then
      
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
        -L$ICONV_DIR/lib
       $LDFLAGS"
  echo $ac_n "checking for libiconv in -l$iconv_lib_name""... $ac_c" 1>&6
echo "configure:34702: checking for libiconv in -l$iconv_lib_name" >&5
ac_lib_var=`echo $iconv_lib_name'_'libiconv | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$iconv_lib_name  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 34710 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char libiconv();

int main() {
libiconv()
; return 0; }
EOF
if { (eval echo configure:34721: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
        found_iconv=yes
        
  echo "#define HAVE_LIBICONV 1" > include/php_have_libiconv.h

      
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_$iconv_lib_name
    
        
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
          -L$ICONV_DIR/lib
         $LDFLAGS"
  echo $ac_n "checking for iconv in -l$iconv_lib_name""... $ac_c" 1>&6
echo "configure:34757: checking for iconv in -l$iconv_lib_name" >&5
ac_lib_var=`echo $iconv_lib_name'_'iconv | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$iconv_lib_name  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 34765 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char iconv();

int main() {
iconv()
; return 0; }
EOF
if { (eval echo configure:34776: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
          found_iconv=yes
          
  echo "#define HAVE_ICONV 1" > include/php_have_iconv.h

        
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_$iconv_lib_name
    
  
fi

      
  
fi

    fi
  fi

  if test "$found_iconv" = "yes"; then
    if test -n "$ICONV_DIR"; then
      cat >> confdefs.h <<\EOF
#define HAVE_ICONV 1
EOF

      

  if test "$ext_shared" = "yes"; then
    ICONV_SHARED_LIBADD="-l$iconv_lib_name $ICONV_SHARED_LIBADD"
    if test -n "$ICONV_DIR/lib"; then
      
  if test "$ICONV_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ICONV_DIR/lib" || echo "$ICONV_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ICONV_DIR/lib
  else
    
    ep_dir="`echo $ICONV_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ICONV_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ICONV_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ICONV_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ICONV_DIR/lib"; then
    
  if test "$ICONV_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ICONV_DIR/lib" || echo "$ICONV_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ICONV_DIR/lib
  else
    
    ep_dir="`echo $ICONV_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ICONV_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case $iconv_lib_name in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$iconv_lib_name $LIBS" 
   ;;
  esac




  fi


      
  if test "$ICONV_DIR/include" != "/usr/include"; then
    
  if test -z "$ICONV_DIR/include" || echo "$ICONV_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$ICONV_DIR/include
  else
    
    ep_dir="`echo $ICONV_DIR/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ICONV_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    fi
    
    iconv_avail="yes";
  
else 
    iconv_avail="no";
  
  fi


  if test "$iconv_avail" != "no"; then
    iconv_cflags_save="$CFLAGS"
    CFLAGS="$CFLAGS $INCLUDES"
    echo $ac_n "checking if iconv supports errno""... $ac_c" 1>&6
echo "configure:34963: checking if iconv supports errno" >&5
    if test "$cross_compiling" = yes; then
    { echo "configure: error: can not run test program while cross compiling" 1>&2; exit 1; }
else
  cat > conftest.$ac_ext <<EOF
#line 34968 "configure"
#include "confdefs.h"

#define LIBICONV_PLUG
#include <iconv.h>
#include <errno.h>
#if defined(_LIBICONV_H)
#define icv_open(a, b) libiconv_open(a, b)
#define icv_close(a) libiconv_close(a)
#define icv(a, b, c, d, e) libiconv(a, b, c, d, e)
#else
#define icv_open(a, b) iconv_open(a, b)
#define icv_close(a) iconv_close(a)
#define icv(a, b, c, d, e) iconv(a, b, c, d, e)
#endif

int main() {
	iconv_t cd;
	cd = icv_open( "*blahblah*", "*blahblah*" );
	if( cd == (iconv_t)(-1) ) {
		if( errno == EINVAL ) {
			return 0;
		} else {
			return 1;
		}
	}
	icv_close( cd );
	return 2;
}
    
EOF
if { (eval echo configure:34999: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
      echo "$ac_t""yes" 1>&6
      
  echo "#define ICONV_SUPPORTS_ERRNO 1" > include/php_iconv_supports_errno.h

      cat >> confdefs.h <<\EOF
#define ICONV_SUPPORTS_ERRNO 1
EOF

    
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
      echo "$ac_t""no" 1>&6
      
  echo "#define ICONV_SUPPORTS_ERRNO 0" > include/php_iconv_supports_errno.h

      cat >> confdefs.h <<\EOF
#define ICONV_SUPPORTS_ERRNO 0
EOF

    
fi
rm -fr conftest*
fi


    if test -z "$iconv_lib_name"; then
      echo $ac_n "checking if iconv is glibc's""... $ac_c" 1>&6
echo "configure:35032: checking if iconv is glibc's" >&5
      cat > conftest.$ac_ext <<EOF
#line 35034 "configure"
#include "confdefs.h"
#include <gnu/libc-version.h>
int main() {
gnu_get_libc_version();
; return 0; }
EOF
if { (eval echo configure:35041: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  
        echo "$ac_t""yes" 1>&6
        iconv_impl_name="glibc"
      
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
        echo "$ac_t""no" 1>&6
      
fi
rm -f conftest*
    else
      case "$iconv_lib_name" in
        iconv )
          echo $ac_n "checking if iconv is Konstantin Chugeuv's""... $ac_c" 1>&6
echo "configure:35060: checking if iconv is Konstantin Chugeuv's" >&5
          cat > conftest.$ac_ext <<EOF
#line 35062 "configure"
#include "confdefs.h"
#include <iconv.h>
int main() {
iconv_ccs_init(NULL, NULL);
; return 0; }
EOF
if { (eval echo configure:35069: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  
            echo "$ac_t""yes" 1>&6
            iconv_impl_name="bsd"
          
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
            echo "$ac_t""no" 1>&6
            iconv_impl_name="gnu_libiconv"
          
fi
rm -f conftest*
          ;;

        giconv )
          iconv_impl_name="gnu_libiconv"
          ;;

        biconv )
          iconv_impl_name="bsd"
          ;;
      esac
    fi 

    case "$iconv_impl_name" in
      gnu_libiconv )
        
  echo "#define PHP_ICONV_IMPL \"libiconv\"" > include/php_php_iconv_impl.h

        cat >> confdefs.h <<\EOF
#define PHP_ICONV_IMPL "libiconv"
EOF

        ;;

      bsd )
        
  echo "#define HAVE_BSD_ICONV 1" > include/php_have_bsd_iconv.h

        cat >> confdefs.h <<\EOF
#define HAVE_BSD_ICONV 1
EOF

        
  echo "#define PHP_ICONV_IMPL \"BSD iconv\"" > include/php_php_iconv_impl.h

        cat >> confdefs.h <<\EOF
#define PHP_ICONV_IMPL "BSD iconv"
EOF

        ;;

      glibc )
        
  echo "#define HAVE_GLIBC_ICONV 1" > include/php_have_glibc_iconv.h

        cat >> confdefs.h <<\EOF
#define HAVE_GLIBC_ICONV 1
EOF

        
  echo "#define PHP_ICONV_IMPL \"glibc\"" > include/php_php_iconv_impl.h

        cat >> confdefs.h <<\EOF
#define PHP_ICONV_IMPL "glibc"
EOF

        ;;
    esac

    CFLAGS="$iconv_cflags_save"

    
  ext_builddir=ext/iconv
  ext_srcdir=$abs_srcdir/ext/iconv

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/iconv in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/iconv"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/iconv/"; ac_bdir="ext/iconv/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in iconv.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC iconv"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC iconv"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/iconv in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/iconv"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/iconv/"; ac_bdir="ext/iconv/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in iconv.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_iconv="$shared_objects_iconv $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/iconv.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_iconv"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/iconv.la: $ext_builddir/iconv.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/iconv.la \$(phplibdir)

$ext_builddir/iconv.la: \$(shared_objects_iconv) \$(ICONV_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_iconv) \$(ICONV_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_ICONV 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/iconv in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/iconv"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/iconv/"; ac_bdir="ext/iconv/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in iconv.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC iconv"
    else
      
  
  case ext/iconv in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/iconv"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/iconv/"; ac_bdir="ext/iconv/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in iconv.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC iconv"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


    
  PHP_VAR_SUBST="$PHP_VAR_SUBST ICONV_SHARED_LIBADD"

  else
    { echo "configure: error: Please reinstall the iconv library." 1>&2; exit 1; }
  fi
fi















echo $ac_n "checking for IMAP support""... $ac_c" 1>&6
echo "configure:35376: checking for IMAP support" >&5
# Check whether --with-imap or --without-imap was given.
if test "${with_imap+set}" = set; then
  withval="$with_imap"
  PHP_IMAP=$withval
else
  
  PHP_IMAP=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_IMAP=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_IMAP in
shared,*)
  PHP_IMAP=`echo "$PHP_IMAP"|sed 's/^shared,//'`
  ;;
shared)
  PHP_IMAP=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_IMAP" != "no"; then  

    
  PHP_VAR_SUBST="$PHP_VAR_SUBST IMAP_SHARED_LIBADD"

    
  ext_builddir=ext/imap
  ext_srcdir=$abs_srcdir/ext/imap

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/imap in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/imap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/imap/"; ac_bdir="ext/imap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_imap.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC imap"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC imap"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/imap in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/imap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/imap/"; ac_bdir="ext/imap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_imap.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_imap="$shared_objects_imap $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/imap.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_imap"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/imap.la: $ext_builddir/imap.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/imap.la \$(phplibdir)

$ext_builddir/imap.la: \$(shared_objects_imap) \$(IMAP_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_imap) \$(IMAP_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_IMAP 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/imap in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/imap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/imap/"; ac_bdir="ext/imap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_imap.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC imap"
    else
      
  
  case ext/imap in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/imap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/imap/"; ac_bdir="ext/imap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_imap.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC imap"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


    cat >> confdefs.h <<\EOF
#define HAVE_IMAP 1
EOF


    for i in /usr/local /usr $PHP_IMAP; do
      if test -r "$i/c-client.h"; then
    cat >> confdefs.h <<\EOF
#define HAVE_IMAP2000 1
EOF

    IMAP_DIR=$i
    IMAP_INC_DIR=$i
  elif test -r "$i/rfc822.h"; then 
    IMAP_DIR=$i; 
    IMAP_INC_DIR=$i

      elif test -r "$i/include/c-client/c-client.h"; then
    cat >> confdefs.h <<\EOF
#define HAVE_IMAP2000 1
EOF

    IMAP_DIR=$i
    IMAP_INC_DIR=$i/include/c-client
  elif test -r "$i/include/c-client/rfc822.h"; then 
    IMAP_DIR=$i; 
    IMAP_INC_DIR=$i/include/c-client

      elif test -r "$i/include/imap/c-client.h"; then
    cat >> confdefs.h <<\EOF
#define HAVE_IMAP2000 1
EOF

    IMAP_DIR=$i
    IMAP_INC_DIR=$i/include/imap
  elif test -r "$i/include/imap/rfc822.h"; then 
    IMAP_DIR=$i; 
    IMAP_INC_DIR=$i/include/imap

      elif test -r "$i/include/c-client.h"; then
    cat >> confdefs.h <<\EOF
#define HAVE_IMAP2000 1
EOF

    IMAP_DIR=$i
    IMAP_INC_DIR=$i/include
  elif test -r "$i/include/rfc822.h"; then 
    IMAP_DIR=$i; 
    IMAP_INC_DIR=$i/include

      elif test -r "$i/imap/c-client.h"; then
    cat >> confdefs.h <<\EOF
#define HAVE_IMAP2000 1
EOF

    IMAP_DIR=$i
    IMAP_INC_DIR=$i/imap
  elif test -r "$i/imap/rfc822.h"; then 
    IMAP_DIR=$i; 
    IMAP_INC_DIR=$i/imap

      elif test -r "$i/c-client/c-client.h"; then
    cat >> confdefs.h <<\EOF
#define HAVE_IMAP2000 1
EOF

    IMAP_DIR=$i
    IMAP_INC_DIR=$i/c-client
  elif test -r "$i/c-client/rfc822.h"; then 
    IMAP_DIR=$i; 
    IMAP_INC_DIR=$i/c-client

      fi
    done

    old_CPPFLAGS=$CPPFLAGS
    CPPFLAGS=-I$IMAP_INC_DIR
    cat > conftest.$ac_ext <<EOF
#line 35710 "configure"
#include "confdefs.h"

#include "imap4r1.h"
#if defined(IMAPSSLPORT)
      this_is_true
#endif
    
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "this_is_true" >/dev/null 2>&1; then
  rm -rf conftest*
  
      cat >> confdefs.h <<\EOF
#define HAVE_IMAP2001 1
EOF

    
fi
rm -f conftest*

    CPPFLAGS=$old_CPPFLAGS

    echo $ac_n "checking for pam_start in -lpam""... $ac_c" 1>&6
echo "configure:35734: checking for pam_start in -lpam" >&5
ac_lib_var=`echo pam'_'pam_start | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpam  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 35742 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char pam_start();

int main() {
pam_start()
; return 0; }
EOF
if { (eval echo configure:35753: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo pam | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lpam $LIBS"

else
  echo "$ac_t""no" 1>&6
fi
 
    echo $ac_n "checking for crypt in -lcrypt""... $ac_c" 1>&6
echo "configure:35781: checking for crypt in -lcrypt" >&5
ac_lib_var=`echo crypt'_'crypt | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lcrypt  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 35789 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char crypt();

int main() {
crypt()
; return 0; }
EOF
if { (eval echo configure:35800: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo crypt | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lcrypt $LIBS"

else
  echo "$ac_t""no" 1>&6
fi

	    
    
  if test -z "$IMAP_DIR" || echo "$IMAP_DIR" | grep '^/' >/dev/null ; then
    IMAP_DIR=$IMAP_DIR
  else
    
    ep_dir="`echo $IMAP_DIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    IMAP_DIR="$ep_realdir/`basename \"$IMAP_DIR\"`"
  fi


    if test -z "$IMAP_DIR"; then
      { echo "configure: error: Cannot find rfc822.h. Please check your IMAP installation." 1>&2; exit 1; }
    fi

    if test -r "$IMAP_DIR/c-client/c-client.a"; then
      ln -s "$IMAP_DIR/c-client/c-client.a" "$IMAP_DIR/c-client/libc-client.a" >/dev/null 2>&1
    elif test -r "$IMAP_DIR/lib/c-client.a"; then
      ln -s "$IMAP_DIR/lib/c-client.a" "$IMAP_DIR/lib/libc-client.a" >/dev/null 2>&1
    fi

    for lib in c-client4 c-client imap; do
      IMAP_LIB=$lib
      
  str="$IMAP_DIR/lib/lib$lib.*"
  for i in `echo $str`; do
    if test -r $i; then
      IMAP_LIBDIR=$IMAP_DIR/lib
      break 2
    fi
  done

      
  str="$IMAP_DIR/c-client/lib$lib.*"
  for i in `echo $str`; do
    if test -r $i; then
      IMAP_LIBDIR=$IMAP_DIR/c-client
      break 2
    fi
  done

    done

    if test -z "$IMAP_LIBDIR"; then
      { echo "configure: error: Cannot find imap library (libc-client.a). Please check your IMAP installation." 1>&2; exit 1; }
    fi

    
  if test "$IMAP_INC_DIR" != "/usr/include"; then
    
  if test -z "$IMAP_INC_DIR" || echo "$IMAP_INC_DIR" | grep '^/' >/dev/null ; then
    ai_p=$IMAP_INC_DIR
  else
    
    ep_dir="`echo $IMAP_INC_DIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$IMAP_INC_DIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    
  
  case $IMAP_LIB in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="-l$IMAP_LIB $IMAP_SHARED_LIBADD" 
    else
      
  
  case $IMAP_LIB in
  c|c_r|pthread*) ;;
  *) 
      DLIBS="-l$IMAP_LIB $DLIBS" 
   ;;
  esac


    fi
   ;;
  esac


    
  if test "$IMAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$IMAP_LIBDIR" || echo "$IMAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$IMAP_LIBDIR
  else
    
    ep_dir="`echo $IMAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$IMAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $IMAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    
  # Check whether --with-kerberos or --without-kerberos was given.
if test "${with_kerberos+set}" = set; then
  withval="$with_kerberos"
  
    PHP_KERBEROS=$withval
  
else
  
    PHP_KERBEROS=no
  
fi


  if test "$PHP_KERBEROS" != "no"; then

    if test "$PHP_KERBEROS" = "yes"; then
      SEARCH_PATHS="/usr/kerberos /usr/local /usr"
    else
      SEARCH_PATHS=$PHP_KERBEROS
    fi

    for i in $SEARCH_PATHS; do
      if test -f $i/lib/libkrb5.a || test -f $i/lib/libkrb5.$SHLIB_SUFFIX_NAME; then
        PHP_KERBEROS_DIR=$i
        break
      fi
    done

    if test -z "$PHP_KERBEROS_DIR"; then
      { echo "configure: error: Kerberos libraries not found. 
      
      Check the path given to --with-kerberos (if no path is given, searches in /usr/kerberos, /usr/local and /usr )
      " 1>&2; exit 1; }
    fi
    cat >> confdefs.h <<\EOF
#define HAVE_IMAP_KRB 1
EOF

    
  if test "$PHP_KERBEROS_DIR/lib" != "/usr/lib"; then
    
  if test -z "$PHP_KERBEROS_DIR/lib" || echo "$PHP_KERBEROS_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$PHP_KERBEROS_DIR/lib
  else
    
    ep_dir="`echo $PHP_KERBEROS_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_KERBEROS_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $IMAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    
  
  case gssapi_krb5 in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="$IMAP_SHARED_LIBADD -lgssapi_krb5" 
    else
      
  
  case gssapi_krb5 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -lgssapi_krb5" 
   ;;
  esac


    fi
   ;;
  esac


    
  
  case krb5 in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="$IMAP_SHARED_LIBADD -lkrb5" 
    else
      
  
  case krb5 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -lkrb5" 
   ;;
  esac


    fi
   ;;
  esac


    
  
  case k5crypto in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="$IMAP_SHARED_LIBADD -lk5crypto" 
    else
      
  
  case k5crypto in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -lk5crypto" 
   ;;
  esac


    fi
   ;;
  esac


    
  
  case com_err in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="$IMAP_SHARED_LIBADD -lcom_err" 
    else
      
  
  case com_err in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -lcom_err" 
   ;;
  esac


    fi
   ;;
  esac


    
  if test "$PHP_KERBEROS_DIR/include" != "/usr/include"; then
    
  if test -z "$PHP_KERBEROS_DIR/include" || echo "$PHP_KERBEROS_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$PHP_KERBEROS_DIR/include
  else
    
    ep_dir="`echo $PHP_KERBEROS_DIR/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_KERBEROS_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  else
    cat > conftest.$ac_ext <<EOF
#line 36168 "configure"
#include "confdefs.h"
#include <$IMAP_INC_DIR/linkage.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "auth_gss" >/dev/null 2>&1; then
  rm -rf conftest*
  
      { echo "configure: error: This c-client library is built with Kerberos support. 

      Add --with-kerberos to your configure line. Check config.log for details.
      " 1>&2; exit 1; }
    
fi
rm -f conftest*

  fi


    
  # Check whether --with-imap-ssl or --without-imap-ssl was given.
if test "${with_imap_ssl+set}" = set; then
  withval="$with_imap_ssl"
  
    PHP_IMAP_SSL=$withval
  
else
  
    PHP_IMAP_SSL=no
  
fi


  if test "$PHP_IMAP_SSL" = "yes"; then
    PHP_IMAP_SSL=/usr
  fi

  echo $ac_n "checking whether SSL libraries are needed for c-client""... $ac_c" 1>&6
echo "configure:36206: checking whether SSL libraries are needed for c-client" >&5

  if test "$PHP_IMAP_SSL" != "no"; then
    echo "$ac_t""$PHP_IMAP_SSL/lib" 1>&6
    cat >> confdefs.h <<\EOF
#define HAVE_IMAP_SSL 1
EOF

    
  
  case ssl in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="$IMAP_SHARED_LIBADD -lssl" 
    else
      
  
  case ssl in
  c|c_r|pthread*) ;;
  *) 
      DLIBS="$DLIBS -lssl" 
   ;;
  esac


    fi
   ;;
  esac


    
  
  case crypto in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="$IMAP_SHARED_LIBADD -lcrypto" 
    else
      
  
  case crypto in
  c|c_r|pthread*) ;;
  *) 
      DLIBS="$DLIBS -lcrypto" 
   ;;
  esac


    fi
   ;;
  esac


    
  if test "$PHP_IMAP_SSL/lib" != "/usr/lib"; then
    
  if test -z "$PHP_IMAP_SSL/lib" || echo "$PHP_IMAP_SSL/lib" | grep '^/' >/dev/null ; then
    ai_p=$PHP_IMAP_SSL/lib
  else
    
    ep_dir="`echo $PHP_IMAP_SSL/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_IMAP_SSL/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        IMAP_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $IMAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

  else
    echo "$ac_t""no" 1>&6
  fi


        TST_LIBS="$DLIBS $IMAP_SHARED_LIBADD"

        
  old_LIBS=$LIBS
  LIBS="$TST_LIBS $LIBS"
  if test "$cross_compiling" = yes; then
    { echo "configure: error: can not run test program while cross compiling" 1>&2; exit 1; }
else
  cat > conftest.$ac_ext <<EOF
#line 36311 "configure"
#include "confdefs.h"

    void mm_log(void){}
    void mm_dlog(void){}
    void mm_flags(void){}
    void mm_fatal(void){}
    void mm_critical(void){}
    void mm_nocritical(void){}
    void mm_notify(void){}
    void mm_login(void){}
    void mm_diskerror(void){}
    void mm_status(void){}
    void mm_lsub(void){}
    void mm_list(void){}
    void mm_exists(void){}
    void mm_searched(void){}
    void mm_expunged(void){}
    char auth_gssapi_valid();
    int main() {
      auth_gssapi_valid();
      return 0;
    }
  
EOF
if { (eval echo configure:36336: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    LIBS=$old_LIBS
    
      cat >> confdefs.h <<\EOF
#define HAVE_IMAP_AUTH_GSS 1
EOF

    
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    LIBS=$old_LIBS
    
  
fi
rm -fr conftest*
fi



    echo $ac_n "checking whether IMAP works""... $ac_c" 1>&6
echo "configure:36362: checking whether IMAP works" >&5
    
  old_LIBS=$LIBS
  LIBS="$TST_LIBS $LIBS"
  if test "$cross_compiling" = yes; then
    { echo "configure: error: can not run test program while cross compiling" 1>&2; exit 1; }
else
  cat > conftest.$ac_ext <<EOF
#line 36370 "configure"
#include "confdefs.h"

    void mm_log(void){}
    void mm_dlog(void){}
    void mm_flags(void){}
    void mm_fatal(void){}
    void mm_critical(void){}
    void mm_nocritical(void){}
    void mm_notify(void){}
    void mm_login(void){}
    void mm_diskerror(void){}
    void mm_status(void){}
    void mm_lsub(void){}
    void mm_list(void){}
    void mm_exists(void){}
    void mm_searched(void){}
    void mm_expunged(void){}
    char mail_newbody();
    int main() {
      mail_newbody();
      return 0;
    }
  
EOF
if { (eval echo configure:36395: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    LIBS=$old_LIBS
    
      echo "$ac_t""yes" 1>&6
    
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    LIBS=$old_LIBS
    
      echo "$ac_t""no" 1>&6
      { echo "configure: error: build test failed. Please check the config.log for details." 1>&2; exit 1; }
    
  
fi
rm -fr conftest*
fi


fi




echo $ac_n "checking for Informix support""... $ac_c" 1>&6
echo "configure:36425: checking for Informix support" >&5
# Check whether --with-informix or --without-informix was given.
if test "${with_informix+set}" = set; then
  withval="$with_informix"
  PHP_INFORMIX=$withval
else
  
  PHP_INFORMIX=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_INFORMIX=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_INFORMIX in
shared,*)
  PHP_INFORMIX=`echo "$PHP_INFORMIX"|sed 's/^shared,//'`
  ;;
shared)
  PHP_INFORMIX=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_INFORMIX" != "no"; then

  if test "$INFORMIXDIR" = ""; then
    { echo "configure: error: INFORMIXDIR environment variable is not set." 1>&2; exit 1; }
  fi

  if test "$PHP_INFORMIX" = "yes"; then
    IFX_INCLUDE=-I$INFORMIXDIR/incl/esql
    
  if test "$INFORMIXDIR/lib" != "/usr/lib"; then
    
  if test -z "$INFORMIXDIR/lib" || echo "$INFORMIXDIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$INFORMIXDIR/lib
  else
    
    ep_dir="`echo $INFORMIXDIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$INFORMIXDIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        INFORMIX_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $INFORMIX_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    
  if test "$INFORMIXDIR/lib/esql" != "/usr/lib"; then
    
  if test -z "$INFORMIXDIR/lib/esql" || echo "$INFORMIXDIR/lib/esql" | grep '^/' >/dev/null ; then
    ai_p=$INFORMIXDIR/lib/esql
  else
    
    ep_dir="`echo $INFORMIXDIR/lib/esql|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$INFORMIXDIR/lib/esql\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        INFORMIX_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $INFORMIX_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

  else
    if test "$PHP_INFORMIX" != "$INFORMIXDIR"; then
      { echo "configure: error: Specified Informix base install directory is different than your INFORMIXDIR environment variable." 1>&2; exit 1; }
    fi
    IFX_INCLUDE=-I$PHP_INFORMIX/incl/esql
    
  if test "$PHP_INFORMIX/lib" != "/usr/lib"; then
    
  if test -z "$PHP_INFORMIX/lib" || echo "$PHP_INFORMIX/lib" | grep '^/' >/dev/null ; then
    ai_p=$PHP_INFORMIX/lib
  else
    
    ep_dir="`echo $PHP_INFORMIX/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_INFORMIX/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        INFORMIX_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $INFORMIX_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    
  if test "$PHP_INFORMIX/lib/esql" != "/usr/lib"; then
    
  if test -z "$PHP_INFORMIX/lib/esql" || echo "$PHP_INFORMIX/lib/esql" | grep '^/' >/dev/null ; then
    ai_p=$PHP_INFORMIX/lib/esql
  else
    
    ep_dir="`echo $PHP_INFORMIX/lib/esql|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_INFORMIX/lib/esql\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        INFORMIX_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $INFORMIX_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

  fi

    if test "$enable_experimental_zts" = "yes"; then
    IFX_ESQL_FLAGS="-thread"   
    CPPFLAGS="$CPPFLAGS -DIFX_THREAD"
  else
    IFX_ESQL_FLAGS=""
  fi

  IFX_LIBS=`THREADLIB=POSIX $INFORMIXDIR/bin/esql $IFX_ESQL_FLAGS -libs`
  IFX_LIBS=`echo $IFX_LIBS | sed -e 's/Libraries to be used://g' -e 's/esql: error -55923: No source or object file\.//g'`
    
  case "$host_alias" in
    *aix*)
      CPPFLAGS="$CPPFLAGS -D__H_LOCALEDEF";;
  esac

  echo $ac_n "checking Informix version""... $ac_c" 1>&6
echo "configure:36647: checking Informix version" >&5
  IFX_VERSION=`$INFORMIXDIR/bin/esql -V | grep "ESQL Version" | sed -ne '1 s/\(.*\)ESQL Version \([0-9]*\)\.\([0-9]*\).*/\2\3/p'`
  echo "$ac_t""$IFX_VERSION" 1>&6
  cat >> confdefs.h <<EOF
#define IFX_VERSION $IFX_VERSION
EOF


  if test $IFX_VERSION -ge "900"; then
    cat >> confdefs.h <<\EOF
#define HAVE_IFX_IUS 1
EOF

    IFX_ESQL_FLAGS="$IFX_ESQL_FLAGS -EDHAVE_IFX_IUS"
  else
    IFX_ESQL_FLAGS="$IFX_ESQL_FLAGS -EUHAVE_IFX_IUS"
  fi

  
  ext_builddir=ext/informix
  ext_srcdir=$abs_srcdir/ext/informix

  ac_extra=`echo "$IFX_INCLUDE"|sed s#@ext_srcdir@#$ext_srcdir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/informix in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/informix"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/informix/"; ac_bdir="ext/informix/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ifx.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC informix"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC informix"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/informix in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/informix"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/informix/"; ac_bdir="ext/informix/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in ifx.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_informix="$shared_objects_informix $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/informix.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_informix"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/informix.la: $ext_builddir/informix.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/informix.la \$(phplibdir)

$ext_builddir/informix.la: \$(shared_objects_informix) \$(INFORMIX_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_informix) \$(INFORMIX_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_INFORMIX 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/informix in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/informix"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/informix/"; ac_bdir="ext/informix/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ifx.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC informix"
    else
      
  
  case ext/informix in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/informix"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/informix/"; ac_bdir="ext/informix/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ifx.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC informix"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


  
  src=$ext_srcdir/Makefile.frag
  ac_srcdir=$ext_srcdir
  ac_builddir=$ext_builddir
  sed -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments


  for i in $IFX_LIBS; do
    case "$i" in
      *.o)
        IFX_LIBOBJS="$IFX_LIBOBJS $i"
        
  if test "$ext_builddir" != "/usr/lib"; then
    
  if test -z "$ext_builddir" || echo "$ext_builddir" | grep '^/' >/dev/null ; then
    ai_p=$ext_builddir
  else
    
    ep_dir="`echo $ext_builddir|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ext_builddir\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        INFORMIX_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $INFORMIX_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

        
  
  case phpifx in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        INFORMIX_SHARED_LIBADD="$INFORMIX_SHARED_LIBADD -lphpifx" 
    else
      
  
  case phpifx in
  c|c_r|pthread*) ;;
  *) 
      DLIBS="$DLIBS -lphpifx" 
   ;;
  esac


    fi
   ;;
  esac


        ;;
      -lm)
        ;;
      -lc)
        ;;
      -l*)
        lib=`echo $i | cut -c 3-`
        
  
  case $lib in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        INFORMIX_SHARED_LIBADD="$INFORMIX_SHARED_LIBADD -l$lib" 
    else
      
  
  case $lib in
  c|c_r|pthread*) ;;
  *) 
      DLIBS="$DLIBS -l$lib" 
   ;;
  esac


    fi
   ;;
  esac


        ;;
      *.a)
        case "`uname -s 2>/dev/null`" in
          UnixWare | SCO_SV | UNIX_SV)
            DLIBS="$DLIBS $i"
            ;;
          *)
            ac_dir="`echo $i|sed 's#[^/]*$##;s#\/$##'`"
            ac_lib="`echo $i|sed 's#^/.*/lib##g;s#\.a##g'`"
            DLIBS="$DLIBS -L$ac_dir -l$ac_lib"
            ;;
        esac
        ;;
    esac
  done

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST INFORMIX_SHARED_LIBADD"

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST INFORMIXDIR"

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST IFX_LIBOBJS"

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST IFX_ESQL_FLAGS"

  cat >> confdefs.h <<\EOF
#define HAVE_IFX 1
EOF

fi




echo $ac_n "checking for Ingres II support""... $ac_c" 1>&6
echo "configure:37012: checking for Ingres II support" >&5
# Check whether --with-ingres or --without-ingres was given.
if test "${with_ingres+set}" = set; then
  withval="$with_ingres"
  PHP_INGRES=$withval
else
  
  PHP_INGRES=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_INGRES=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_INGRES in
shared,*)
  PHP_INGRES=`echo "$PHP_INGRES"|sed 's/^shared,//'`
  ;;
shared)
  PHP_INGRES=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_INGRES" != "no"; then
  cat >> confdefs.h <<\EOF
#define HAVE_II 1
EOF

  
  ext_builddir=ext/ingres_ii
  ext_srcdir=$abs_srcdir/ext/ingres_ii

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/ingres_ii in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ingres_ii"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ingres_ii/"; ac_bdir="ext/ingres_ii/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ii.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC ingres_ii"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC ingres_ii"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/ingres_ii in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ingres_ii"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ingres_ii/"; ac_bdir="ext/ingres_ii/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in ii.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_ingres_ii="$shared_objects_ingres_ii $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/ingres_ii.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_ingres_ii"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/ingres_ii.la: $ext_builddir/ingres_ii.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/ingres_ii.la \$(phplibdir)

$ext_builddir/ingres_ii.la: \$(shared_objects_ingres_ii) \$(INGRES_II_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_ingres_ii) \$(INGRES_II_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_INGRES_II 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/ingres_ii in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ingres_ii"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ingres_ii/"; ac_bdir="ext/ingres_ii/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ii.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC ingres_ii"
    else
      
  
  case ext/ingres_ii in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ingres_ii"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ingres_ii/"; ac_bdir="ext/ingres_ii/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ii.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC ingres_ii"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST II_SHARED_LIBADD"


  if test "$PHP_INGRES" = "yes"; then
    II_DIR=$II_SYSTEM/ingres
  else
    II_DIR=$PHP_INGRES
  fi

  if test -r $II_DIR/files/iiapi.h; then
    II_INC_DIR=$II_DIR/files
  else
    { echo "configure: error: Cannot find iiapi.h under $II_DIR/files" 1>&2; exit 1; }
  fi

  if test -r $II_DIR/lib/libiiapi.a; then
    II_LIB_DIR=$II_DIR/lib
  else
    { echo "configure: error: Cannot find libiiapi.a under $II_DIR/lib" 1>&2; exit 1; }
  fi

  

  if test "$ext_shared" = "yes"; then
    II_SHARED_LIBADD="-liiapi $II_SHARED_LIBADD"
    if test -n "$II_LIB_DIR"; then
      
  if test "$II_LIB_DIR" != "/usr/lib"; then
    
  if test -z "$II_LIB_DIR" || echo "$II_LIB_DIR" | grep '^/' >/dev/null ; then
    ai_p=$II_LIB_DIR
  else
    
    ep_dir="`echo $II_LIB_DIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$II_LIB_DIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        II_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $II_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$II_LIB_DIR"; then
    
  if test "$II_LIB_DIR" != "/usr/lib"; then
    
  if test -z "$II_LIB_DIR" || echo "$II_LIB_DIR" | grep '^/' >/dev/null ; then
    ai_p=$II_LIB_DIR
  else
    
    ep_dir="`echo $II_LIB_DIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$II_LIB_DIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case iiapi in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-liiapi $LIBS" 
   ;;
  esac




  fi


  

  if test "$ext_shared" = "yes"; then
    II_SHARED_LIBADD="-lingres $II_SHARED_LIBADD"
    if test -n "$II_LIB_DIR"; then
      
  if test "$II_LIB_DIR" != "/usr/lib"; then
    
  if test -z "$II_LIB_DIR" || echo "$II_LIB_DIR" | grep '^/' >/dev/null ; then
    ai_p=$II_LIB_DIR
  else
    
    ep_dir="`echo $II_LIB_DIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$II_LIB_DIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        II_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $II_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$II_LIB_DIR"; then
    
  if test "$II_LIB_DIR" != "/usr/lib"; then
    
  if test -z "$II_LIB_DIR" || echo "$II_LIB_DIR" | grep '^/' >/dev/null ; then
    ai_p=$II_LIB_DIR
  else
    
    ep_dir="`echo $II_LIB_DIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$II_LIB_DIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case ingres in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lingres $LIBS" 
   ;;
  esac




  fi


  
  if test "$II_INC_DIR" != "/usr/include"; then
    
  if test -z "$II_INC_DIR" || echo "$II_INC_DIR" | grep '^/' >/dev/null ; then
    ai_p=$II_INC_DIR
  else
    
    ep_dir="`echo $II_INC_DIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$II_INC_DIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

fi




echo $ac_n "checking for InterBase support""... $ac_c" 1>&6
echo "configure:37519: checking for InterBase support" >&5
# Check whether --with-interbase or --without-interbase was given.
if test "${with_interbase+set}" = set; then
  withval="$with_interbase"
  PHP_INTERBASE=$withval
else
  
  PHP_INTERBASE=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_INTERBASE=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_INTERBASE in
shared,*)
  PHP_INTERBASE=`echo "$PHP_INTERBASE"|sed 's/^shared,//'`
  ;;
shared)
  PHP_INTERBASE=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_INTERBASE" != "no"; then
  if test "$PHP_INTERBASE" = "yes"; then
    IBASE_INCDIR=/usr/interbase/include
    IBASE_LIBDIR=/usr/interbase/lib
  else
    IBASE_INCDIR=$PHP_INTERBASE/include
    IBASE_LIBDIR=$PHP_INTERBASE/lib
  fi

  
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
    -L$IBASE_LIBDIR
   $LDFLAGS"
  echo $ac_n "checking for isc_detach_database in -lgds""... $ac_c" 1>&6
echo "configure:37577: checking for isc_detach_database in -lgds" >&5
ac_lib_var=`echo gds'_'isc_detach_database | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgds  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 37585 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char isc_detach_database();

int main() {
isc_detach_database()
; return 0; }
EOF
if { (eval echo configure:37596: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
    IBASE_LIBNAME=gds
  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_gds
    
    
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
      -L$IBASE_LIBDIR
     $LDFLAGS"
  echo $ac_n "checking for isc_detach_database in -lib_util""... $ac_c" 1>&6
echo "configure:37629: checking for isc_detach_database in -lib_util" >&5
ac_lib_var=`echo ib_util'_'isc_detach_database | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lib_util  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 37637 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char isc_detach_database();

int main() {
isc_detach_database()
; return 0; }
EOF
if { (eval echo configure:37648: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
      IBASE_LIBNAME=ib_util
    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_ib_util
    
      { echo "configure: error: libgds or libib_util not found! Check config.log for more information." 1>&2; exit 1; }
    
  
fi

  
  
fi


  

  if test "$ext_shared" = "yes"; then
    INTERBASE_SHARED_LIBADD="-l$IBASE_LIBNAME $INTERBASE_SHARED_LIBADD"
    if test -n "$IBASE_LIBDIR"; then
      
  if test "$IBASE_LIBDIR" != "/usr/lib"; then
    
  if test -z "$IBASE_LIBDIR" || echo "$IBASE_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$IBASE_LIBDIR
  else
    
    ep_dir="`echo $IBASE_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$IBASE_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        INTERBASE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $INTERBASE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$IBASE_LIBDIR"; then
    
  if test "$IBASE_LIBDIR" != "/usr/lib"; then
    
  if test -z "$IBASE_LIBDIR" || echo "$IBASE_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$IBASE_LIBDIR
  else
    
    ep_dir="`echo $IBASE_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$IBASE_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case $IBASE_LIBNAME in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$IBASE_LIBNAME $LIBS" 
   ;;
  esac




  fi


  
  if test "$IBASE_INCDIR" != "/usr/include"; then
    
  if test -z "$IBASE_INCDIR" || echo "$IBASE_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$IBASE_INCDIR
  else
    
    ep_dir="`echo $IBASE_INCDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$IBASE_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  cat >> confdefs.h <<\EOF
#define HAVE_IBASE 1
EOF

  
  ext_builddir=ext/interbase
  ext_srcdir=$abs_srcdir/ext/interbase

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/interbase in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/interbase"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/interbase/"; ac_bdir="ext/interbase/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in interbase.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC interbase"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC interbase"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/interbase in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/interbase"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/interbase/"; ac_bdir="ext/interbase/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in interbase.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_interbase="$shared_objects_interbase $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/interbase.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_interbase"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/interbase.la: $ext_builddir/interbase.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/interbase.la \$(phplibdir)

$ext_builddir/interbase.la: \$(shared_objects_interbase) \$(INTERBASE_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_interbase) \$(INTERBASE_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_INTERBASE 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/interbase in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/interbase"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/interbase/"; ac_bdir="ext/interbase/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in interbase.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC interbase"
    else
      
  
  case ext/interbase in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/interbase"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/interbase/"; ac_bdir="ext/interbase/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in interbase.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC interbase"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST INTERBASE_SHARED_LIBADD"

fi




echo $ac_n "checking for IRCG support""... $ac_c" 1>&6
echo "configure:38033: checking for IRCG support" >&5
# Check whether --with-ircg or --without-ircg was given.
if test "${with_ircg+set}" = set; then
  withval="$with_ircg"
  PHP_IRCG=$withval
else
  
  PHP_IRCG=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_IRCG=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_IRCG in
shared,*)
  PHP_IRCG=`echo "$PHP_IRCG"|sed 's/^shared,//'`
  ;;
shared)
  PHP_IRCG=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




# Check whether --with-ircg-config or --without-ircg-config was given.
if test "${with_ircg_config+set}" = set; then
  withval="$with_ircg_config"
   IRCG_CONFIG=$withval 
else
  
if test "$with_ircg" != "yes" && test "$with_ircg" != "no"; then
  IRCG_CONFIG=$with_ircg/bin/ircg-config
else
  IRCG_CONFIG=ircg-config
fi

fi


if test "$PHP_IRCG" != "no"; then

  IRCG_PREFIX=`$IRCG_CONFIG --prefix`
  
  if test -z "$IRCG_PREFIX"; then
    { echo "configure: error: I cannot run the ircg-config script which should have been installed by IRCG. Please ensure that the script is in your PATH or point --with-ircg-config to the path of the script." 1>&2; exit 1; }
  fi
  
  
  for ac_i in `$IRCG_CONFIG --ldflags`; do
    case $ac_i in
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

    ;;
    esac
  done

  
  for ac_i in `$IRCG_CONFIG --cppflags`; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/include"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    ;;
    esac
  done

  

  if test -n "$PHP_IRCG/lib"; then
    
  if test "$PHP_IRCG/lib" != "/usr/lib"; then
    
  if test -z "$PHP_IRCG/lib" || echo "$PHP_IRCG/lib" | grep '^/' >/dev/null ; then
    ai_p=$PHP_IRCG/lib
  else
    
    ep_dir="`echo $PHP_IRCG/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_IRCG/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case ircg in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lircg $LIBS" 
   ;;
  esac




  
  if test "$PHP_IRCG/include" != "/usr/include"; then
    
  if test -z "$PHP_IRCG/include" || echo "$PHP_IRCG/include" | grep '^/' >/dev/null ; then
    ai_p=$PHP_IRCG/include
  else
    
    ep_dir="`echo $PHP_IRCG/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_IRCG/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  if test "$PHP_SAPI" = "thttpd"; then
    cat >> confdefs.h <<\EOF
#define IRCG_WITH_THTTPD 1
EOF

    
  disable_cli=1

  fi
  cat >> confdefs.h <<\EOF
#define HAVE_IRCG 1
EOF

  
  ext_builddir=ext/ircg
  ext_srcdir=$abs_srcdir/ext/ircg

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/ircg in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ircg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ircg/"; ac_bdir="ext/ircg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ircg.c ircg_scanner.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC ircg"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC ircg"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/ircg in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ircg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ircg/"; ac_bdir="ext/ircg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in ircg.c ircg_scanner.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_ircg="$shared_objects_ircg $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/ircg.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_ircg"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/ircg.la: $ext_builddir/ircg.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/ircg.la \$(phplibdir)

$ext_builddir/ircg.la: \$(shared_objects_ircg) \$(IRCG_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_ircg) \$(IRCG_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_IRCG 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/ircg in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ircg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ircg/"; ac_bdir="ext/ircg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ircg.c ircg_scanner.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC ircg"
    else
      
  
  case ext/ircg in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ircg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ircg/"; ac_bdir="ext/ircg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ircg.c ircg_scanner.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC ircg"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


  
  src=$ext_srcdir/Makefile.frag
  ac_srcdir=$ext_srcdir
  ac_builddir=$ext_builddir
  sed -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments

fi










echo $ac_n "checking for Java support""... $ac_c" 1>&6
echo "configure:38513: checking for Java support" >&5
# Check whether --with-java or --without-java was given.
if test "${with_java+set}" = set; then
  withval="$with_java"
  PHP_JAVA=$withval
else
  
  PHP_JAVA=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_JAVA=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_JAVA in
shared,*)
  PHP_JAVA=`echo "$PHP_JAVA"|sed 's/^shared,//'`
  ;;
shared)
  PHP_JAVA=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_JAVA" != "no"; then
  platform=`uname -s 2>/dev/null`
  java_libext=libjava.so
  case $platform in
    AIX) java_libext=libjava.a ;;
    HP-UX) java_libext=libjava.sl ;;
    Darwin) java_libext=libjava.jnilib ;;
  esac  
  
 echo $ac_n "checking Java Jar location""... $ac_c" 1>&6
echo "configure:38566: checking Java Jar location" >&5
  if test "$PHP_JAVA" = "yes"; then
    if JAVA_JAR=`which jar 2>/dev/null`; then
      JAVA_JAR="$JAVA_JAR cf"
    else
      JAVA_JAR=
    fi
    PHP_JAVA=`cd \`dirname \\\`which javac\\\`\`/..;pwd`

                if test -z "$JAVA_JAR"; then
      JAVA_JAR='zip -q0'
    fi
  else
                if test -x $PHP_JAVA/bin/jar; then
      JAVA_JAR="$PHP_JAVA/bin/jar cf"
    else
      { echo "configure: error: Unable to locate $PHP_JAVA/bin" 1>&2; exit 1; }
    fi
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST JAVA_JAR"

  echo "$ac_t""$JAVA_JAR" 1>&6

  
 echo $ac_n "checking Java C location""... $ac_c" 1>&6
echo "configure:38592: checking Java C location" >&5
 if test "$PHP_JAVA" = "yes"; then
   JAVA_C=`which javac`
 else
            if test -x $PHP_JAVA/bin/javac; then
     JAVA_C=$PHP_JAVA/bin/javac
   else
     { echo "configure: error: Unable to locate $PHP_JAVA/bin" 1>&2; exit 1; }
   fi
 fi
 if test -z "$JAVA_C"; then
   { echo "configure: error: Unable to locate the javac binary in your system path
Either adjust your Java installation or provide the Java installation path,
e.g. --with-java=/java expecting /java/bin/ to contain the binaries" 1>&2; exit 1; }
  fi

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST JAVA_C"

  echo "$ac_t""$JAVA_C" 1>&6


  if test "$platform" = "Darwin"; then
    for ac_hdr in JavaVM/JavaVM.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:38619: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 38624 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:38629: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

    for ac_hdr in JavaVM/jni.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:38659: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 38664 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:38669: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

        
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="-framework "JavaVM" $LDFLAGS"
        echo $ac_n "checking for JNI_CreateJavaVM in -lc""... $ac_c" 1>&6
echo "configure:38699: checking for JNI_CreateJavaVM in -lc" >&5
ac_lib_var=`echo c'_'JNI_CreateJavaVM | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lc  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 38707 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char JNI_CreateJavaVM();

int main() {
JNI_CreateJavaVM()
; return 0; }
EOF
if { (eval echo configure:38718: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    cat >> confdefs.h <<\EOF
#define HAVE_JAVA 1
EOF

  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    
  
fi


    
  
  
  unique=`echo "JavaVM"|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$FRAMEWORKS$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "FRAMEWORKS$unique=set"
    
    if test ""; then
      PHP_FRAMEWORKS="-framework "JavaVM" $PHP_FRAMEWORKS"
    else
      PHP_FRAMEWORKS="$PHP_FRAMEWORKS -framework "JavaVM""
    fi
  
  fi


    JAVA_CFLAGS="-x objective-c"
  else
    
 echo $ac_n "checking Checking for libjava""... $ac_c" 1>&6
echo "configure:38771: checking Checking for libjava" >&5
 if test -d $PHP_JAVA/lib/kaffe; then
   
  if test "$PHP_JAVA/lib" != "/usr/lib"; then
    
  if test -z "$PHP_JAVA/lib" || echo "$PHP_JAVA/lib" | grep '^/' >/dev/null ; then
    ai_p=$PHP_JAVA/lib
  else
    
    ep_dir="`echo $PHP_JAVA/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_JAVA/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

   JAVA_CFLAGS=-DKAFFE
   JAVA_INCLUDE=-I$PHP_JAVA/include/kaffe
   JAVA_CLASSPATH=$PHP_JAVA/share/kaffe/Klasses.jar
   JAVA_LIB=kaffevm
   JAVA_LIBPATH=$PHP_JAVA/lib/kaffe
   java_libext=kaffevm

   test -f $PHP_JAVA/lib/$JAVA_LIB       && JAVA_LIBPATH=$PHP_JAVA/lib
   test -f $PHP_JAVA/lib/kaffe/$JAVA_LIB && JAVA_LIBPATH=$PHP_JAVA/lib/kaffe

            if kaffe -version 2>&1 | grep 1.0b > /dev/null; then
     JAVA_JAR='zip -q0'
   fi
 elif test -f $PHP_JAVA/lib/$java_libext; then
   JAVA_LIB=java
   JAVA_LIBPATH=$PHP_JAVA/lib
   JAVA_INCLUDE=-I$PHP_JAVA/include

   test -f $PHP_JAVA/lib/classes.zip && JAVA_CFLAGS=-DJNI_11
   test -f $PHP_JAVA/lib/jvm.jar     && JAVA_CFLAGS=-DJNI_12
   test -f $PHP_JAVA/lib/classes.zip && JAVA_CLASSPATH=$PHP_JAVA/lib/classes.zip
   test -f $PHP_JAVA/lib/jvm.jar     && JAVA_CLASSPATH=$PHP_JAVA/lib/jvm.jar

   for i in $PHP_JAVA/include/*; do
     test -f $i/jni_md.h && JAVA_INCLUDE="$JAVA_INCLUDE $i"
   done
             else
            for i in `find $PHP_JAVA/include -type d`; do
     test -f $i/jni.h      && JAVA_INCLUDE="$JAVA_INCLUDE -I$i"
     test -f $i/jni_md.h   && JAVA_INCLUDE="$JAVA_INCLUDE -I$i"
   done

   for i in `find $PHP_JAVA/ -type d`; do
     test -f $i/classes.zip && JAVA_CFLAGS=-DJNI_11
     test -f $i/rt.jar      && JAVA_CFLAGS=-DJNI_12
     test -f $i/classes.zip && JAVA_CLASSPATH=$i/classes.zip
     test -f $i/rt.jar      && JAVA_CLASSPATH=$i/rt.jar

     if test -f $i/$java_libext; then
       JAVA_LIB=java
       JAVA_LIBPATH=$i

       test -d $i/hotspot && 
  if test "$i/hotspot" != "/usr/lib"; then
    
  if test -z "$i/hotspot" || echo "$i/hotspot" | grep '^/' >/dev/null ; then
    ai_p=$i/hotspot
  else
    
    ep_dir="`echo $i/hotspot|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$i/hotspot\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

       test -d $i/classic && 
  if test "$i/classic" != "/usr/lib"; then
    
  if test -z "$i/classic" || echo "$i/classic" | grep '^/' >/dev/null ; then
    ai_p=$i/classic
  else
    
    ep_dir="`echo $i/classic|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$i/classic\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

       test -d $i/server  && 
  if test "$i/server" != "/usr/lib"; then
    
  if test -z "$i/server" || echo "$i/server" | grep '^/' >/dev/null ; then
    ai_p=$i/server
  else
    
    ep_dir="`echo $i/server|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$i/server\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

       test -d $i/native_threads && 
  if test "$i/native_threads" != "/usr/lib"; then
    
  if test -z "$i/native_threads" || echo "$i/native_threads" | grep '^/' >/dev/null ; then
    ai_p=$i/native_threads
  else
    
    ep_dir="`echo $i/native_threads|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$i/native_threads\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

     fi
   done

   if test -z "$JAVA_INCLUDE"; then
     echo "$ac_t""no" 1>&6
     { echo "configure: error: unable to find Java VM includes" 1>&2; exit 1; }
   fi

   JAVA_CFLAGS="$JAVA_CFLAGS -D_REENTRANT"
 fi

 echo "$ac_t""$JAVA_LIBPATH" 1>&6

    cat >> confdefs.h <<\EOF
#define HAVE_JAVA 1
EOF


    if test -z "$JAVA_LIBPATH"; then
      { echo "configure: error: unable to find Java VM libraries in $PHP_JAVA" 1>&2; exit 1; }
    fi

    
  if test "$JAVA_LIBPATH" != "/usr/lib"; then
    
  if test -z "$JAVA_LIBPATH" || echo "$JAVA_LIBPATH" | grep '^/' >/dev/null ; then
    ai_p=$JAVA_LIBPATH
  else
    
    ep_dir="`echo $JAVA_LIBPATH|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$JAVA_LIBPATH\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

    JAVA_CFLAGS="$JAVA_CFLAGS '-DJAVALIB=\"$JAVA_LIBPATH/$java_libext\"'"
  fi

  if test "$PHP_SAPI" != "servlet"; then
    
  ext_builddir=ext/java
  ext_srcdir=$abs_srcdir/ext/java

  ac_extra=`echo "$JAVA_CFLAGS $JAVA_INCLUDE"|sed s#@ext_srcdir@#$ext_srcdir#g`

  if test "shared" != "shared" && test "shared" != "yes" && test "" != "cli"; then

    
  
  case ext/java in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/java"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/java/"; ac_bdir="ext/java/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in java.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC java"
    if test "shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC java"
    fi
  else
    if test "shared" = "shared" || test "shared" = "yes"; then
      
  case ext/java in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/java"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/java/"; ac_bdir="ext/java/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in java.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_java="$shared_objects_java $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/java.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_java"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/java.la: $ext_builddir/java.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/java.la \$(phplibdir)

$ext_builddir/java.la: \$(shared_objects_java) \$(JAVA_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_java) \$(JAVA_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_JAVA 1
EOF

    fi
  fi

  if test "shared" != "shared" && test "shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/java in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/java"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/java/"; ac_bdir="ext/java/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in java.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC java"
    else
      
  
  case ext/java in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/java"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/java/"; ac_bdir="ext/java/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in java.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC java"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"



    if test "$PHP_SAPI" = "cgi"; then
      if test "$platform" != "Darwin"; then
        
  
  case $JAVA_LIB in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$JAVA_LIB $LIBS" 
   ;;
  esac


      fi
    fi

    if test -n "$INSTALL_IT"; then
      INSTALL_IT="$INSTALL_IT ;"
    fi

    INSTALL_IT="$INSTALL_IT \$(srcdir)/build/shtool mkdir -p -f -m 0755 \$(INSTALL_ROOT)\$(libdir)"
    INSTALL_IT="$INSTALL_IT ; \$(INSTALL) -m 0755 \$(srcdir)/ext/java/php_java.jar \$(INSTALL_ROOT)\$(libdir)"
  fi

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST JAVA_CLASSPATH"

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST JAVA_INCLUDE"

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST JAVA_CFLAGS"


  
  src=$ext_srcdir/Makefile.frag
  ac_srcdir=$ext_srcdir
  ac_builddir=$ext_builddir
  sed -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments

fi







echo $ac_n "checking for LDAP support""... $ac_c" 1>&6
echo "configure:39296: checking for LDAP support" >&5
# Check whether --with-ldap or --without-ldap was given.
if test "${with_ldap+set}" = set; then
  withval="$with_ldap"
  PHP_LDAP=$withval
else
  
  PHP_LDAP=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_LDAP=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_LDAP in
shared,*)
  PHP_LDAP=`echo "$PHP_LDAP"|sed 's/^shared,//'`
  ;;
shared)
  PHP_LDAP=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_LDAP" != "no"; then

  
  ext_builddir=ext/ldap
  ext_srcdir=$abs_srcdir/ext/ldap

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/ldap in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ldap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ldap/"; ac_bdir="ext/ldap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ldap.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC ldap"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC ldap"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/ldap in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ldap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ldap/"; ac_bdir="ext/ldap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in ldap.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_ldap="$shared_objects_ldap $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/ldap.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_ldap"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/ldap.la: $ext_builddir/ldap.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/ldap.la \$(phplibdir)

$ext_builddir/ldap.la: \$(shared_objects_ldap) \$(LDAP_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_ldap) \$(LDAP_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_LDAP 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/ldap in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ldap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ldap/"; ac_bdir="ext/ldap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ldap.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC ldap"
    else
      
  
  case ext/ldap in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ldap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ldap/"; ac_bdir="ext/ldap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ldap.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC ldap"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"



  if test "$PHP_LDAP" = "yes"; then
    for i in /usr/local /usr; do
      
  if test -f $i/include/ldap.h; then
    LDAP_DIR=$i
    LDAP_INCDIR=$i/include
    LDAP_LIBDIR=$i/lib
  elif test -f $i/include/umich-ldap/ldap.h; then
    LDAP_DIR=$i
    LDAP_INCDIR=$i/include/umich-ldap
    LDAP_LIBDIR=$i/lib
  elif test -f $i/ldap/public/ldap.h; then
    LDAP_DIR=$i
    LDAP_INCDIR=$i/ldap/public
    LDAP_LIBDIR=$i/lib
  fi

    done
  else
    
  if test -f $PHP_LDAP/include/ldap.h; then
    LDAP_DIR=$PHP_LDAP
    LDAP_INCDIR=$PHP_LDAP/include
    LDAP_LIBDIR=$PHP_LDAP/lib
  elif test -f $PHP_LDAP/include/umich-ldap/ldap.h; then
    LDAP_DIR=$PHP_LDAP
    LDAP_INCDIR=$PHP_LDAP/include/umich-ldap
    LDAP_LIBDIR=$PHP_LDAP/lib
  elif test -f $PHP_LDAP/ldap/public/ldap.h; then
    LDAP_DIR=$PHP_LDAP
    LDAP_INCDIR=$PHP_LDAP/ldap/public
    LDAP_LIBDIR=$PHP_LDAP/lib
  fi

  fi

  if test -z "$LDAP_DIR"; then
    { echo "configure: error: Cannot find ldap.h" 1>&2; exit 1; }
  fi

        
  if test `uname` = "Linux"; then
    LDAP_PTHREAD=pthread
  else
    LDAP_PTHREAD=
  fi

  if test -f $LDAP_LIBDIR/liblber.a -o -f $LDAP_LIBDIR/liblber.$SHLIB_SUFFIX_NAME; then
    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-llber $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case lber in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-llber $LIBS" 
   ;;
  esac




  fi


    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lldap $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case ldap in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lldap $LIBS" 
   ;;
  esac




  fi



  elif test -f $LDAP_LIBDIR/libldap.$SHLIB_SUFFIX_NAME.3 -o -f $LDAP_LIBDIR/libldap.3.dylib; then
    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lldap $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case ldap in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lldap $LIBS" 
   ;;
  esac




  fi



  elif test -f $LDAP_LIBDIR/libssldap50.$SHLIB_SUFFIX_NAME; then
    if test -n "$LDAP_PTHREAD"; then 
      
  
  case $LDAP_PTHREAD in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$LDAP_PTHREAD $LIBS" 
   ;;
  esac


    fi
    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lnspr4 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case nspr4 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lnspr4 $LIBS" 
   ;;
  esac




  fi


    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lplc4 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case plc4 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lplc4 $LIBS" 
   ;;
  esac




  fi


    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lplds4 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case plds4 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lplds4 $LIBS" 
   ;;
  esac




  fi


    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lssldap50 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case ssldap50 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lssldap50 $LIBS" 
   ;;
  esac




  fi


    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lldap50 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case ldap50 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lldap50 $LIBS" 
   ;;
  esac




  fi


    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lprldap50 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case prldap50 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lprldap50 $LIBS" 
   ;;
  esac




  fi


    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lssl3 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case ssl3 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lssl3 $LIBS" 
   ;;
  esac




  fi


    cat >> confdefs.h <<\EOF
#define HAVE_NSLDAP 1
EOF


  elif test -f $LDAP_LIBDIR/libldapssl41.$SHLIB_SUFFIX_NAME; then
    if test -n "$LDAP_PTHREAD"; then 
      
  
  case $LDAP_PTHREAD in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$LDAP_PTHREAD $LIBS" 
   ;;
  esac


    fi
    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lnspr3 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case nspr3 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lnspr3 $LIBS" 
   ;;
  esac




  fi


    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lplc3 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case plc3 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lplc3 $LIBS" 
   ;;
  esac




  fi


    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lplds3 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case plds3 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lplds3 $LIBS" 
   ;;
  esac




  fi


    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lldapssl41 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case ldapssl41 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lldapssl41 $LIBS" 
   ;;
  esac




  fi


    cat >> confdefs.h <<\EOF
#define HAVE_NSLDAP 1
EOF


  elif test -f $LDAP_LIBDIR/libldapssl30.$SHLIB_SUFFIX_NAME; then
    if test -n "$LDAP_PTHREAD"; then 
      
  
  case $LDAP_PTHREAD in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$LDAP_PTHREAD $LIBS" 
   ;;
  esac


    fi
    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lldapssl30 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case ldapssl30 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lldapssl30 $LIBS" 
   ;;
  esac




  fi


    cat >> confdefs.h <<\EOF
#define HAVE_NSLDAP 1
EOF


  elif test -f $LDAP_LIBDIR/libldap30.$SHLIB_SUFFIX_NAME; then
    if test -n "$LDAP_PTHREAD"; then 
      
  
  case $LDAP_PTHREAD in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$LDAP_PTHREAD $LIBS" 
   ;;
  esac


    fi
    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lldap30 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case ldap30 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lldap30 $LIBS" 
   ;;
  esac




  fi


    cat >> confdefs.h <<\EOF
#define HAVE_NSLDAP 1
EOF


  elif test -f $LDAP_LIBDIR/libumich_ldap.$SHLIB_SUFFIX_NAME; then
    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lumich_lber $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case umich_lber in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lumich_lber $LIBS" 
   ;;
  esac




  fi


    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lumich_ldap $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case umich_ldap in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lumich_ldap $LIBS" 
   ;;
  esac




  fi



  elif test -f $LDAP_LIBDIR/libclntsh.$SHLIB_SUFFIX_NAME; then
    

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lclntsh $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        LDAP_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $LDAP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_LIBDIR
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case clntsh in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lclntsh $LIBS" 
   ;;
  esac




  fi


    cat >> confdefs.h <<\EOF
#define HAVE_ORALDAP 1
EOF


  else
    { echo "configure: error: Cannot find ldap libraries in $LDAP_LIBDIR." 1>&2; exit 1; }
  fi

  
  if test "$LDAP_INCDIR" != "/usr/include"; then
    
  if test -z "$LDAP_INCDIR" || echo "$LDAP_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$LDAP_INCDIR
  else
    
    ep_dir="`echo $LDAP_INCDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST LDAP_SHARED_LIBADD"

  cat >> confdefs.h <<\EOF
#define HAVE_LDAP 1
EOF


    _SAVE_CPPFLAGS=$CPPFLAGS
  CPPFLAGS="$CPPFLAGS -I$LDAP_INCDIR"
  echo $ac_n "checking for 3 arg ldap_set_rebind_proc""... $ac_c" 1>&6
echo "configure:41551: checking for 3 arg ldap_set_rebind_proc" >&5
if eval "test \"`echo '$''{'ac_cv_3arg_setrebindproc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 41556 "configure"
#include "confdefs.h"
#include <ldap.h>
int main() {
ldap_set_rebind_proc(0,0,0)
; return 0; }
EOF
if { (eval echo configure:41563: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_3arg_setrebindproc=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_3arg_setrebindproc=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_3arg_setrebindproc" 1>&6
  if test "$ac_cv_3arg_setrebindproc" = yes; then
    cat >> confdefs.h <<\EOF
#define HAVE_3ARG_SETREBINDPROC 1
EOF

  fi
  CPPFLAGS=$_SAVE_CPPFLAGS

      for ac_func in ldap_parse_reference ldap_start_tls_s
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:41587: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 41592 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:41615: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

fi 




echo $ac_n "checking whether to enable multibyte string support""... $ac_c" 1>&6
echo "configure:41645: checking whether to enable multibyte string support" >&5
# Check whether --enable-mbstring or --disable-mbstring was given.
if test "${enable_mbstring+set}" = set; then
  enableval="$enable_mbstring"
  PHP_MBSTRING=$enableval
else
  
  PHP_MBSTRING=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_MBSTRING=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_MBSTRING in
shared,*)
  PHP_MBSTRING=`echo "$PHP_MBSTRING"|sed 's/^shared,//'`
  ;;
shared)
  PHP_MBSTRING=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_MBSTRING" != "no"; then  
  cat >> confdefs.h <<\EOF
#define HAVE_MBSTRING 1
EOF


  if test "$PHP_MBSTRING" != "no" -o "$PHP_MBSTRING" = "ja"; then
    cat >> confdefs.h <<\EOF
#define HAVE_MBSTR_JA 1
EOF

  fi
  if test "$PHP_MBSTRING" = "cn"; then
    cat >> confdefs.h <<\EOF
#define HAVE_MBSTR_CN 1
EOF

  fi
  if test "$PHP_MBSTRING" = "tw"; then
    cat >> confdefs.h <<\EOF
#define HAVE_MBSTR_TW 1
EOF

  fi
  if test "$PHP_MBSTRING" = "kr"; then
    cat >> confdefs.h <<\EOF
#define HAVE_MBSTR_KR 1
EOF

  fi
  if test "$PHP_MBSTRING" = "ru"; then
    cat >> confdefs.h <<\EOF
#define HAVE_MBSTR_RU 1
EOF

  fi
  if test "$PHP_MBSTRING" = "all"; then
    cat >> confdefs.h <<\EOF
#define HAVE_MBSTR_JA 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_MBSTR_CN 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_MBSTR_TW 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_MBSTR_KR 1
EOF

    cat >> confdefs.h <<\EOF
#define HAVE_MBSTR_RU 1
EOF

  fi

  
  ext_builddir=ext/mbstring
  ext_srcdir=$abs_srcdir/ext/mbstring

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/mbstring in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mbstring"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mbstring/"; ac_bdir="ext/mbstring/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in mbfilter_ja.c mbfilter_cn.c mbfilter_tw.c mbfilter_kr.c mbfilter_ru.c mbfilter.c mbstring.c mbregex.c php_mbregex.c html_entities.c php_unicode.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC mbstring"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC mbstring"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/mbstring in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mbstring"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mbstring/"; ac_bdir="ext/mbstring/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in mbfilter_ja.c mbfilter_cn.c mbfilter_tw.c mbfilter_kr.c mbfilter_ru.c mbfilter.c mbstring.c mbregex.c php_mbregex.c html_entities.c php_unicode.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_mbstring="$shared_objects_mbstring $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/mbstring.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mbstring"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/mbstring.la: $ext_builddir/mbstring.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/mbstring.la \$(phplibdir)

$ext_builddir/mbstring.la: \$(shared_objects_mbstring) \$(MBSTRING_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_mbstring) \$(MBSTRING_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_MBSTRING 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/mbstring in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mbstring"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mbstring/"; ac_bdir="ext/mbstring/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in mbfilter_ja.c mbfilter_cn.c mbfilter_tw.c mbfilter_kr.c mbfilter_ru.c mbfilter.c mbstring.c mbregex.c php_mbregex.c html_entities.c php_unicode.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC mbstring"
    else
      
  
  case ext/mbstring in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mbstring"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mbstring/"; ac_bdir="ext/mbstring/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in mbfilter_ja.c mbfilter_cn.c mbfilter_tw.c mbfilter_kr.c mbfilter_ru.c mbfilter.c mbstring.c mbregex.c php_mbregex.c html_entities.c php_unicode.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC mbstring"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


fi




echo $ac_n "checking whether to enable multibyte regex support""... $ac_c" 1>&6
echo "configure:41961: checking whether to enable multibyte regex support" >&5
# Check whether --enable-mbregex or --disable-mbregex was given.
if test "${enable_mbregex+set}" = set; then
  enableval="$enable_mbregex"
  PHP_MBREGEX=$enableval
else
  
  PHP_MBREGEX=no

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_MBREGEX=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_MBREGEX
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_MBREGEX" != "no" ; then
  cat >> confdefs.h <<\EOF
#define HAVE_MBREGEX 1
EOF

fi




echo $ac_n "checking for MCAL support""... $ac_c" 1>&6
echo "configure:41994: checking for MCAL support" >&5
# Check whether --with-mcal or --without-mcal was given.
if test "${with_mcal+set}" = set; then
  withval="$with_mcal"
  PHP_MCAL=$withval
else
  
  PHP_MCAL=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_MCAL=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_MCAL in
shared,*)
  PHP_MCAL=`echo "$PHP_MCAL"|sed 's/^shared,//'`
  ;;
shared)
  PHP_MCAL=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_MCAL" != "no"; then
  MCAL_DEFAULT_SEARCH=/usr/local
  if test "$PHP_MCAL" = "yes"; then
    MCAL_DIR=$MCAL_DEFAULT_SEARCH
  else
    
  if test -z "$PHP_MCAL" || echo "$PHP_MCAL" | grep '^/' >/dev/null ; then
    MCAL_DIR=$PHP_MCAL
  else
    
    ep_dir="`echo $PHP_MCAL|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    MCAL_DIR="$ep_realdir/`basename \"$PHP_MCAL\"`"
  fi

  fi

  for i in $MCAL_DIR $MCAL_DIR/mcal $MCAL_DIR/mcal/include $MCAL_DIR/include/mcal $MCAL_DIR/include; do
    if test -r "$i/mcal.h"; then
      MCAL_INCLUDE=$i
    fi
  done

  for i in $MCAL_DIR $MCAL_DIR/mcal $MCAL_DIR/mcal/lib $MCAL_DIR/lib/mcal $MCAL_DIR/lib; do
    if test -r "$i/libmcal.a"; then
      MCAL_LIBRARY=$i
    fi
  done

  for i in mcal cal_misc icalroutines; do
    if test ! -f "$MCAL_INCLUDE/$i.h"; then
      { echo "configure: error: Unable to locate your libmcal header files - $i.h should be in the directory you specify or in the include/ subdirectory below it - default search location is $MCAL_DEFAULT_SEARCH" 1>&2; exit 1; }
    fi
  done

  if test ! -f "$MCAL_LIBRARY/libmcal.a"; then
    { echo "configure: error: Unable to locate your libmcal library files - libmcal.a should be in the directory you specify or in the lib/ subdirectory below it - default search location is $MCAL_DEFAULT_SEARCH" 1>&2; exit 1; }
  fi

  
  if test "$MCAL_INCLUDE" != "/usr/include"; then
    
  if test -z "$MCAL_INCLUDE" || echo "$MCAL_INCLUDE" | grep '^/' >/dev/null ; then
    ai_p=$MCAL_INCLUDE
  else
    
    ep_dir="`echo $MCAL_INCLUDE|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MCAL_INCLUDE\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  
  if test "$MCAL_LIBRARY" != "/usr/lib"; then
    
  if test -z "$MCAL_LIBRARY" || echo "$MCAL_LIBRARY" | grep '^/' >/dev/null ; then
    ai_p=$MCAL_LIBRARY
  else
    
    ep_dir="`echo $MCAL_LIBRARY|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MCAL_LIBRARY\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        MCAL_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $MCAL_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

  
  
  case mcal in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        MCAL_SHARED_LIBADD="-lmcal $MCAL_SHARED_LIBADD" 
    else
      
  
  case mcal in
  c|c_r|pthread*) ;;
  *) 
      DLIBS="-lmcal $DLIBS" 
   ;;
  esac


    fi
   ;;
  esac


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST MCAL_SHARED_LIBADD"

  cat >> confdefs.h <<\EOF
#define HAVE_MCAL 1
EOF

  
  ext_builddir=ext/mcal
  ext_srcdir=$abs_srcdir/ext/mcal

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/mcal in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mcal"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mcal/"; ac_bdir="ext/mcal/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_mcal.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC mcal"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC mcal"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/mcal in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mcal"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mcal/"; ac_bdir="ext/mcal/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_mcal.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_mcal="$shared_objects_mcal $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/mcal.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mcal"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/mcal.la: $ext_builddir/mcal.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/mcal.la \$(phplibdir)

$ext_builddir/mcal.la: \$(shared_objects_mcal) \$(MCAL_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_mcal) \$(MCAL_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_MCAL 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/mcal in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mcal"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mcal/"; ac_bdir="ext/mcal/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_mcal.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC mcal"
    else
      
  
  case ext/mcal in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mcal"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mcal/"; ac_bdir="ext/mcal/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_mcal.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC mcal"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


fi





echo $ac_n "checking for mcrypt support""... $ac_c" 1>&6
echo "configure:42390: checking for mcrypt support" >&5
# Check whether --with-mcrypt or --without-mcrypt was given.
if test "${with_mcrypt+set}" = set; then
  withval="$with_mcrypt"
  PHP_MCRYPT=$withval
else
  
  PHP_MCRYPT=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_MCRYPT=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_MCRYPT in
shared,*)
  PHP_MCRYPT=`echo "$PHP_MCRYPT"|sed 's/^shared,//'`
  ;;
shared)
  PHP_MCRYPT=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_MCRYPT" != "no"; then
  for i in /usr/local /usr $PHP_MCRYPT; do
    if test -f $i/include/mcrypt.h; then
      MCRYPT_DIR=$i
    fi
  done

  if test -z "$MCRYPT_DIR"; then
    { echo "configure: error: mcrypt.h not found. Please reinstall libmcrypt." 1>&2; exit 1; }
  fi

  
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
    -L$MCRYPT_DIR/lib -lltdl
   $LDFLAGS"
  echo $ac_n "checking for mcrypt_module_open in -lmcrypt""... $ac_c" 1>&6
echo "configure:42450: checking for mcrypt_module_open in -lmcrypt" >&5
ac_lib_var=`echo mcrypt'_'mcrypt_module_open | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lmcrypt  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 42458 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char mcrypt_module_open();

int main() {
mcrypt_module_open()
; return 0; }
EOF
if { (eval echo configure:42469: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
    
  
  case ltdl in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        MCRYPT_SHARED_LIBADD="-lltdl $MCRYPT_SHARED_LIBADD" 
    else
      
  
  case ltdl in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lltdl $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    cat >> confdefs.h <<\EOF
#define HAVE_LIBMCRYPT24 1
EOF


    
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
      -L$MCRYPT_DIR/lib
     $LDFLAGS"
  echo $ac_n "checking for mcrypt_generic_deinit in -lmcrypt""... $ac_c" 1>&6
echo "configure:42521: checking for mcrypt_generic_deinit in -lmcrypt" >&5
ac_lib_var=`echo mcrypt'_'mcrypt_generic_deinit | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lmcrypt  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 42529 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char mcrypt_generic_deinit();

int main() {
mcrypt_generic_deinit()
; return 0; }
EOF
if { (eval echo configure:42540: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
      cat >> confdefs.h <<\EOF
#define HAVE_MCRYPT_GENERIC_DEINIT 1
EOF

    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_mcrypt
    
  
fi


  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_mcrypt
    
    unset found
    unset ac_cv_lib_mcrypt_mcrypt_module_open
    
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS=" $LDFLAGS"
  echo $ac_n "checking for mcrypt_module_open in -lmcrypt""... $ac_c" 1>&6
echo "configure:42588: checking for mcrypt_module_open in -lmcrypt" >&5
ac_lib_var=`echo mcrypt'_'mcrypt_module_open | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lmcrypt  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 42596 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char mcrypt_module_open();

int main() {
mcrypt_module_open()
; return 0; }
EOF
if { (eval echo configure:42607: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
      cat >> confdefs.h <<\EOF
#define HAVE_LIBMCRYPT24 1
EOF


      
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
        -L$MCRYPT_DIR/lib
       $LDFLAGS"
  echo $ac_n "checking for mcrypt_generic_deinit in -lmcrypt""... $ac_c" 1>&6
echo "configure:42636: checking for mcrypt_generic_deinit in -lmcrypt" >&5
ac_lib_var=`echo mcrypt'_'mcrypt_generic_deinit | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lmcrypt  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 42644 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char mcrypt_generic_deinit();

int main() {
mcrypt_generic_deinit()
; return 0; }
EOF
if { (eval echo configure:42655: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
        cat >> confdefs.h <<\EOF
#define HAVE_MCRYPT_GENERIC_DEINIT 1
EOF

      
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_mcrypt
    
  
fi

    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_mcrypt
    
      
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
        -L$MCRYPT_DIR/lib
       $LDFLAGS"
  echo $ac_n "checking for init_mcrypt in -lmcrypt""... $ac_c" 1>&6
echo "configure:42702: checking for init_mcrypt in -lmcrypt" >&5
ac_lib_var=`echo mcrypt'_'init_mcrypt | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lmcrypt  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 42710 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char init_mcrypt();

int main() {
init_mcrypt()
; return 0; }
EOF
if { (eval echo configure:42721: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
        cat >> confdefs.h <<\EOF
#define HAVE_LIBMCRYPT22 1
EOF

      
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_mcrypt
    
        { echo "configure: error: Sorry, I was not able to diagnose which libmcrypt version you have installed." 1>&2; exit 1; }
      
  
fi

    
  
fi

  
  
fi


  

  if test "$ext_shared" = "yes"; then
    MCRYPT_SHARED_LIBADD="-lmcrypt $MCRYPT_SHARED_LIBADD"
    if test -n "$MCRYPT_DIR/lib"; then
      
  if test "$MCRYPT_DIR/lib" != "/usr/lib"; then
    
  if test -z "$MCRYPT_DIR/lib" || echo "$MCRYPT_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$MCRYPT_DIR/lib
  else
    
    ep_dir="`echo $MCRYPT_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MCRYPT_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        MCRYPT_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $MCRYPT_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$MCRYPT_DIR/lib"; then
    
  if test "$MCRYPT_DIR/lib" != "/usr/lib"; then
    
  if test -z "$MCRYPT_DIR/lib" || echo "$MCRYPT_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$MCRYPT_DIR/lib
  else
    
    ep_dir="`echo $MCRYPT_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MCRYPT_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case mcrypt in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lmcrypt $LIBS" 
   ;;
  esac




  fi


  
  if test "$MCRYPT_DIR/include" != "/usr/include"; then
    
  if test -z "$MCRYPT_DIR/include" || echo "$MCRYPT_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$MCRYPT_DIR/include
  else
    
    ep_dir="`echo $MCRYPT_DIR/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MCRYPT_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  cat >> confdefs.h <<\EOF
#define HAVE_LIBMCRYPT 1
EOF


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST MCRYPT_SHARED_LIBADD"

  
  ext_builddir=ext/mcrypt
  ext_srcdir=$abs_srcdir/ext/mcrypt

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/mcrypt in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mcrypt"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mcrypt/"; ac_bdir="ext/mcrypt/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in mcrypt.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC mcrypt"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC mcrypt"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/mcrypt in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mcrypt"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mcrypt/"; ac_bdir="ext/mcrypt/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in mcrypt.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_mcrypt="$shared_objects_mcrypt $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/mcrypt.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mcrypt"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/mcrypt.la: $ext_builddir/mcrypt.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/mcrypt.la \$(phplibdir)

$ext_builddir/mcrypt.la: \$(shared_objects_mcrypt) \$(MCRYPT_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_mcrypt) \$(MCRYPT_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_MCRYPT 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/mcrypt in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mcrypt"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mcrypt/"; ac_bdir="ext/mcrypt/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in mcrypt.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC mcrypt"
    else
      
  
  case ext/mcrypt in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mcrypt"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mcrypt/"; ac_bdir="ext/mcrypt/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in mcrypt.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC mcrypt"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


fi




echo $ac_n "checking for MCVE support""... $ac_c" 1>&6
echo "configure:43114: checking for MCVE support" >&5
# Check whether --with-mcve or --without-mcve was given.
if test "${with_mcve+set}" = set; then
  withval="$with_mcve"
  PHP_MCVE=$withval
else
  
  PHP_MCVE=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_MCVE=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_MCVE in
shared,*)
  PHP_MCVE=`echo "$PHP_MCVE"|sed 's/^shared,//'`
  ;;
shared)
  PHP_MCVE=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_MCVE" != "no"; then
  if test -r $PHP_MCVE/include/mcve.h; then
     MCVE_DIR=$PHP_MCVE
  else 
    for i in /usr /usr/local /usr/local/mcve ; do
      if test -r $i/include/mcve.h; then
        MCVE_DIR=$i
      fi
    done
  fi

  if test -z "$MCVE_DIR"; then
    { echo "configure: error: not found. Please check your MCVE installation; mcve.h NOT FOUND" 1>&2; exit 1; }
  fi
  
  
  if test "$MCVE_DIR/include" != "/usr/include"; then
    
  if test -z "$MCVE_DIR/include" || echo "$MCVE_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$MCVE_DIR/include
  else
    
    ep_dir="`echo $MCVE_DIR/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MCVE_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  

  if test "$ext_shared" = "yes"; then
    MCVE_SHARED_LIBADD="-lmcve $MCVE_SHARED_LIBADD"
    if test -n "$MCVE_DIR/lib"; then
      
  if test "$MCVE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$MCVE_DIR/lib" || echo "$MCVE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$MCVE_DIR/lib
  else
    
    ep_dir="`echo $MCVE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MCVE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        MCVE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $MCVE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$MCVE_DIR/lib"; then
    
  if test "$MCVE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$MCVE_DIR/lib" || echo "$MCVE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$MCVE_DIR/lib
  else
    
    ep_dir="`echo $MCVE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MCVE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case mcve in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lmcve $LIBS" 
   ;;
  esac




  fi


  
  ext_builddir=ext/mcve
  ext_srcdir=$abs_srcdir/ext/mcve

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/mcve in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mcve"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mcve/"; ac_bdir="ext/mcve/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in mcve.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC mcve"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC mcve"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/mcve in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mcve"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mcve/"; ac_bdir="ext/mcve/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in mcve.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_mcve="$shared_objects_mcve $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/mcve.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mcve"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/mcve.la: $ext_builddir/mcve.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/mcve.la \$(phplibdir)

$ext_builddir/mcve.la: \$(shared_objects_mcve) \$(MCVE_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_mcve) \$(MCVE_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_MCVE 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/mcve in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mcve"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mcve/"; ac_bdir="ext/mcve/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in mcve.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC mcve"
    else
      
  
  case ext/mcve in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mcve"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mcve/"; ac_bdir="ext/mcve/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in mcve.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC mcve"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST MCVE_SHARED_LIBADD"

fi




echo $ac_n "checking for mhash support""... $ac_c" 1>&6
echo "configure:43516: checking for mhash support" >&5
# Check whether --with-mhash or --without-mhash was given.
if test "${with_mhash+set}" = set; then
  withval="$with_mhash"
  PHP_MHASH=$withval
else
  
  PHP_MHASH=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_MHASH=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_MHASH in
shared,*)
  PHP_MHASH=`echo "$PHP_MHASH"|sed 's/^shared,//'`
  ;;
shared)
  PHP_MHASH=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_MHASH" != "no"; then
  for i in /usr/local /usr /opt/mhash $PHP_MHASH; do
    if test -f $i/include/mhash.h; then
      MHASH_DIR=$i
    fi
  done

  if test -z "$MHASH_DIR"; then
    { echo "configure: error: Please reinstall libmhash - I cannot find mhash.h" 1>&2; exit 1; }
  fi
  
  if test "$MHASH_DIR/include" != "/usr/include"; then
    
  if test -z "$MHASH_DIR/include" || echo "$MHASH_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$MHASH_DIR/include
  else
    
    ep_dir="`echo $MHASH_DIR/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MHASH_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  

  if test "$ext_shared" = "yes"; then
    MHASH_SHARED_LIBADD="-lmhash $MHASH_SHARED_LIBADD"
    if test -n "$MHASH_DIR/lib"; then
      
  if test "$MHASH_DIR/lib" != "/usr/lib"; then
    
  if test -z "$MHASH_DIR/lib" || echo "$MHASH_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$MHASH_DIR/lib
  else
    
    ep_dir="`echo $MHASH_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MHASH_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        MHASH_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $MHASH_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$MHASH_DIR/lib"; then
    
  if test "$MHASH_DIR/lib" != "/usr/lib"; then
    
  if test -z "$MHASH_DIR/lib" || echo "$MHASH_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$MHASH_DIR/lib
  else
    
    ep_dir="`echo $MHASH_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MHASH_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case mhash in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lmhash $LIBS" 
   ;;
  esac




  fi


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST MHASH_SHARED_LIBADD"


  cat >> confdefs.h <<\EOF
#define HAVE_LIBMHASH 1
EOF


  
  ext_builddir=ext/mhash
  ext_srcdir=$abs_srcdir/ext/mhash

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/mhash in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mhash"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mhash/"; ac_bdir="ext/mhash/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in mhash.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC mhash"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC mhash"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/mhash in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mhash"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mhash/"; ac_bdir="ext/mhash/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in mhash.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_mhash="$shared_objects_mhash $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/mhash.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mhash"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/mhash.la: $ext_builddir/mhash.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/mhash.la \$(phplibdir)

$ext_builddir/mhash.la: \$(shared_objects_mhash) \$(MHASH_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_mhash) \$(MHASH_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_MHASH 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/mhash in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mhash"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mhash/"; ac_bdir="ext/mhash/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in mhash.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC mhash"
    else
      
  
  case ext/mhash in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mhash"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mhash/"; ac_bdir="ext/mhash/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in mhash.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC mhash"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


fi




echo $ac_n "checking whether to include mime_magic support""... $ac_c" 1>&6
echo "configure:43919: checking whether to include mime_magic support" >&5
# Check whether --with-mime-magic or --without-mime-magic was given.
if test "${with_mime_magic+set}" = set; then
  withval="$with_mime_magic"
  PHP_MIME_MAGIC=$withval
else
  
  PHP_MIME_MAGIC=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_MIME_MAGIC=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_MIME_MAGIC in
shared,*)
  PHP_MIME_MAGIC=`echo "$PHP_MIME_MAGIC"|sed 's/^shared,//'`
  ;;
shared)
  PHP_MIME_MAGIC=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_MIME_MAGIC" != "no"; then

  
  ext_builddir=ext/mime_magic
  ext_srcdir=$abs_srcdir/ext/mime_magic

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/mime_magic in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mime_magic"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mime_magic/"; ac_bdir="ext/mime_magic/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in mime_magic.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC mime_magic"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC mime_magic"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/mime_magic in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mime_magic"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mime_magic/"; ac_bdir="ext/mime_magic/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in mime_magic.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_mime_magic="$shared_objects_mime_magic $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/mime_magic.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mime_magic"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/mime_magic.la: $ext_builddir/mime_magic.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/mime_magic.la \$(phplibdir)

$ext_builddir/mime_magic.la: \$(shared_objects_mime_magic) \$(MIME_MAGIC_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_mime_magic) \$(MIME_MAGIC_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_MIME_MAGIC 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/mime_magic in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mime_magic"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mime_magic/"; ac_bdir="ext/mime_magic/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in mime_magic.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC mime_magic"
    else
      
  
  case ext/mime_magic in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mime_magic"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mime_magic/"; ac_bdir="ext/mime_magic/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in mime_magic.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC mime_magic"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"



  PHP_MIME_MAGIC_FILE_PATH=

        if test "$PHP_MIME_MAGIC" != "yes"; then
    if test -f $PHP_MIME_MAGIC; then
      PHP_MIME_MAGIC_FILE_PATH=$PHP_MIME_MAGIC
    else
      { echo "configure: error: File '$PHP_MIME_MAGIC' not found!" 1>&2; exit 1; }
    fi
  else
    MAGIC_MIME_LOCATIONS="/usr/local/apache/conf/magic /usr/local/etc/apache/conf/magic /etc/apache/magic /etc/httpd/conf/magic /usr/share/magic.mime /usr/share/misc/magic.mime /etc/magic.mime"

    for i in $MAGIC_MIME_LOCATIONS; do
      if test -f $i; then
        PHP_MIME_MAGIC_FILE_PATH=$i
        break
      fi
    done
  fi
  
  cat >> confdefs.h <<EOF
#define PHP_MIME_MAGIC_FILE_PATH "$PHP_MIME_MAGIC_FILE_PATH"
EOF


fi




echo $ac_n "checking for MING support""... $ac_c" 1>&6
echo "configure:44203: checking for MING support" >&5
# Check whether --with-ming or --without-ming was given.
if test "${with_ming+set}" = set; then
  withval="$with_ming"
  PHP_MING=$withval
else
  
  PHP_MING=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_MING=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_MING in
shared,*)
  PHP_MING=`echo "$PHP_MING"|sed 's/^shared,//'`
  ;;
shared)
  PHP_MING=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_MING" != "no"; then
  echo $ac_n "checking for sin in -lm""... $ac_c" 1>&6
echo "configure:44248: checking for sin in -lm" >&5
ac_lib_var=`echo m'_'sin | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lm  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 44256 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char sin();

int main() {
sin()
; return 0; }
EOF
if { (eval echo configure:44267: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo m | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lm $LIBS"

else
  echo "$ac_t""no" 1>&6
fi


  for i in $PHP_MING /usr/local /usr; do
    if test -f $i/lib/libming.$SHLIB_SUFFIX_NAME -o -f $i/lib/libming.a; then
      MING_DIR=$i
    fi
  done

  if test -z "$MING_DIR"; then
    { echo "configure: error: Please reinstall ming distribution. libming.(a|so) not found." 1>&2; exit 1; }
  fi

  for i in $MING_DIR/include $MING_DIR/include/ming $MING_DIR/ming/include; do
    if test -f $i/ming.h; then
      MING_INC_DIR=$i
    fi
  done

  if test -z "$MING_INC_DIR"; then
    { echo "configure: error: Please reinstall ming distribution. ming.h not found." 1>&2; exit 1; }
  fi

  
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
    -L$MING_DIR/lib
   $LDFLAGS"
  echo $ac_n "checking for Ming_useSWFVersion in -lming""... $ac_c" 1>&6
echo "configure:44321: checking for Ming_useSWFVersion in -lming" >&5
ac_lib_var=`echo ming'_'Ming_useSWFVersion | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lming  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 44329 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char Ming_useSWFVersion();

int main() {
Ming_useSWFVersion()
; return 0; }
EOF
if { (eval echo configure:44340: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
    cat >> confdefs.h <<\EOF
#define HAVE_MING 1
EOF

  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_ming
    
    { echo "configure: error: Ming library 0.2a or greater required." 1>&2; exit 1; }
  
  
fi

  
  
  if test "$MING_INC_DIR" != "/usr/include"; then
    
  if test -z "$MING_INC_DIR" || echo "$MING_INC_DIR" | grep '^/' >/dev/null ; then
    ai_p=$MING_INC_DIR
  else
    
    ep_dir="`echo $MING_INC_DIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MING_INC_DIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  

  if test "$ext_shared" = "yes"; then
    MING_SHARED_LIBADD="-lming $MING_SHARED_LIBADD"
    if test -n "$MING_DIR/lib"; then
      
  if test "$MING_DIR/lib" != "/usr/lib"; then
    
  if test -z "$MING_DIR/lib" || echo "$MING_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$MING_DIR/lib
  else
    
    ep_dir="`echo $MING_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MING_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        MING_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $MING_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$MING_DIR/lib"; then
    
  if test "$MING_DIR/lib" != "/usr/lib"; then
    
  if test -z "$MING_DIR/lib" || echo "$MING_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$MING_DIR/lib
  else
    
    ep_dir="`echo $MING_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MING_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case ming in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lming $LIBS" 
   ;;
  esac




  fi



  echo $ac_n "checking for destroySWFBlock""... $ac_c" 1>&6
echo "configure:44505: checking for destroySWFBlock" >&5
  if test "$cross_compiling" = yes; then
  
    echo "$ac_t""unknown" 1>&6
  
else
  cat > conftest.$ac_ext <<EOF
#line 44512 "configure"
#include "confdefs.h"

#include "ming.h"
int destroySWFBlock(int a, int b) {
	return a+b;
}
int main() {
	return destroySWFBlock(-1,1); /* returns 0 only if function is not yet defined */
}
  
EOF
if { (eval echo configure:44524: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    echo "$ac_t""missing" 1>&6
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    cat >> confdefs.h <<\EOF
#define HAVE_DESTROY_SWF_BLOCK 1
EOF

    echo "$ac_t""ok" 1>&6
  
fi
rm -fr conftest*
fi
 

  
  ext_builddir=ext/ming
  ext_srcdir=$abs_srcdir/ext/ming

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/ming in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ming"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ming/"; ac_bdir="ext/ming/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ming.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC ming"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC ming"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/ming in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ming"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ming/"; ac_bdir="ext/ming/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in ming.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_ming="$shared_objects_ming $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/ming.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_ming"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/ming.la: $ext_builddir/ming.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/ming.la \$(phplibdir)

$ext_builddir/ming.la: \$(shared_objects_ming) \$(MING_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_ming) \$(MING_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_MING 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/ming in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ming"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ming/"; ac_bdir="ext/ming/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ming.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC ming"
    else
      
  
  case ext/ming in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ming"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ming/"; ac_bdir="ext/ming/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ming.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC ming"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST MING_SHARED_LIBADD"

fi




echo $ac_n "checking for mnoGoSearch support""... $ac_c" 1>&6
echo "configure:44762: checking for mnoGoSearch support" >&5
# Check whether --with-mnogosearch or --without-mnogosearch was given.
if test "${with_mnogosearch+set}" = set; then
  withval="$with_mnogosearch"
  PHP_MNOGOSEARCH=$withval
else
  
  PHP_MNOGOSEARCH=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_MNOGOSEARCH=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_MNOGOSEARCH in
shared,*)
  PHP_MNOGOSEARCH=`echo "$PHP_MNOGOSEARCH"|sed 's/^shared,//'`
  ;;
shared)
  PHP_MNOGOSEARCH=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




  if test "$PHP_MNOGOSEARCH" != "no"; then
  
    if test "$PHP_MNOGOSEARCH" = "yes"; then
      MNOGOSEARCH_BINDIR=/usr/local/mnogosearch/bin
      MNOGOSEARCH_INCDIR=/usr/local/mnogosearch/include
      MNOGOSEARCH_LIBDIR=/usr/local/mnogosearch/lib
    else
      MNOGOSEARCH_BINDIR=$PHP_MNOGOSEARCH/bin
      MNOGOSEARCH_INCDIR=$PHP_MNOGOSEARCH/include
      MNOGOSEARCH_LIBDIR=$PHP_MNOGOSEARCH/lib
    fi
    
    echo $ac_n "checking for mnoGoSearch version""... $ac_c" 1>&6
echo "configure:44818: checking for mnoGoSearch version" >&5    
    
    if test -x "$MNOGOSEARCH_BINDIR/udm-config"; then
    	MNOGOSEARCH_VERSION=`$MNOGOSEARCH_BINDIR/udm-config --version`
    	MNOGOSEARCH_VERSION_ID=`$MNOGOSEARCH_BINDIR/udm-config --version-id`

	if test $? -ne 0; then
		echo "$ac_t""<= 3.1.9" 1>&6    
		{ echo "configure: error: mnoGoSearch 3.1.10 at least required" 1>&2; exit 1; }
	fi
	
	if test "$MNOGOSEARCH_VERSION_ID" -lt 30110; then
		echo "$ac_t""<= 3.1.9" 1>&6
		{ echo "configure: error: mnoGoSearch 3.1.10 at least required" 1>&2; exit 1; }
	fi
	
	echo "$ac_t""$MNOGOSEARCH_VERSION" 1>&6
	
  	
  for ac_i in `$MNOGOSEARCH_BINDIR/udm-config --libs`; do
    case $ac_i in
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        MNOGOSEARCH_SHARED_LIBADD="$MNOGOSEARCH_SHARED_LIBADD -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        MNOGOSEARCH_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $MNOGOSEARCH_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

    else
	{ echo "configure: error: udm-config script not found in $MNOGOSEARCH_BINDIR" 1>&2; exit 1; }
    fi
    
    
  if test "$MNOGOSEARCH_INCDIR" != "/usr/include"; then
    
  if test -z "$MNOGOSEARCH_INCDIR" || echo "$MNOGOSEARCH_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$MNOGOSEARCH_INCDIR
  else
    
    ep_dir="`echo $MNOGOSEARCH_INCDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MNOGOSEARCH_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    
    cat >> confdefs.h <<\EOF
#define HAVE_MNOGOSEARCH 1
EOF

    
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST MNOGOSEARCH_SHARED_LIBADD"

    
  ext_builddir=ext/mnogosearch
  ext_srcdir=$abs_srcdir/ext/mnogosearch

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/mnogosearch in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mnogosearch"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mnogosearch/"; ac_bdir="ext/mnogosearch/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_mnogo.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC mnogosearch"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC mnogosearch"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/mnogosearch in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mnogosearch"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mnogosearch/"; ac_bdir="ext/mnogosearch/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_mnogo.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_mnogosearch="$shared_objects_mnogosearch $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/mnogosearch.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mnogosearch"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/mnogosearch.la: $ext_builddir/mnogosearch.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/mnogosearch.la \$(phplibdir)

$ext_builddir/mnogosearch.la: \$(shared_objects_mnogosearch) \$(MNOGOSEARCH_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_mnogosearch) \$(MNOGOSEARCH_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_MNOGOSEARCH 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/mnogosearch in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mnogosearch"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mnogosearch/"; ac_bdir="ext/mnogosearch/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_mnogo.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC mnogosearch"
    else
      
  
  case ext/mnogosearch in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mnogosearch"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mnogosearch/"; ac_bdir="ext/mnogosearch/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_mnogo.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC mnogosearch"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


    
  fi




echo $ac_n "checking for msession support""... $ac_c" 1>&6
echo "configure:45167: checking for msession support" >&5
# Check whether --with-msession or --without-msession was given.
if test "${with_msession+set}" = set; then
  withval="$with_msession"
  PHP_MSESSION=$withval
else
  
  PHP_MSESSION=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_MSESSION=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_MSESSION in
shared,*)
  PHP_MSESSION=`echo "$PHP_MSESSION"|sed 's/^shared,//'`
  ;;
shared)
  PHP_MSESSION=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6



 
if test "$PHP_MSESSION" != "no"; then
	if test -r $PHP_MSESSION/lib/libphoenix.a; then
		PHOENIX_DIR=$PHP_MSESSION
	else
		echo $ac_n "checking for msession in default path""... $ac_c" 1>&6
echo "configure:45215: checking for msession in default path" >&5
		for i in /usr/local/phoenix /usr/local /usr; do
			if test -r $i/lib/libphoenix.a; then
				PHOENIX_DIR=$i
				echo "$ac_t""found in $i" 1>&6
			fi
		done
	fi

	if test -z "$PHOENIX_DIR"; then
		echo "$ac_t""not found" 1>&6
		{ echo "configure: error: Please reinstall the Phoenix / msession distribution" 1>&2; exit 1; }
	fi


  	cat >> confdefs.h <<\EOF
#define HAVE_MSESSION 1
EOF

  	

  if test "$ext_shared" = "yes"; then
    PHOENIX_LIB="-lphoenix $PHOENIX_LIB"
    if test -n ""$PHOENIX_DIR/lib""; then
      
  if test ""$PHOENIX_DIR/lib"" != "/usr/lib"; then
    
  if test -z ""$PHOENIX_DIR/lib"" || echo ""$PHOENIX_DIR/lib"" | grep '^/' >/dev/null ; then
    ai_p="$PHOENIX_DIR/lib"
  else
    
    ep_dir="`echo "$PHOENIX_DIR/lib"|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \""$PHOENIX_DIR/lib"\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        PHOENIX_LIB="$ld_runpath_switch$ai_p -L$ai_p $PHOENIX_LIB"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n ""$PHOENIX_DIR/lib""; then
    
  if test ""$PHOENIX_DIR/lib"" != "/usr/lib"; then
    
  if test -z ""$PHOENIX_DIR/lib"" || echo ""$PHOENIX_DIR/lib"" | grep '^/' >/dev/null ; then
    ai_p="$PHOENIX_DIR/lib"
  else
    
    ep_dir="`echo "$PHOENIX_DIR/lib"|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \""$PHOENIX_DIR/lib"\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case phoenix in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lphoenix $LIBS" 
   ;;
  esac




  fi


	PHOENIX_INCLUDE="-I$PHOENIX_DIR"
	
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHOENIX_LIB"


  	
  ext_builddir=ext/msession
  ext_srcdir=$abs_srcdir/ext/msession

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/msession in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/msession"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/msession/"; ac_bdir="ext/msession/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in msession.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC msession"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC msession"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/msession in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/msession"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/msession/"; ac_bdir="ext/msession/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in msession.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_msession="$shared_objects_msession $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/msession.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_msession"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/msession.la: $ext_builddir/msession.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/msession.la \$(phplibdir)

$ext_builddir/msession.la: \$(shared_objects_msession) \$(MSESSION_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_msession) \$(MSESSION_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_MSESSION 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/msession in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/msession"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/msession/"; ac_bdir="ext/msession/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in msession.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC msession"
    else
      
  
  case ext/msession in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/msession"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/msession/"; ac_bdir="ext/msession/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in msession.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC msession"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


fi







echo $ac_n "checking for mSQL support""... $ac_c" 1>&6
echo "configure:45552: checking for mSQL support" >&5
# Check whether --with-msql or --without-msql was given.
if test "${with_msql+set}" = set; then
  withval="$with_msql"
  PHP_MSQL=$withval
else
  
  PHP_MSQL=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_MSQL=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_MSQL in
shared,*)
  PHP_MSQL=`echo "$PHP_MSQL"|sed 's/^shared,//'`
  ;;
shared)
  PHP_MSQL=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




  if test "$PHP_MSQL" != "no"; then
    if test "$PHP_MSQL" = "yes"; then
      MSQL_INCDIR=/usr/local/Hughes/include
      MSQL_LIBDIR=/usr/local/Hughes/lib
    else
      MSQL_INCDIR=$PHP_MSQL/include
      MSQL_LIBDIR=$PHP_MSQL/lib
    fi
    

  if test "$ext_shared" = "yes"; then
    MSQL_SHARED_LIBADD="-lmsql $MSQL_SHARED_LIBADD"
    if test -n "$MSQL_LIBDIR"; then
      
  if test "$MSQL_LIBDIR" != "/usr/lib"; then
    
  if test -z "$MSQL_LIBDIR" || echo "$MSQL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$MSQL_LIBDIR
  else
    
    ep_dir="`echo $MSQL_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MSQL_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        MSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $MSQL_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$MSQL_LIBDIR"; then
    
  if test "$MSQL_LIBDIR" != "/usr/lib"; then
    
  if test -z "$MSQL_LIBDIR" || echo "$MSQL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$MSQL_LIBDIR
  else
    
    ep_dir="`echo $MSQL_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MSQL_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case msql in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lmsql $LIBS" 
   ;;
  esac




  fi


    
  if test "$MSQL_INCDIR" != "/usr/include"; then
    
  if test -z "$MSQL_INCDIR" || echo "$MSQL_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$MSQL_INCDIR
  else
    
    ep_dir="`echo $MSQL_INCDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MSQL_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    cat >> confdefs.h <<\EOF
#define HAVE_MSQL 1
EOF

    
  PHP_VAR_SUBST="$PHP_VAR_SUBST MSQL_SHARED_LIBADD"

    
  ext_builddir=ext/msql
  ext_srcdir=$abs_srcdir/ext/msql

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/msql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/msql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/msql/"; ac_bdir="ext/msql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_msql.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC msql"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC msql"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/msql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/msql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/msql/"; ac_bdir="ext/msql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_msql.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_msql="$shared_objects_msql $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/msql.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_msql"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/msql.la: $ext_builddir/msql.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/msql.la \$(phplibdir)

$ext_builddir/msql.la: \$(shared_objects_msql) \$(MSQL_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_msql) \$(MSQL_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_MSQL 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/msql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/msql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/msql/"; ac_bdir="ext/msql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_msql.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC msql"
    else
      
  
  case ext/msql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/msql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/msql/"; ac_bdir="ext/msql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_msql.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC msql"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


    
  echo $ac_n "checking mSQL version""... $ac_c" 1>&6
echo "configure:45947: checking mSQL version" >&5
  ac_php_oldcppflags=$CPPFLAGS
  CPPFLAGS="$INCLUDES $CPPFLAGS"
  cat > conftest.$ac_ext <<EOF
#line 45951 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include "msql.h"
int main() {
int i = IDX_TYPE
; return 0; }
EOF
if { (eval echo configure:45959: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
    cat >> confdefs.h <<\EOF
#define MSQL1 0
EOF

    MSQL_VERSION="2.0 or newer"
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
    cat >> confdefs.h <<\EOF
#define MSQL1 1
EOF

    MSQL_VERSION=1.0
  
fi
rm -f conftest*
  CPPFLAGS=$ac_php_oldcppflags
  echo "$ac_t""$MSQL_VERSION" 1>&6

  fi




echo $ac_n "checking for MSSQL support via FreeTDS""... $ac_c" 1>&6
echo "configure:45990: checking for MSSQL support via FreeTDS" >&5
# Check whether --with-mssql or --without-mssql was given.
if test "${with_mssql+set}" = set; then
  withval="$with_mssql"
  PHP_MSSQL=$withval
else
  
  PHP_MSSQL=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_MSSQL=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_MSSQL in
shared,*)
  PHP_MSSQL=`echo "$PHP_MSSQL"|sed 's/^shared,//'`
  ;;
shared)
  PHP_MSSQL=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6





if test "$PHP_MSSQL" != "no"; then

  FREETDS_INSTALLATION_DIR=""
  if test "$PHP_MSSQL" = "yes"; then

    for i in /usr/local /usr; do
      if test -f $i/include/tds.h; then
        FREETDS_INSTALLATION_DIR=$i
        break
      fi
    done

    if test -z "$FREETDS_INSTALLATION_DIR"; then
      { echo "configure: error: Cannot find FreeTDS in known installation directories" 1>&2; exit 1; }
    fi

  elif test "$PHP_MSSQL" != "no"; then

    if test -f $PHP_MSSQL/include/tds.h; then
      FREETDS_INSTALLATION_DIR=$PHP_MSSQL
    else
      { echo "configure: error: Directory $PHP_MSSQL is not a FreeTDS installation directory" 1>&2; exit 1; }
    fi
  fi  

  if test ! -r "$FREETDS_INSTALLATION_DIR/lib/libtds.a"; then
     { echo "configure: error: Could not find $FREETDS_INSTALLATION_DIR/lib/libtds.a" 1>&2; exit 1; }
  fi

  MSSQL_INCDIR=$FREETDS_INSTALLATION_DIR/include
  MSSQL_LIBDIR=$FREETDS_INSTALLATION_DIR/lib

  
  if test "$MSSQL_INCDIR" != "/usr/include"; then
    
  if test -z "$MSSQL_INCDIR" || echo "$MSSQL_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$MSSQL_INCDIR
  else
    
    ep_dir="`echo $MSSQL_INCDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MSSQL_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  

  if test "$ext_shared" = "yes"; then
    MSSQL_SHARED_LIBADD="-lsybdb $MSSQL_SHARED_LIBADD"
    if test -n "$MSSQL_LIBDIR"; then
      
  if test "$MSSQL_LIBDIR" != "/usr/lib"; then
    
  if test -z "$MSSQL_LIBDIR" || echo "$MSSQL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$MSSQL_LIBDIR
  else
    
    ep_dir="`echo $MSSQL_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MSSQL_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        MSSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $MSSQL_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$MSSQL_LIBDIR"; then
    
  if test "$MSSQL_LIBDIR" != "/usr/lib"; then
    
  if test -z "$MSSQL_LIBDIR" || echo "$MSSQL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$MSSQL_LIBDIR
  else
    
    ep_dir="`echo $MSSQL_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MSSQL_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case sybdb in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsybdb $LIBS" 
   ;;
  esac




  fi


  
  ext_builddir=ext/mssql
  ext_srcdir=$abs_srcdir/ext/mssql

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/mssql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mssql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mssql/"; ac_bdir="ext/mssql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_mssql.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC mssql"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC mssql"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/mssql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mssql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mssql/"; ac_bdir="ext/mssql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_mssql.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_mssql="$shared_objects_mssql $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/mssql.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mssql"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/mssql.la: $ext_builddir/mssql.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/mssql.la \$(phplibdir)

$ext_builddir/mssql.la: \$(shared_objects_mssql) \$(MSSQL_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_mssql) \$(MSSQL_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_MSSQL 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/mssql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mssql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mssql/"; ac_bdir="ext/mssql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_mssql.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC mssql"
    else
      
  
  case ext/mssql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mssql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mssql/"; ac_bdir="ext/mssql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_mssql.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC mssql"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


  echo $ac_n "checking for dnet_addr in -ldnet_stub""... $ac_c" 1>&6
echo "configure:46402: checking for dnet_addr in -ldnet_stub" >&5
ac_lib_var=`echo dnet_stub'_'dnet_addr | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ldnet_stub  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 46410 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dnet_addr();

int main() {
dnet_addr()
; return 0; }
EOF
if { (eval echo configure:46421: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
   

  if test "$ext_shared" = "yes"; then
    MSSQL_SHARED_LIBADD="-ldnet_stub $MSSQL_SHARED_LIBADD"
    if test -n ""; then
      
  if test "" != "/usr/lib"; then
    
  if test -z "" || echo "" | grep '^/' >/dev/null ; then
    ai_p=
  else
    
    ep_dir="`echo |sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        MSSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $MSSQL_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n ""; then
    
  if test "" != "/usr/lib"; then
    
  if test -z "" || echo "" | grep '^/' >/dev/null ; then
    ai_p=
  else
    
    ep_dir="`echo |sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case dnet_stub in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-ldnet_stub $LIBS" 
   ;;
  esac




  fi


        cat >> confdefs.h <<\EOF
#define HAVE_LIBDNET_STUB 1
EOF

     
else
  echo "$ac_t""no" 1>&6
fi

  cat >> confdefs.h <<\EOF
#define HAVE_MSSQL 1
EOF

  cat >> confdefs.h <<\EOF
#define HAVE_FREETDS 1
EOF

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST MSSQL_SHARED_LIBADD"

fi


# Local macros for automake & autoconf


















#---START: Used in for client configure



























echo $ac_n "checking for MySQL support""... $ac_c" 1>&6
echo "configure:46603: checking for MySQL support" >&5
# Check whether --with-mysql or --without-mysql was given.
if test "${with_mysql+set}" = set; then
  withval="$with_mysql"
  PHP_MYSQL=$withval
else
  
  PHP_MYSQL=yes

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_MYSQL=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_MYSQL in
shared,*)
  PHP_MYSQL=`echo "$PHP_MYSQL"|sed 's/^shared,//'`
  ;;
shared)
  PHP_MYSQL=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6






echo $ac_n "checking for specified location of the MySQL UNIX socket""... $ac_c" 1>&6
echo "configure:46649: checking for specified location of the MySQL UNIX socket" >&5
# Check whether --with-mysql-sock or --without-mysql-sock was given.
if test "${with_mysql_sock+set}" = set; then
  withval="$with_mysql_sock"
  PHP_MYSQL_SOCK=$withval
else
  
  PHP_MYSQL_SOCK=no

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_MYSQL_SOCK=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_MYSQL_SOCK
echo "$ac_t""$ext_output" 1>&6




if test -z "$PHP_ZLIB_DIR"; then
  

echo $ac_n "checking for the location of libz""... $ac_c" 1>&6
echo "configure:46675: checking for the location of libz" >&5
# Check whether --with-zlib-dir or --without-zlib-dir was given.
if test "${with_zlib_dir+set}" = set; then
  withval="$with_zlib_dir"
  PHP_ZLIB_DIR=$withval
else
  
  PHP_ZLIB_DIR=no

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_ZLIB_DIR=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_ZLIB_DIR
echo "$ac_t""$ext_output" 1>&6



fi


if test "$PHP_MYSQL" != "no"; then
  cat >> confdefs.h <<\EOF
#define HAVE_MYSQL 1
EOF


  echo $ac_n "checking for MySQL UNIX socket location""... $ac_c" 1>&6
echo "configure:46706: checking for MySQL UNIX socket location" >&5
  if test "$PHP_MYSQL_SOCK" != "no" && test "$PHP_MYSQL_SOCK" != "yes"; then
    MYSQL_SOCK=$PHP_MYSQL_SOCK
    cat >> confdefs.h <<EOF
#define MYSQL_UNIX_ADDR "$MYSQL_SOCK"
EOF

    echo "$ac_t""$MYSQL_SOCK" 1>&6
  elif test "$PHP_MYSQL" = "yes" || test "$PHP_MYSQL_SOCK" = "yes"; then
    
  for i in  \
    /var/run/mysqld/mysqld.sock \
    /var/tmp/mysql.sock \
    /var/run/mysql/mysql.sock \
    /var/lib/mysql/mysql.sock \
    /var/mysql/mysql.sock \
    /usr/local/mysql/var/mysql.sock \
    /Private/tmp/mysql.sock \
    /tmp/mysql.sock \
  ; do
    if test -r $i; then
      MYSQL_SOCK=$i
      break 2
    fi
  done

  if test -n "$MYSQL_SOCK"; then
    cat >> confdefs.h <<EOF
#define MYSQL_UNIX_ADDR "$MYSQL_SOCK"
EOF

    echo "$ac_t""$MYSQL_SOCK" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

  else
    echo "$ac_t""no" 1>&6
  fi
fi

if test "$PHP_MYSQL" = "yes"; then
  MYSQL_MODULE_TYPE=builtin
  echo $ac_n "checking for inline""... $ac_c" 1>&6
echo "configure:46750: checking for inline" >&5
if eval "test \"`echo '$''{'ac_cv_c_inline'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_cv_c_inline=no
for ac_kw in inline __inline__ __inline; do
  cat > conftest.$ac_ext <<EOF
#line 46757 "configure"
#include "confdefs.h"

int main() {
} $ac_kw foo() {
; return 0; }
EOF
if { (eval echo configure:46764: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_c_inline=$ac_kw; break
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
done

fi

echo "$ac_t""$ac_cv_c_inline" 1>&6
case "$ac_cv_c_inline" in
  inline | yes) ;;
  no) cat >> confdefs.h <<\EOF
#define inline 
EOF
 ;;
  *)  cat >> confdefs.h <<EOF
#define inline $ac_cv_c_inline
EOF
 ;;
esac

echo $ac_n "checking return type of signal handlers""... $ac_c" 1>&6
echo "configure:46790: checking return type of signal handlers" >&5
if eval "test \"`echo '$''{'ac_cv_type_signal'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 46795 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <signal.h>
#ifdef signal
#undef signal
#endif
#ifdef __cplusplus
extern "C" void (*signal (int, void (*)(int)))(int);
#else
void (*signal ()) ();
#endif

int main() {
int i;
; return 0; }
EOF
if { (eval echo configure:46812: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_type_signal=void
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_type_signal=int
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_type_signal" 1>&6
cat >> confdefs.h <<EOF
#define RETSIGTYPE $ac_cv_type_signal
EOF


	





cat >> confdefs.h <<\EOF
#define UNDEF_THREADS_HACK 
EOF



echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
echo "configure:46843: checking for ANSI C header files" >&5
if eval "test \"`echo '$''{'ac_cv_header_stdc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 46848 "configure"
#include "confdefs.h"
#include <stdlib.h>
#include <stdarg.h>
#include <string.h>
#include <float.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:46856: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  ac_cv_header_stdc=yes
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

if test $ac_cv_header_stdc = yes; then
  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
cat > conftest.$ac_ext <<EOF
#line 46873 "configure"
#include "confdefs.h"
#include <string.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "memchr" >/dev/null 2>&1; then
  :
else
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
cat > conftest.$ac_ext <<EOF
#line 46891 "configure"
#include "confdefs.h"
#include <stdlib.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "free" >/dev/null 2>&1; then
  :
else
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
if test "$cross_compiling" = yes; then
  :
else
  cat > conftest.$ac_ext <<EOF
#line 46912 "configure"
#include "confdefs.h"
#include <ctype.h>
#define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
#define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
int main () { int i; for (i = 0; i < 256; i++)
if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);
exit (0); }

EOF
if { (eval echo configure:46923: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  :
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_header_stdc=no
fi
rm -fr conftest*
fi

fi
fi

echo "$ac_t""$ac_cv_header_stdc" 1>&6
if test $ac_cv_header_stdc = yes; then
  cat >> confdefs.h <<\EOF
#define STDC_HEADERS 1
EOF

fi

for ac_hdr in sgtty.h sys/ioctl.h \
 fcntl.h float.h floatingpoint.h ieeefp.h limits.h \
 memory.h pwd.h select.h \
 stdlib.h stddef.h \
 strings.h string.h synch.h sys/mman.h sys/socket.h \
 sys/timeb.h sys/types.h sys/un.h sys/vadvise.h sys/wait.h term.h \
 unistd.h utime.h sys/utime.h termio.h termios.h sched.h crypt.h alloca.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:46956: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 46961 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:46966: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done






echo $ac_n "checking size of char""... $ac_c" 1>&6
echo "configure:46998: checking size of char" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_char'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_char=1
else
  cat > conftest.$ac_ext <<EOF
#line 47006 "configure"
#include "confdefs.h"
#include <stdio.h>
int main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) return(1);
  fprintf(f, "%d\n", sizeof(char));
  return(0);
}
EOF
if { (eval echo configure:47017: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_char=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_char=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_char" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_CHAR $ac_cv_sizeof_char
EOF



echo $ac_n "checking size of int""... $ac_c" 1>&6
echo "configure:47038: checking size of int" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_int'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_int=4
else
  cat > conftest.$ac_ext <<EOF
#line 47046 "configure"
#include "confdefs.h"
#include <stdio.h>
int main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) return(1);
  fprintf(f, "%d\n", sizeof(int));
  return(0);
}
EOF
if { (eval echo configure:47057: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_int=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_int=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_int" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_INT $ac_cv_sizeof_int
EOF


echo $ac_n "checking size of long""... $ac_c" 1>&6
echo "configure:47077: checking size of long" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_long'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_long=4
else
  cat > conftest.$ac_ext <<EOF
#line 47085 "configure"
#include "confdefs.h"
#include <stdio.h>
int main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) return(1);
  fprintf(f, "%d\n", sizeof(long));
  return(0);
}
EOF
if { (eval echo configure:47096: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_long=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_long=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_long" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_LONG $ac_cv_sizeof_long
EOF


echo $ac_n "checking size of long long""... $ac_c" 1>&6
echo "configure:47116: checking size of long long" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_long_long'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_long_long=8
else
  cat > conftest.$ac_ext <<EOF
#line 47124 "configure"
#include "confdefs.h"
#include <stdio.h>
int main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) return(1);
  fprintf(f, "%d\n", sizeof(long long));
  return(0);
}
EOF
if { (eval echo configure:47135: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_long_long=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_long_long=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_long_long" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_LONG_LONG $ac_cv_sizeof_long_long
EOF


echo $ac_n "checking for size_t""... $ac_c" 1>&6
echo "configure:47155: checking for size_t" >&5
if eval "test \"`echo '$''{'ac_cv_type_size_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 47160 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "(^|[^a-zA-Z_0-9])size_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_size_t=yes
else
  rm -rf conftest*
  ac_cv_type_size_t=no
fi
rm -f conftest*

fi
echo "$ac_t""$ac_cv_type_size_t" 1>&6
if test $ac_cv_type_size_t = no; then
  cat >> confdefs.h <<\EOF
#define size_t unsigned
EOF

fi

echo $ac_n "checking whether time.h and sys/time.h may both be included""... $ac_c" 1>&6
echo "configure:47188: checking whether time.h and sys/time.h may both be included" >&5
if eval "test \"`echo '$''{'ac_cv_header_time'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 47193 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/time.h>
#include <time.h>
int main() {
struct tm *tp;
; return 0; }
EOF
if { (eval echo configure:47202: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_header_time=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_time=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_header_time" 1>&6
if test $ac_cv_header_time = yes; then
  cat >> confdefs.h <<\EOF
#define TIME_WITH_SYS_TIME 1
EOF

fi

echo $ac_n "checking for uid_t in sys/types.h""... $ac_c" 1>&6
echo "configure:47223: checking for uid_t in sys/types.h" >&5
if eval "test \"`echo '$''{'ac_cv_type_uid_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 47228 "configure"
#include "confdefs.h"
#include <sys/types.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "uid_t" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_uid_t=yes
else
  rm -rf conftest*
  ac_cv_type_uid_t=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_type_uid_t" 1>&6
if test $ac_cv_type_uid_t = no; then
  cat >> confdefs.h <<\EOF
#define uid_t int
EOF

  cat >> confdefs.h <<\EOF
#define gid_t int
EOF

fi


echo $ac_n "checking for type ulong""... $ac_c" 1>&6
echo "configure:47258: checking for type ulong" >&5
if eval "test \"`echo '$''{'ac_cv_ulong'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_ulong=no
else
  cat > conftest.$ac_ext <<EOF
#line 47266 "configure"
#include "confdefs.h"
#include <stdio.h>
#include <sys/types.h>
main()
{
  ulong foo;
  foo++;
  exit(0);
}
EOF
if { (eval echo configure:47277: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_ulong=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_ulong=no
fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_ulong" 1>&6
if test "$ac_cv_ulong" = "yes"
then
  cat >> confdefs.h <<\EOF
#define HAVE_ULONG 
EOF

fi

echo $ac_n "checking for type uchar""... $ac_c" 1>&6
echo "configure:47301: checking for type uchar" >&5
if eval "test \"`echo '$''{'ac_cv_uchar'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_uchar=no
else
  cat > conftest.$ac_ext <<EOF
#line 47309 "configure"
#include "confdefs.h"
#include <stdio.h>
#include <sys/types.h>
main()
{
  uchar foo;
  foo++;
  exit(0);
}
EOF
if { (eval echo configure:47320: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_uchar=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_uchar=no
fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_uchar" 1>&6
if test "$ac_cv_uchar" = "yes"
then
  cat >> confdefs.h <<\EOF
#define HAVE_UCHAR 
EOF

fi

echo $ac_n "checking for type uint""... $ac_c" 1>&6
echo "configure:47344: checking for type uint" >&5
if eval "test \"`echo '$''{'ac_cv_uint'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_uint=no
else
  cat > conftest.$ac_ext <<EOF
#line 47352 "configure"
#include "confdefs.h"
#include <stdio.h>
#include <sys/types.h>
main()
{
  uint foo;
  foo++;
  exit(0);
}
EOF
if { (eval echo configure:47363: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_uint=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_uint=no
fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_uint" 1>&6
if test "$ac_cv_uint" = "yes"
then
  cat >> confdefs.h <<\EOF
#define HAVE_UINT 
EOF

fi

echo $ac_n "checking for type ushort""... $ac_c" 1>&6
echo "configure:47387: checking for type ushort" >&5
if eval "test \"`echo '$''{'ac_cv_ushort'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_ushort=no
else
  cat > conftest.$ac_ext <<EOF
#line 47395 "configure"
#include "confdefs.h"
#include <stdio.h>
#include <sys/types.h>
main()
{
  ushort foo;
  foo++;
  exit(0);
}
EOF
if { (eval echo configure:47406: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_ushort=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_ushort=no
fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_ushort" 1>&6
if test "$ac_cv_ushort" = "yes"
then
  cat >> confdefs.h <<\EOF
#define HAVE_USHORT 
EOF

fi

echo $ac_n "checking for int8""... $ac_c" 1>&6
echo "configure:47430: checking for int8" >&5
if eval "test \"`echo '$''{'ac_cv_int8'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_int8=no
else
  cat > conftest.$ac_ext <<EOF
#line 47438 "configure"
#include "confdefs.h"

#ifdef HAVE_STDLIB_H
#include <stdlib.h>
#endif

#ifdef HAVE_STDDEF_H
#include <stddef.h>
#endif

#ifdef HAVE_SYS_TYPES_H
#include <sys/types.h>
#endif

int main()
{
    int8 i;
    return 0;
}

EOF
if { (eval echo configure:47460: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_int8=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_int8=no
fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_int8" 1>&6
if test "$ac_cv_int8" = "yes"
then
  cat >> confdefs.h <<\EOF
#define HAVE_INT_8_16_32 
EOF

fi


ac_save_CXXFLAGS="$CXXFLAGS"
echo $ac_n "checking base type of last arg to accept""... $ac_c" 1>&6
echo "configure:47486: checking base type of last arg to accept" >&5
if eval "test \"`echo '$''{'mysql_cv_btype_last_arg_accept'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

if test "$ac_cv_prog_gxx" = "yes"
then
  CXXFLAGS="$CXXFLAGS -Werror"
fi
mysql_cv_btype_last_arg_accept=none
cat > conftest.$ac_ext <<EOF
#line 47504 "configure"
#include "confdefs.h"
#include <stdlib.h>
#include <sys/types.h>
#include <sys/socket.h>

int main() {
int a = accept(1, (struct sockaddr *) 0, (socklen_t *) 0);
; return 0; }
EOF
if { (eval echo configure:47514: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  mysql_cv_btype_last_arg_accept=socklen_t
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
if test $mysql_cv_btype_last_arg_accept = none; then
cat > conftest.$ac_ext <<EOF
#line 47524 "configure"
#include "confdefs.h"
#include <stdlib.h>
#include <sys/types.h>
#include <sys/socket.h>

int main() {
int a = accept(1, (struct sockaddr *) 0, (size_t *) 0);
; return 0; }
EOF
if { (eval echo configure:47534: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  mysql_cv_btype_last_arg_accept=size_t
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
fi
if test $mysql_cv_btype_last_arg_accept = none; then
mysql_cv_btype_last_arg_accept=int
fi
fi

echo "$ac_t""$mysql_cv_btype_last_arg_accept" 1>&6
ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

cat >> confdefs.h <<EOF
#define SOCKET_SIZE_TYPE $mysql_cv_btype_last_arg_accept
EOF

CXXFLAGS="$ac_save_CXXFLAGS"

echo $ac_n "checking return type of qsort""... $ac_c" 1>&6
echo "configure:47563: checking return type of qsort" >&5
if eval "test \"`echo '$''{'mysql_cv_type_qsort'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 47568 "configure"
#include "confdefs.h"
#include <stdlib.h>
#ifdef __cplusplus
extern "C"
#endif
void qsort(void *base, size_t nel, size_t width,
 int (*compar) (const void *, const void *));

int main() {
int i;
; return 0; }
EOF
if { (eval echo configure:47581: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  mysql_cv_type_qsort=void
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  mysql_cv_type_qsort=int
fi
rm -f conftest*
fi

echo "$ac_t""$mysql_cv_type_qsort" 1>&6
cat >> confdefs.h <<EOF
#define RETQSORTTYPE $mysql_cv_type_qsort
EOF

if test "$mysql_cv_type_qsort" = "void"
then
 cat >> confdefs.h <<EOF
#define QSORT_TYPE_IS_VOID 1
EOF

fi






# Standard MySQL list
for ac_func in alarm bmove \
 chsize ftruncate rint finite fpsetmask fpresetsticky\
 cuserid fcntl fconvert  \
 getrusage getpwuid getcwd getrlimit getwd index locking longjmp \
 perror pread realpath rename \
 socket strnlen madvise \
 strtoll strtoul strtoull snprintf tempnam thr_setconcurrency \
 gethostbyaddr_r gethostbyname_r getpwnam \
 bfill bzero bcmp strstr strpbrk strerror\
 tell atod memcpy memmove \
 setupterm strcasecmp sighold \
 vidattr setupterm lrand48 localtime_r \
 sigset sigthreadmask pthread_sigmask pthread_setprio pthread_setprio_np \
 pthread_setschedparam pthread_attr_setprio pthread_attr_setschedparam \
 pthread_attr_create pthread_getsequence_np pthread_attr_setstacksize \
 pthread_condattr_create rwlock_init \
 crypt dlopen dlerror fchmod getpass getpassphrase
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:47631: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 47636 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:47659: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


# This is special for libmysql
for ac_func in strtok_r
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:47688: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 47693 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:47716: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done



# Check definition of gethostbyname_r (glibc2.0.100 is different from Solaris)
ac_save_CXXFLAGS="$CXXFLAGS"
echo $ac_n "checking style of gethostname_r routines""... $ac_c" 1>&6
echo "configure:47745: checking style of gethostname_r routines" >&5
if eval "test \"`echo '$''{'mysql_cv_gethostname_style'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

if test "$ac_cv_prog_gxx" = "yes"
then
  CXXFLAGS="$CXXFLAGS -Werror"
fi
cat > conftest.$ac_ext <<EOF
#line 47762 "configure"
#include "confdefs.h"
#if !defined(SCO) && !defined(__osf__)
#define _REENTRANT
#endif
#include <pthread.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <netdb.h>
int main() {
int skr;

 skr = gethostbyname_r((const char *) 0,
  (struct hostent*) 0, (char*) 0, 0, (struct hostent **) 0, &skr);
; return 0; }
EOF
if { (eval echo configure:47780: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  mysql_cv_gethostname_style=glibc2
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  mysql_cv_gethostname_style=other
fi
rm -f conftest*
fi

echo "$ac_t""$mysql_cv_gethostname_style" 1>&6
ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

CXXFLAGS="$ac_save_CXXFLAGS"
if test "$mysql_cv_gethostname_style" = "glibc2"
then
  cat >> confdefs.h <<\EOF
#define HAVE_GETHOSTBYNAME_R_GLIBC2_STYLE 
EOF

fi

# Check 3rd argument of getthostbyname_r
ac_save_CXXFLAGS="$CXXFLAGS"
echo $ac_n "checking 3 argument to gethostname_r routines""... $ac_c" 1>&6
echo "configure:47812: checking 3 argument to gethostname_r routines" >&5
if eval "test \"`echo '$''{'mysql_cv_gethostname_arg'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

if test "$ac_cv_prog_gxx" = "yes"
then
  CXXFLAGS="$CXXFLAGS -Werror"
fi
cat > conftest.$ac_ext <<EOF
#line 47829 "configure"
#include "confdefs.h"
#if !defined(SCO) && !defined(__osf__)
#define _REENTRANT
#endif
#include <pthread.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <netdb.h>
int main() {
int skr;

 skr = gethostbyname_r((const char *) 0, (struct hostent*) 0, (hostent_data*) 0);
; return 0; }
EOF
if { (eval echo configure:47846: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  mysql_cv_gethostname_arg=hostent_data
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  mysql_cv_gethostname_arg=char
fi
rm -f conftest*
fi

echo "$ac_t""$mysql_cv_gethostname_arg" 1>&6
ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

CXXFLAGS="$ac_save_CXXFLAGS"
if test "$mysql_cv_gethostname_arg" = "hostent_data"
then
  cat >> confdefs.h <<\EOF
#define HAVE_GETHOSTBYNAME_R_RETURN_INT 
EOF

fi



  # Check definition of pthread_getspecific
  echo $ac_n "checking "args to pthread_getspecific"""... $ac_c" 1>&6
echo "configure:47879: checking "args to pthread_getspecific"" >&5
if eval "test \"`echo '$''{'mysql_cv_getspecific_args'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 47884 "configure"
#include "confdefs.h"
#ifndef SCO
#define _REENTRANT
#endif
#define _POSIX_PTHREAD_SEMANTICS 
#include <pthread.h> 
int main() {
 void *pthread_getspecific(pthread_key_t key);
pthread_getspecific((pthread_key_t) NULL); 
; return 0; }
EOF
if { (eval echo configure:47896: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  mysql_cv_getspecific_args=POSIX
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  mysql_cv_getspecific_args=other
fi
rm -f conftest*
fi

echo "$ac_t""$mysql_cv_getspecific_args" 1>&6
  if test "$mysql_cv_getspecific_args" = "other"
  then
    cat >> confdefs.h <<\EOF
#define HAVE_NONPOSIX_PTHREAD_GETSPECIFIC 
EOF

  fi


  # Check definition of pthread_mutex_init
  echo $ac_n "checking "args to pthread_mutex_init"""... $ac_c" 1>&6
echo "configure:47920: checking "args to pthread_mutex_init"" >&5
if eval "test \"`echo '$''{'mysql_cv_mutex_init_args'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 47925 "configure"
#include "confdefs.h"
#ifndef SCO
#define _REENTRANT
#endif
#define _POSIX_PTHREAD_SEMANTICS 
#include <pthread.h> 
int main() {
 
  pthread_mutexattr_t attr;
  pthread_mutex_t mp;
  pthread_mutex_init(&mp,&attr); 
; return 0; }
EOF
if { (eval echo configure:47939: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  mysql_cv_mutex_init_args=POSIX
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  mysql_cv_mutex_init_args=other
fi
rm -f conftest*
fi

echo "$ac_t""$mysql_cv_mutex_init_args" 1>&6
  if test "$mysql_cv_mutex_init_args" = "other"
  then
    cat >> confdefs.h <<\EOF
#define HAVE_NONPOSIX_PTHREAD_MUTEX_INIT 
EOF

  fi


# Check definition of readdir_r
echo $ac_n "checking "args to readdir_r"""... $ac_c" 1>&6
echo "configure:47963: checking "args to readdir_r"" >&5
if eval "test \"`echo '$''{'mysql_cv_readdir_r'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 47968 "configure"
#include "confdefs.h"
#ifndef SCO
#define _REENTRANT
#endif
#define _POSIX_PTHREAD_SEMANTICS 
#include <pthread.h>
#include <dirent.h>
int main() {
 int readdir_r(DIR *dirp, struct dirent *entry, struct dirent **result);
readdir_r((DIR *) NULL, (struct dirent *) NULL, (struct dirent **) NULL); 
; return 0; }
EOF
if { (eval echo configure:47981: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  mysql_cv_readdir_r=POSIX
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  mysql_cv_readdir_r=other
fi
rm -f conftest*
fi

echo "$ac_t""$mysql_cv_readdir_r" 1>&6
if test "$mysql_cv_readdir_r" = "POSIX"
then
  cat >> confdefs.h <<\EOF
#define HAVE_READDIR_R 
EOF

fi


# Check definition av posix sigwait()
echo $ac_n "checking "style of sigwait"""... $ac_c" 1>&6
echo "configure:48005: checking "style of sigwait"" >&5
if eval "test \"`echo '$''{'mysql_cv_sigwait'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 48010 "configure"
#include "confdefs.h"
#ifndef SCO
#define _REENTRANT
#endif
#define _POSIX_PTHREAD_SEMANTICS 
#include <pthread.h>
#include <signal.h>
int main() {
#ifndef _AIX
sigset_t set;
int sig;
sigwait(&set,&sig);
#endif
; return 0; }
EOF
if { (eval echo configure:48026: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  mysql_cv_sigwait=POSIX
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  mysql_cv_sigwait=other
fi
rm -f conftest*
fi

echo "$ac_t""$mysql_cv_sigwait" 1>&6
if test "$mysql_cv_sigwait" = "POSIX"
then
  cat >> confdefs.h <<\EOF
#define HAVE_SIGWAIT 
EOF

fi

if test "$mysql_cv_sigwait" != "POSIX"
then
unset mysql_cv_sigwait
# Check definition av posix sigwait()
echo $ac_n "checking "style of sigwait"""... $ac_c" 1>&6
echo "configure:48052: checking "style of sigwait"" >&5
if eval "test \"`echo '$''{'mysql_cv_sigwait'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 48057 "configure"
#include "confdefs.h"
#ifndef SCO
#define _REENTRANT
#endif
#define _POSIX_PTHREAD_SEMANTICS 
#include <pthread.h>
#include <signal.h>
int main() {
sigset_t set;
int sig;
sigwait(&set);
; return 0; }
EOF
if { (eval echo configure:48071: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  mysql_cv_sigwait=NONPOSIX
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  mysql_cv_sigwait=other
fi
rm -f conftest*
fi

echo "$ac_t""$mysql_cv_sigwait" 1>&6
if test "$mysql_cv_sigwait" = "NONPOSIX"
then
  cat >> confdefs.h <<\EOF
#define HAVE_NONPOSIX_SIGWAIT 
EOF

fi
fi


  sources="libmysql/libmysql.c libmysql/errmsg.c libmysql/net.c libmysql/violite.c libmysql/password.c \
	libmysql/my_init.c libmysql/my_lib.c libmysql/my_static.c libmysql/my_malloc.c libmysql/my_realloc.c libmysql/my_create.c \
	libmysql/my_delete.c libmysql/my_tempnam.c libmysql/my_open.c libmysql/mf_casecnv.c libmysql/my_read.c \
	libmysql/my_write.c libmysql/errors.c libmysql/my_error.c libmysql/my_getwd.c libmysql/my_div.c libmysql/mf_pack.c \
	libmysql/my_messnc.c libmysql/mf_dirname.c libmysql/mf_fn_ext.c libmysql/mf_wcomp.c libmysql/typelib.c libmysql/safemalloc.c \
	libmysql/my_alloc.c libmysql/mf_format.c libmysql/mf_path.c libmysql/mf_unixpath.c libmysql/my_fopen.c libmysql/mf_loadpath.c \
	libmysql/my_pthread.c libmysql/my_thr_init.c libmysql/thr_mutex.c libmysql/mulalloc.c libmysql/string.c libmysql/default.c \
	libmysql/my_compress.c libmysql/array.c libmysql/my_once.c libmysql/list.c libmysql/my_net.c libmysql/dbug.c \
	libmysql/strmov.c libmysql/strxmov.c libmysql/strnmov.c libmysql/strmake.c libmysql/strend.c libmysql/strfill.c \
	libmysql/is_prefix.c libmysql/int2str.c libmysql/str2int.c libmysql/strinstr.c \
	libmysql/strcont.c libmysql/strcend.c libmysql/bchange.c libmysql/bmove.c libmysql/bmove_upp.c \
	libmysql/longlong2str.c libmysql/strtoull.c libmysql/strtoll.c libmysql/charset.c libmysql/ctype.c"

  
  ext_builddir=ext/mysql
  ext_srcdir=$abs_srcdir/ext/mysql

  ac_extra=`echo "-I@ext_srcdir@/libmysql"|sed s#@ext_srcdir@#$ext_srcdir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/mysql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mysql/"; ac_bdir="ext/mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_mysql.c $sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC mysql"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC mysql"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/mysql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mysql/"; ac_bdir="ext/mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_mysql.c $sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_mysql="$shared_objects_mysql $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/mysql.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mysql"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/mysql.la: $ext_builddir/mysql.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/mysql.la \$(phplibdir)

$ext_builddir/mysql.la: \$(shared_objects_mysql) \$(MYSQL_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_mysql) \$(MYSQL_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_MYSQL 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/mysql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mysql/"; ac_bdir="ext/mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_mysql.c $sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC mysql"
    else
      
  
  case ext/mysql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mysql/"; ac_bdir="ext/mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_mysql.c $sources; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC mysql"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


  
  BUILD_DIR="$BUILD_DIR $ext_builddir/libmysql"


elif test "$PHP_MYSQL" != "no"; then

  



echo $ac_n "checking size of char""... $ac_c" 1>&6
echo "configure:48326: checking size of char" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_char'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_char=1
else
  cat > conftest.$ac_ext <<EOF
#line 48334 "configure"
#include "confdefs.h"
#include <stdio.h>
int main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) return(1);
  fprintf(f, "%d\n", sizeof(char));
  return(0);
}
EOF
if { (eval echo configure:48345: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_char=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_char=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_char" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_CHAR $ac_cv_sizeof_char
EOF



echo $ac_n "checking size of int""... $ac_c" 1>&6
echo "configure:48366: checking size of int" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_int'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_int=4
else
  cat > conftest.$ac_ext <<EOF
#line 48374 "configure"
#include "confdefs.h"
#include <stdio.h>
int main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) return(1);
  fprintf(f, "%d\n", sizeof(int));
  return(0);
}
EOF
if { (eval echo configure:48385: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_int=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_int=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_int" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_INT $ac_cv_sizeof_int
EOF


echo $ac_n "checking size of long""... $ac_c" 1>&6
echo "configure:48405: checking size of long" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_long'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_long=4
else
  cat > conftest.$ac_ext <<EOF
#line 48413 "configure"
#include "confdefs.h"
#include <stdio.h>
int main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) return(1);
  fprintf(f, "%d\n", sizeof(long));
  return(0);
}
EOF
if { (eval echo configure:48424: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_long=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_long=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_long" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_LONG $ac_cv_sizeof_long
EOF


echo $ac_n "checking size of long long""... $ac_c" 1>&6
echo "configure:48444: checking size of long long" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_long_long'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_long_long=8
else
  cat > conftest.$ac_ext <<EOF
#line 48452 "configure"
#include "confdefs.h"
#include <stdio.h>
int main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) return(1);
  fprintf(f, "%d\n", sizeof(long long));
  return(0);
}
EOF
if { (eval echo configure:48463: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_long_long=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_long_long=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_long_long" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_LONG_LONG $ac_cv_sizeof_long_long
EOF


echo $ac_n "checking for size_t""... $ac_c" 1>&6
echo "configure:48483: checking for size_t" >&5
if eval "test \"`echo '$''{'ac_cv_type_size_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 48488 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "(^|[^a-zA-Z_0-9])size_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_size_t=yes
else
  rm -rf conftest*
  ac_cv_type_size_t=no
fi
rm -f conftest*

fi
echo "$ac_t""$ac_cv_type_size_t" 1>&6
if test $ac_cv_type_size_t = no; then
  cat >> confdefs.h <<\EOF
#define size_t unsigned
EOF

fi

echo $ac_n "checking whether time.h and sys/time.h may both be included""... $ac_c" 1>&6
echo "configure:48516: checking whether time.h and sys/time.h may both be included" >&5
if eval "test \"`echo '$''{'ac_cv_header_time'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 48521 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/time.h>
#include <time.h>
int main() {
struct tm *tp;
; return 0; }
EOF
if { (eval echo configure:48530: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_header_time=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_time=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_header_time" 1>&6
if test $ac_cv_header_time = yes; then
  cat >> confdefs.h <<\EOF
#define TIME_WITH_SYS_TIME 1
EOF

fi

echo $ac_n "checking for uid_t in sys/types.h""... $ac_c" 1>&6
echo "configure:48551: checking for uid_t in sys/types.h" >&5
if eval "test \"`echo '$''{'ac_cv_type_uid_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 48556 "configure"
#include "confdefs.h"
#include <sys/types.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "uid_t" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_uid_t=yes
else
  rm -rf conftest*
  ac_cv_type_uid_t=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_type_uid_t" 1>&6
if test $ac_cv_type_uid_t = no; then
  cat >> confdefs.h <<\EOF
#define uid_t int
EOF

  cat >> confdefs.h <<\EOF
#define gid_t int
EOF

fi


echo $ac_n "checking for type ulong""... $ac_c" 1>&6
echo "configure:48586: checking for type ulong" >&5
if eval "test \"`echo '$''{'ac_cv_ulong'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_ulong=no
else
  cat > conftest.$ac_ext <<EOF
#line 48594 "configure"
#include "confdefs.h"
#include <stdio.h>
#include <sys/types.h>
main()
{
  ulong foo;
  foo++;
  exit(0);
}
EOF
if { (eval echo configure:48605: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_ulong=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_ulong=no
fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_ulong" 1>&6
if test "$ac_cv_ulong" = "yes"
then
  cat >> confdefs.h <<\EOF
#define HAVE_ULONG 
EOF

fi

echo $ac_n "checking for type uchar""... $ac_c" 1>&6
echo "configure:48629: checking for type uchar" >&5
if eval "test \"`echo '$''{'ac_cv_uchar'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_uchar=no
else
  cat > conftest.$ac_ext <<EOF
#line 48637 "configure"
#include "confdefs.h"
#include <stdio.h>
#include <sys/types.h>
main()
{
  uchar foo;
  foo++;
  exit(0);
}
EOF
if { (eval echo configure:48648: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_uchar=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_uchar=no
fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_uchar" 1>&6
if test "$ac_cv_uchar" = "yes"
then
  cat >> confdefs.h <<\EOF
#define HAVE_UCHAR 
EOF

fi

echo $ac_n "checking for type uint""... $ac_c" 1>&6
echo "configure:48672: checking for type uint" >&5
if eval "test \"`echo '$''{'ac_cv_uint'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_uint=no
else
  cat > conftest.$ac_ext <<EOF
#line 48680 "configure"
#include "confdefs.h"
#include <stdio.h>
#include <sys/types.h>
main()
{
  uint foo;
  foo++;
  exit(0);
}
EOF
if { (eval echo configure:48691: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_uint=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_uint=no
fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_uint" 1>&6
if test "$ac_cv_uint" = "yes"
then
  cat >> confdefs.h <<\EOF
#define HAVE_UINT 
EOF

fi

echo $ac_n "checking for type ushort""... $ac_c" 1>&6
echo "configure:48715: checking for type ushort" >&5
if eval "test \"`echo '$''{'ac_cv_ushort'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_ushort=no
else
  cat > conftest.$ac_ext <<EOF
#line 48723 "configure"
#include "confdefs.h"
#include <stdio.h>
#include <sys/types.h>
main()
{
  ushort foo;
  foo++;
  exit(0);
}
EOF
if { (eval echo configure:48734: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_ushort=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_ushort=no
fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_ushort" 1>&6
if test "$ac_cv_ushort" = "yes"
then
  cat >> confdefs.h <<\EOF
#define HAVE_USHORT 
EOF

fi

echo $ac_n "checking for int8""... $ac_c" 1>&6
echo "configure:48758: checking for int8" >&5
if eval "test \"`echo '$''{'ac_cv_int8'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_int8=no
else
  cat > conftest.$ac_ext <<EOF
#line 48766 "configure"
#include "confdefs.h"

#ifdef HAVE_STDLIB_H
#include <stdlib.h>
#endif

#ifdef HAVE_STDDEF_H
#include <stddef.h>
#endif

#ifdef HAVE_SYS_TYPES_H
#include <sys/types.h>
#endif

int main()
{
    int8 i;
    return 0;
}

EOF
if { (eval echo configure:48788: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_int8=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_int8=no
fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_int8" 1>&6
if test "$ac_cv_int8" = "yes"
then
  cat >> confdefs.h <<\EOF
#define HAVE_INT_8_16_32 
EOF

fi


ac_save_CXXFLAGS="$CXXFLAGS"
echo $ac_n "checking base type of last arg to accept""... $ac_c" 1>&6
echo "configure:48814: checking base type of last arg to accept" >&5
if eval "test \"`echo '$''{'mysql_cv_btype_last_arg_accept'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

if test "$ac_cv_prog_gxx" = "yes"
then
  CXXFLAGS="$CXXFLAGS -Werror"
fi
mysql_cv_btype_last_arg_accept=none
cat > conftest.$ac_ext <<EOF
#line 48832 "configure"
#include "confdefs.h"
#include <stdlib.h>
#include <sys/types.h>
#include <sys/socket.h>

int main() {
int a = accept(1, (struct sockaddr *) 0, (socklen_t *) 0);
; return 0; }
EOF
if { (eval echo configure:48842: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  mysql_cv_btype_last_arg_accept=socklen_t
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
if test $mysql_cv_btype_last_arg_accept = none; then
cat > conftest.$ac_ext <<EOF
#line 48852 "configure"
#include "confdefs.h"
#include <stdlib.h>
#include <sys/types.h>
#include <sys/socket.h>

int main() {
int a = accept(1, (struct sockaddr *) 0, (size_t *) 0);
; return 0; }
EOF
if { (eval echo configure:48862: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  mysql_cv_btype_last_arg_accept=size_t
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
fi
if test $mysql_cv_btype_last_arg_accept = none; then
mysql_cv_btype_last_arg_accept=int
fi
fi

echo "$ac_t""$mysql_cv_btype_last_arg_accept" 1>&6
ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

cat >> confdefs.h <<EOF
#define SOCKET_SIZE_TYPE $mysql_cv_btype_last_arg_accept
EOF

CXXFLAGS="$ac_save_CXXFLAGS"

echo $ac_n "checking return type of qsort""... $ac_c" 1>&6
echo "configure:48891: checking return type of qsort" >&5
if eval "test \"`echo '$''{'mysql_cv_type_qsort'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 48896 "configure"
#include "confdefs.h"
#include <stdlib.h>
#ifdef __cplusplus
extern "C"
#endif
void qsort(void *base, size_t nel, size_t width,
 int (*compar) (const void *, const void *));

int main() {
int i;
; return 0; }
EOF
if { (eval echo configure:48909: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  mysql_cv_type_qsort=void
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  mysql_cv_type_qsort=int
fi
rm -f conftest*
fi

echo "$ac_t""$mysql_cv_type_qsort" 1>&6
cat >> confdefs.h <<EOF
#define RETQSORTTYPE $mysql_cv_type_qsort
EOF

if test "$mysql_cv_type_qsort" = "void"
then
 cat >> confdefs.h <<EOF
#define QSORT_TYPE_IS_VOID 1
EOF

fi





  
  ext_builddir=ext/mysql
  ext_srcdir=$abs_srcdir/ext/mysql

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/mysql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mysql/"; ac_bdir="ext/mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_mysql.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC mysql"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC mysql"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/mysql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mysql/"; ac_bdir="ext/mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_mysql.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_mysql="$shared_objects_mysql $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/mysql.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_mysql"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/mysql.la: $ext_builddir/mysql.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/mysql.la \$(phplibdir)

$ext_builddir/mysql.la: \$(shared_objects_mysql) \$(MYSQL_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_mysql) \$(MYSQL_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_MYSQL 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/mysql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mysql/"; ac_bdir="ext/mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_mysql.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC mysql"
    else
      
  
  case ext/mysql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/mysql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/mysql/"; ac_bdir="ext/mysql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_mysql.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC mysql"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"



  for i in $PHP_MYSQL; do
    if test -r $i/include/mysql/mysql.h; then
      MYSQL_DIR=$i
      MYSQL_INC_DIR=$i/include/mysql
    elif test -r $i/include/mysql.h; then
      MYSQL_DIR=$i
      MYSQL_INC_DIR=$i/include
    fi
  done

  if test -z "$MYSQL_DIR"; then
    { echo "configure: error: Cannot find header files under $PHP_MYSQL" 1>&2; exit 1; }
  fi

  MYSQL_MODULE_TYPE=external

  for i in lib lib/mysql; do
    
  str="$MYSQL_DIR/$i/libmysqlclient.*"
  for j in `echo $str`; do
    if test -r $j; then
      MYSQL_LIB_DIR=$MYSQL_DIR/$i
      break 2
    fi
  done

  done

  if test -z "$MYSQL_LIB_DIR"; then
    { echo "configure: error: Cannot find mysqlclient library under $MYSQL_DIR" 1>&2; exit 1; }
  fi

  
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
    -L$MYSQL_LIB_DIR 
   $LDFLAGS"
  echo $ac_n "checking for mysql_close in -lmysqlclient""... $ac_c" 1>&6
echo "configure:49185: checking for mysql_close in -lmysqlclient" >&5
ac_lib_var=`echo mysqlclient'_'mysql_close | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lmysqlclient  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 49193 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char mysql_close();

int main() {
mysql_close()
; return 0; }
EOF
if { (eval echo configure:49204: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
     
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_mysqlclient
    
    if test "$PHP_ZLIB_DIR" != "no"; then
      

  if test "$ext_shared" = "yes"; then
    MYSQL_SHARED_LIBADD="-lz $MYSQL_SHARED_LIBADD"
    if test -n "$PHP_ZLIB_DIR"; then
      
  if test "$PHP_ZLIB_DIR" != "/usr/lib"; then
    
  if test -z "$PHP_ZLIB_DIR" || echo "$PHP_ZLIB_DIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ZLIB_DIR
  else
    
    ep_dir="`echo $PHP_ZLIB_DIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        MYSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $MYSQL_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$PHP_ZLIB_DIR"; then
    
  if test "$PHP_ZLIB_DIR" != "/usr/lib"; then
    
  if test -z "$PHP_ZLIB_DIR" || echo "$PHP_ZLIB_DIR" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ZLIB_DIR
  else
    
    ep_dir="`echo $PHP_ZLIB_DIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case z in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lz $LIBS" 
   ;;
  esac




  fi


      
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
        -L$PHP_ZLIB_DIR/lib -L$MYSQL_LIB_DIR 
       $LDFLAGS"
  echo $ac_n "checking for mysql_error in -lmysqlclient""... $ac_c" 1>&6
echo "configure:49332: checking for mysql_error in -lmysqlclient" >&5
ac_lib_var=`echo mysqlclient'_'mysql_error | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lmysqlclient  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 49340 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char mysql_error();

int main() {
mysql_error()
; return 0; }
EOF
if { (eval echo configure:49351: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_mysqlclient
    
        { echo "configure: error: mysql configure failed. Please check config.log for more information." 1>&2; exit 1; }
      
  
fi
  
      MYSQL_LIBS="-L$PHP_ZLIB_DIR/lib -lz"
    else
      
  
  case z in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        MYSQL_SHARED_LIBADD="-lz $MYSQL_SHARED_LIBADD" 
    else
      
  
  case z in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lz $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


      
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
        -L$MYSQL_LIB_DIR
       $LDFLAGS"
  echo $ac_n "checking for mysql_errno in -lmysqlclient""... $ac_c" 1>&6
echo "configure:49412: checking for mysql_errno in -lmysqlclient" >&5
ac_lib_var=`echo mysqlclient'_'mysql_errno | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lmysqlclient  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 49420 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char mysql_errno();

int main() {
mysql_errno()
; return 0; }
EOF
if { (eval echo configure:49431: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_mysqlclient
    
        { echo "configure: error: Try adding --with-zlib-dir=<DIR>. Please check config.log for more information." 1>&2; exit 1; }
      
  
fi
   
      MYSQL_LIBS="-lz"
    fi
  
  
fi


  

  if test "$ext_shared" = "yes"; then
    MYSQL_SHARED_LIBADD="-lmysqlclient $MYSQL_SHARED_LIBADD"
    if test -n "$MYSQL_LIB_DIR"; then
      
  if test "$MYSQL_LIB_DIR" != "/usr/lib"; then
    
  if test -z "$MYSQL_LIB_DIR" || echo "$MYSQL_LIB_DIR" | grep '^/' >/dev/null ; then
    ai_p=$MYSQL_LIB_DIR
  else
    
    ep_dir="`echo $MYSQL_LIB_DIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MYSQL_LIB_DIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        MYSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $MYSQL_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$MYSQL_LIB_DIR"; then
    
  if test "$MYSQL_LIB_DIR" != "/usr/lib"; then
    
  if test -z "$MYSQL_LIB_DIR" || echo "$MYSQL_LIB_DIR" | grep '^/' >/dev/null ; then
    ai_p=$MYSQL_LIB_DIR
  else
    
    ep_dir="`echo $MYSQL_LIB_DIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MYSQL_LIB_DIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case mysqlclient in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lmysqlclient $LIBS" 
   ;;
  esac




  fi


  MYSQL_LIBS="-L$MYSQL_LIB_DIR -lmysqlclient $MYSQL_LIBS"

  
  if test "$MYSQL_INC_DIR" != "/usr/include"; then
    
  if test -z "$MYSQL_INC_DIR" || echo "$MYSQL_INC_DIR" | grep '^/' >/dev/null ; then
    ai_p=$MYSQL_INC_DIR
  else
    
    ep_dir="`echo $MYSQL_INC_DIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MYSQL_INC_DIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  MYSQL_INCLUDE=-I$MYSQL_INC_DIR

else
  MYSQL_MODULE_TYPE=none
fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST MYSQL_SHARED_LIBADD"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST MYSQL_MODULE_TYPE"

  


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST MYSQL_LIBS"

  


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST MYSQL_INCLUDE"

  





echo $ac_n "checking for ncurses support""... $ac_c" 1>&6
echo "configure:49629: checking for ncurses support" >&5
# Check whether --with-ncurses or --without-ncurses was given.
if test "${with_ncurses+set}" = set; then
  withval="$with_ncurses"
  PHP_NCURSES=$withval
else
  
  PHP_NCURSES=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_NCURSES=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_NCURSES in
shared,*)
  PHP_NCURSES=`echo "$PHP_NCURSES"|sed 's/^shared,//'`
  ;;
shared)
  PHP_NCURSES=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_NCURSES" != "no"; then

   # --with-ncurses -> check with-path
   SEARCH_PATH="/usr/local /usr"     
   SEARCH_FOR="/include/curses.h"

   if test -r $PHP_NCURSES/; then # path given as parameter
     NCURSES_DIR=$PHP_NCURSES
   else # search default path list
     echo $ac_n "checking for ncurses files in default path""... $ac_c" 1>&6
echo "configure:49682: checking for ncurses files in default path" >&5
     for i in $SEARCH_PATH ; do
       if test -r $i/$SEARCH_FOR; then
         NCURSES_DIR=$i
         echo "$ac_t""found in $i" 1>&6
       fi
     done
   fi
  
   if test -z "$NCURSES_DIR"; then
     echo "$ac_t""not found" 1>&6
     { echo "configure: error: Please reinstall the ncurses distribution" 1>&2; exit 1; }
   fi

   # --with-ncurses -> add include path
   
  if test "$NCURSES_DIR/include" != "/usr/include"; then
    
  if test -z "$NCURSES_DIR/include" || echo "$NCURSES_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$NCURSES_DIR/include
  else
    
    ep_dir="`echo $NCURSES_DIR/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$NCURSES_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi


   # --with-ncurses -> chech for lib and symbol presence
   LIBNAME=ncurses 
   LIBSYMBOL=initscr 

   
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
     -L$NCURSES_DIR/lib -lm
    $LDFLAGS"
  echo $ac_n "checking for $LIBSYMBOL in -l$LIBNAME""... $ac_c" 1>&6
echo "configure:49739: checking for $LIBSYMBOL in -l$LIBNAME" >&5
ac_lib_var=`echo $LIBNAME'_'$LIBSYMBOL | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$LIBNAME  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 49747 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $LIBSYMBOL();

int main() {
$LIBSYMBOL()
; return 0; }
EOF
if { (eval echo configure:49758: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
     cat >> confdefs.h <<\EOF
#define HAVE_NCURSESLIB 1
EOF

	 
	 

  if test "$ext_shared" = "yes"; then
    NCURSES_SHARED_LIBADD="-l$LIBNAME $NCURSES_SHARED_LIBADD"
    if test -n "$NCURSES_DIR/lib"; then
      
  if test "$NCURSES_DIR/lib" != "/usr/lib"; then
    
  if test -z "$NCURSES_DIR/lib" || echo "$NCURSES_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$NCURSES_DIR/lib
  else
    
    ep_dir="`echo $NCURSES_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$NCURSES_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        NCURSES_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $NCURSES_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$NCURSES_DIR/lib"; then
    
  if test "$NCURSES_DIR/lib" != "/usr/lib"; then
    
  if test -z "$NCURSES_DIR/lib" || echo "$NCURSES_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$NCURSES_DIR/lib
  else
    
    ep_dir="`echo $NCURSES_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$NCURSES_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case $LIBNAME in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$LIBNAME $LIBS" 
   ;;
  esac




  fi



     
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS=" -L$NCURSES_DIR/lib -l$LIBNAME -lm
      $LDFLAGS"
  echo $ac_n "checking for new_panel in -lpanel""... $ac_c" 1>&6
echo "configure:49883: checking for new_panel in -lpanel" >&5
ac_lib_var=`echo panel'_'new_panel | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpanel  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 49891 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char new_panel();

int main() {
new_panel()
; return 0; }
EOF
if { (eval echo configure:49902: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
   	   cat >> confdefs.h <<\EOF
#define HAVE_NCURSES_PANEL 1
EOF

	   

  if test "$ext_shared" = "yes"; then
    NCURSES_SHARED_LIBADD="-lpanel $NCURSES_SHARED_LIBADD"
    if test -n "$NCURSES_DIR/lib"; then
      
  if test "$NCURSES_DIR/lib" != "/usr/lib"; then
    
  if test -z "$NCURSES_DIR/lib" || echo "$NCURSES_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$NCURSES_DIR/lib
  else
    
    ep_dir="`echo $NCURSES_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$NCURSES_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        NCURSES_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $NCURSES_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$NCURSES_DIR/lib"; then
    
  if test "$NCURSES_DIR/lib" != "/usr/lib"; then
    
  if test -z "$NCURSES_DIR/lib" || echo "$NCURSES_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$NCURSES_DIR/lib
  else
    
    ep_dir="`echo $NCURSES_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$NCURSES_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case panel in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lpanel $LIBS" 
   ;;
  esac




  fi


     
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_panel
    
     
  
fi

	

   
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_$LIBNAME
    
     { echo "configure: error: Wrong ncurses lib version or lib not found" 1>&2; exit 1; }
   
  
fi

 
   echo $ac_n "checking for color_set in -l$LIBNAME""... $ac_c" 1>&6
echo "configure:50049: checking for color_set in -l$LIBNAME" >&5
ac_lib_var=`echo $LIBNAME'_'color_set | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$LIBNAME  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 50057 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char color_set();

int main() {
color_set()
; return 0; }
EOF
if { (eval echo configure:50068: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_NCURSES_COLOR_SET 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

   echo $ac_n "checking for slk_color in -l$LIBNAME""... $ac_c" 1>&6
echo "configure:50092: checking for slk_color in -l$LIBNAME" >&5
ac_lib_var=`echo $LIBNAME'_'slk_color | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$LIBNAME  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 50100 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char slk_color();

int main() {
slk_color()
; return 0; }
EOF
if { (eval echo configure:50111: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_NCURSES_SLK_COLOR 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

   echo $ac_n "checking for asume_default_colors in -l$LIBNAME""... $ac_c" 1>&6
echo "configure:50135: checking for asume_default_colors in -l$LIBNAME" >&5
ac_lib_var=`echo $LIBNAME'_'asume_default_colors | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$LIBNAME  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 50143 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char asume_default_colors();

int main() {
asume_default_colors()
; return 0; }
EOF
if { (eval echo configure:50154: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_NCURSES_ASSUME_DEFAULT_COLORS 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

   echo $ac_n "checking for use_extended_names in -l$LIBNAME""... $ac_c" 1>&6
echo "configure:50178: checking for use_extended_names in -l$LIBNAME" >&5
ac_lib_var=`echo $LIBNAME'_'use_extended_names | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$LIBNAME  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 50186 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char use_extended_names();

int main() {
use_extended_names()
; return 0; }
EOF
if { (eval echo configure:50197: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_NCURSES_USE_EXTENDED_NAMES 1
EOF

else
  echo "$ac_t""no" 1>&6
fi


   
  ext_builddir=ext/ncurses
  ext_srcdir=$abs_srcdir/ext/ncurses

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "cli" != "cli"; then

    
  
  case ext/ncurses in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ncurses"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ncurses/"; ac_bdir="ext/ncurses/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ncurses.c ncurses_fe.c ncurses_functions.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC ncurses"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC ncurses"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/ncurses in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ncurses"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ncurses/"; ac_bdir="ext/ncurses/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in ncurses.c ncurses_fe.c ncurses_functions.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_ncurses="$shared_objects_ncurses $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/ncurses.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_ncurses"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/ncurses.la: $ext_builddir/ncurses.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/ncurses.la \$(phplibdir)

$ext_builddir/ncurses.la: \$(shared_objects_ncurses) \$(NCURSES_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_ncurses) \$(NCURSES_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_NCURSES 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "cli" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/ncurses in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ncurses"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ncurses/"; ac_bdir="ext/ncurses/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ncurses.c ncurses_fe.c ncurses_functions.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC ncurses"
    else
      
  
  case ext/ncurses in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ncurses"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ncurses/"; ac_bdir="ext/ncurses/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ncurses.c ncurses_fe.c ncurses_functions.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC ncurses"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


   
  PHP_VAR_SUBST="$PHP_VAR_SUBST NCURSES_SHARED_LIBADD"


fi




                                                                                                                                                                



echo $ac_n "checking for Oracle-OCI8 support""... $ac_c" 1>&6
echo "configure:50443: checking for Oracle-OCI8 support" >&5
# Check whether --with-oci8 or --without-oci8 was given.
if test "${with_oci8+set}" = set; then
  withval="$with_oci8"
  PHP_OCI8=$withval
else
  
  PHP_OCI8=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_OCI8=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_OCI8 in
shared,*)
  PHP_OCI8=`echo "$PHP_OCI8"|sed 's/^shared,//'`
  ;;
shared)
  PHP_OCI8=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_OCI8" != "no"; then
  echo $ac_n "checking Oracle Install-Dir""... $ac_c" 1>&6
echo "configure:50488: checking Oracle Install-Dir" >&5
  if test "$PHP_OCI8" = "yes"; then
    OCI8_DIR=$ORACLE_HOME
  else
    OCI8_DIR=$PHP_OCI8
  fi
  echo "$ac_t""$OCI8_DIR" 1>&6

  if test -d "$OCI8_DIR/rdbms/public"; then
    
  if test "$OCI8_DIR/rdbms/public" != "/usr/include"; then
    
  if test -z "$OCI8_DIR/rdbms/public" || echo "$OCI8_DIR/rdbms/public" | grep '^/' >/dev/null ; then
    ai_p=$OCI8_DIR/rdbms/public
  else
    
    ep_dir="`echo $OCI8_DIR/rdbms/public|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OCI8_DIR/rdbms/public\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    OCI8_INCLUDES="$OCI8_INCLUDES -I$OCI8_DIR/rdbms/public"
  fi
  if test -d "$OCI8_DIR/rdbms/demo"; then
    
  if test "$OCI8_DIR/rdbms/demo" != "/usr/include"; then
    
  if test -z "$OCI8_DIR/rdbms/demo" || echo "$OCI8_DIR/rdbms/demo" | grep '^/' >/dev/null ; then
    ai_p=$OCI8_DIR/rdbms/demo
  else
    
    ep_dir="`echo $OCI8_DIR/rdbms/demo|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OCI8_DIR/rdbms/demo\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    OCI8_INCLUDES="$OCI8_INCLUDES -I$OCI8_DIR/rdbms/demo"
  fi
  if test -d "$OCI8_DIR/network/public"; then
    
  if test "$OCI8_DIR/network/public" != "/usr/include"; then
    
  if test -z "$OCI8_DIR/network/public" || echo "$OCI8_DIR/network/public" | grep '^/' >/dev/null ; then
    ai_p=$OCI8_DIR/network/public
  else
    
    ep_dir="`echo $OCI8_DIR/network/public|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OCI8_DIR/network/public\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    OCI8_INCLUDES="$OCI8_INCLUDES -I$OCI8_DIR/network/public"
  fi
  if test -d "$OCI8_DIR/plsql/public"; then
    
  if test "$OCI8_DIR/plsql/public" != "/usr/include"; then
    
  if test -z "$OCI8_DIR/plsql/public" || echo "$OCI8_DIR/plsql/public" | grep '^/' >/dev/null ; then
    ai_p=$OCI8_DIR/plsql/public
  else
    
    ep_dir="`echo $OCI8_DIR/plsql/public|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OCI8_DIR/plsql/public\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    OCI8_INCLUDES="$OCI8_INCLUDES -I$OCI8_DIR/plsql/public"
  fi

  if test -f "$OCI8_DIR/lib/sysliblist"; then
    
  for ac_i in `cat $OCI8_DIR/lib/sysliblist`; do
    case $ac_i in
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        OCI8_SYSLIB="$OCI8_SYSLIB -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        OCI8_SYSLIB="$ld_runpath_switch$ai_p -L$ai_p $OCI8_SYSLIB"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  elif test -f "$OCI8_DIR/rdbms/lib/sysliblist"; then
    
  for ac_i in `cat $OCI8_DIR/rdbms/lib/sysliblist`; do
    case $ac_i in
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        OCI8_SYSLIB="$OCI8_SYSLIB -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        OCI8_SYSLIB="$ld_runpath_switch$ai_p -L$ai_p $OCI8_SYSLIB"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  fi

  
  echo $ac_n "checking Oracle version""... $ac_c" 1>&6
echo "configure:50783: checking Oracle version" >&5
  if test -s "$OCI8_DIR/orainst/unix.rgs"; then
    OCI8_VERSION=`grep '"ocommon"' $OCI8_DIR/orainst/unix.rgs | sed 's/  */:/g' | cut -d: -f 6 | cut -c 2-4`
    test -z "$OCI8_VERSION" && OCI8_VERSION=7.3
  elif test -f $OCI8_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME.9.0; then
    OCI8_VERSION=9.0
  elif test -f $OCI8_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME.8.0; then
    OCI8_VERSION=8.1
  elif test -f $OCI8_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME.1.0; then
    OCI8_VERSION=8.0
  elif test -f $OCI8_DIR/lib/libclntsh.a; then 
    if test -f $OCI8_DIR/lib/libcore4.a; then 
      OCI8_VERSION=8.0
    else
      OCI8_VERSION=8.1
    fi
  else
    { echo "configure: error: Oracle-OCI8 needed libraries not found" 1>&2; exit 1; }
  fi
  echo "$ac_t""$OCI8_VERSION" 1>&6

  case $OCI8_VERSION in
    8.0)
      

  if test "$ext_shared" = "yes"; then
    OCI8_SHARED_LIBADD="-lnlsrtl3 $OCI8_SHARED_LIBADD"
    if test -n """"; then
      
  if test """" != "/usr/lib"; then
    
  if test -z """" || echo """" | grep '^/' >/dev/null ; then
    ai_p=""
  else
    
    ep_dir="`echo ""|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"""\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        OCI8_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $OCI8_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n """"; then
    
  if test """" != "/usr/lib"; then
    
  if test -z """" || echo """" | grep '^/' >/dev/null ; then
    ai_p=""
  else
    
    ep_dir="`echo ""|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"""\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case nlsrtl3 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lnlsrtl3 $LIBS" 
   ;;
  esac




  fi


      

  if test "$ext_shared" = "yes"; then
    OCI8_SHARED_LIBADD="-lcore4 $OCI8_SHARED_LIBADD"
    if test -n """"; then
      
  if test """" != "/usr/lib"; then
    
  if test -z """" || echo """" | grep '^/' >/dev/null ; then
    ai_p=""
  else
    
    ep_dir="`echo ""|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"""\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        OCI8_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $OCI8_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n """"; then
    
  if test """" != "/usr/lib"; then
    
  if test -z """" || echo """" | grep '^/' >/dev/null ; then
    ai_p=""
  else
    
    ep_dir="`echo ""|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"""\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case core4 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lcore4 $LIBS" 
   ;;
  esac




  fi


      

  if test "$ext_shared" = "yes"; then
    OCI8_SHARED_LIBADD="-lpsa $OCI8_SHARED_LIBADD"
    if test -n """"; then
      
  if test """" != "/usr/lib"; then
    
  if test -z """" || echo """" | grep '^/' >/dev/null ; then
    ai_p=""
  else
    
    ep_dir="`echo ""|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"""\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        OCI8_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $OCI8_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n """"; then
    
  if test """" != "/usr/lib"; then
    
  if test -z """" || echo """" | grep '^/' >/dev/null ; then
    ai_p=""
  else
    
    ep_dir="`echo ""|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"""\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case psa in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lpsa $LIBS" 
   ;;
  esac




  fi


      

  if test "$ext_shared" = "yes"; then
    OCI8_SHARED_LIBADD="-lclntsh $OCI8_SHARED_LIBADD"
    if test -n "$OCI8_DIR/lib"; then
      
  if test "$OCI8_DIR/lib" != "/usr/lib"; then
    
  if test -z "$OCI8_DIR/lib" || echo "$OCI8_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$OCI8_DIR/lib
  else
    
    ep_dir="`echo $OCI8_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OCI8_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        OCI8_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $OCI8_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$OCI8_DIR/lib"; then
    
  if test "$OCI8_DIR/lib" != "/usr/lib"; then
    
  if test -z "$OCI8_DIR/lib" || echo "$OCI8_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$OCI8_DIR/lib
  else
    
    ep_dir="`echo $OCI8_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OCI8_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case clntsh in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lclntsh $LIBS" 
   ;;
  esac




  fi


      ;;

    8.1)
      
  
  case clntsh in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        OCI8_SHARED_LIBADD="$OCI8_SHARED_LIBADD -lclntsh" 
    else
      
  
  case clntsh in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -lclntsh" 
   ;;
  esac


    fi
   ;;
  esac


      
  if test "$OCI8_DIR/lib" != "/usr/lib"; then
    
  if test -z "$OCI8_DIR/lib" || echo "$OCI8_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$OCI8_DIR/lib
  else
    
    ep_dir="`echo $OCI8_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OCI8_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        OCI8_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $OCI8_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi


                        
  old_CPPFLAGS=$CPPFLAGS
  CPPFLAGS=$OCI8_INCLUDES
  cat > conftest.$ac_ext <<EOF
#line 51258 "configure"
#include "confdefs.h"

#include <oci.h>
#if defined(OCI_ATTR_STATEMENT)
    yes
#endif
  
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  
    CPPFLAGS=$old_CPPFLAGS
    cat >> confdefs.h <<\EOF
#define HAVE_OCI8_ATTR_STATEMENT 1
EOF

  
else
  rm -rf conftest*
  
    CPPFLAGS=$old_CPPFLAGS
  
fi
rm -f conftest*


      ;;

    9.0)
      
  
  case clntsh in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        OCI8_SHARED_LIBADD="$OCI8_SHARED_LIBADD -lclntsh" 
    else
      
  
  case clntsh in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -lclntsh" 
   ;;
  esac


    fi
   ;;
  esac


      
  if test "$OCI8_DIR/lib" != "/usr/lib"; then
    
  if test -z "$OCI8_DIR/lib" || echo "$OCI8_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$OCI8_DIR/lib
  else
    
    ep_dir="`echo $OCI8_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OCI8_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        OCI8_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $OCI8_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

      cat >> confdefs.h <<\EOF
#define HAVE_OCI8_ATTR_STATEMENT 1
EOF

      cat >> confdefs.h <<\EOF
#define HAVE_OCI8_SHARED_MODE 1
EOF


            
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
        -L$OCI8_DIR/lib $OCI8_SHARED_LIBADD
       $LDFLAGS"
  echo $ac_n "checking for OCIEnvNlsCreate in -lclntsh""... $ac_c" 1>&6
echo "configure:51364: checking for OCIEnvNlsCreate in -lclntsh" >&5
ac_lib_var=`echo clntsh'_'OCIEnvNlsCreate | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lclntsh  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 51372 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char OCIEnvNlsCreate();

int main() {
OCIEnvNlsCreate()
; return 0; }
EOF
if { (eval echo configure:51383: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
        
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
          -L$OCI8_DIR/lib $OCI8_SHARED_LIBADD
         $LDFLAGS"
  echo $ac_n "checking for OCINlsCharSetNameToId in -lclntsh""... $ac_c" 1>&6
echo "configure:51407: checking for OCINlsCharSetNameToId in -lclntsh" >&5
ac_lib_var=`echo clntsh'_'OCINlsCharSetNameToId | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lclntsh  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 51415 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char OCINlsCharSetNameToId();

int main() {
OCINlsCharSetNameToId()
; return 0; }
EOF
if { (eval echo configure:51426: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
          cat >> confdefs.h <<\EOF
#define HAVE_OCI_9_2 1
EOF

          OCI8_VERSION=9.2
        
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_clntsh
    
  
fi

      
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_clntsh
    
  
fi

      ;;

    *)
      { echo "configure: error: Unsupported Oracle version!" 1>&2; exit 1; }
      ;;
  esac

        
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
    -L$OCI8_DIR/lib $OCI8_SHARED_LIBADD
   $LDFLAGS"
  echo $ac_n "checking for OCILobIsTemporary in -lclntsh""... $ac_c" 1>&6
echo "configure:51484: checking for OCILobIsTemporary in -lclntsh" >&5
ac_lib_var=`echo clntsh'_'OCILobIsTemporary | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lclntsh  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 51492 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char OCILobIsTemporary();

int main() {
OCILobIsTemporary()
; return 0; }
EOF
if { (eval echo configure:51503: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
    cat >> confdefs.h <<\EOF
#define HAVE_OCI8_TEMP_LOB 1
EOF

  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_clntsh
    
    
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
      -L$OCI8_DIR/lib $OCI8_SHARED_LIBADD
     $LDFLAGS"
  echo $ac_n "checking for OCILobIsTemporary in -locijdbc8""... $ac_c" 1>&6
echo "configure:51539: checking for OCILobIsTemporary in -locijdbc8" >&5
ac_lib_var=`echo ocijdbc8'_'OCILobIsTemporary | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-locijdbc8  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 51547 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char OCILobIsTemporary();

int main() {
OCILobIsTemporary()
; return 0; }
EOF
if { (eval echo configure:51558: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
      
  
  case ocijdbc8 in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        OCI8_SHARED_LIBADD="$OCI8_SHARED_LIBADD -locijdbc8" 
    else
      
  
  case ocijdbc8 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -locijdbc8" 
   ;;
  esac


    fi
   ;;
  esac


      cat >> confdefs.h <<\EOF
#define HAVE_OCI8_TEMP_LOB 1
EOF

    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_ocijdbc8
    
  
fi

  
  
fi


  
  ext_builddir=ext/oci8
  ext_srcdir=$abs_srcdir/ext/oci8

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/oci8 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in oci8.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC oci8"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC oci8"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/oci8 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in oci8.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_oci8="$shared_objects_oci8 $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/oci8.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_oci8"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/oci8.la: $ext_builddir/oci8.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/oci8.la \$(phplibdir)

$ext_builddir/oci8.la: \$(shared_objects_oci8) \$(OCI8_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_oci8) \$(OCI8_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_OCI8 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/oci8 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in oci8.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC oci8"
    else
      
  
  case ext/oci8 in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/oci8"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/oci8/"; ac_bdir="ext/oci8/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in oci8.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC oci8"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


  cat >> confdefs.h <<\EOF
#define HAVE_OCI8 1
EOF


  
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST OCI8_SHARED_LIBADD"

  

  
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST OCI8_DIR"

  

  
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST OCI8_VERSION"

  

fi









if test -z "$ODBC_TYPE"; then
echo $ac_n "checking for Adabas support""... $ac_c" 1>&6
echo "configure:51862: checking for Adabas support" >&5
# Check whether --with-adabas or --without-adabas was given.
if test "${with_adabas+set}" = set; then
  withval="$with_adabas"
  
  
  
ext_output="yes, shared"
ext_shared=yes
case $withval in
shared,*)
  withval=`echo "$withval"|sed 's/^shared,//'`
  ;;
shared)
  withval=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



  shared=$ext_shared
  unset ext_shared ext_output

  if test "$withval" = "yes"; then
    withval=/usr/local
  fi
  if test "$withval" != "no"; then
    
  if test "$withval/incl" != "/usr/include"; then
    
  if test -z "$withval/incl" || echo "$withval/incl" | grep '^/' >/dev/null ; then
    ai_p=$withval/incl
  else
    
    ep_dir="`echo $withval/incl|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$withval/incl\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    
  if test "$withval/lib" != "/usr/lib"; then
    
  if test -z "$withval/lib" || echo "$withval/lib" | grep '^/' >/dev/null ; then
    ai_p=$withval/lib
  else
    
    ep_dir="`echo $withval/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$withval/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

    ODBC_OBJS="$withval/lib/odbclib.a"
    ODBC_LIB="$abs_builddir/ext/odbc/libodbc_adabas.a"
    $srcdir/build/shtool mkdir -f -p ext/odbc
    rm -f "$ODBC_LIB"
    cp "$ODBC_OBJS" "$ODBC_LIB"
    
  
  case sqlptc in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsqlptc $LIBS" 
   ;;
  esac


    
  
  case sqlrte in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsqlrte $LIBS" 
   ;;
  esac


    

  if test -n "$abs_builddir/ext/odbc"; then
    
  if test "$abs_builddir/ext/odbc" != "/usr/lib"; then
    
  if test -z "$abs_builddir/ext/odbc" || echo "$abs_builddir/ext/odbc" | grep '^/' >/dev/null ; then
    ai_p=$abs_builddir/ext/odbc
  else
    
    ep_dir="`echo $abs_builddir/ext/odbc|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$abs_builddir/ext/odbc\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case odbc_adabas in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lodbc_adabas $LIBS" 
   ;;
  esac




    ODBC_TYPE=adabas
    cat >> confdefs.h <<\EOF
#define HAVE_ADABAS 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

else
  
  echo "$ac_t""no" 1>&6

fi

fi

if test -z "$ODBC_TYPE"; then
echo $ac_n "checking for SAP DB support""... $ac_c" 1>&6
echo "configure:52055: checking for SAP DB support" >&5
# Check whether --with-sapdb or --without-sapdb was given.
if test "${with_sapdb+set}" = set; then
  withval="$with_sapdb"
  
  
  
ext_output="yes, shared"
ext_shared=yes
case $withval in
shared,*)
  withval=`echo "$withval"|sed 's/^shared,//'`
  ;;
shared)
  withval=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



  shared=$ext_shared
  unset ext_shared ext_output

  if test "$withval" = "yes"; then
    withval=/usr/local
  fi
  if test "$withval" != "no"; then
    
  if test "$withval/incl" != "/usr/include"; then
    
  if test -z "$withval/incl" || echo "$withval/incl" | grep '^/' >/dev/null ; then
    ai_p=$withval/incl
  else
    
    ep_dir="`echo $withval/incl|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$withval/incl\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    
  if test "$withval/lib" != "/usr/lib"; then
    
  if test -z "$withval/lib" || echo "$withval/lib" | grep '^/' >/dev/null ; then
    ai_p=$withval/lib
  else
    
    ep_dir="`echo $withval/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$withval/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

    
  
  case sqlod in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsqlod $LIBS" 
   ;;
  esac


    ODBC_TYPE=sapdb
    cat >> confdefs.h <<\EOF
#define HAVE_SAPDB 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

else
  
  echo "$ac_t""no" 1>&6

fi

fi


if test -z "$ODBC_TYPE"; then
echo $ac_n "checking for Solid support""... $ac_c" 1>&6
echo "configure:52185: checking for Solid support" >&5
# Check whether --with-solid or --without-solid was given.
if test "${with_solid+set}" = set; then
  withval="$with_solid"
  
  
  
ext_output="yes, shared"
ext_shared=yes
case $withval in
shared,*)
  withval=`echo "$withval"|sed 's/^shared,//'`
  ;;
shared)
  withval=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



  shared=$ext_shared
  unset ext_shared ext_output

  if test "$withval" = "yes"; then
    withval=/usr/local/solid
  fi
  if test "$withval" != "no"; then
    ODBC_INCDIR=$withval/include
    ODBC_LIBDIR=$withval/lib
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_TYPE=solid
    if test -f $ODBC_LIBDIR/soc*35.a; then
      cat >> confdefs.h <<\EOF
#define HAVE_SOLID_35 1
EOF

    elif test -f $ODBC_LIBDIR/scl*30.a; then
      cat >> confdefs.h <<\EOF
#define HAVE_SOLID_30 1
EOF

    elif test -f $ODBC_LIBDIR/scl*23.a; then
      cat >> confdefs.h <<\EOF
#define HAVE_SOLID 1
EOF

    fi
    echo "$ac_t""yes" 1>&6
    
  echo $ac_n "checking Solid library file""... $ac_c" 1>&6
echo "configure:52243: checking Solid library file" >&5  
  ac_solid_uname_r=`uname -r 2>/dev/null`
  ac_solid_uname_s=`uname -s 2>/dev/null`
  case $ac_solid_uname_s in
    AIX) ac_solid_os=a3x;;   # a4x for AIX4/ Solid 2.3/3.0 only
    HP-UX) ac_solid_os=h9x;; # h1x for hpux11, h0x for hpux10
    IRIX) ac_solid_os=irx;;  # Solid 2.3(?)/ 3.0 only
    Linux) 
      if ldd -v /bin/sh | grep GLIBC > /dev/null; then
        cat >> confdefs.h <<\EOF
#define SS_LINUX 1
EOF

        ac_solid_os=l2x
	  else
        cat >> confdefs.h <<\EOF
#define SS_LINUX 1
EOF

        ac_solid_os=lux
      fi;; 
    SunOS) 
      ac_solid_os=ssx;; # should we deal with SunOS 4?
    FreeBSD) 
      if test `expr $ac_solid_uname_r : '\(.\)'` -gt "2"; then
        cat >> confdefs.h <<\EOF
#define SS_FBX 1
EOF

        ac_solid_os=fex
      else 
        cat >> confdefs.h <<\EOF
#define SS_FBX 1
EOF

        ac_solid_os=fbx
      fi;;
  esac

  if test -f $ODBC_LIBDIR/soc${ac_solid_os}35.a; then
    ac_solid_version=35
    ac_solid_prefix=soc
  elif test -f $ODBC_LIBDIR/scl${ac_solid_os}30.a; then
    ac_solid_version=30
    ac_solid_prefix=scl
  elif test -f $ODBC_LIBDIR/scl${ac_solid_os}23.a; then
    ac_solid_version=23
    ac_solid_prefix=scl
  fi

#
# Check for the library files, and setup the ODBC_LIBS path...
#
if test ! -f $ODBC_LIBDIR/lib${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.so -a \
	! -f $ODBC_LIBDIR/lib${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.a; then
  #
  # we have an error and should bail out, as we can't find the libs!
  #
  echo ""
  echo "*********************************************************************"
  echo "* Unable to locate $ODBC_LIBDIR/lib${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.so or $ODBC_LIBDIR/lib${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.a"
  echo "* Please correct this by creating the following links and reconfiguring:"
  echo "* $ODBC_LIBDIR/lib${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.a -> $ODBC_LIBDIR/lib${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.a"
  echo "* $ODBC_LIBDIR/${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.so -> $ODBC_LIBDIR/lib${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.so"
  echo "*********************************************************************"
else
  ODBC_LFLAGS=-L$ODBC_LIBDIR
  ODBC_LIBS=-l${ac_solid_prefix}${ac_solid_os}${ac_solid_version}
fi

  echo "$ac_t""`echo $ODBC_LIBS | sed -e 's!.*/!!'`" 1>&6

  else
    echo "$ac_t""no" 1>&6
  fi

else
  
  echo "$ac_t""no" 1>&6

fi

fi

if test -z "$ODBC_TYPE"; then
echo $ac_n "checking for IBM DB2 support""... $ac_c" 1>&6
echo "configure:52329: checking for IBM DB2 support" >&5
# Check whether --with-ibm-db2 or --without-ibm-db2 was given.
if test "${with_ibm_db2+set}" = set; then
  withval="$with_ibm_db2"
  
  
  
ext_output="yes, shared"
ext_shared=yes
case $withval in
shared,*)
  withval=`echo "$withval"|sed 's/^shared,//'`
  ;;
shared)
  withval=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



  shared=$ext_shared
  unset ext_shared ext_output

  if test "$withval" != "no"; then
    if test "$withval" = "yes"; then
      ODBC_INCDIR=/home/db2inst1/sqllib/include
      ODBC_LIBDIR=/home/db2inst1/sqllib/lib
    else
      ODBC_INCDIR=$withval/include
      ODBC_LIBDIR=$withval/lib
    fi
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_LFLAGS=-L$ODBC_LIBDIR
    ODBC_TYPE=db2
    ODBC_LIBS=-ldb2
    cat >> confdefs.h <<\EOF
#define HAVE_IBMDB2 1
EOF


    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

else
  
  echo "$ac_t""no" 1>&6

fi

fi

if test -z "$ODBC_TYPE"; then
echo $ac_n "checking for Empress support""... $ac_c" 1>&6
echo "configure:52392: checking for Empress support" >&5
# Check whether --with-empress or --without-empress was given.
if test "${with_empress+set}" = set; then
  withval="$with_empress"
  
  
  
ext_output="yes, shared"
ext_shared=yes
case $withval in
shared,*)
  withval=`echo "$withval"|sed 's/^shared,//'`
  ;;
shared)
  withval=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



  shared=$ext_shared
  unset ext_shared ext_output

  if test "$withval" != "no"; then
    if test "$withval" = "yes"; then
      ODBC_INCDIR=$EMPRESSPATH/include/odbc
      ODBC_LIBDIR=$EMPRESSPATH/shlib
    else
      ODBC_INCDIR=$withval/include/odbc
      ODBC_LIBDIR=$withval/shlib
    fi
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_LFLAGS=-L$ODBC_LIBDIR
    ODBC_TYPE=empress
    cat >> confdefs.h <<\EOF
#define HAVE_EMPRESS 1
EOF

    echo "$ac_t""yes" 1>&6
    
  echo $ac_n "checking Empress library file""... $ac_c" 1>&6
echo "configure:52441: checking Empress library file" >&5
  ODBC_LIBS=`echo $ODBC_LIBDIR/libempodbccl.so | cut -d' ' -f1`
  if test ! -f $ODBC_LIBS; then
    ODBC_LIBS=`echo $ODBC_LIBDIR/libempodbccl.so | cut -d' ' -f1`
  fi
  echo "$ac_t""`echo $ODBC_LIBS | sed -e 's!.*/!!'`" 1>&6

  else
    echo "$ac_t""no" 1>&6
  fi

else
  
  echo "$ac_t""no" 1>&6

fi

fi

if test -z "$ODBC_TYPE"; then
echo $ac_n "checking for Empress local access support""... $ac_c" 1>&6
echo "configure:52462: checking for Empress local access support" >&5
# Check whether --with-empress-bcs or --without-empress-bcs was given.
if test "${with_empress_bcs+set}" = set; then
  withval="$with_empress_bcs"
  
  
  
ext_output="yes, shared"
ext_shared=yes
case $withval in
shared,*)
  withval=`echo "$withval"|sed 's/^shared,//'`
  ;;
shared)
  withval=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



  shared=$ext_shared
  unset ext_shared ext_output

  if test "$withval" != "no"; then
    if test "$withval" = "yes"; then
      ODBC_INCDIR=$EMPRESSPATH/include/odbc
      ODBC_LIBDIR=$EMPRESSPATH/shlib
    else
      ODBC_INCDIR=$withval/include/odbc
      ODBC_LIBDIR=$withval/shlib
    fi
    CC="empocc -bcs";export CC;
    LD="empocc -bcs";export LD;
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_LFLAGS=-L$ODBC_LIBDIR
    LIST=`empocc -listlines -bcs -o a a.c`

    NEWLIST=
    for I in $LIST
    do
        case $I in
          $EMPRESSPATH/odbccl/lib/* | \
          $EMPRESSPATH/rdbms/lib/* | \
          $EMPRESSPATH/common/lib/*)
                NEWLIST="$NEWLIST $I"
                ;;
        esac
    done
    ODBC_LIBS="-lempphpbcs -lms -lmscfg -lbasic -lbasic_os -lnlscstab -lnlsmsgtab -lm -ldl -lcrypt"
    ODBC_TYPE=empress
    cat >> confdefs.h <<\EOF
#define HAVE_EMPRESS 1
EOF

    echo "$ac_t""yes" 1>&6
    
  echo $ac_n "checking Empress local access library file""... $ac_c" 1>&6
echo "configure:52527: checking Empress local access library file" >&5
  ODBCBCS_LIBS=`echo $ODBC_LIBDIR/libempodbcbcs.a | cut -d' ' -f1`
  if test ! -f $ODBCBCS_LIBS; then
    ODBCBCS_LIBS=`echo $ODBC_LIBDIR/libempodbcbcs.a | cut -d' ' -f1`
  fi
  echo "$ac_t""`echo $ODBCBCS_LIBS | sed -e 's!.*/!!'`" 1>&6

  else
    echo "$ac_t""no" 1>&6
  fi

else
  
  echo "$ac_t""no" 1>&6

fi

fi

if test -z "$ODBC_TYPE"; then
echo $ac_n "checking for Birdstep support""... $ac_c" 1>&6
echo "configure:52548: checking for Birdstep support" >&5
# Check whether --with-birdstep or --without-birdstep was given.
if test "${with_birdstep+set}" = set; then
  withval="$with_birdstep"
  
  
  
ext_output="yes, shared"
ext_shared=yes
case $withval in
shared,*)
  withval=`echo "$withval"|sed 's/^shared,//'`
  ;;
shared)
  withval=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



  shared=$ext_shared
  unset ext_shared ext_output


  if test "$withval" != "no"; then
    if test "$withval" = "yes"; then
        ODBC_INCDIR=/usr/local/birdstep/include
        ODBC_LIBDIR=/usr/local/birdstep/lib
    else
        ODBC_INCDIR=$withval/include
        ODBC_LIBDIR=$withval/lib
    fi
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_TYPE=birdstep
    ODBC_LFLAGS=-L$ODBC_LIBDIR
    ODBC_LIBS="-lCadm -lCdict -lCenc -lCrdm -lCrpc -lCrdbc -lCrm -lCuapi -lutil"
    cat >> confdefs.h <<\EOF
#define HAVE_BIRDSTEP 1
EOF


    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

else
  
  echo "$ac_t""no" 1>&6

fi

fi

if test -z "$ODBC_TYPE"; then
echo $ac_n "checking for a custom ODBC support""... $ac_c" 1>&6
echo "configure:52612: checking for a custom ODBC support" >&5
# Check whether --with-custom-odbc or --without-custom-odbc was given.
if test "${with_custom_odbc+set}" = set; then
  withval="$with_custom_odbc"
  
  if test "$withval" = "yes"; then
    withval=/usr/local
  fi
  if test "$withval" != "no"; then
    ODBC_INCDIR=$withval/include
    ODBC_LIBDIR=$withval/lib
    ODBC_LFLAGS=-L$ODBC_LIBDIR
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_LIBS=$CUSTOM_ODBC_LIBS
    ODBC_TYPE=custom
    cat >> confdefs.h <<\EOF
#define HAVE_CODBC 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

else
  
  echo "$ac_t""no" 1>&6

fi

fi

if test -z "$ODBC_TYPE"; then
echo $ac_n "checking for iODBC support""... $ac_c" 1>&6
echo "configure:52646: checking for iODBC support" >&5
# Check whether --with-iodbc or --without-iodbc was given.
if test "${with_iodbc+set}" = set; then
  withval="$with_iodbc"
  
  
  
ext_output="yes, shared"
ext_shared=yes
case $withval in
shared,*)
  withval=`echo "$withval"|sed 's/^shared,//'`
  ;;
shared)
  withval=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



  shared=$ext_shared
  unset ext_shared ext_output

  if test "$withval" = "yes"; then
    withval=/usr/local
  fi
  if test "$withval" != "no"; then
    

  if test -n "$withval/lib"; then
    
  if test "$withval/lib" != "/usr/lib"; then
    
  if test -z "$withval/lib" || echo "$withval/lib" | grep '^/' >/dev/null ; then
    ai_p=$withval/lib
  else
    
    ep_dir="`echo $withval/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$withval/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case iodbc in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-liodbc $LIBS" 
   ;;
  esac




    
  if test "$withval/include" != "/usr/include"; then
    
  if test -z "$withval/include" || echo "$withval/include" | grep '^/' >/dev/null ; then
    ai_p=$withval/include
  else
    
    ep_dir="`echo $withval/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$withval/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test "1"; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    ODBC_TYPE=iodbc
    ODBC_INCLUDE=-I$withval/include
    ODBC_LFLAGS=-L$withval/lib
    ODBC_LIBS=-liodbc
    cat >> confdefs.h <<\EOF
#define HAVE_IODBC 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

else
  
  echo "$ac_t""no" 1>&6

fi

fi

if test -z "$ODBC_TYPE"; then
echo $ac_n "checking for Easysoft ODBC-ODBC Bridge support""... $ac_c" 1>&6
echo "configure:52784: checking for Easysoft ODBC-ODBC Bridge support" >&5
# Check whether --with-esoob or --without-esoob was given.
if test "${with_esoob+set}" = set; then
  withval="$with_esoob"
  
  
  
ext_output="yes, shared"
ext_shared=yes
case $withval in
shared,*)
  withval=`echo "$withval"|sed 's/^shared,//'`
  ;;
shared)
  withval=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



  shared=$ext_shared
  unset ext_shared ext_output

  if test "$withval" = "yes"; then
    withval=/usr/local/easysoft/oob/client
  fi
  if test "$withval" != "no"; then
    ODBC_INCDIR=$withval/include
    ODBC_LIBDIR=$withval/lib
    ODBC_LFLAGS=-L$ODBC_LIBDIR
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_LIBS=-lesoobclient
    ODBC_TYPE=ESOOB
    cat >> confdefs.h <<\EOF
#define HAVE_ESOOB 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

else
  
  echo "$ac_t""no" 1>&6

fi

fi

if test -z "$ODBC_TYPE"; then
echo $ac_n "checking for unixODBC support""... $ac_c" 1>&6
echo "configure:52844: checking for unixODBC support" >&5
# Check whether --with-unixODBC or --without-unixODBC was given.
if test "${with_unixODBC+set}" = set; then
  withval="$with_unixODBC"
  
  
  
ext_output="yes, shared"
ext_shared=yes
case $withval in
shared,*)
  withval=`echo "$withval"|sed 's/^shared,//'`
  ;;
shared)
  withval=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



  shared=$ext_shared
  unset ext_shared ext_output

  if test "$withval" = "yes"; then
    withval=/usr/local
  fi
  if test "$withval" != "no"; then
    ODBC_INCDIR=$withval/include
    ODBC_LIBDIR=$withval/lib
    ODBC_LFLAGS=-L$ODBC_LIBDIR
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_LIBS=-lodbc
    ODBC_TYPE=unixODBC
    cat >> confdefs.h <<\EOF
#define HAVE_UNIXODBC 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

else
  
  echo "$ac_t""no" 1>&6

fi

fi

if test -z "$ODBC_TYPE"; then
echo $ac_n "checking for OpenLink ODBC support""... $ac_c" 1>&6
echo "configure:52904: checking for OpenLink ODBC support" >&5
# Check whether --with-openlink or --without-openlink was given.
if test "${with_openlink+set}" = set; then
  withval="$with_openlink"
  
  
  
ext_output="yes, shared"
ext_shared=yes
case $withval in
shared,*)
  withval=`echo "$withval"|sed 's/^shared,//'`
  ;;
shared)
  withval=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



  shared=$ext_shared
  unset ext_shared ext_output

  if test "$withval" = "yes"; then
    withval=/usr/local
  fi
  if test "$withval" != "no"; then
    

  if test -n "$withval/lib"; then
    
  if test "$withval/lib" != "/usr/lib"; then
    
  if test -z "$withval/lib" || echo "$withval/lib" | grep '^/' >/dev/null ; then
    ai_p=$withval/lib
  else
    
    ep_dir="`echo $withval/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$withval/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case iodbc in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-liodbc $LIBS" 
   ;;
  esac




    
  if test "$withval/include" != "/usr/include"; then
    
  if test -z "$withval/include" || echo "$withval/include" | grep '^/' >/dev/null ; then
    ai_p=$withval/include
  else
    
    ep_dir="`echo $withval/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$withval/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test "1"; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    ODBC_TYPE=iodbc
    ODBC_INCLUDE=-I$withval/include
    ODBC_LFLAGS=-L$withval/lib
    ODBC_LIBS=-liodbc
    cat >> confdefs.h <<\EOF
#define HAVE_IODBC 1
EOF

    echo "$ac_t""yes" 1>&6
    echo "****************************************************************"
    echo "  --with-openlink will not be valid in future releases.  Please "
    echo " update your configure script to use --with-iodbc instead.      "
    echo "****************************************************************"
  else
    echo "$ac_t""no" 1>&6
  fi

else
  
  echo "$ac_t""no" 1>&6

fi

fi

if test -z "$ODBC_TYPE"; then
echo $ac_n "checking for DBMaker support""... $ac_c" 1>&6
echo "configure:53046: checking for DBMaker support" >&5
# Check whether --with-dbmaker or --without-dbmaker was given.
if test "${with_dbmaker+set}" = set; then
  withval="$with_dbmaker"
  
  
  
ext_output="yes, shared"
ext_shared=yes
case $withval in
shared,*)
  withval=`echo "$withval"|sed 's/^shared,//'`
  ;;
shared)
  withval=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



  shared=$ext_shared
  unset ext_shared ext_output

  if test "$withval" = "yes"; then
    # find dbmaker's home directory
    DBMAKER_HOME=`grep "^dbmaker:" /etc/passwd | awk -F: '{print $6}'`

    # check DBMaker version (from 5.0 to 2.0)
    DBMAKER_VERSION=5.0

    while test test ! -d $DBMAKER_HOME/$DBMAKER_VERSION -a \
                 "$DBMAKER_VERSION" != "2.9"; do
        DM_VER=`echo $DBMAKER_VERSION | sed -e 's/\.//' | awk '{ print $1-1;}'`
        MAJOR_V=`echo $DM_VER | awk '{ print $1/10; }' \
                 | awk  -F. '{ print $1; }'`
        MINOR_V=`echo $DM_VER | awk '{ print $1%10; }'`
        DBMAKER_VERSION=$MAJOR_V.$MINOR_V
    done

    if test "$DBMAKER_VERSION" = "2.9"; then
        withval=$DBMAKER_HOME
    else
        DBMAKER_PATH=$DBMAKER_HOME/$DBMAKER_VERSION
    fi

    withval=$DBMAKER_PATH
  fi

  if test "$withval" != "no"; then
    ODBC_INCDIR=$withval/include
    ODBC_LIBDIR=$withval/lib
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_LFLAGS=-L$ODBC_LIBDIR
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_LIBS="-ldmapic -lc"
    ODBC_TYPE=dbmaker

    cat >> confdefs.h <<\EOF
#define HAVE_DBMAKER 1
EOF


    if test "$shared" = "yes"; then
        echo "$ac_t""yes (shared)" 1>&6
        ODBC_LIBS="-ldmapic -lc -lm"
        ODBC_SHARED="odbc.la"
    else
        echo "$ac_t""yes (static)" 1>&6
        

  if test -n "$ODBC_LIBDIR"; then
    
  if test "$ODBC_LIBDIR" != "/usr/lib"; then
    
  if test -z "$ODBC_LIBDIR" || echo "$ODBC_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$ODBC_LIBDIR
  else
    
    ep_dir="`echo $ODBC_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ODBC_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case dmapic in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-ldmapic $LIBS" 
   ;;
  esac




        
  if test "$ODBC_INCDIR" != "/usr/include"; then
    
  if test -z "$ODBC_INCDIR" || echo "$ODBC_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$ODBC_INCDIR
  else
    
    ep_dir="`echo $ODBC_INCDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ODBC_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

        ODBC_STATIC="libphpext_odbc.la"
    fi

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

else
  
  echo "$ac_t""no" 1>&6

fi

fi

if test -n "$ODBC_TYPE"; then
  if test "$ODBC_TYPE" != "dbmaker"; then
    ext_shared=$shared
    
  for ac_i in $ODBC_LFLAGS $ODBC_LIBS; do
    case $ac_i in
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        ODBC_SHARED_LIBADD="$ODBC_SHARED_LIBADD -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ODBC_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ODBC_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

    cat >> confdefs.h <<\EOF
#define HAVE_SQLDATASOURCES 1
EOF

  fi

  cat >> confdefs.h <<\EOF
#define HAVE_UODBC 1
EOF

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_SHARED_LIBADD"

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_INCDIR"

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_LIBDIR"

  
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_INCLUDE"

  

  
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_LIBS"

  

  
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_LFLAGS"

  

  
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_TYPE"

  


  
  ext_builddir=ext/odbc
  ext_srcdir=$abs_srcdir/ext/odbc

  ac_extra=`echo "$ODBC_INCLUDE"|sed s#@ext_srcdir@#$ext_srcdir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/odbc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/odbc/"; ac_bdir="ext/odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_odbc.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC odbc"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC odbc"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/odbc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/odbc/"; ac_bdir="ext/odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_odbc.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_odbc="$shared_objects_odbc $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/odbc.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_odbc"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/odbc.la: $ext_builddir/odbc.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/odbc.la \$(phplibdir)

$ext_builddir/odbc.la: \$(shared_objects_odbc) \$(ODBC_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_odbc) \$(ODBC_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_ODBC 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/odbc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/odbc/"; ac_bdir="ext/odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_odbc.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC odbc"
    else
      
  
  case ext/odbc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/odbc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/odbc/"; ac_bdir="ext/odbc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_odbc.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC odbc"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


fi


if test "$PHP_OPENSSL" != "no"; then
  
  ext_builddir=ext/openssl
  ext_srcdir=$abs_srcdir/ext/openssl

  ac_extra=

  if test "$ext_openssl_shared" != "shared" && test "$ext_openssl_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/openssl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/openssl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/openssl/"; ac_bdir="ext/openssl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in openssl.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC openssl"
    if test "$ext_openssl_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC openssl"
    fi
  else
    if test "$ext_openssl_shared" = "shared" || test "$ext_openssl_shared" = "yes"; then
      
  case ext/openssl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/openssl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/openssl/"; ac_bdir="ext/openssl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in openssl.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_openssl="$shared_objects_openssl $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/openssl.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_openssl"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/openssl.la: $ext_builddir/openssl.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/openssl.la \$(phplibdir)

$ext_builddir/openssl.la: \$(shared_objects_openssl) \$(OPENSSL_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_openssl) \$(OPENSSL_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_OPENSSL 1
EOF

    fi
  fi

  if test "$ext_openssl_shared" != "shared" && test "$ext_openssl_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/openssl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/openssl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/openssl/"; ac_bdir="ext/openssl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in openssl.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC openssl"
    else
      
  
  case ext/openssl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/openssl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/openssl/"; ac_bdir="ext/openssl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in openssl.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC openssl"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


  OPENSSL_SHARED_LIBADD="-lcrypto -lssl"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST OPENSSL_SHARED_LIBADD"

  cat >> confdefs.h <<\EOF
#define HAVE_OPENSSL_EXT 1
EOF

fi






echo $ac_n "checking for Oracle-ORACLE support""... $ac_c" 1>&6
echo "configure:53773: checking for Oracle-ORACLE support" >&5
# Check whether --with-oracle or --without-oracle was given.
if test "${with_oracle+set}" = set; then
  withval="$with_oracle"
  PHP_ORACLE=$withval
else
  
  PHP_ORACLE=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_ORACLE=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_ORACLE in
shared,*)
  PHP_ORACLE=`echo "$PHP_ORACLE"|sed 's/^shared,//'`
  ;;
shared)
  PHP_ORACLE=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_ORACLE" != "no"; then
  echo $ac_n "checking Oracle Install-Dir""... $ac_c" 1>&6
echo "configure:53818: checking Oracle Install-Dir" >&5
  if test "$PHP_ORACLE" = "yes"; then
  	ORACLE_DIR=$ORACLE_HOME
  else
  	ORACLE_DIR=$PHP_ORACLE
  fi
  echo "$ac_t""$ORACLE_DIR" 1>&6

  if test -d "$ORACLE_DIR/rdbms/public"; then
  	
  if test "$ORACLE_DIR/rdbms/public" != "/usr/include"; then
    
  if test -z "$ORACLE_DIR/rdbms/public" || echo "$ORACLE_DIR/rdbms/public" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/rdbms/public
  else
    
    ep_dir="`echo $ORACLE_DIR/rdbms/public|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/rdbms/public\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  fi
  if test -d "$ORACLE_DIR/rdbms/demo"; then
  	
  if test "$ORACLE_DIR/rdbms/demo" != "/usr/include"; then
    
  if test -z "$ORACLE_DIR/rdbms/demo" || echo "$ORACLE_DIR/rdbms/demo" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/rdbms/demo
  else
    
    ep_dir="`echo $ORACLE_DIR/rdbms/demo|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/rdbms/demo\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  fi
  if test -d "$ORACLE_DIR/network/public"; then
  	
  if test "$ORACLE_DIR/network/public" != "/usr/include"; then
    
  if test -z "$ORACLE_DIR/network/public" || echo "$ORACLE_DIR/network/public" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/network/public
  else
    
    ep_dir="`echo $ORACLE_DIR/network/public|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/network/public\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  fi
  if test -d "$ORACLE_DIR/plsql/public"; then
  	
  if test "$ORACLE_DIR/plsql/public" != "/usr/include"; then
    
  if test -z "$ORACLE_DIR/plsql/public" || echo "$ORACLE_DIR/plsql/public" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/plsql/public
  else
    
    ep_dir="`echo $ORACLE_DIR/plsql/public|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/plsql/public\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  fi

  if test -f "$ORACLE_DIR/lib/sysliblist"; then
  	
  for ac_i in `cat $ORACLE_DIR/lib/sysliblist`; do
    case $ac_i in
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ORACLE_SHARED_LIBADD -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  elif test -f "$ORACLE_DIR/rdbms/lib/sysliblist"; then
  	
  for ac_i in `cat $ORACLE_DIR/rdbms/lib/sysliblist`; do
    case $ac_i in
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ORACLE_SHARED_LIBADD -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

  fi

  
  echo $ac_n "checking Oracle version""... $ac_c" 1>&6
echo "configure:54109: checking Oracle version" >&5
  if test -s "$ORACLE_DIR/orainst/unix.rgs"; then
  	ORACLE_VERSION=`grep '"ocommon"' $ORACLE_DIR/orainst/unix.rgs | sed 's/  */:/g' | cut -d: -f 6 | cut -c 2-4`
	test -z "$ORACLE_VERSION" && ORACLE_VERSION=7.3
  elif test -f $ORACLE_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME.9.0; then
    ORACLE_VERSION=9.0
  elif test -f $ORACLE_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME.8.0; then
    ORACLE_VERSION=8.1
  elif test -f $ORACLE_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME.1.0; then
    ORACLE_VERSION=8.0
  elif test -f $ORACLE_DIR/lib/libclntsh.a; then
    if test -f $ORACLE_DIR/lib/libcore4.a; then
      ORACLE_VERSION=8.0
    else
      ORACLE_VERSION=8.1
    fi
  else
  	{ echo "configure: error: Oracle needed libraries not found" 1>&2; exit 1; }
  fi
  echo "$ac_t""$ORACLE_VERSION" 1>&6

  case $ORACLE_VERSION in
	7.0|7.1)
	  if test -f $ORACLE_DIR/lib/liboracle.$SHLIB_SUFFIX_NAME; then
	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-loracle $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case oracle in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-loracle $LIBS" 
   ;;
  esac




  fi


	  else
	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lcore $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case core in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lcore $LIBS" 
   ;;
  esac




  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lcv6 $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case cv6 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lcv6 $LIBS" 
   ;;
  esac




  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lnlsrtl $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case nlsrtl in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lnlsrtl $LIBS" 
   ;;
  esac




  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lcore $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case core in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lcore $LIBS" 
   ;;
  esac




  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lcv6 $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case cv6 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lcv6 $LIBS" 
   ;;
  esac




  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lnlsrtl $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case nlsrtl in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lnlsrtl $LIBS" 
   ;;
  esac




  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lsqlnet $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case sqlnet in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsqlnet $LIBS" 
   ;;
  esac




  fi


		

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lora $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case ora in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lora $LIBS" 
   ;;
  esac




  fi


		

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lsqlnet $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case sqlnet in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsqlnet $LIBS" 
   ;;
  esac




  fi


		if test "$ext_shared" = "yes"; then
		  ORACLE_SHARED_LIBADD="$ORACLE_DIR/lib/osntab.o $ORACLE_SHARED_LIBADD";
		else
		  LIBS="$ORACLE_DIR/lib/osntab.o $LIBS";
		fi
		

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-locic $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case ocic in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-locic $LIBS" 
   ;;
  esac




  fi


		if test "`uname -s 2>/dev/null`" = "AIX"; then
		  if test "$ext_shared" = "yes"; then
		  	ORACLE_SHARED_LIBADD="$ORACLE_SHARED_LIBADD -bI:$ORACLE_DIR/lib/mili.exp"
		  else
		  	LIBS="$LIBS -bI:$ORACLE_DIR/lib/mili.exp"
		  fi
		fi
	  fi
	  ;;

	7.2)
	  if test -f $ORACLE_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME; then
	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lclntsh $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case clntsh in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lclntsh $LIBS" 
   ;;
  esac




  fi


	  else
	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lcore3 $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case core3 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lcore3 $LIBS" 
   ;;
  esac




  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lnlsrtl3 $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case nlsrtl3 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lnlsrtl3 $LIBS" 
   ;;
  esac




  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lc3v6 $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case c3v6 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lc3v6 $LIBS" 
   ;;
  esac




  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lnlsrtl3 $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case nlsrtl3 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lnlsrtl3 $LIBS" 
   ;;
  esac




  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lora $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case ora in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lora $LIBS" 
   ;;
  esac




  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lsqlnet $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case sqlnet in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsqlnet $LIBS" 
   ;;
  esac




  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lora $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case ora in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lora $LIBS" 
   ;;
  esac




  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lsqlnet $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case sqlnet in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsqlnet $LIBS" 
   ;;
  esac




  fi


		if test "$ext_shared" = "yes"; then
		  ORACLE_SHARED_LIBADD="$ORACLE_DIR/lib/osntab.o $ORACLE_SHARED_LIBADD";
		else
		  LIBS="$ORACLE_DIR/lib/osntab.o $LIBS";
		fi
	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-locic $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case ocic in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-locic $LIBS" 
   ;;
  esac




  fi


	  fi
	  ;;

	7.3)
	  if test -f $ORACLE_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME; then
	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lclntsh $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case clntsh in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lclntsh $LIBS" 
   ;;
  esac




  fi


	  else
	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lcore3 $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case core3 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lcore3 $LIBS" 
   ;;
  esac




  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lnlsrtl3 $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case nlsrtl3 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lnlsrtl3 $LIBS" 
   ;;
  esac




  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lcore3 $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case core3 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lcore3 $LIBS" 
   ;;
  esac




  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lc3v6 $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case c3v6 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lc3v6 $LIBS" 
   ;;
  esac




  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lnlsrtl3 $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case nlsrtl3 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lnlsrtl3 $LIBS" 
   ;;
  esac




  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lepc $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case epc in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lepc $LIBS" 
   ;;
  esac




  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lgeneric $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case generic in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lgeneric $LIBS" 
   ;;
  esac




  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lcommon $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case common in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lcommon $LIBS" 
   ;;
  esac




  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lclient $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case client in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lclient $LIBS" 
   ;;
  esac




  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lsqlnet $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case sqlnet in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsqlnet $LIBS" 
   ;;
  esac




  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lncr $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case ncr in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lncr $LIBS" 
   ;;
  esac




  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lsqlnet $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case sqlnet in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsqlnet $LIBS" 
   ;;
  esac




  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lgeneric $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case generic in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lgeneric $LIBS" 
   ;;
  esac




  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lcommon $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case common in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lcommon $LIBS" 
   ;;
  esac




  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lclient $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case client in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lclient $LIBS" 
   ;;
  esac




  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lsqlnet $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case sqlnet in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsqlnet $LIBS" 
   ;;
  esac




  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lncr $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case ncr in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lncr $LIBS" 
   ;;
  esac




  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lsqlnet $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case sqlnet in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsqlnet $LIBS" 
   ;;
  esac




  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lclient $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case client in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lclient $LIBS" 
   ;;
  esac




  fi


	  fi
	  ;;
	  
	8.0)
  	  

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lnlsrtl3 $ORACLE_SHARED_LIBADD"
    if test -n """"; then
      
  if test """" != "/usr/lib"; then
    
  if test -z """" || echo """" | grep '^/' >/dev/null ; then
    ai_p=""
  else
    
    ep_dir="`echo ""|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"""\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n """"; then
    
  if test """" != "/usr/lib"; then
    
  if test -z """" || echo """" | grep '^/' >/dev/null ; then
    ai_p=""
  else
    
    ep_dir="`echo ""|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"""\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case nlsrtl3 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lnlsrtl3 $LIBS" 
   ;;
  esac




  fi


  	  

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lcore4 $ORACLE_SHARED_LIBADD"
    if test -n """"; then
      
  if test """" != "/usr/lib"; then
    
  if test -z """" || echo """" | grep '^/' >/dev/null ; then
    ai_p=""
  else
    
    ep_dir="`echo ""|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"""\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n """"; then
    
  if test """" != "/usr/lib"; then
    
  if test -z """" || echo """" | grep '^/' >/dev/null ; then
    ai_p=""
  else
    
    ep_dir="`echo ""|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"""\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case core4 in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lcore4 $LIBS" 
   ;;
  esac




  fi


  	  

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lpsa $ORACLE_SHARED_LIBADD"
    if test -n """"; then
      
  if test """" != "/usr/lib"; then
    
  if test -z """" || echo """" | grep '^/' >/dev/null ; then
    ai_p=""
  else
    
    ep_dir="`echo ""|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"""\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n """"; then
    
  if test """" != "/usr/lib"; then
    
  if test -z """" || echo """" | grep '^/' >/dev/null ; then
    ai_p=""
  else
    
    ep_dir="`echo ""|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"""\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case psa in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lpsa $LIBS" 
   ;;
  esac




  fi


  	  

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lclntsh $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case clntsh in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lclntsh $LIBS" 
   ;;
  esac




  fi


	  ;;

	8.1|9.0)
  	  
  
  case clntsh in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ORACLE_SHARED_LIBADD -lclntsh" 
    else
      
  
  case clntsh in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -lclntsh" 
   ;;
  esac


    fi
   ;;
  esac


  	  
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ORACLE_DIR/lib
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ORACLE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ORACLE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

	  ;;
	*)
      { echo "configure: error: Unsupported Oracle version!" 1>&2; exit 1; }
	  ;;
  esac

  
  ext_builddir=ext/oracle
  ext_srcdir=$abs_srcdir/ext/oracle

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/oracle in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/oracle"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/oracle/"; ac_bdir="ext/oracle/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in oracle.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC oracle"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC oracle"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/oracle in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/oracle"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/oracle/"; ac_bdir="ext/oracle/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in oracle.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_oracle="$shared_objects_oracle $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/oracle.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_oracle"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/oracle.la: $ext_builddir/oracle.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/oracle.la \$(phplibdir)

$ext_builddir/oracle.la: \$(shared_objects_oracle) \$(ORACLE_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_oracle) \$(ORACLE_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_ORACLE 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/oracle in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/oracle"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/oracle/"; ac_bdir="ext/oracle/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in oracle.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC oracle"
    else
      
  
  case ext/oracle in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/oracle"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/oracle/"; ac_bdir="ext/oracle/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in oracle.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC oracle"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


  cat >> confdefs.h <<\EOF
#define HAVE_ORACLE 1
EOF


  
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST ORACLE_SHARED_LIBADD"

  

  
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST ORACLE_DIR"

  

  
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST ORACLE_VERSION"

  

fi




echo $ac_n "checking whether to enable user-space object overloading support""... $ac_c" 1>&6
echo "configure:58793: checking whether to enable user-space object overloading support" >&5
# Check whether --enable-overload or --disable-overload was given.
if test "${enable_overload+set}" = set; then
  enableval="$enable_overload"
  PHP_OVERLOAD=$enableval
else
  
  PHP_OVERLOAD=yes

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_OVERLOAD=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_OVERLOAD in
shared,*)
  PHP_OVERLOAD=`echo "$PHP_OVERLOAD"|sed 's/^shared,//'`
  ;;
shared)
  PHP_OVERLOAD=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_OVERLOAD" != "no"; then
	cat >> confdefs.h <<\EOF
#define HAVE_OVERLOAD 1
EOF

	
  ext_builddir=ext/overload
  ext_srcdir=$abs_srcdir/ext/overload

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/overload in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/overload"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/overload/"; ac_bdir="ext/overload/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in overload.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC overload"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC overload"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/overload in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/overload"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/overload/"; ac_bdir="ext/overload/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in overload.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_overload="$shared_objects_overload $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/overload.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_overload"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/overload.la: $ext_builddir/overload.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/overload.la \$(phplibdir)

$ext_builddir/overload.la: \$(shared_objects_overload) \$(OVERLOAD_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_overload) \$(OVERLOAD_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_OVERLOAD 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/overload in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/overload"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/overload/"; ac_bdir="ext/overload/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in overload.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC overload"
    else
      
  
  case ext/overload in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/overload"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/overload/"; ac_bdir="ext/overload/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in overload.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC overload"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


fi




echo $ac_n "checking for Ovrimos SQL Server support""... $ac_c" 1>&6
echo "configure:59055: checking for Ovrimos SQL Server support" >&5
# Check whether --with-ovrimos or --without-ovrimos was given.
if test "${with_ovrimos+set}" = set; then
  withval="$with_ovrimos"
  PHP_OVRIMOS=$withval
else
  
  PHP_OVRIMOS=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_OVRIMOS=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_OVRIMOS in
shared,*)
  PHP_OVRIMOS=`echo "$PHP_OVRIMOS"|sed 's/^shared,//'`
  ;;
shared)
  PHP_OVRIMOS=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_OVRIMOS" != "no"; then
  for i in /usr/local /usr $PHP_OVRIMOS; do
    if test -f $i/include/sqlcli.h; then
      OVRIMOS_DIR=$i
    fi
  done

  if test -z "$OVRIMOS_DIR"; then
    { echo "configure: error: Please reinstall Ovrimos' libsqlcli - I cannot find sqlcli.h" 1>&2; exit 1; }
  fi

  
  if test "$OVRIMOS_DIR/include" != "/usr/include"; then
    
  if test -z "$OVRIMOS_DIR/include" || echo "$OVRIMOS_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$OVRIMOS_DIR/include
  else
    
    ep_dir="`echo $OVRIMOS_DIR/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OVRIMOS_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST OVRIMOS_SHARED_LIBADD"

  LDFLAGS="$LDFLAGS $ld_runpath_switch$OVRIMOS_DIR/lib -L$OVRIMOS_DIR/lib"
  echo $ac_n "checking for main in -lsqlcli""... $ac_c" 1>&6
echo "configure:59145: checking for main in -lsqlcli" >&5
ac_lib_var=`echo sqlcli'_'main | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsqlcli  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 59153 "configure"
#include "confdefs.h"

int main() {
main()
; return 0; }
EOF
if { (eval echo configure:59160: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo sqlcli | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lsqlcli $LIBS"

else
  echo "$ac_t""no" 1>&6
fi

  

  if test "$ext_shared" = "yes"; then
    OVRIMOS_SHARED_LIBADD="-lsqlcli $OVRIMOS_SHARED_LIBADD"
    if test -n "$OVRIMOS_DIR/lib"; then
      
  if test "$OVRIMOS_DIR/lib" != "/usr/lib"; then
    
  if test -z "$OVRIMOS_DIR/lib" || echo "$OVRIMOS_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$OVRIMOS_DIR/lib
  else
    
    ep_dir="`echo $OVRIMOS_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OVRIMOS_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        OVRIMOS_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $OVRIMOS_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$OVRIMOS_DIR/lib"; then
    
  if test "$OVRIMOS_DIR/lib" != "/usr/lib"; then
    
  if test -z "$OVRIMOS_DIR/lib" || echo "$OVRIMOS_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$OVRIMOS_DIR/lib
  else
    
    ep_dir="`echo $OVRIMOS_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OVRIMOS_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case sqlcli in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsqlcli $LIBS" 
   ;;
  esac




  fi


  cat >> confdefs.h <<\EOF
#define HAVE_LIBSQLCLI 1
EOF


  
  ext_builddir=ext/ovrimos
  ext_srcdir=$abs_srcdir/ext/ovrimos

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/ovrimos in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ovrimos"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ovrimos/"; ac_bdir="ext/ovrimos/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ovrimos.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC ovrimos"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC ovrimos"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/ovrimos in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ovrimos"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ovrimos/"; ac_bdir="ext/ovrimos/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in ovrimos.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_ovrimos="$shared_objects_ovrimos $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/ovrimos.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_ovrimos"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/ovrimos.la: $ext_builddir/ovrimos.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/ovrimos.la \$(phplibdir)

$ext_builddir/ovrimos.la: \$(shared_objects_ovrimos) \$(OVRIMOS_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_ovrimos) \$(OVRIMOS_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_OVRIMOS 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/ovrimos in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ovrimos"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ovrimos/"; ac_bdir="ext/ovrimos/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ovrimos.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC ovrimos"
    else
      
  
  case ext/ovrimos in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/ovrimos"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/ovrimos/"; ac_bdir="ext/ovrimos/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in ovrimos.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC ovrimos"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


fi





echo $ac_n "checking whether to enable pcntl support""... $ac_c" 1>&6
echo "configure:59503: checking whether to enable pcntl support" >&5
# Check whether --enable-pcntl or --disable-pcntl was given.
if test "${enable_pcntl+set}" = set; then
  enableval="$enable_pcntl"
  PHP_PCNTL=$enableval
else
  
  PHP_PCNTL=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_PCNTL=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_PCNTL in
shared,*)
  PHP_PCNTL=`echo "$PHP_PCNTL"|sed 's/^shared,//'`
  ;;
shared)
  PHP_PCNTL=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_PCNTL" != "no"; then
 
  for ac_func in fork
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:59551: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 59556 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:59579: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
  cat >> confdefs.h <<\EOF
#define HAVE_FORK 1
EOF
 
else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: pcntl: fork() not supported by this platform" 1>&2; exit 1; } 
fi
done

  for ac_func in waitpid
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:59610: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 59615 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:59638: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
  cat >> confdefs.h <<\EOF
#define HAVE_WAITPID 1
EOF
 
else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: pcntl: fork() not supported by this platform" 1>&2; exit 1; } 
fi
done

  for ac_func in sigaction
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:59669: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 59674 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:59697: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
  cat >> confdefs.h <<\EOF
#define HAVE_SIGACTION 1
EOF
 
else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: pcntl: sigaction() not supported by this platform" 1>&2; exit 1; } 
fi
done

  
  
  ext_builddir=ext/pcntl
  ext_srcdir=$abs_srcdir/ext/pcntl

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "cli" != "cli"; then

    
  
  case ext/pcntl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcntl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcntl/"; ac_bdir="ext/pcntl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pcntl.c php_signal.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC pcntl"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC pcntl"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/pcntl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcntl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcntl/"; ac_bdir="ext/pcntl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in pcntl.c php_signal.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_pcntl="$shared_objects_pcntl $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/pcntl.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pcntl"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/pcntl.la: $ext_builddir/pcntl.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/pcntl.la \$(phplibdir)

$ext_builddir/pcntl.la: \$(shared_objects_pcntl) \$(PCNTL_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_pcntl) \$(PCNTL_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_PCNTL 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "cli" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/pcntl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcntl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcntl/"; ac_bdir="ext/pcntl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pcntl.c php_signal.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC pcntl"
    else
      
  
  case ext/pcntl in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcntl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcntl/"; ac_bdir="ext/pcntl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pcntl.c php_signal.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC pcntl"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


fi





echo $ac_n "checking for PCRE support""... $ac_c" 1>&6
echo "configure:59941: checking for PCRE support" >&5
# Check whether --with-pcre-regex or --without-pcre-regex was given.
if test "${with_pcre_regex+set}" = set; then
  withval="$with_pcre_regex"
  PHP_PCRE_REGEX=$withval
else
  
  PHP_PCRE_REGEX=yes

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_PCRE_REGEX=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_PCRE_REGEX in
shared,*)
  PHP_PCRE_REGEX=`echo "$PHP_PCRE_REGEX"|sed 's/^shared,//'`
  ;;
shared)
  PHP_PCRE_REGEX=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_PCRE_REGEX" != "no"; then
  if test "$PHP_PCRE_REGEX" = "yes"; then
    
  ext_builddir=ext/pcre
  ext_srcdir=$abs_srcdir/ext/pcre

  ac_extra=`echo "-DSUPPORT_UTF8 -DLINK_SIZE=2 -I@ext_srcdir@/pcrelib"|sed s#@ext_srcdir@#$ext_srcdir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/pcre in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcre"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcre/"; ac_bdir="ext/pcre/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pcrelib/maketables.c pcrelib/get.c pcrelib/study.c pcrelib/pcre.c php_pcre.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC pcre"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC pcre"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/pcre in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcre"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcre/"; ac_bdir="ext/pcre/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in pcrelib/maketables.c pcrelib/get.c pcrelib/study.c pcrelib/pcre.c php_pcre.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_pcre="$shared_objects_pcre $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/pcre.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pcre"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/pcre.la: $ext_builddir/pcre.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/pcre.la \$(phplibdir)

$ext_builddir/pcre.la: \$(shared_objects_pcre) \$(PCRE_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_pcre) \$(PCRE_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_PCRE 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/pcre in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcre"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcre/"; ac_bdir="ext/pcre/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pcrelib/maketables.c pcrelib/get.c pcrelib/study.c pcrelib/pcre.c php_pcre.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC pcre"
    else
      
  
  case ext/pcre in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcre"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcre/"; ac_bdir="ext/pcre/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pcrelib/maketables.c pcrelib/get.c pcrelib/study.c pcrelib/pcre.c php_pcre.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC pcre"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


    
  BUILD_DIR="$BUILD_DIR $ext_builddir/pcrelib"

    cat >> confdefs.h <<\EOF
#define HAVE_BUNDLED_PCRE 1
EOF

  else
    for i in $PHP_PCRE_REGEX $PHP_PCRE_REGEX/include $PHP_PCRE_REGEX/include/pcre; do
      test -f $i/pcre.h && PCRE_INCDIR=$i
    done

    if test -z "$PCRE_INCDIR"; then
      { echo "configure: error: Could not find pcre.h in $PHP_PCRE_REGEX" 1>&2; exit 1; }
    fi

    for j in $PHP_PCRE_REGEX $PHP_PCRE_REGEX/lib; do
      test -f $j/libpcre.a -o -f $j/libpcre.$SHLIB_SUFFIX_NAME && PCRE_LIBDIR=$j
    done
    
    if test -z "$PCRE_LIBDIR" ; then
      { echo "configure: error: Could not find libpcre.(a|$SHLIB_SUFFIX_NAME) in $PHP_PCRE_REGEX" 1>&2; exit 1; }
    fi

    
    pcre_major=`grep PCRE_MAJOR $PCRE_INCDIR/pcre.h | sed -e 's/[^0-9]//g'`
    pcre_minor=`grep PCRE_MINOR $PCRE_INCDIR/pcre.h | sed -e 's/[^0-9]//g'`
    
    pcre_minor_length=`echo "$pcre_minor" | wc -c | sed -e 's/^0-9//g'`
    if test "$pcre_minor_length" -eq 2 ; then
      pcre_minor="$pcre_minor"0
    fi
    pcre_version=$pcre_major$pcre_minor
    if test "$pcre_version" -lt 208; then
      { echo "configure: error: The PCRE extension requires PCRE library version >= 2.08" 1>&2; exit 1; }
    fi

    

  if test "$ext_shared" = "yes"; then
    PCRE_SHARED_LIBADD="-lpcre $PCRE_SHARED_LIBADD"
    if test -n "$PCRE_LIBDIR"; then
      
  if test "$PCRE_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PCRE_LIBDIR" || echo "$PCRE_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PCRE_LIBDIR
  else
    
    ep_dir="`echo $PCRE_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PCRE_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        PCRE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $PCRE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$PCRE_LIBDIR"; then
    
  if test "$PCRE_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PCRE_LIBDIR" || echo "$PCRE_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PCRE_LIBDIR
  else
    
    ep_dir="`echo $PCRE_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PCRE_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case pcre in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lpcre $LIBS" 
   ;;
  esac




  fi


    
    cat >> confdefs.h <<\EOF
#define HAVE_PCRE 1
EOF

    
  if test "$PCRE_INCDIR" != "/usr/include"; then
    
  if test -z "$PCRE_INCDIR" || echo "$PCRE_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$PCRE_INCDIR
  else
    
    ep_dir="`echo $PCRE_INCDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PCRE_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    
  ext_builddir=ext/pcre
  ext_srcdir=$abs_srcdir/ext/pcre

  ac_extra=`echo "-DSUPPORT_UTF8 -DLINK_SIZE=2"|sed s#@ext_srcdir@#$ext_srcdir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/pcre in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcre"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcre/"; ac_bdir="ext/pcre/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_pcre.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC pcre"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC pcre"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/pcre in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcre"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcre/"; ac_bdir="ext/pcre/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_pcre.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_pcre="$shared_objects_pcre $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/pcre.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pcre"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/pcre.la: $ext_builddir/pcre.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/pcre.la \$(phplibdir)

$ext_builddir/pcre.la: \$(shared_objects_pcre) \$(PCRE_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_pcre) \$(PCRE_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_PCRE 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/pcre in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcre"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcre/"; ac_bdir="ext/pcre/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_pcre.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC pcre"
    else
      
  
  case ext/pcre in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pcre"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pcre/"; ac_bdir="ext/pcre/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_pcre.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC pcre"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST PCRE_SHARED_LIBADD"

fi




echo $ac_n "checking for PDFlib support""... $ac_c" 1>&6
echo "configure:60581: checking for PDFlib support" >&5
# Check whether --with-pdflib or --without-pdflib was given.
if test "${with_pdflib+set}" = set; then
  withval="$with_pdflib"
  PHP_PDFLIB=$withval
else
  
  PHP_PDFLIB=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_PDFLIB=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_PDFLIB in
shared,*)
  PHP_PDFLIB=`echo "$PHP_PDFLIB"|sed 's/^shared,//'`
  ;;
shared)
  PHP_PDFLIB=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test -z "$PHP_JPEG_DIR"; then
  

echo $ac_n "checking for the location of libjpeg""... $ac_c" 1>&6
echo "configure:60628: checking for the location of libjpeg" >&5
# Check whether --with-jpeg-dir or --without-jpeg-dir was given.
if test "${with_jpeg_dir+set}" = set; then
  withval="$with_jpeg_dir"
  PHP_JPEG_DIR=$withval
else
  
  PHP_JPEG_DIR=no

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_JPEG_DIR=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_JPEG_DIR
echo "$ac_t""$ext_output" 1>&6



fi

if test -z "$PHP_PNG_DIR"; then
  

echo $ac_n "checking for the location of libpng""... $ac_c" 1>&6
echo "configure:60655: checking for the location of libpng" >&5
# Check whether --with-png-dir or --without-png-dir was given.
if test "${with_png_dir+set}" = set; then
  withval="$with_png_dir"
  PHP_PNG_DIR=$withval
else
  
  PHP_PNG_DIR=no

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_PNG_DIR=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_PNG_DIR
echo "$ac_t""$ext_output" 1>&6



fi

if test -z "$PHP_ZLIB_DIR"; then
  

echo $ac_n "checking for the location of libz""... $ac_c" 1>&6
echo "configure:60682: checking for the location of libz" >&5
# Check whether --with-zlib-dir or --without-zlib-dir was given.
if test "${with_zlib_dir+set}" = set; then
  withval="$with_zlib_dir"
  PHP_ZLIB_DIR=$withval
else
  
  PHP_ZLIB_DIR=no

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_ZLIB_DIR=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_ZLIB_DIR
echo "$ac_t""$ext_output" 1>&6



fi



echo $ac_n "checking for the location of libtiff""... $ac_c" 1>&6
echo "configure:60708: checking for the location of libtiff" >&5
# Check whether --with-tiff-dir or --without-tiff-dir was given.
if test "${with_tiff_dir+set}" = set; then
  withval="$with_tiff_dir"
  PHP_TIFF_DIR=$withval
else
  
  PHP_TIFF_DIR=no

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_TIFF_DIR=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_TIFF_DIR
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_PDFLIB" != "no"; then

  
  ext_builddir=ext/pdf
  ext_srcdir=$abs_srcdir/ext/pdf

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/pdf in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdf"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdf/"; ac_bdir="ext/pdf/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdf.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC pdf"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC pdf"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/pdf in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdf"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdf/"; ac_bdir="ext/pdf/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in pdf.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_pdf="$shared_objects_pdf $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/pdf.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pdf"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/pdf.la: $ext_builddir/pdf.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/pdf.la \$(phplibdir)

$ext_builddir/pdf.la: \$(shared_objects_pdf) \$(PDF_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_pdf) \$(PDF_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_PDF 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/pdf in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdf"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdf/"; ac_bdir="ext/pdf/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdf.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC pdf"
    else
      
  
  case ext/pdf in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pdf"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pdf/"; ac_bdir="ext/pdf/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pdf.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC pdf"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST PDF_SHARED_LIBADD"


      
    if test "$PHP_JPEG_DIR" != "no"; then
    
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
      -L$PHP_JPEG_DIR/lib
     $LDFLAGS"
  echo $ac_n "checking for jpeg_read_header in -ljpeg""... $ac_c" 1>&6
echo "configure:60952: checking for jpeg_read_header in -ljpeg" >&5
ac_lib_var=`echo jpeg'_'jpeg_read_header | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ljpeg  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 60960 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char jpeg_read_header();

int main() {
jpeg_read_header()
; return 0; }
EOF
if { (eval echo configure:60971: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
      

  if test "$ext_shared" = "yes"; then
    PDF_SHARED_LIBADD="-ljpeg $PDF_SHARED_LIBADD"
    if test -n "$PHP_JPEG_DIR/lib"; then
      
  if test "$PHP_JPEG_DIR/lib" != "/usr/lib"; then
    
  if test -z "$PHP_JPEG_DIR/lib" || echo "$PHP_JPEG_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$PHP_JPEG_DIR/lib
  else
    
    ep_dir="`echo $PHP_JPEG_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_JPEG_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        PDF_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $PDF_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$PHP_JPEG_DIR/lib"; then
    
  if test "$PHP_JPEG_DIR/lib" != "/usr/lib"; then
    
  if test -z "$PHP_JPEG_DIR/lib" || echo "$PHP_JPEG_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$PHP_JPEG_DIR/lib
  else
    
    ep_dir="`echo $PHP_JPEG_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_JPEG_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case jpeg in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-ljpeg $LIBS" 
   ;;
  esac




  fi


    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_jpeg
    
      { echo "configure: error: libjpeg not found!" 1>&2; exit 1; }
    
  
fi

  else
    echo "configure: warning: If configure fails, try --with-jpeg-dir=<DIR>" 1>&2
  fi

    if test "$PHP_PNG_DIR" != "no"; then
    
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
      -L$PHP_PNG_DIR/lib
     $LDFLAGS"
  echo $ac_n "checking for png_create_info_struct in -lpng""... $ac_c" 1>&6
echo "configure:61109: checking for png_create_info_struct in -lpng" >&5
ac_lib_var=`echo png'_'png_create_info_struct | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpng  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 61117 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char png_create_info_struct();

int main() {
png_create_info_struct()
; return 0; }
EOF
if { (eval echo configure:61128: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
      

  if test "$ext_shared" = "yes"; then
    PDF_SHARED_LIBADD="-lpng $PDF_SHARED_LIBADD"
    if test -n "$PHP_PNG_DIR/lib"; then
      
  if test "$PHP_PNG_DIR/lib" != "/usr/lib"; then
    
  if test -z "$PHP_PNG_DIR/lib" || echo "$PHP_PNG_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$PHP_PNG_DIR/lib
  else
    
    ep_dir="`echo $PHP_PNG_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_PNG_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        PDF_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $PDF_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$PHP_PNG_DIR/lib"; then
    
  if test "$PHP_PNG_DIR/lib" != "/usr/lib"; then
    
  if test -z "$PHP_PNG_DIR/lib" || echo "$PHP_PNG_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$PHP_PNG_DIR/lib
  else
    
    ep_dir="`echo $PHP_PNG_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_PNG_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case png in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lpng $LIBS" 
   ;;
  esac




  fi


    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_png
    
      { echo "configure: error: libpng not found!" 1>&2; exit 1; }
    
  
fi

  else
    echo "configure: warning: If configure fails, try --with-png-dir=<DIR>" 1>&2
  fi

    if test "$PHP_TIFF_DIR" != "no"; then
    
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
      -L$PHP_TIFF_DIR/lib
     $LDFLAGS"
  echo $ac_n "checking for TIFFOpen in -ltiff""... $ac_c" 1>&6
echo "configure:61266: checking for TIFFOpen in -ltiff" >&5
ac_lib_var=`echo tiff'_'TIFFOpen | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ltiff  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 61274 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char TIFFOpen();

int main() {
TIFFOpen()
; return 0; }
EOF
if { (eval echo configure:61285: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
      

  if test "$ext_shared" = "yes"; then
    PDF_SHARED_LIBADD="-ltiff $PDF_SHARED_LIBADD"
    if test -n "$PHP_TIFF_DIR/lib"; then
      
  if test "$PHP_TIFF_DIR/lib" != "/usr/lib"; then
    
  if test -z "$PHP_TIFF_DIR/lib" || echo "$PHP_TIFF_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$PHP_TIFF_DIR/lib
  else
    
    ep_dir="`echo $PHP_TIFF_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_TIFF_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        PDF_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $PDF_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$PHP_TIFF_DIR/lib"; then
    
  if test "$PHP_TIFF_DIR/lib" != "/usr/lib"; then
    
  if test -z "$PHP_TIFF_DIR/lib" || echo "$PHP_TIFF_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$PHP_TIFF_DIR/lib
  else
    
    ep_dir="`echo $PHP_TIFF_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_TIFF_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case tiff in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-ltiff $LIBS" 
   ;;
  esac




  fi


    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_tiff
    
      { echo "configure: error: libtiff not found!" 1>&2; exit 1; }
    
  
fi

  else
    echo "configure: warning: If configure fails, try --with-tiff-dir=<DIR>" 1>&2
  fi

    echo $ac_n "checking for the location of zlib""... $ac_c" 1>&6
echo "configure:61417: checking for the location of zlib" >&5
  if test "$PHP_ZLIB_DIR" = "no"; then
    echo "$ac_t""no. If configure fails, try --with-zlib-dir=<DIR>" 1>&6
  else           
    echo "$ac_t""$PHP_ZLIB_DIR" 1>&6
    

  if test "$ext_shared" = "yes"; then
    PDF_SHARED_LIBADD="-lz $PDF_SHARED_LIBADD"
    if test -n "$PHP_ZLIB_DIR/lib"; then
      
  if test "$PHP_ZLIB_DIR/lib" != "/usr/lib"; then
    
  if test -z "$PHP_ZLIB_DIR/lib" || echo "$PHP_ZLIB_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ZLIB_DIR/lib
  else
    
    ep_dir="`echo $PHP_ZLIB_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        PDF_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $PDF_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$PHP_ZLIB_DIR/lib"; then
    
  if test "$PHP_ZLIB_DIR/lib" != "/usr/lib"; then
    
  if test -z "$PHP_ZLIB_DIR/lib" || echo "$PHP_ZLIB_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$PHP_ZLIB_DIR/lib
  else
    
    ep_dir="`echo $PHP_ZLIB_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case z in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lz $LIBS" 
   ;;
  esac




  fi


  fi

      
  case $PHP_PDFLIB in
    yes)
      echo $ac_n "checking for PDF_show_boxed in -lpdf""... $ac_c" 1>&6
echo "configure:61524: checking for PDF_show_boxed in -lpdf" >&5
ac_lib_var=`echo pdf'_'PDF_show_boxed | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpdf  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 61532 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PDF_show_boxed();

int main() {
PDF_show_boxed()
; return 0; }
EOF
if { (eval echo configure:61543: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
        cat >> confdefs.h <<\EOF
#define HAVE_PDFLIB 1
EOF

        
  
  case pdf in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        PDF_SHARED_LIBADD="-lpdf $PDF_SHARED_LIBADD" 
    else
      
  
  case pdf in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lpdf $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


      
else
  echo "$ac_t""no" 1>&6

        { echo "configure: error: 
PDFlib extension requires at least pdflib 3.x. You may also need libtiff, libjpeg, libpng and libz.
Use the options --with-tiff-dir=<DIR>, --with-jpeg-dir=<DIR>, --with-png-dir=<DIR> and --with-zlib-dir=<DIR>
See config.log for more information.
" 1>&2; exit 1; }
      
fi

    ;;
    *)
      if test -f "$PHP_PDFLIB/include/pdflib.h" ; then

        
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
          -L$PHP_PDFLIB/lib $PDF_SHARED_LIBADD
         $LDFLAGS"
  echo $ac_n "checking for PDF_show_boxed in -lpdf""... $ac_c" 1>&6
echo "configure:61608: checking for PDF_show_boxed in -lpdf" >&5
ac_lib_var=`echo pdf'_'PDF_show_boxed | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpdf  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 61616 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PDF_show_boxed();

int main() {
PDF_show_boxed()
; return 0; }
EOF
if { (eval echo configure:61627: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
          cat >> confdefs.h <<\EOF
#define HAVE_PDFLIB 1
EOF
 
          

  if test "$ext_shared" = "yes"; then
    PDF_SHARED_LIBADD="-lpdf $PDF_SHARED_LIBADD"
    if test -n "$PHP_PDFLIB/lib"; then
      
  if test "$PHP_PDFLIB/lib" != "/usr/lib"; then
    
  if test -z "$PHP_PDFLIB/lib" || echo "$PHP_PDFLIB/lib" | grep '^/' >/dev/null ; then
    ai_p=$PHP_PDFLIB/lib
  else
    
    ep_dir="`echo $PHP_PDFLIB/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_PDFLIB/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        PDF_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $PDF_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$PHP_PDFLIB/lib"; then
    
  if test "$PHP_PDFLIB/lib" != "/usr/lib"; then
    
  if test -z "$PHP_PDFLIB/lib" || echo "$PHP_PDFLIB/lib" | grep '^/' >/dev/null ; then
    ai_p=$PHP_PDFLIB/lib
  else
    
    ep_dir="`echo $PHP_PDFLIB/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_PDFLIB/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case pdf in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lpdf $LIBS" 
   ;;
  esac




  fi


          
  if test "$PHP_PDFLIB/include" != "/usr/include"; then
    
  if test -z "$PHP_PDFLIB/include" || echo "$PHP_PDFLIB/include" | grep '^/' >/dev/null ; then
    ai_p=$PHP_PDFLIB/include
  else
    
    ep_dir="`echo $PHP_PDFLIB/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_PDFLIB/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

        
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_pdf
    
          { echo "configure: error: 
PDFlib extension requires at least pdflib 3.x. You may also need libtiff, libjpeg, libpng and libz.
Use the options --with-tiff-dir=<DIR>, --with-jpeg-dir=<DIR>, --with-png-dir=<DIR> and --with-zlib-dir=<DIR>
See config.log for more information.
" 1>&2; exit 1; }
        
  
fi

      else
        { echo "configure: error: pdflib.h not found! Check the path passed to --with-pdflib=<PATH>. PATH should be the install prefix directory." 1>&2; exit 1; }
      fi
    ;;
  esac
fi




echo $ac_n "checking for Verisign Payflow Pro support""... $ac_c" 1>&6
echo "configure:61804: checking for Verisign Payflow Pro support" >&5
# Check whether --with-pfpro or --without-pfpro was given.
if test "${with_pfpro+set}" = set; then
  withval="$with_pfpro"
  PHP_PFPRO=$withval
else
  
  PHP_PFPRO=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_PFPRO=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_PFPRO in
shared,*)
  PHP_PFPRO=`echo "$PHP_PFPRO"|sed 's/^shared,//'`
  ;;
shared)
  PHP_PFPRO=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_PFPRO" != "no"; then
  PFPRO_LIB=libpfpro.so
  PFPRO_HDR=pfpro.h

  for i in /usr/local /usr $PHP_PFPRO; do
    if test -r $i/$PFPRO_HDR; then
      PFPRO_INC_DIR=$i
    elif test -r $i/include/$PFPRO_HDR; then
      PFPRO_INC_DIR=$i/include
    elif test -r $i/lib/$PFPRO_HDR; then
      PFPRO_INC_DIR=$i/lib
    elif test -r $i/bin/$PFPRO_HDR; then
      PFPRO_INC_DIR=$i/bin
    fi

    if test -r $i/$PFPRO_LIB; then
      PFPRO_LIB_DIR=$i
    elif test -r $i/lib/$PFPRO_LIB; then
      PFPRO_LIB_DIR=$i/lib
    fi
  done

  if test -z "$PFPRO_INC_DIR"; then
    { echo "configure: error: Could not find pfpro.h. Please make sure you have the
                 Verisign Payflow Pro SDK installed. Use
                 ./configure --with-pfpro=<pfpro-dir> if necessary" 1>&2; exit 1; }
  fi

  if test -z "$PFPRO_LIB_DIR"; then
    { echo "configure: error: Could not find libpfpro.so. Please make sure you have the
                 Verisign Payflow Pro SDK installed. Use
                 ./configure --with-pfpro=<pfpro-dir> if necessary" 1>&2; exit 1; }
  fi

        
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
    -L$PFPRO_LIB_DIR
   $LDFLAGS"
  echo $ac_n "checking for pfproInit in -lpfpro""... $ac_c" 1>&6
echo "configure:61887: checking for pfproInit in -lpfpro" >&5
ac_lib_var=`echo pfpro'_'pfproInit | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpfpro  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 61895 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char pfproInit();

int main() {
pfproInit()
; return 0; }
EOF
if { (eval echo configure:61906: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
    PFPRO_VERSION=3
  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_pfpro
    
    
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
      -L$PFPRO_LIB_DIR
     $LDFLAGS"
  echo $ac_n "checking for PNInit in -lpfpro""... $ac_c" 1>&6
echo "configure:61939: checking for PNInit in -lpfpro" >&5
ac_lib_var=`echo pfpro'_'PNInit | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpfpro  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 61947 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PNInit();

int main() {
PNInit()
; return 0; }
EOF
if { (eval echo configure:61958: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
      PFPRO_VERSION=2
    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_pfpro
    
      { echo "configure: error: The pfpro extension requires version 2 or 3 of the SDK" 1>&2; exit 1; }
    
  
fi

  
  
fi


  cat >> confdefs.h <<EOF
#define PFPRO_VERSION $PFPRO_VERSION
EOF

  
  if test "$PFPRO_INC_DIR" != "/usr/include"; then
    
  if test -z "$PFPRO_INC_DIR" || echo "$PFPRO_INC_DIR" | grep '^/' >/dev/null ; then
    ai_p=$PFPRO_INC_DIR
  else
    
    ep_dir="`echo $PFPRO_INC_DIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PFPRO_INC_DIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  

  if test "$ext_shared" = "yes"; then
    PFPRO_SHARED_LIBADD="-lpfpro $PFPRO_SHARED_LIBADD"
    if test -n "$PFPRO_LIB_DIR"; then
      
  if test "$PFPRO_LIB_DIR" != "/usr/lib"; then
    
  if test -z "$PFPRO_LIB_DIR" || echo "$PFPRO_LIB_DIR" | grep '^/' >/dev/null ; then
    ai_p=$PFPRO_LIB_DIR
  else
    
    ep_dir="`echo $PFPRO_LIB_DIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PFPRO_LIB_DIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        PFPRO_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $PFPRO_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$PFPRO_LIB_DIR"; then
    
  if test "$PFPRO_LIB_DIR" != "/usr/lib"; then
    
  if test -z "$PFPRO_LIB_DIR" || echo "$PFPRO_LIB_DIR" | grep '^/' >/dev/null ; then
    ai_p=$PFPRO_LIB_DIR
  else
    
    ep_dir="`echo $PFPRO_LIB_DIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PFPRO_LIB_DIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case pfpro in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lpfpro $LIBS" 
   ;;
  esac




  fi



  
  ext_builddir=ext/pfpro
  ext_srcdir=$abs_srcdir/ext/pfpro

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/pfpro in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pfpro"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pfpro/"; ac_bdir="ext/pfpro/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pfpro.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC pfpro"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC pfpro"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/pfpro in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pfpro"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pfpro/"; ac_bdir="ext/pfpro/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in pfpro.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_pfpro="$shared_objects_pfpro $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/pfpro.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pfpro"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/pfpro.la: $ext_builddir/pfpro.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/pfpro.la \$(phplibdir)

$ext_builddir/pfpro.la: \$(shared_objects_pfpro) \$(PFPRO_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_pfpro) \$(PFPRO_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_PFPRO 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/pfpro in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pfpro"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pfpro/"; ac_bdir="ext/pfpro/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pfpro.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC pfpro"
    else
      
  
  case ext/pfpro in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pfpro"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pfpro/"; ac_bdir="ext/pfpro/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pfpro.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC pfpro"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST PFPRO_SHARED_LIBADD"

  cat >> confdefs.h <<\EOF
#define HAVE_PFPRO 1
EOF

fi






echo $ac_n "checking for PostgreSQL support""... $ac_c" 1>&6
echo "configure:62350: checking for PostgreSQL support" >&5
# Check whether --with-pgsql or --without-pgsql was given.
if test "${with_pgsql+set}" = set; then
  withval="$with_pgsql"
  PHP_PGSQL=$withval
else
  
  PHP_PGSQL=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_PGSQL=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_PGSQL in
shared,*)
  PHP_PGSQL=`echo "$PHP_PGSQL"|sed 's/^shared,//'`
  ;;
shared)
  PHP_PGSQL=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_PGSQL" != "no"; then
  
  if test -z "$PGSQL_INCLUDE" || echo "$PGSQL_INCLUDE" | grep '^/' >/dev/null ; then
    PGSQL_INCLUDE=$PGSQL_INCLUDE
  else
    
    ep_dir="`echo $PGSQL_INCLUDE|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    PGSQL_INCLUDE="$ep_realdir/`basename \"$PGSQL_INCLUDE\"`"
  fi


  if test "$PHP_PGSQL" = "yes"; then
    PGSQL_SEARCH_PATHS="/usr /usr/local /usr/local/pgsql"
  else
    PGSQL_SEARCH_PATHS=$PHP_PGSQL
  fi
  
  for i in $PGSQL_SEARCH_PATHS; do
    for j in include include/pgsql include/postgres include/postgresql ""; do
      if test -r "$i/$j/libpq-fe.h"; then
        PGSQL_INC_BASE=$i
        PGSQL_INCLUDE=$i/$j
        if test -r "$i/$j/pg_config.h"; then
          cat >> confdefs.h <<\EOF
#define HAVE_PG_CONFIG_H 1
EOF

        fi
      fi
    done

    for j in lib lib/pgsql lib/postgres lib/postgresql ""; do
      if test -f "$i/$j/libpq.so" || test -f "$i/$j/libpq.a"; then 
        PGSQL_LIBDIR=$i/$j
      fi
    done
  done

  if test -z "$PGSQL_INCLUDE"; then
    { echo "configure: error: Cannot find libpq-fe.h. Please specify correct PostgreSQL installation path" 1>&2; exit 1; }
  fi

  if test -z "$PGSQL_LIBDIR"; then
    { echo "configure: error: Cannot find libpq.so. Please specify correct PostgreSQL installation path" 1>&2; exit 1; }
  fi

  if test -z "$PGSQL_INCLUDE" -a -z "$PGSQL_LIBDIR" ; then
    { echo "configure: error: Unable to find libpq anywhere under $withval" 1>&2; exit 1; }
  fi

  cat >> confdefs.h <<\EOF
#define HAVE_PGSQL 1
EOF

  old_LIBS=$LIBS
  old_LDFLAGS=$LDFLAGS
  LDFLAGS="$LDFLAGS -L$PGSQL_LIBDIR"
  echo $ac_n "checking for PQescapeString in -lpq""... $ac_c" 1>&6
echo "configure:62453: checking for PQescapeString in -lpq" >&5
ac_lib_var=`echo pq'_'PQescapeString | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 62461 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQescapeString();

int main() {
PQescapeString()
; return 0; }
EOF
if { (eval echo configure:62472: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PQESCAPE 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for PQsetnonblocking in -lpq""... $ac_c" 1>&6
echo "configure:62496: checking for PQsetnonblocking in -lpq" >&5
ac_lib_var=`echo pq'_'PQsetnonblocking | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 62504 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQsetnonblocking();

int main() {
PQsetnonblocking()
; return 0; }
EOF
if { (eval echo configure:62515: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PQSETNONBLOCKING 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for PQcmdTuples in -lpq""... $ac_c" 1>&6
echo "configure:62539: checking for PQcmdTuples in -lpq" >&5
ac_lib_var=`echo pq'_'PQcmdTuples | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 62547 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQcmdTuples();

int main() {
PQcmdTuples()
; return 0; }
EOF
if { (eval echo configure:62558: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PQCMDTUPLES 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for PQoidValue in -lpq""... $ac_c" 1>&6
echo "configure:62582: checking for PQoidValue in -lpq" >&5
ac_lib_var=`echo pq'_'PQoidValue | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 62590 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQoidValue();

int main() {
PQoidValue()
; return 0; }
EOF
if { (eval echo configure:62601: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PQOIDVALUE 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for PQclientEncoding in -lpq""... $ac_c" 1>&6
echo "configure:62625: checking for PQclientEncoding in -lpq" >&5
ac_lib_var=`echo pq'_'PQclientEncoding | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 62633 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQclientEncoding();

int main() {
PQclientEncoding()
; return 0; }
EOF
if { (eval echo configure:62644: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PQCLIENTENCODING 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for pg_encoding_to_char in -lpq""... $ac_c" 1>&6
echo "configure:62668: checking for pg_encoding_to_char in -lpq" >&5
ac_lib_var=`echo pq'_'pg_encoding_to_char | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 62676 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char pg_encoding_to_char();

int main() {
pg_encoding_to_char()
; return 0; }
EOF
if { (eval echo configure:62687: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PGSQL_WITH_MULTIBYTE_SUPPORT 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  LIBS=$old_LIBS
  LDFLAGS=$old_LDFLAGS

  

  if test "$ext_shared" = "yes"; then
    PGSQL_SHARED_LIBADD="-lpq $PGSQL_SHARED_LIBADD"
    if test -n "$PGSQL_LIBDIR"; then
      
  if test "$PGSQL_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PGSQL_LIBDIR" || echo "$PGSQL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PGSQL_LIBDIR
  else
    
    ep_dir="`echo $PGSQL_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PGSQL_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        PGSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $PGSQL_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$PGSQL_LIBDIR"; then
    
  if test "$PGSQL_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PGSQL_LIBDIR" || echo "$PGSQL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PGSQL_LIBDIR
  else
    
    ep_dir="`echo $PGSQL_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PGSQL_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case pq in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lpq $LIBS" 
   ;;
  esac




  fi


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST PGSQL_SHARED_LIBADD"


  
  if test "$PGSQL_INCLUDE" != "/usr/include"; then
    
  if test -z "$PGSQL_INCLUDE" || echo "$PGSQL_INCLUDE" | grep '^/' >/dev/null ; then
    ai_p=$PGSQL_INCLUDE
  else
    
    ep_dir="`echo $PGSQL_INCLUDE|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PGSQL_INCLUDE\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi


  
  ext_builddir=ext/pgsql
  ext_srcdir=$abs_srcdir/ext/pgsql

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/pgsql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pgsql/"; ac_bdir="ext/pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pgsql.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC pgsql"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC pgsql"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/pgsql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pgsql/"; ac_bdir="ext/pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in pgsql.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_pgsql="$shared_objects_pgsql $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/pgsql.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pgsql"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/pgsql.la: $ext_builddir/pgsql.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/pgsql.la \$(phplibdir)

$ext_builddir/pgsql.la: \$(shared_objects_pgsql) \$(PGSQL_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_pgsql) \$(PGSQL_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_PGSQL 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/pgsql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pgsql/"; ac_bdir="ext/pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pgsql.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC pgsql"
    else
      
  
  case ext/pgsql in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pgsql/"; ac_bdir="ext/pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pgsql.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC pgsql"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


fi






echo $ac_n "checking whether to enable POSIX-like functions""... $ac_c" 1>&6
echo "configure:63061: checking whether to enable POSIX-like functions" >&5
# Check whether --enable-posix or --disable-posix was given.
if test "${enable_posix+set}" = set; then
  enableval="$enable_posix"
  PHP_POSIX=$enableval
else
  
  PHP_POSIX=yes

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_POSIX=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_POSIX in
shared,*)
  PHP_POSIX=`echo "$PHP_POSIX"|sed 's/^shared,//'`
  ;;
shared)
  PHP_POSIX=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_POSIX" = "yes"; then
  cat >> confdefs.h <<\EOF
#define HAVE_POSIX 1
EOF

  
  ext_builddir=ext/posix
  ext_srcdir=$abs_srcdir/ext/posix

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/posix in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/posix"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/posix/"; ac_bdir="ext/posix/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in posix.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC posix"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC posix"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/posix in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/posix"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/posix/"; ac_bdir="ext/posix/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in posix.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_posix="$shared_objects_posix $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/posix.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_posix"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/posix.la: $ext_builddir/posix.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/posix.la \$(phplibdir)

$ext_builddir/posix.la: \$(shared_objects_posix) \$(POSIX_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_posix) \$(POSIX_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_POSIX 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/posix in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/posix"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/posix/"; ac_bdir="ext/posix/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in posix.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC posix"
    else
      
  
  case ext/posix in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/posix"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/posix/"; ac_bdir="ext/posix/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in posix.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC posix"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"



  for ac_func in seteuid setegid setsid getsid setpgid getpgid ctermid mkfifo getrlimit
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:63321: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 63326 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:63349: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

fi




echo $ac_n "checking for PSPELL support""... $ac_c" 1>&6
echo "configure:63379: checking for PSPELL support" >&5
# Check whether --with-pspell or --without-pspell was given.
if test "${with_pspell+set}" = set; then
  withval="$with_pspell"
  PHP_PSPELL=$withval
else
  
  PHP_PSPELL=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_PSPELL=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_PSPELL in
shared,*)
  PHP_PSPELL=`echo "$PHP_PSPELL"|sed 's/^shared,//'`
  ;;
shared)
  PHP_PSPELL=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_PSPELL" != "no"; then
	
  ext_builddir=ext/pspell
  ext_srcdir=$abs_srcdir/ext/pspell

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/pspell in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pspell"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pspell/"; ac_bdir="ext/pspell/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pspell.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC pspell"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC pspell"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/pspell in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pspell"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pspell/"; ac_bdir="ext/pspell/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in pspell.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_pspell="$shared_objects_pspell $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/pspell.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pspell"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/pspell.la: $ext_builddir/pspell.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/pspell.la \$(phplibdir)

$ext_builddir/pspell.la: \$(shared_objects_pspell) \$(PSPELL_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_pspell) \$(PSPELL_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_PSPELL 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/pspell in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pspell"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pspell/"; ac_bdir="ext/pspell/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pspell.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC pspell"
    else
      
  
  case ext/pspell in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/pspell"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/pspell/"; ac_bdir="ext/pspell/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in pspell.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC pspell"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


	if test "$PHP_PSPELL" != "yes"; then
	    PSPELL_SEARCH_DIRS=$PHP_PSPELL
	else
	    PSPELL_SEARCH_DIRS="/usr/local /usr"
	fi
	for i in $PSPELL_SEARCH_DIRS; do
		if test -f $i/include/pspell/pspell.h; then
			PSPELL_DIR=$i
			PSPELL_INCDIR=$i/include/pspell
		elif test -f $i/include/pspell.h; then
			PSPELL_DIR=$i
			PSPELL_INCDIR=$i/include
		fi
	done

	if test -z "$PSPELL_DIR"; then
		{ echo "configure: error: Cannot find pspell" 1>&2; exit 1; }
	fi

	PSPELL_LIBDIR=$PSPELL_DIR/lib

	cat >> confdefs.h <<\EOF
#define HAVE_PSPELL 1
EOF

	
  PHP_VAR_SUBST="$PHP_VAR_SUBST PSPELL_SHARED_LIBADD"

	

  if test "$ext_shared" = "yes"; then
    PSPELL_SHARED_LIBADD="-lpspell $PSPELL_SHARED_LIBADD"
    if test -n "$PSPELL_LIBDIR"; then
      
  if test "$PSPELL_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PSPELL_LIBDIR" || echo "$PSPELL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PSPELL_LIBDIR
  else
    
    ep_dir="`echo $PSPELL_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PSPELL_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        PSPELL_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $PSPELL_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$PSPELL_LIBDIR"; then
    
  if test "$PSPELL_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PSPELL_LIBDIR" || echo "$PSPELL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$PSPELL_LIBDIR
  else
    
    ep_dir="`echo $PSPELL_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PSPELL_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case pspell in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lpspell $LIBS" 
   ;;
  esac




  fi


	
  if test "$PSPELL_INCDIR" != "/usr/include"; then
    
  if test -z "$PSPELL_INCDIR" || echo "$PSPELL_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$PSPELL_INCDIR
  else
    
    ep_dir="`echo $PSPELL_INCDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PSPELL_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

fi




echo $ac_n "checking for QtDOM support""... $ac_c" 1>&6
echo "configure:63792: checking for QtDOM support" >&5
# Check whether --with-qtdom or --without-qtdom was given.
if test "${with_qtdom+set}" = set; then
  withval="$with_qtdom"
  PHP_QTDOM=$withval
else
  
  PHP_QTDOM=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_QTDOM=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_QTDOM in
shared,*)
  PHP_QTDOM=`echo "$PHP_QTDOM"|sed 's/^shared,//'`
  ;;
shared)
  PHP_QTDOM=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_QTDOM" != "no"; then
  case $PHP_QTDOM in
    yes)
      if test -f $QTDIR/include/qdom.h; then
        QTDOM_LIBDIR=$QTDIR/lib
        QTDOM_INCDIR=$QTDIR/include
      elif test -f /usr/lib/qt2/include/qdom.h; then
        QTDOM_LIBDIR=/usr/lib
        QTDOM_INCDIR=/usr/lib/qt2/include
      fi
      ;;
    *)
      if test -f $PHP_QTDOM/include/qdom.h; then
        QTDOM_LIBDIR=$PHP_QTDOM/lib
        QTDOM_INCDIR=$PHP_QTDOM/include
      fi
      ;;
  esac

  if test -z "$QTDOM_INCDIR"; then
    { echo "configure: error: qdom.h not found." 1>&2; exit 1; }
  fi

  

  if test "$ext_shared" = "yes"; then
    QTDOM_SHARED_LIBADD="-lqt $QTDOM_SHARED_LIBADD"
    if test -n "$QTDOM_LIBDIR"; then
      
  if test "$QTDOM_LIBDIR" != "/usr/lib"; then
    
  if test -z "$QTDOM_LIBDIR" || echo "$QTDOM_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$QTDOM_LIBDIR
  else
    
    ep_dir="`echo $QTDOM_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$QTDOM_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        QTDOM_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $QTDOM_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$QTDOM_LIBDIR"; then
    
  if test "$QTDOM_LIBDIR" != "/usr/lib"; then
    
  if test -z "$QTDOM_LIBDIR" || echo "$QTDOM_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$QTDOM_LIBDIR
  else
    
    ep_dir="`echo $QTDOM_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$QTDOM_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case qt in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lqt $LIBS" 
   ;;
  esac




  fi


  
  if test "$QTDOM_INCDIR" != "/usr/include"; then
    
  if test -z "$QTDOM_INCDIR" || echo "$QTDOM_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$QTDOM_INCDIR
  else
    
    ep_dir="`echo $QTDOM_INCDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$QTDOM_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  
  ext_builddir=ext/qtdom
  ext_srcdir=$abs_srcdir/ext/qtdom

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/qtdom in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/qtdom"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/qtdom/"; ac_bdir="ext/qtdom/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in qtdom.c qtdom_qt.cpp; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC qtdom"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC qtdom"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/qtdom in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/qtdom"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/qtdom/"; ac_bdir="ext/qtdom/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in qtdom.c qtdom_qt.cpp; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_qtdom="$shared_objects_qtdom $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/qtdom.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_qtdom"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/qtdom.la: $ext_builddir/qtdom.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/qtdom.la \$(phplibdir)

$ext_builddir/qtdom.la: \$(shared_objects_qtdom) \$(QTDOM_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_qtdom) \$(QTDOM_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_QTDOM 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/qtdom in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/qtdom"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/qtdom/"; ac_bdir="ext/qtdom/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in qtdom.c qtdom_qt.cpp; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC qtdom"
    else
      
  
  case ext/qtdom in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/qtdom"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/qtdom/"; ac_bdir="ext/qtdom/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in qtdom.c qtdom_qt.cpp; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC qtdom"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST QTDOM_SHARED_LIBADD"

  cat >> confdefs.h <<\EOF
#define HAVE_QTDOM 1
EOF

  
  if test -z "$php_cxx_done"; then
    for ac_prog in $CCC c++ g++ gcc CC cxx cc++ cl
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:64207: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_CXX'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CXX"; then
  ac_cv_prog_CXX="$CXX" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CXX="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
CXX="$ac_cv_prog_CXX"
if test -n "$CXX"; then
  echo "$ac_t""$CXX" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$CXX" && break
done
test -n "$CXX" || CXX="gcc"


echo $ac_n "checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) works""... $ac_c" 1>&6
echo "configure:64239: checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) works" >&5

ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

cat > conftest.$ac_ext << EOF

#line 64250 "configure"
#include "confdefs.h"

int main(){return(0);}
EOF
if { (eval echo configure:64255: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  ac_cv_prog_cxx_works=yes
  # If we can't run a trivial program, we are probably using a cross compiler.
  if (./conftest; exit) 2>/dev/null; then
    ac_cv_prog_cxx_cross=no
  else
    ac_cv_prog_cxx_cross=yes
  fi
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  ac_cv_prog_cxx_works=no
fi
rm -fr conftest*
ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

echo "$ac_t""$ac_cv_prog_cxx_works" 1>&6
if test $ac_cv_prog_cxx_works = no; then
  { echo "configure: error: installation or configuration problem: C++ compiler cannot create executables." 1>&2; exit 1; }
fi
echo $ac_n "checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
echo "configure:64281: checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) is a cross-compiler" >&5
echo "$ac_t""$ac_cv_prog_cxx_cross" 1>&6
cross_compiling=$ac_cv_prog_cxx_cross

echo $ac_n "checking whether we are using GNU C++""... $ac_c" 1>&6
echo "configure:64286: checking whether we are using GNU C++" >&5
if eval "test \"`echo '$''{'ac_cv_prog_gxx'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.C <<EOF
#ifdef __GNUC__
  yes;
#endif
EOF
if { ac_try='${CXX-g++} -E conftest.C'; { (eval echo configure:64295: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
  ac_cv_prog_gxx=yes
else
  ac_cv_prog_gxx=no
fi
fi

echo "$ac_t""$ac_cv_prog_gxx" 1>&6

if test $ac_cv_prog_gxx = yes; then
  GXX=yes
else
  GXX=
fi

ac_test_CXXFLAGS="${CXXFLAGS+set}"
ac_save_CXXFLAGS="$CXXFLAGS"
CXXFLAGS=
echo $ac_n "checking whether ${CXX-g++} accepts -g""... $ac_c" 1>&6
echo "configure:64314: checking whether ${CXX-g++} accepts -g" >&5
if eval "test \"`echo '$''{'ac_cv_prog_cxx_g'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  echo 'void f(){}' > conftest.cc
if test -z "`${CXX-g++} -g -c conftest.cc 2>&1`"; then
  ac_cv_prog_cxx_g=yes
else
  ac_cv_prog_cxx_g=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_prog_cxx_g" 1>&6
if test "$ac_test_CXXFLAGS" = set; then
  CXXFLAGS="$ac_save_CXXFLAGS"
elif test $ac_cv_prog_cxx_g = yes; then
  if test "$GXX" = yes; then
    CXXFLAGS="-g -O2"
  else
    CXXFLAGS="-g"
  fi
else
  if test "$GXX" = yes; then
    CXXFLAGS="-O2"
  else
    CXXFLAGS=
  fi
fi

for ac_declaration in \
   ''\
   '#include <stdlib.h>' \
   'extern "C" void std::exit (int) throw (); using std::exit;' \
   'extern "C" void std::exit (int); using std::exit;' \
   'extern "C" void exit (int) throw ();' \
   'extern "C" void exit (int);' \
   'void exit (int);'
do
  cat > conftest.$ac_ext <<EOF
#line 64355 "configure"
#include "confdefs.h"
#include <stdlib.h>
$ac_declaration
int main() {
exit (42);
; return 0; }
EOF
if { (eval echo configure:64363: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  :
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  continue
fi
rm -f conftest*
  cat > conftest.$ac_ext <<EOF
#line 64373 "configure"
#include "confdefs.h"
$ac_declaration
int main() {
exit (42);
; return 0; }
EOF
if { (eval echo configure:64380: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  break
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
done
if test -n "$ac_declaration"; then
  echo '#ifdef __cplusplus' >>confdefs.h
  echo $ac_declaration      >>confdefs.h
  echo '#endif'             >>confdefs.h
fi


    echo $ac_n "checking how to run the C++ preprocessor""... $ac_c" 1>&6
echo "configure:64397: checking how to run the C++ preprocessor" >&5
if test -z "$CXXCPP"; then
if eval "test \"`echo '$''{'ac_cv_prog_CXXCPP'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross
  CXXCPP="${CXX-g++} -E"
  cat > conftest.$ac_ext <<EOF
#line 64410 "configure"
#include "confdefs.h"
#include <stdlib.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:64415: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  CXXCPP=/lib/cpp
fi
rm -f conftest*
  ac_cv_prog_CXXCPP="$CXXCPP"
ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross
fi
fi
CXXCPP="$ac_cv_prog_CXXCPP"
echo "$ac_t""$CXXCPP" 1>&6

    php_cxx_done=yes
  fi

fi




echo $ac_n "checking for libedit readline replacement""... $ac_c" 1>&6
echo "configure:64448: checking for libedit readline replacement" >&5
# Check whether --with-libedit or --without-libedit was given.
if test "${with_libedit+set}" = set; then
  withval="$with_libedit"
  PHP_LIBEDIT=$withval
else
  
  PHP_LIBEDIT=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_LIBEDIT=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_LIBEDIT in
shared,*)
  PHP_LIBEDIT=`echo "$PHP_LIBEDIT"|sed 's/^shared,//'`
  ;;
shared)
  PHP_LIBEDIT=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6






echo $ac_n "checking for readline support""... $ac_c" 1>&6
echo "configure:64494: checking for readline support" >&5
# Check whether --with-readline or --without-readline was given.
if test "${with_readline+set}" = set; then
  withval="$with_readline"
  PHP_READLINE=$withval
else
  
  PHP_READLINE=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_READLINE=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_READLINE in
shared,*)
  PHP_READLINE=`echo "$PHP_READLINE"|sed 's/^shared,//'`
  ;;
shared)
  PHP_READLINE=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_READLINE" != "no"; then
  for i in /usr/local /usr $PHP_READLINE; do
    if test -f $i/include/readline/readline.h; then
      READLINE_DIR=$i
    fi
  done

  if test -z "$READLINE_DIR"; then
    { echo "configure: error: Please reinstall readline - I cannot find readline.h" 1>&2; exit 1; }
  fi

  
  if test "$READLINE_DIR/include" != "/usr/include"; then
    
  if test -z "$READLINE_DIR/include" || echo "$READLINE_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$READLINE_DIR/include
  else
    
    ep_dir="`echo $READLINE_DIR/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$READLINE_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi


  echo $ac_n "checking for tgetent in -lncurses""... $ac_c" 1>&6
echo "configure:64581: checking for tgetent in -lncurses" >&5
ac_lib_var=`echo ncurses'_'tgetent | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lncurses  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 64589 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char tgetent();

int main() {
tgetent()
; return 0; }
EOF
if { (eval echo configure:64600: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    
  
  case ncurses in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        READLINE_SHARED_LIBADD="-lncurses $READLINE_SHARED_LIBADD" 
    else
      
  
  case ncurses in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lncurses $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


  
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for tgetent in -ltermcap""... $ac_c" 1>&6
echo "configure:64644: checking for tgetent in -ltermcap" >&5
ac_lib_var=`echo termcap'_'tgetent | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ltermcap  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 64652 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char tgetent();

int main() {
tgetent()
; return 0; }
EOF
if { (eval echo configure:64663: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
      
  
  case termcap in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        READLINE_SHARED_LIBADD="-ltermcap $READLINE_SHARED_LIBADD" 
    else
      
  
  case termcap in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-ltermcap $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    
else
  echo "$ac_t""no" 1>&6
fi

  
fi


  
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
    -L$READLINE_DIR/lib 
   $LDFLAGS"
  echo $ac_n "checking for readline in -lreadline""... $ac_c" 1>&6
echo "configure:64717: checking for readline in -lreadline" >&5
ac_lib_var=`echo readline'_'readline | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lreadline  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 64725 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char readline();

int main() {
readline()
; return 0; }
EOF
if { (eval echo configure:64736: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
    

  if test "$ext_shared" = "yes"; then
    READLINE_SHARED_LIBADD="-lreadline $READLINE_SHARED_LIBADD"
    if test -n "$READLINE_DIR/lib"; then
      
  if test "$READLINE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$READLINE_DIR/lib" || echo "$READLINE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$READLINE_DIR/lib
  else
    
    ep_dir="`echo $READLINE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$READLINE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        READLINE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $READLINE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$READLINE_DIR/lib"; then
    
  if test "$READLINE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$READLINE_DIR/lib" || echo "$READLINE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$READLINE_DIR/lib
  else
    
    ep_dir="`echo $READLINE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$READLINE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case readline in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lreadline $LIBS" 
   ;;
  esac




  fi


  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_readline
    
    { echo "configure: error: readline library not found" 1>&2; exit 1; }
  
  
fi


  
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
    -L$READLINE_DIR/lib 
   $LDFLAGS"
  echo $ac_n "checking for add_history in -lhistory""... $ac_c" 1>&6
echo "configure:64870: checking for add_history in -lhistory" >&5
ac_lib_var=`echo history'_'add_history | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lhistory  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 64878 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char add_history();

int main() {
add_history()
; return 0; }
EOF
if { (eval echo configure:64889: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
    

  if test "$ext_shared" = "yes"; then
    READLINE_SHARED_LIBADD="-lhistory $READLINE_SHARED_LIBADD"
    if test -n "$READLINE_DIR/lib"; then
      
  if test "$READLINE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$READLINE_DIR/lib" || echo "$READLINE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$READLINE_DIR/lib
  else
    
    ep_dir="`echo $READLINE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$READLINE_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        READLINE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $READLINE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$READLINE_DIR/lib"; then
    
  if test "$READLINE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$READLINE_DIR/lib" || echo "$READLINE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$READLINE_DIR/lib
  else
    
    ep_dir="`echo $READLINE_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$READLINE_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case history in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lhistory $LIBS" 
   ;;
  esac




  fi


  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_history
    
    { echo "configure: error: history library required by readline not found" 1>&2; exit 1; }
  
  
fi


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST READLINE_SHARED_LIBADD"


  cat >> confdefs.h <<\EOF
#define HAVE_LIBREADLINE 1
EOF

  
  ext_builddir=ext/readline
  ext_srcdir=$abs_srcdir/ext/readline

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "cli" != "cli"; then

    
  
  case ext/readline in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/readline"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/readline/"; ac_bdir="ext/readline/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in readline.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC readline"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC readline"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/readline in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/readline"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/readline/"; ac_bdir="ext/readline/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in readline.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_readline="$shared_objects_readline $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/readline.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_readline"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/readline.la: $ext_builddir/readline.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/readline.la \$(phplibdir)

$ext_builddir/readline.la: \$(shared_objects_readline) \$(READLINE_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_readline) \$(READLINE_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_READLINE 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "cli" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/readline in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/readline"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/readline/"; ac_bdir="ext/readline/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in readline.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC readline"
    else
      
  
  case ext/readline in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/readline"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/readline/"; ac_bdir="ext/readline/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in readline.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC readline"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"



elif test "$PHP_LIBEDIT" != "no"; then

  for i in /usr/local /usr $PHP_LIBEDIT; do
    if test -f $i/include/readline/readline.h; then
      LIBEDIT_DIR=$i
    fi
  done

  if test -z "$LIBEDIT_DIR"; then
    { echo "configure: error: Please reinstall libedit - I cannot find readline.h" 1>&2; exit 1; }
  fi

  
  if test "$LIBEDIT_DIR/include" != "/usr/include"; then
    
  if test -z "$LIBEDIT_DIR/include" || echo "$LIBEDIT_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$LIBEDIT_DIR/include
  else
    
    ep_dir="`echo $LIBEDIT_DIR/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LIBEDIT_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi


  echo $ac_n "checking for tgetent in -lncurses""... $ac_c" 1>&6
echo "configure:65279: checking for tgetent in -lncurses" >&5
ac_lib_var=`echo ncurses'_'tgetent | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lncurses  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 65287 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char tgetent();

int main() {
tgetent()
; return 0; }
EOF
if { (eval echo configure:65298: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    
  
  case ncurses in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        READLINE_SHARED_LIBADD="-lncurses $READLINE_SHARED_LIBADD" 
    else
      
  
  case ncurses in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lncurses $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


  
else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for tgetent in -ltermcap""... $ac_c" 1>&6
echo "configure:65342: checking for tgetent in -ltermcap" >&5
ac_lib_var=`echo termcap'_'tgetent | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ltermcap  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 65350 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char tgetent();

int main() {
tgetent()
; return 0; }
EOF
if { (eval echo configure:65361: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
      
  
  case termcap in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        READLINE_SHARED_LIBADD="-ltermcap $READLINE_SHARED_LIBADD" 
    else
      
  
  case termcap in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-ltermcap $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    
else
  echo "$ac_t""no" 1>&6
fi

  
fi


  
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
    -L$READLINE_DIR/lib 
   $LDFLAGS"
  echo $ac_n "checking for readline in -ledit""... $ac_c" 1>&6
echo "configure:65415: checking for readline in -ledit" >&5
ac_lib_var=`echo edit'_'readline | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ledit  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 65423 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char readline();

int main() {
readline()
; return 0; }
EOF
if { (eval echo configure:65434: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
    

  if test "$ext_shared" = "yes"; then
    READLINE_SHARED_LIBADD="-ledit $READLINE_SHARED_LIBADD"
    if test -n "$LIBEDIT_DIR/lib"; then
      
  if test "$LIBEDIT_DIR/lib" != "/usr/lib"; then
    
  if test -z "$LIBEDIT_DIR/lib" || echo "$LIBEDIT_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$LIBEDIT_DIR/lib
  else
    
    ep_dir="`echo $LIBEDIT_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LIBEDIT_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        READLINE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $READLINE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$LIBEDIT_DIR/lib"; then
    
  if test "$LIBEDIT_DIR/lib" != "/usr/lib"; then
    
  if test -z "$LIBEDIT_DIR/lib" || echo "$LIBEDIT_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$LIBEDIT_DIR/lib
  else
    
    ep_dir="`echo $LIBEDIT_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LIBEDIT_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case edit in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-ledit $LIBS" 
   ;;
  esac




  fi

  
  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_edit
    
    { echo "configure: error: edit library required by readline not found" 1>&2; exit 1; }
  
  
fi


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST READLINE_SHARED_LIBADD"


  cat >> confdefs.h <<\EOF
#define HAVE_LIBEDIT 1
EOF

  
  ext_builddir=ext/readline
  ext_srcdir=$abs_srcdir/ext/readline

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "cli" != "cli"; then

    
  
  case ext/readline in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/readline"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/readline/"; ac_bdir="ext/readline/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in readline.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC readline"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC readline"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/readline in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/readline"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/readline/"; ac_bdir="ext/readline/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in readline.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_readline="$shared_objects_readline $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/readline.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_readline"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/readline.la: $ext_builddir/readline.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/readline.la \$(phplibdir)

$ext_builddir/readline.la: \$(shared_objects_readline) \$(READLINE_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_readline) \$(READLINE_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_READLINE 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "cli" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/readline in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/readline"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/readline/"; ac_bdir="ext/readline/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in readline.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC readline"
    else
      
  
  case ext/readline in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/readline"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/readline/"; ac_bdir="ext/readline/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in readline.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC readline"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


fi




echo $ac_n "checking for recode support""... $ac_c" 1>&6
echo "configure:65784: checking for recode support" >&5
# Check whether --with-recode or --without-recode was given.
if test "${with_recode+set}" = set; then
  withval="$with_recode"
  PHP_RECODE=$withval
else
  
  PHP_RECODE=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_RECODE=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_RECODE in
shared,*)
  PHP_RECODE=`echo "$PHP_RECODE"|sed 's/^shared,//'`
  ;;
shared)
  PHP_RECODE=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_RECODE" != "no"; then
  RECODE_LIST="$PHP_RECODE /usr /usr/local /opt"

  for i in $RECODE_LIST; do
    if test -f $i/include/recode.h; then
      RECODE_DIR=$i
      RECODE_INC=include
      RECODE_LIB=lib
    fi
    if test -f $i/include/recode/recode.h; then
      RECODE_DIR=$i
      RECODE_INC=include/recode
      RECODE_LIB=lib/recode
    fi
    if test -f $i/recode/include/recode.h; then
      RECODE_DIR=$i/recode
      RECODE_INC=include
      RECODE_LIB=lib
    fi
  done

  if test -z "$RECODE_DIR"; then
    { echo "configure: error: Can not find recode.h anywhere under $RECODE_LIST." 1>&2; exit 1; }
  fi

  
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
    -L$RECODE_DIR/$RECODE_LIB
   $LDFLAGS"
  echo $ac_n "checking for recode_format_table in -lrecode""... $ac_c" 1>&6
echo "configure:65858: checking for recode_format_table in -lrecode" >&5
ac_lib_var=`echo recode'_'recode_format_table | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lrecode  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 65866 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char recode_format_table();

int main() {
recode_format_table()
; return 0; }
EOF
if { (eval echo configure:65877: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
    

  if test "$ext_shared" = "yes"; then
    RECODE_SHARED_LIBADD="-lrecode $RECODE_SHARED_LIBADD"
    if test -n "$RECODE_DIR/$RECODE_LIB"; then
      
  if test "$RECODE_DIR/$RECODE_LIB" != "/usr/lib"; then
    
  if test -z "$RECODE_DIR/$RECODE_LIB" || echo "$RECODE_DIR/$RECODE_LIB" | grep '^/' >/dev/null ; then
    ai_p=$RECODE_DIR/$RECODE_LIB
  else
    
    ep_dir="`echo $RECODE_DIR/$RECODE_LIB|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$RECODE_DIR/$RECODE_LIB\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        RECODE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $RECODE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$RECODE_DIR/$RECODE_LIB"; then
    
  if test "$RECODE_DIR/$RECODE_LIB" != "/usr/lib"; then
    
  if test -z "$RECODE_DIR/$RECODE_LIB" || echo "$RECODE_DIR/$RECODE_LIB" | grep '^/' >/dev/null ; then
    ai_p=$RECODE_DIR/$RECODE_LIB
  else
    
    ep_dir="`echo $RECODE_DIR/$RECODE_LIB|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$RECODE_DIR/$RECODE_LIB\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case recode in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lrecode $LIBS" 
   ;;
  esac




  fi


  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_recode
    
    old_LDFLAGS=$LDFLAGS
    old_LIBS=$LIBS
    LDFLAGS="$LDFLAGS -L$RECODE_DIR/$RECODE_LIB"
    LIBS="$LIBS -lrecode"
    cat > conftest.$ac_ext <<EOF
#line 66004 "configure"
#include "confdefs.h"

char *program_name;
    
int main() {

recode_format_table();
    
; return 0; }
EOF
if { (eval echo configure:66015: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  
      

  if test "$ext_shared" = "yes"; then
    RECODE_SHARED_LIBADD="-lrecode $RECODE_SHARED_LIBADD"
    if test -n "$RECODE_DIR/$RECODE_LIB"; then
      
  if test "$RECODE_DIR/$RECODE_LIB" != "/usr/lib"; then
    
  if test -z "$RECODE_DIR/$RECODE_LIB" || echo "$RECODE_DIR/$RECODE_LIB" | grep '^/' >/dev/null ; then
    ai_p=$RECODE_DIR/$RECODE_LIB
  else
    
    ep_dir="`echo $RECODE_DIR/$RECODE_LIB|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$RECODE_DIR/$RECODE_LIB\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        RECODE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $RECODE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$RECODE_DIR/$RECODE_LIB"; then
    
  if test "$RECODE_DIR/$RECODE_LIB" != "/usr/lib"; then
    
  if test -z "$RECODE_DIR/$RECODE_LIB" || echo "$RECODE_DIR/$RECODE_LIB" | grep '^/' >/dev/null ; then
    ai_p=$RECODE_DIR/$RECODE_LIB
  else
    
    ep_dir="`echo $RECODE_DIR/$RECODE_LIB|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$RECODE_DIR/$RECODE_LIB\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case recode in
  c|c_r|pthread*) ;;
  *) 
      DLIBS="-lrecode $DLIBS" 
   ;;
  esac




  fi


      cat >> confdefs.h <<\EOF
#define HAVE_BROKEN_RECODE 1
EOF

    
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
      { echo "configure: error: I cannot link librecode (-L$RECODE_DIR/$RECODE_LIB -lrecode). Is it installed?" 1>&2; exit 1; }
    
fi
rm -f conftest*
    LIBS=$old_LIBS
    LDFLAGS=$old_LDFLAGS
  
  
fi


  cat >> confdefs.h <<\EOF
#define HAVE_LIBRECODE 1
EOF

  
  if test "$RECODE_DIR/$RECODE_INC" != "/usr/include"; then
    
  if test -z "$RECODE_DIR/$RECODE_INC" || echo "$RECODE_DIR/$RECODE_INC" | grep '^/' >/dev/null ; then
    ai_p=$RECODE_DIR/$RECODE_INC
  else
    
    ep_dir="`echo $RECODE_DIR/$RECODE_INC|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$RECODE_DIR/$RECODE_INC\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST RECODE_SHARED_LIBADD"

  for ac_hdr in stdbool.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:66177: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 66182 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:66187: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

  
  ext_builddir=ext/recode
  ext_srcdir=$abs_srcdir/ext/recode

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/recode in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/recode"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/recode/"; ac_bdir="ext/recode/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in recode.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC recode"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC recode"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/recode in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/recode"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/recode/"; ac_bdir="ext/recode/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in recode.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_recode="$shared_objects_recode $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/recode.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_recode"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/recode.la: $ext_builddir/recode.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/recode.la \$(phplibdir)

$ext_builddir/recode.la: \$(shared_objects_recode) \$(RECODE_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_recode) \$(RECODE_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_RECODE 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/recode in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/recode"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/recode/"; ac_bdir="ext/recode/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in recode.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC recode"
    else
      
  
  case ext/recode in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/recode"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/recode/"; ac_bdir="ext/recode/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in recode.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC recode"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


fi




echo $ac_n "checking whether to enable PHP sessions""... $ac_c" 1>&6
echo "configure:66427: checking whether to enable PHP sessions" >&5
# Check whether --enable-session or --disable-session was given.
if test "${enable_session+set}" = set; then
  enableval="$enable_session"
  PHP_SESSION=$enableval
else
  
  PHP_SESSION=yes

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_SESSION=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SESSION in
shared,*)
  PHP_SESSION=`echo "$PHP_SESSION"|sed 's/^shared,//'`
  ;;
shared)
  PHP_SESSION=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6






echo $ac_n "checking for mm support""... $ac_c" 1>&6
echo "configure:66473: checking for mm support" >&5
# Check whether --with-mm or --without-mm was given.
if test "${with_mm+set}" = set; then
  withval="$with_mm"
  PHP_MM=$withval
else
  
  PHP_MM=no

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_MM=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_MM
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_SESSION" != "no"; then
  
  echo $ac_n "checking whether pwrite works""... $ac_c" 1>&6
echo "configure:66498: checking whether pwrite works" >&5
if eval "test \"`echo '$''{'ac_cv_pwrite'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    
  if test "$cross_compiling" = yes; then
  
    ac_cv_pwrite=no
  
else
  cat > conftest.$ac_ext <<EOF
#line 66510 "configure"
#include "confdefs.h"

#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <unistd.h>
#include <errno.h>

    main() {
    int fd = open("conftest_in", O_WRONLY|O_CREAT, 0600);

    if (fd < 0) exit(1);
    if (pwrite(fd, "text", 4, 0) != 4) exit(1);
    /* Linux glibc breakage until 2.2.5 */
    if (pwrite(fd, "text", 4, -1) != -1 || errno != EINVAL) exit(1);
    exit(0);
    }

  
EOF
if { (eval echo configure:66531: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    ac_cv_pwrite=yes
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    ac_cv_pwrite=no
  
fi
rm -fr conftest*
fi


    if test "$ac_cv_pwrite" = "no"; then
      
  if test "$cross_compiling" = yes; then
  
    ac_cv_pwrite=no
  
else
  cat > conftest.$ac_ext <<EOF
#line 66556 "configure"
#include "confdefs.h"

#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <unistd.h>
#include <errno.h>
ssize_t pwrite(int, void *, size_t, off64_t);
    main() {
    int fd = open("conftest_in", O_WRONLY|O_CREAT, 0600);

    if (fd < 0) exit(1);
    if (pwrite(fd, "text", 4, 0) != 4) exit(1);
    /* Linux glibc breakage until 2.2.5 */
    if (pwrite(fd, "text", 4, -1) != -1 || errno != EINVAL) exit(1);
    exit(0);
    }

  
EOF
if { (eval echo configure:66577: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    ac_cv_pwrite=yes
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    ac_cv_pwrite=no
  
fi
rm -fr conftest*
fi


      if test "$ac_cv_pwrite" = "yes"; then
        ac_cv_pwrite=64
      fi
    fi
  
fi

echo "$ac_t""$ac_cv_pwrite" 1>&6

  if test "$ac_cv_pwrite" != "no"; then
    cat >> confdefs.h <<\EOF
#define HAVE_PWRITE 1
EOF

    if test "$ac_cv_pwrite" = "64"; then
      cat >> confdefs.h <<\EOF
#define PHP_PWRITE_64 1
EOF

    fi
  fi  

  
  echo $ac_n "checking whether pread works""... $ac_c" 1>&6
echo "configure:66618: checking whether pread works" >&5
if eval "test \"`echo '$''{'ac_cv_pread'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    
  echo test > conftest_in
  if test "$cross_compiling" = yes; then
  
    ac_cv_pread=no
  
else
  cat > conftest.$ac_ext <<EOF
#line 66631 "configure"
#include "confdefs.h"

#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <unistd.h>
#include <errno.h>

    main() {
    char buf[3]; 
    int fd = open("conftest_in", O_RDONLY);
    if (fd < 0) exit(1);
    if (pread(fd, buf, 2, 0) != 2) exit(1);
    /* Linux glibc breakage until 2.2.5 */
    if (pread(fd, buf, 2, -1) != -1 || errno != EINVAL) exit(1);
    exit(0);
    }
  
EOF
if { (eval echo configure:66651: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    ac_cv_pread=yes
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    ac_cv_pread=no
  
fi
rm -fr conftest*
fi

  rm -f conftest_in

    if test "$ac_cv_pread" = "no"; then
      
  echo test > conftest_in
  if test "$cross_compiling" = yes; then
  
    ac_cv_pread=no
  
else
  cat > conftest.$ac_ext <<EOF
#line 66678 "configure"
#include "confdefs.h"

#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <unistd.h>
#include <errno.h>
ssize_t pread(int, void *, size_t, off64_t);
    main() {
    char buf[3]; 
    int fd = open("conftest_in", O_RDONLY);
    if (fd < 0) exit(1);
    if (pread(fd, buf, 2, 0) != 2) exit(1);
    /* Linux glibc breakage until 2.2.5 */
    if (pread(fd, buf, 2, -1) != -1 || errno != EINVAL) exit(1);
    exit(0);
    }
  
EOF
if { (eval echo configure:66698: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    ac_cv_pread=yes
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    ac_cv_pread=no
  
fi
rm -fr conftest*
fi

  rm -f conftest_in

      if test "$ac_cv_pread" = "yes"; then
        ac_cv_pread=64
      fi
    fi
  
fi

echo "$ac_t""$ac_cv_pread" 1>&6

  if test "$ac_cv_pread" != "no"; then
    cat >> confdefs.h <<\EOF
#define HAVE_PREAD 1
EOF

    if test "$ac_cv_pread" = "64"; then
      cat >> confdefs.h <<\EOF
#define PHP_PREAD_64 1
EOF

    fi
  fi  

  
  ext_builddir=ext/session
  ext_srcdir=$abs_srcdir/ext/session

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/session in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/session"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/session/"; ac_bdir="ext/session/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in session.c mod_files.c mod_mm.c mod_user.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC session"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC session"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/session in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/session"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/session/"; ac_bdir="ext/session/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in session.c mod_files.c mod_mm.c mod_user.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_session="$shared_objects_session $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/session.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_session"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/session.la: $ext_builddir/session.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/session.la \$(phplibdir)

$ext_builddir/session.la: \$(shared_objects_session) \$(SESSION_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_session) \$(SESSION_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_SESSION 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/session in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/session"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/session/"; ac_bdir="ext/session/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in session.c mod_files.c mod_mm.c mod_user.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC session"
    else
      
  
  case ext/session in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/session"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/session/"; ac_bdir="ext/session/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in session.c mod_files.c mod_mm.c mod_user.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC session"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST SESSION_SHARED_LIBADD"

  cat >> confdefs.h <<\EOF
#define HAVE_PHP_SESSION 1
EOF

fi

if test "$PHP_MM" != "no"; then
  for i in /usr/local /usr $PHP_MM; do
    if test -f "$i/include/mm.h"; then
      MM_DIR=$i
    fi
  done

  if test -z "$MM_DIR" ; then
    { echo "configure: error: cannot find mm library" 1>&2; exit 1; }
  fi
  
  

  if test "$ext_shared" = "yes"; then
    SESSION_SHARED_LIBADD="-lmm $SESSION_SHARED_LIBADD"
    if test -n "$MM_DIR/lib"; then
      
  if test "$MM_DIR/lib" != "/usr/lib"; then
    
  if test -z "$MM_DIR/lib" || echo "$MM_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$MM_DIR/lib
  else
    
    ep_dir="`echo $MM_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MM_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        SESSION_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $SESSION_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$MM_DIR/lib"; then
    
  if test "$MM_DIR/lib" != "/usr/lib"; then
    
  if test -z "$MM_DIR/lib" || echo "$MM_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$MM_DIR/lib
  else
    
    ep_dir="`echo $MM_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MM_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case mm in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lmm $LIBS" 
   ;;
  esac




  fi


  
  if test "$MM_DIR/include" != "/usr/include"; then
    
  if test -z "$MM_DIR/include" || echo "$MM_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$MM_DIR/include
  else
    
    ep_dir="`echo $MM_DIR/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MM_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  cat >> confdefs.h <<\EOF
#define HAVE_LIBMM 1
EOF

fi



echo $ac_n "checking whether to enable shmop support""... $ac_c" 1>&6
echo "configure:67102: checking whether to enable shmop support" >&5
# Check whether --enable-shmop or --disable-shmop was given.
if test "${enable_shmop+set}" = set; then
  enableval="$enable_shmop"
  PHP_SHMOP=$enableval
else
  
  PHP_SHMOP=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_SHMOP=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SHMOP in
shared,*)
  PHP_SHMOP=`echo "$PHP_SHMOP"|sed 's/^shared,//'`
  ;;
shared)
  PHP_SHMOP=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_SHMOP" != "no"; then
  cat >> confdefs.h <<\EOF
#define HAVE_SHMOP 1
EOF

  
  ext_builddir=ext/shmop
  ext_srcdir=$abs_srcdir/ext/shmop

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/shmop in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/shmop"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/shmop/"; ac_bdir="ext/shmop/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in shmop.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC shmop"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC shmop"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/shmop in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/shmop"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/shmop/"; ac_bdir="ext/shmop/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in shmop.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_shmop="$shared_objects_shmop $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/shmop.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_shmop"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/shmop.la: $ext_builddir/shmop.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/shmop.la \$(phplibdir)

$ext_builddir/shmop.la: \$(shared_objects_shmop) \$(SHMOP_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_shmop) \$(SHMOP_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_SHMOP 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/shmop in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/shmop"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/shmop/"; ac_bdir="ext/shmop/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in shmop.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC shmop"
    else
      
  
  case ext/shmop in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/shmop"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/shmop/"; ac_bdir="ext/shmop/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in shmop.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC shmop"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


fi




echo $ac_n "checking for SNMP support""... $ac_c" 1>&6
echo "configure:67364: checking for SNMP support" >&5
# Check whether --with-snmp or --without-snmp was given.
if test "${with_snmp+set}" = set; then
  withval="$with_snmp"
  PHP_SNMP=$withval
else
  
  PHP_SNMP=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_SNMP=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SNMP in
shared,*)
  PHP_SNMP=`echo "$PHP_SNMP"|sed 's/^shared,//'`
  ;;
shared)
  PHP_SNMP=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_SNMP" != "no"; then

        if test "$PHP_SNMP" = "yes"; then
    # Extract the first word of "net-snmp-config", so it can be a program name with args.
set dummy net-snmp-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:67413: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_SNMP_CONFIG'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$SNMP_CONFIG" in
  /*)
  ac_cv_path_SNMP_CONFIG="$SNMP_CONFIG" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_SNMP_CONFIG="$SNMP_CONFIG" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="/usr/local/bin:$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_SNMP_CONFIG="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
fi
SNMP_CONFIG="$ac_cv_path_SNMP_CONFIG"
if test -n "$SNMP_CONFIG"; then
  echo "$ac_t""$SNMP_CONFIG" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  else
    SNMP_CONFIG="$PHP_SNMP/bin/net-snmp-config"
  fi

  if test -x "$SNMP_CONFIG"; then
    SNMP_LIBS=`$SNMP_CONFIG --netsnmp-libs`
    SNMP_LIBS="$SNMP_LIBS `$SNMP_CONFIG --external-libs`"
    SNMP_PREFIX=`$SNMP_CONFIG --prefix`

    if test -n "$SNMP_LIBS" && test -n "$SNMP_PREFIX"; then
      
  if test "${SNMP_PREFIX}/include" != "/usr/include"; then
    
  if test -z "${SNMP_PREFIX}/include" || echo "${SNMP_PREFIX}/include" | grep '^/' >/dev/null ; then
    ai_p=${SNMP_PREFIX}/include
  else
    
    ep_dir="`echo $SNMP_PREFIX/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"${SNMP_PREFIX}/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      
  for ac_i in $SNMP_LIBS; do
    case $ac_i in
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SNMP_SHARED_LIBADD="$SNMP_SHARED_LIBADD -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        SNMP_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $SNMP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

      cat >> confdefs.h <<\EOF
#define HAVE_NET_SNMP 1
EOF

      SNMP_LIBNAME=netsnmp
    else
      { echo "configure: error: Could not find the required paths. Please check your net-snmp installation." 1>&2; exit 1; }
    fi
  else 

            
    if test "$PHP_SNMP" = "yes"; then
      for i in /usr/include /usr/local/include; do
        test -f $i/snmp.h                       && SNMP_INCDIR=$i
        test -f $i/ucd-snmp/snmp.h              && SNMP_INCDIR=$i/ucd-snmp
        test -f $i/snmp/snmp.h                  && SNMP_INCDIR=$i/snmp
        test -f $i/snmp/include/ucd-snmp/snmp.h && SNMP_INCDIR=$i/snmp/include/ucd-snmp
      done
      for i in /usr /usr/snmp /usr/local /usr/local/snmp; do
        test -f $i/lib/libsnmp.a -o -f $i/lib/libsnmp.$SHLIB_SUFFIX_NAME && SNMP_LIBDIR=$i/lib
      done
    else
      SNMP_INCDIR=$PHP_SNMP/include
      test -d $PHP_SNMP/include/ucd-snmp && SNMP_INCDIR=$PHP_SNMP/include/ucd-snmp
      SNMP_LIBDIR=$PHP_SNMP/lib
    fi

    if test -z "$SNMP_INCDIR"; then
      { echo "configure: error: snmp.h not found. Check your SNMP installation." 1>&2; exit 1; }
    elif test -z "$SNMP_LIBDIR"; then
      { echo "configure: error: libsnmp not found. Check your SNMP installation." 1>&2; exit 1; }
    fi

    old_CPPFLAGS=$CPPFLAGS
    CPPFLAGS=-I$SNMP_INCDIR
    for ac_hdr in default_store.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:67597: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 67602 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:67607: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

    if test "$ac_cv_header_default_store_h" = "yes"; then
      echo $ac_n "checking for OpenSSL support in SNMP libraries""... $ac_c" 1>&6
echo "configure:67635: checking for OpenSSL support in SNMP libraries" >&5
      cat > conftest.$ac_ext <<EOF
#line 67637 "configure"
#include "confdefs.h"

#include <ucd-snmp-config.h>
#if USE_OPENSSL
        yes
#endif
      
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  
        SNMP_SSL=yes
      
else
  rm -rf conftest*
  
        SNMP_SSL=no
      
fi
rm -f conftest*

    fi
    CPPFLAGS=$old_CPPFLAGS
    echo "$ac_t""$SNMP_SSL" 1>&6
  
    if test "$SNMP_SSL" = "yes"; then
      if test "$PHP_OPENSSL" != "no"; then
        
  
  case ssl in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SNMP_SHARED_LIBADD="$SNMP_SHARED_LIBADD -lssl" 
    else
      
  
  case ssl in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -lssl" 
   ;;
  esac


    fi
   ;;
  esac


        
  
  case crypto in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SNMP_SHARED_LIBADD="$SNMP_SHARED_LIBADD -lcrypto" 
    else
      
  
  case crypto in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -lcrypto" 
   ;;
  esac


    fi
   ;;
  esac


      else
        { echo "configure: error: The UCD-SNMP in this system is built with SSL support. 

        Add --with-openssl<=DIR> to your configure line." 1>&2; exit 1; }
      fi
    fi

    echo $ac_n "checking for kstat_read in -lkstat""... $ac_c" 1>&6
echo "configure:67720: checking for kstat_read in -lkstat" >&5
ac_lib_var=`echo kstat'_'kstat_read | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lkstat  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 67728 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char kstat_read();

int main() {
kstat_read()
; return 0; }
EOF
if { (eval echo configure:67739: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
   
  
  case kstat in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SNMP_SHARED_LIBADD="-lkstat $SNMP_SHARED_LIBADD" 
    else
      
  
  case kstat in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lkstat $LIBS" 
   ;;
  esac


    fi
   ;;
  esac

 
else
  echo "$ac_t""no" 1>&6
fi

    
  if test "$SNMP_INCDIR" != "/usr/include"; then
    
  if test -z "$SNMP_INCDIR" || echo "$SNMP_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$SNMP_INCDIR
  else
    
    ep_dir="`echo $SNMP_INCDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$SNMP_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    

  if test "$ext_shared" = "yes"; then
    SNMP_SHARED_LIBADD="-lsnmp $SNMP_SHARED_LIBADD"
    if test -n "$SNMP_LIBDIR"; then
      
  if test "$SNMP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$SNMP_LIBDIR" || echo "$SNMP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$SNMP_LIBDIR
  else
    
    ep_dir="`echo $SNMP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$SNMP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        SNMP_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $SNMP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$SNMP_LIBDIR"; then
    
  if test "$SNMP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$SNMP_LIBDIR" || echo "$SNMP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$SNMP_LIBDIR
  else
    
    ep_dir="`echo $SNMP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$SNMP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case snmp in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsnmp $LIBS" 
   ;;
  esac




  fi


    SNMP_LIBNAME=snmp
  fi

  for ac_func in snmp_parse_oid
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:67914: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 67919 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:67942: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


  
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
    $SNMP_SHARED_LIBADD
   $LDFLAGS"
  echo $ac_n "checking for init_snmp in -l$SNMP_LIBNAME""... $ac_c" 1>&6
echo "configure:67973: checking for init_snmp in -l$SNMP_LIBNAME" >&5
ac_lib_var=`echo $SNMP_LIBNAME'_'init_snmp | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$SNMP_LIBNAME  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 67981 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char init_snmp();

int main() {
init_snmp()
; return 0; }
EOF
if { (eval echo configure:67992: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
    cat >> confdefs.h <<\EOF
#define HAVE_SNMP 1
EOF

  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_$SNMP_LIBNAME
    
    { echo "configure: error: SNMP sanity check failed. Please check config.log for more information." 1>&2; exit 1; }
  
  
fi


  
  ext_builddir=ext/snmp
  ext_srcdir=$abs_srcdir/ext/snmp

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/snmp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/snmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/snmp/"; ac_bdir="ext/snmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in snmp.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC snmp"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC snmp"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/snmp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/snmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/snmp/"; ac_bdir="ext/snmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in snmp.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_snmp="$shared_objects_snmp $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/snmp.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_snmp"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/snmp.la: $ext_builddir/snmp.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/snmp.la \$(phplibdir)

$ext_builddir/snmp.la: \$(shared_objects_snmp) \$(SNMP_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_snmp) \$(SNMP_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_SNMP 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/snmp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/snmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/snmp/"; ac_bdir="ext/snmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in snmp.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC snmp"
    else
      
  
  case ext/snmp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/snmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/snmp/"; ac_bdir="ext/snmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in snmp.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC snmp"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST SNMP_SHARED_LIBADD"

fi


echo $ac_n "checking whether to enable UCD SNMP hack""... $ac_c" 1>&6
echo "configure:68243: checking whether to enable UCD SNMP hack" >&5
# Check whether --enable-ucd-snmp-hack or --disable-ucd-snmp-hack was given.
if test "${enable_ucd_snmp_hack+set}" = set; then
  enableval="$enable_ucd_snmp_hack"
  
  if test "$enableval" = "yes" ; then
    cat >> confdefs.h <<\EOF
#define UCD_SNMP_HACK 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

else
  
  echo "$ac_t""no" 1>&6

fi





echo $ac_n "checking whether to enable sockets support""... $ac_c" 1>&6
echo "configure:68269: checking whether to enable sockets support" >&5
# Check whether --enable-sockets or --disable-sockets was given.
if test "${enable_sockets+set}" = set; then
  enableval="$enable_sockets"
  PHP_SOCKETS=$enableval
else
  
  PHP_SOCKETS=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_SOCKETS=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SOCKETS in
shared,*)
  PHP_SOCKETS=`echo "$PHP_SOCKETS"|sed 's/^shared,//'`
  ;;
shared)
  PHP_SOCKETS=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_SOCKETS" != "no"; then
    echo $ac_n "checking for struct cmsghdr""... $ac_c" 1>&6
echo "configure:68314: checking for struct cmsghdr" >&5
if eval "test \"`echo '$''{'ac_cv_cmsghdr'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    cat > conftest.$ac_ext <<EOF
#line 68320 "configure"
#include "confdefs.h"

#include <sys/types.h>
#include <sys/socket.h>
int main() {
struct cmsghdr s; s
; return 0; }
EOF
if { (eval echo configure:68329: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_cmsghdr=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_cmsghdr=no
fi
rm -f conftest*
  
fi

echo "$ac_t""$ac_cv_cmsghdr" 1>&6

  if test "$ac_cv_cmsghdr" = yes; then
    cat >> confdefs.h <<\EOF
#define HAVE_CMSGHDR 1
EOF

  fi 

  for ac_func in hstrerror
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:68354: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 68359 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:68382: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

  for ac_hdr in netdb.h netinet/tcp.h sys/un.h errno.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:68410: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 68415 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:68420: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

  cat > conftest.$ac_ext <<EOF
#line 68447 "configure"
#include "confdefs.h"

#include <sys/types.h>
#include <sys/socket.h>
  
int main() {
static struct msghdr tp; int n = (int) tp.msg_flags; return n
; return 0; }
EOF
if { (eval echo configure:68457: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  :
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  cat >> confdefs.h <<\EOF
#define MISSING_MSGHDR_MSGFLAGS 1
EOF

  
fi
rm -f conftest*
  cat >> confdefs.h <<\EOF
#define HAVE_SOCKETS 1
EOF


  
  ext_builddir=ext/sockets
  ext_srcdir=$abs_srcdir/ext/sockets

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/sockets in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sockets"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sockets/"; ac_bdir="ext/sockets/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sockets.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC sockets"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC sockets"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/sockets in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sockets"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sockets/"; ac_bdir="ext/sockets/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in sockets.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_sockets="$shared_objects_sockets $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/sockets.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sockets"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/sockets.la: $ext_builddir/sockets.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/sockets.la \$(phplibdir)

$ext_builddir/sockets.la: \$(shared_objects_sockets) \$(SOCKETS_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_sockets) \$(SOCKETS_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_SOCKETS 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/sockets in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sockets"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sockets/"; ac_bdir="ext/sockets/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sockets.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC sockets"
    else
      
  
  case ext/sockets in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sockets"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sockets/"; ac_bdir="ext/sockets/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sockets.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC sockets"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


fi







for ac_func in getcwd getwd asinh acosh atanh log1p hypot
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:68694: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 68699 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:68722: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done




  if test "$ac_cv_func_crypt" = "no"; then
  echo $ac_n "checking for crypt in -lcrypt""... $ac_c" 1>&6
echo "configure:68751: checking for crypt in -lcrypt" >&5
ac_lib_var=`echo crypt'_'crypt | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lcrypt  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 68759 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char crypt();

int main() {
crypt()
; return 0; }
EOF
if { (eval echo configure:68770: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LIBS="-lcrypt $LIBS -lcrypt"
    cat >> confdefs.h <<\EOF
#define HAVE_CRYPT 1
EOF

  
else
  echo "$ac_t""no" 1>&6
fi

  fi
  
  echo $ac_n "checking for standard DES crypt""... $ac_c" 1>&6
echo "configure:68799: checking for standard DES crypt" >&5
if eval "test \"`echo '$''{'ac_cv_crypt_des'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  if test "$cross_compiling" = yes; then
  
    ac_cv_crypt_des=yes
  
else
  cat > conftest.$ac_ext <<EOF
#line 68810 "configure"
#include "confdefs.h"

#if HAVE_CRYPT_H
#include <crypt.h>
#endif

main() {
#if HAVE_CRYPT
    exit (strcmp((char *)crypt("rasmuslerdorf","rl"),"rl.3StKT.4T8M"));
#else
	exit(0);
#endif
}
EOF
if { (eval echo configure:68825: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    ac_cv_crypt_des=yes
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    ac_cv_crypt_des=no
  
fi
rm -fr conftest*
fi

  
fi

echo "$ac_t""$ac_cv_crypt_des" 1>&6
  if test "$ac_cv_crypt_des" = "yes"; then
    ac_result=1
  else
    ac_result=0
  fi
  cat >> confdefs.h <<EOF
#define PHP_STD_DES_CRYPT $ac_result
EOF


  echo $ac_n "checking for extended DES crypt""... $ac_c" 1>&6
echo "configure:68856: checking for extended DES crypt" >&5
if eval "test \"`echo '$''{'ac_cv_crypt_ext_des'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  if test "$cross_compiling" = yes; then
  
    ac_cv_crypt_ext_des=no
  
else
  cat > conftest.$ac_ext <<EOF
#line 68867 "configure"
#include "confdefs.h"

#if HAVE_CRYPT_H
#include <crypt.h>
#endif

main() {
#if HAVE_CRYPT
    exit (strcmp((char *)crypt("rasmuslerdorf","_J9..rasm"),"_J9..rasmBYk8r9AiWNc"));
#else
	exit(0);
#endif
}
EOF
if { (eval echo configure:68882: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    ac_cv_crypt_ext_des=yes
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    ac_cv_crypt_ext_des=no
  
fi
rm -fr conftest*
fi

  
fi

echo "$ac_t""$ac_cv_crypt_ext_des" 1>&6
  if test "$ac_cv_crypt_ext_des" = "yes"; then
    ac_result=1
  else
    ac_result=0
  fi
  cat >> confdefs.h <<EOF
#define PHP_EXT_DES_CRYPT $ac_result
EOF


  echo $ac_n "checking for MD5 crypt""... $ac_c" 1>&6
echo "configure:68913: checking for MD5 crypt" >&5
if eval "test \"`echo '$''{'ac_cv_crypt_md5'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  if test "$cross_compiling" = yes; then
  
    ac_cv_crypt_md5=no
  
else
  cat > conftest.$ac_ext <<EOF
#line 68924 "configure"
#include "confdefs.h"

#if HAVE_CRYPT_H
#include <crypt.h>
#endif

main() {
#if HAVE_CRYPT
    char salt[15], answer[40];

    salt[0]='$'; salt[1]='1'; salt[2]='$'; 
    salt[3]='r'; salt[4]='a'; salt[5]='s';
    salt[6]='m'; salt[7]='u'; salt[8]='s';
    salt[9]='l'; salt[10]='e'; salt[11]='$';
    salt[12]='\0';
    strcpy(answer,salt);
    strcat(answer,"rISCgZzpwk3UhDidwXvin0");
    exit (strcmp((char *)crypt("rasmuslerdorf",salt),answer));
#else
	exit(0);
#endif
}
EOF
if { (eval echo configure:68948: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    ac_cv_crypt_md5=yes
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    ac_cv_crypt_md5=no
  
fi
rm -fr conftest*
fi

  
fi

echo "$ac_t""$ac_cv_crypt_md5" 1>&6
  if test "$ac_cv_crypt_md5" = "yes"; then
    ac_result=1
  else
    if test "$ac_cv_crypt_des" != "yes"; then
      
  DEBUG_LOG=debug.log
  cat >debug.log <<X
CONFIGURE:  $CONFIGURE_COMMAND
CC:         $CC
CFLAGS:     $CFLAGS
CPPFLAGS:   $CPPFLAGS
CXX:        $CXX
CXXFLAGS:   $CXXFLAGS
INCLUDES:   $INCLUDES
LDFLAGS:    $LDFLAGS
LIBS:       $LIBS
DLIBS:      $DLIBS
SAPI:       $PHP_SAPI
PHP_RPATHS: $PHP_RPATHS
uname -a:   `uname -a`

X
    cat >conftest.$ac_ext <<X
main()
{
  exit(0);
}
X
    (eval echo \"$ac_link\"; eval $ac_link && ./conftest) >>debug.log 2>&1
    rm -fr conftest*

    fi
    ac_result=0
  fi
  cat >> confdefs.h <<EOF
#define PHP_MD5_CRYPT $ac_result
EOF


  echo $ac_n "checking for Blowfish crypt""... $ac_c" 1>&6
echo "configure:69008: checking for Blowfish crypt" >&5
if eval "test \"`echo '$''{'ac_cv_crypt_blowfish'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  if test "$cross_compiling" = yes; then
  
    ac_cv_crypt_blowfish=no
  
else
  cat > conftest.$ac_ext <<EOF
#line 69019 "configure"
#include "confdefs.h"

#if HAVE_CRYPT_H
#include <crypt.h>
#endif

main() {
#if HAVE_CRYPT
    char salt[30], answer[70];
    
    salt[0]='$'; salt[1]='2'; salt[2]='a'; salt[3]='$'; salt[4]='0'; salt[5]='7'; salt[6]='$'; salt[7]='\0';
    strcat(salt,"rasmuslerd............");
    strcpy(answer,salt);
    strcpy(&answer[29],"nIdrcHdxcUxWomQX9j6kvERCFjTg7Ra");
    exit (strcmp((char *)crypt("rasmuslerdorf",salt),answer));
#else
	exit(0);
#endif
}
EOF
if { (eval echo configure:69040: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    ac_cv_crypt_blowfish=yes
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    ac_cv_crypt_blowfish=no
  
fi
rm -fr conftest*
fi

  
fi

echo "$ac_t""$ac_cv_crypt_blowfish" 1>&6
  if test "$ac_cv_crypt_blowfish" = "yes"; then
    ac_result=1
  else
    ac_result=0
  fi
  cat >> confdefs.h <<EOF
#define PHP_BLOWFISH_CRYPT $ac_result
EOF



  echo $ac_n "checking whether flush should be called explicitly after a bufferered io""... $ac_c" 1>&6
echo "configure:69072: checking whether flush should be called explicitly after a bufferered io" >&5
if eval "test \"`echo '$''{'ac_cv_flush_io'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  if test "$cross_compiling" = yes; then
  
  ac_cv_flush_io=no

else
  cat > conftest.$ac_ext <<EOF
#line 69083 "configure"
#include "confdefs.h"

#include <stdio.h>
#include <stdlib.h>

int main(int argc, char **argv)
{
	char *filename = tmpnam(NULL);
	char buffer[64];
	int result = 0;
	
	FILE *fp = fopen(filename, "wb");
	if (NULL == fp)
		return 0;
	fputs("line 1\n", fp);
	fputs("line 2\n", fp);
	fclose(fp);
	
	fp = fopen(filename, "rb+");
	if (NULL == fp)
		return 0;
	fgets(buffer, sizeof(buffer), fp);
	fputs("line 3\n", fp);
	rewind(fp);
	fgets(buffer, sizeof(buffer), fp);
	if (0 != strcmp(buffer, "line 1\n"))
		result = 1;
	fgets(buffer, sizeof(buffer), fp);
	if (0 != strcmp(buffer, "line 3\n"))
		result = 1;
	fclose(fp);
	unlink(filename);

	exit(result);
}

EOF
if { (eval echo configure:69121: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
  ac_cv_flush_io=no

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  ac_cv_flush_io=yes

fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_flush_io" 1>&6
  if test "$ac_cv_flush_io" = "yes"; then
    cat >> confdefs.h <<\EOF
#define HAVE_FLUSHIO 1
EOF

  fi



# Check whether --with-regex or --without-regex was given.
if test "${with_regex+set}" = set; then
  withval="$with_regex"
  
  case $withval in 
    system)
      if test "$PHP_SAPI" = "apache" || test "$PHP_SAPI" = "apache2filter"; then
        REGEX_TYPE=php
      else
        REGEX_TYPE=system
      fi
      ;;
    apache)
      REGEX_TYPE=apache
      ;;
    php)
      REGEX_TYPE=php
      ;;
    *)
      REGEX_TYPE=php
      echo "configure: warning: Invalid regex library type. Using default value: php" 1>&2
      ;;
  esac

else
  
  REGEX_TYPE=php

fi


echo $ac_n "checking for working fnmatch""... $ac_c" 1>&6
echo "configure:69181: checking for working fnmatch" >&5
if eval "test \"`echo '$''{'ac_cv_func_fnmatch_works'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  # Some versions of Solaris or SCO have a broken fnmatch function.
# So we run a test program.  If we are cross-compiling, take no chance.
# Thanks to John Oleynick and Franc,ois Pinard for this test.
if test "$cross_compiling" = yes; then
  ac_cv_func_fnmatch_works=no
else
  cat > conftest.$ac_ext <<EOF
#line 69192 "configure"
#include "confdefs.h"
main() { exit (fnmatch ("a*", "abc", 0) != 0); }
EOF
if { (eval echo configure:69196: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_func_fnmatch_works=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_func_fnmatch_works=no
fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_func_fnmatch_works" 1>&6
if test $ac_cv_func_fnmatch_works = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_FNMATCH 1
EOF

fi
	


for ac_func in glob strfmon
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:69223: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 69228 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:69251: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


if test "$PHP_SAPI" = "cgi" -o "$PHP_SAPI" = "cli" -o "$PHP_SAPI" = "embed"; then
  cat >> confdefs.h <<\EOF
#define ENABLE_CHROOT_FUNC 1
EOF

fi


  ext_builddir=ext/standard
  ext_srcdir=$abs_srcdir/ext/standard

  ac_extra=

  if test "" != "shared" && test "" != "yes" && test "" != "cli"; then

    
  
  case ext/standard in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/standard"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/standard/"; ac_bdir="ext/standard/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in array.c base64.c basic_functions.c browscap.c crc32.c crypt.c \
                            cyr_convert.c datetime.c dir.c dl.c dns.c exec.c file.c filestat.c \
                            flock_compat.c formatted_print.c fsock.c head.c html.c image.c \
                            info.c iptc.c lcg.c link.c mail.c math.c md5.c metaphone.c \
                            microtime.c pack.c pageinfo.c parsedate.c quot_print.c rand.c \
                            reg.c soundex.c string.c scanf.c syslog.c type.c uniqid.c url.c \
                            url_scanner.c var.c versioning.c assert.c strnatcmp.c levenshtein.c \
                            incomplete_class.c url_scanner_ex.c ftp_fopen_wrapper.c \
                            http_fopen_wrapper.c php_fopen_wrapper.c credits.c css.c \
                            var_unserializer.c ftok.c aggregation.c sha1.c ; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC standard"
    if test "" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC standard"
    fi
  else
    if test "" = "shared" || test "" = "yes"; then
      
  case ext/standard in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/standard"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/standard/"; ac_bdir="ext/standard/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in array.c base64.c basic_functions.c browscap.c crc32.c crypt.c \
                            cyr_convert.c datetime.c dir.c dl.c dns.c exec.c file.c filestat.c \
                            flock_compat.c formatted_print.c fsock.c head.c html.c image.c \
                            info.c iptc.c lcg.c link.c mail.c math.c md5.c metaphone.c \
                            microtime.c pack.c pageinfo.c parsedate.c quot_print.c rand.c \
                            reg.c soundex.c string.c scanf.c syslog.c type.c uniqid.c url.c \
                            url_scanner.c var.c versioning.c assert.c strnatcmp.c levenshtein.c \
                            incomplete_class.c url_scanner_ex.c ftp_fopen_wrapper.c \
                            http_fopen_wrapper.c php_fopen_wrapper.c credits.c css.c \
                            var_unserializer.c ftok.c aggregation.c sha1.c ; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_standard="$shared_objects_standard $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/standard.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_standard"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/standard.la: $ext_builddir/standard.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/standard.la \$(phplibdir)

$ext_builddir/standard.la: \$(shared_objects_standard) \$(STANDARD_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_standard) \$(STANDARD_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_STANDARD 1
EOF

    fi
  fi

  if test "" != "shared" && test "" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/standard in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/standard"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/standard/"; ac_bdir="ext/standard/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in array.c base64.c basic_functions.c browscap.c crc32.c crypt.c \
                            cyr_convert.c datetime.c dir.c dl.c dns.c exec.c file.c filestat.c \
                            flock_compat.c formatted_print.c fsock.c head.c html.c image.c \
                            info.c iptc.c lcg.c link.c mail.c math.c md5.c metaphone.c \
                            microtime.c pack.c pageinfo.c parsedate.c quot_print.c rand.c \
                            reg.c soundex.c string.c scanf.c syslog.c type.c uniqid.c url.c \
                            url_scanner.c var.c versioning.c assert.c strnatcmp.c levenshtein.c \
                            incomplete_class.c url_scanner_ex.c ftp_fopen_wrapper.c \
                            http_fopen_wrapper.c php_fopen_wrapper.c credits.c css.c \
                            var_unserializer.c ftok.c aggregation.c sha1.c ; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC standard"
    else
      
  
  case ext/standard in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/standard"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/standard/"; ac_bdir="ext/standard/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in array.c base64.c basic_functions.c browscap.c crc32.c crypt.c \
                            cyr_convert.c datetime.c dir.c dl.c dns.c exec.c file.c filestat.c \
                            flock_compat.c formatted_print.c fsock.c head.c html.c image.c \
                            info.c iptc.c lcg.c link.c mail.c math.c md5.c metaphone.c \
                            microtime.c pack.c pageinfo.c parsedate.c quot_print.c rand.c \
                            reg.c soundex.c string.c scanf.c syslog.c type.c uniqid.c url.c \
                            url_scanner.c var.c versioning.c assert.c strnatcmp.c levenshtein.c \
                            incomplete_class.c url_scanner_ex.c ftp_fopen_wrapper.c \
                            http_fopen_wrapper.c php_fopen_wrapper.c credits.c css.c \
                            var_unserializer.c ftok.c aggregation.c sha1.c ; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC standard"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"




  src=$ext_srcdir/Makefile.frag
  ac_srcdir=$ext_srcdir
  ac_builddir=$ext_builddir
  sed -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments





echo $ac_n "checking for libswf support""... $ac_c" 1>&6
echo "configure:69539: checking for libswf support" >&5
# Check whether --with-swf or --without-swf was given.
if test "${with_swf+set}" = set; then
  withval="$with_swf"
  PHP_SWF=$withval
else
  
  PHP_SWF=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_SWF=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SWF in
shared,*)
  PHP_SWF=`echo "$PHP_SWF"|sed 's/^shared,//'`
  ;;
shared)
  PHP_SWF=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_SWF" != "no"; then
  if test -r $PHP_SWF/lib/libswf.a; then
    SWF_DIR=$PHP_SWF
  else
    echo $ac_n "checking for libswf in default path""... $ac_c" 1>&6
echo "configure:69587: checking for libswf in default path" >&5
    for i in /usr/local /usr; do
      if test -r $i/lib/libswf.a; then
        SWF_DIR=$i
        echo "$ac_t""found in $i" 1>&6
      fi
    done
  fi

  if test -z "$SWF_DIR"; then
    echo "$ac_t""not found" 1>&6
    { echo "configure: error: Please reinstall the libswf distribution -
   swf.h should be <swf-dir>/include and
   libswf.a should be in <swf-dir>/lib" 1>&2; exit 1; }
  fi

  
  if test "$SWF_DIR/include" != "/usr/include"; then
    
  if test -z "$SWF_DIR/include" || echo "$SWF_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$SWF_DIR/include
  else
    
    ep_dir="`echo $SWF_DIR/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$SWF_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST SWF_SHARED_LIBADD"

  

  if test "$ext_shared" = "yes"; then
    SWF_SHARED_LIBADD="-lswf $SWF_SHARED_LIBADD"
    if test -n "$SWF_DIR/lib"; then
      
  if test "$SWF_DIR/lib" != "/usr/lib"; then
    
  if test -z "$SWF_DIR/lib" || echo "$SWF_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$SWF_DIR/lib
  else
    
    ep_dir="`echo $SWF_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$SWF_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        SWF_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $SWF_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$SWF_DIR/lib"; then
    
  if test "$SWF_DIR/lib" != "/usr/lib"; then
    
  if test -z "$SWF_DIR/lib" || echo "$SWF_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$SWF_DIR/lib
  else
    
    ep_dir="`echo $SWF_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$SWF_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case swf in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lswf $LIBS" 
   ;;
  esac




  fi


  cat >> confdefs.h <<\EOF
#define HAVE_SWF 1
EOF


  
  ext_builddir=ext/swf
  ext_srcdir=$abs_srcdir/ext/swf

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/swf in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/swf"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/swf/"; ac_bdir="ext/swf/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in swf.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC swf"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC swf"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/swf in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/swf"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/swf/"; ac_bdir="ext/swf/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in swf.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_swf="$shared_objects_swf $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/swf.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_swf"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/swf.la: $ext_builddir/swf.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/swf.la \$(phplibdir)

$ext_builddir/swf.la: \$(shared_objects_swf) \$(SWF_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_swf) \$(SWF_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_SWF 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/swf in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/swf"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/swf/"; ac_bdir="ext/swf/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in swf.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC swf"
    else
      
  
  case ext/swf in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/swf"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/swf/"; ac_bdir="ext/swf/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in swf.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC swf"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


fi




echo $ac_n "checking for Sybase support""... $ac_c" 1>&6
echo "configure:69953: checking for Sybase support" >&5
# Check whether --with-sybase or --without-sybase was given.
if test "${with_sybase+set}" = set; then
  withval="$with_sybase"
  PHP_SYBASE=$withval
else
  
  PHP_SYBASE=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_SYBASE=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SYBASE in
shared,*)
  PHP_SYBASE=`echo "$PHP_SYBASE"|sed 's/^shared,//'`
  ;;
shared)
  PHP_SYBASE=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6





if test "$PHP_SYBASE" != "no"; then
  if test "$PHP_SYBASE" = "yes"; then
    SYBASE_INCDIR=/home/sybase/include
    SYBASE_LIBDIR=/home/sybase/lib
  else
    SYBASE_INCDIR=$PHP_SYBASE/include
    SYBASE_LIBDIR=$PHP_SYBASE/lib
  fi
  
  if test "$SYBASE_INCDIR" != "/usr/include"; then
    
  if test -z "$SYBASE_INCDIR" || echo "$SYBASE_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$SYBASE_INCDIR
  else
    
    ep_dir="`echo $SYBASE_INCDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$SYBASE_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  

  if test "$ext_shared" = "yes"; then
    SYBASE_SHARED_LIBADD="-lsybdb $SYBASE_SHARED_LIBADD"
    if test -n "$SYBASE_LIBDIR"; then
      
  if test "$SYBASE_LIBDIR" != "/usr/lib"; then
    
  if test -z "$SYBASE_LIBDIR" || echo "$SYBASE_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$SYBASE_LIBDIR
  else
    
    ep_dir="`echo $SYBASE_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$SYBASE_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        SYBASE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $SYBASE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$SYBASE_LIBDIR"; then
    
  if test "$SYBASE_LIBDIR" != "/usr/lib"; then
    
  if test -z "$SYBASE_LIBDIR" || echo "$SYBASE_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$SYBASE_LIBDIR
  else
    
    ep_dir="`echo $SYBASE_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$SYBASE_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case sybdb in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsybdb $LIBS" 
   ;;
  esac




  fi


  
  ext_builddir=ext/sybase
  ext_srcdir=$abs_srcdir/ext/sybase

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/sybase in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sybase"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sybase/"; ac_bdir="ext/sybase/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_sybase_db.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC sybase"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC sybase"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/sybase in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sybase"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sybase/"; ac_bdir="ext/sybase/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_sybase_db.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_sybase="$shared_objects_sybase $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/sybase.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sybase"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/sybase.la: $ext_builddir/sybase.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/sybase.la \$(phplibdir)

$ext_builddir/sybase.la: \$(shared_objects_sybase) \$(SYBASE_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_sybase) \$(SYBASE_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_SYBASE 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/sybase in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sybase"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sybase/"; ac_bdir="ext/sybase/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_sybase_db.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC sybase"
    else
      
  
  case ext/sybase in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sybase"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sybase/"; ac_bdir="ext/sybase/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_sybase_db.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC sybase"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


  echo $ac_n "checking for dnet_addr in -ldnet_stub""... $ac_c" 1>&6
echo "configure:70341: checking for dnet_addr in -ldnet_stub" >&5
ac_lib_var=`echo dnet_stub'_'dnet_addr | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ldnet_stub  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 70349 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dnet_addr();

int main() {
dnet_addr()
; return 0; }
EOF
if { (eval echo configure:70360: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
   

  if test "$ext_shared" = "yes"; then
    SYBASE_SHARED_LIBADD="-ldnet_stub $SYBASE_SHARED_LIBADD"
    if test -n ""; then
      
  if test "" != "/usr/lib"; then
    
  if test -z "" || echo "" | grep '^/' >/dev/null ; then
    ai_p=
  else
    
    ep_dir="`echo |sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        SYBASE_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $SYBASE_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n ""; then
    
  if test "" != "/usr/lib"; then
    
  if test -z "" || echo "" | grep '^/' >/dev/null ; then
    ai_p=
  else
    
    ep_dir="`echo |sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case dnet_stub in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-ldnet_stub $LIBS" 
   ;;
  esac




  fi


        cat >> confdefs.h <<\EOF
#define HAVE_LIBDNET_STUB 1
EOF

     
else
  echo "$ac_t""no" 1>&6
fi

  cat >> confdefs.h <<\EOF
#define HAVE_SYBASE 1
EOF

  echo $ac_n "checking for tdsdbopen in -lsybdb""... $ac_c" 1>&6
echo "configure:70485: checking for tdsdbopen in -lsybdb" >&5
ac_lib_var=`echo sybdb'_'tdsdbopen | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsybdb  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 70493 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char tdsdbopen();

int main() {
tdsdbopen()
; return 0; }
EOF
if { (eval echo configure:70504: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
   cat >> confdefs.h <<\EOF
#define PHP_SYBASE_DBOPEN tdsdbopen
EOF

       cat >> confdefs.h <<\EOF
#define DBMFIX 1
EOF
 
else
  echo "$ac_t""no" 1>&6
 cat >> confdefs.h <<\EOF
#define PHP_SYBASE_DBOPEN dbopen
EOF
 
fi

fi




echo $ac_n "checking for Sybase-CT support""... $ac_c" 1>&6
echo "configure:70541: checking for Sybase-CT support" >&5
# Check whether --with-sybase-ct or --without-sybase-ct was given.
if test "${with_sybase_ct+set}" = set; then
  withval="$with_sybase_ct"
  PHP_SYBASE_CT=$withval
else
  
  PHP_SYBASE_CT=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_SYBASE_CT=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SYBASE_CT in
shared,*)
  PHP_SYBASE_CT=`echo "$PHP_SYBASE_CT"|sed 's/^shared,//'`
  ;;
shared)
  PHP_SYBASE_CT=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_SYBASE_CT" != "no"; then

  if test "$PHP_SYBASE" != "no"; then
    { echo "configure: error: You can not use both --with-sybase and --with-sybase-ct in same build!" 1>&2; exit 1; }
  fi

  cat >> confdefs.h <<\EOF
#define HAVE_SYBASE_CT 1
EOF

  
  ext_builddir=ext/sybase_ct
  ext_srcdir=$abs_srcdir/ext/sybase_ct

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/sybase_ct in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sybase_ct"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sybase_ct/"; ac_bdir="ext/sybase_ct/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_sybase_ct.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC sybase_ct"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC sybase_ct"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/sybase_ct in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sybase_ct"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sybase_ct/"; ac_bdir="ext/sybase_ct/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_sybase_ct.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_sybase_ct="$shared_objects_sybase_ct $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/sybase_ct.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sybase_ct"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/sybase_ct.la: $ext_builddir/sybase_ct.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/sybase_ct.la \$(phplibdir)

$ext_builddir/sybase_ct.la: \$(shared_objects_sybase_ct) \$(SYBASE_CT_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_sybase_ct) \$(SYBASE_CT_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_SYBASE_CT 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/sybase_ct in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sybase_ct"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sybase_ct/"; ac_bdir="ext/sybase_ct/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_sybase_ct.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC sybase_ct"
    else
      
  
  case ext/sybase_ct in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sybase_ct"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sybase_ct/"; ac_bdir="ext/sybase_ct/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_sybase_ct.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC sybase_ct"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST SYBASE_CT_SHARED_LIBADD"

  
  if test "$PHP_SYBASE_CT" = "yes"; then
    SYBASE_CT_INCDIR=/home/sybase/include
    SYBASE_CT_LIBDIR=/home/sybase/lib
  else
    SYBASE_CT_INCDIR=$PHP_SYBASE_CT/include
    SYBASE_CT_LIBDIR=$PHP_SYBASE_CT/lib
  fi

  if test -f $SYBASE_CT_INCDIR/ctpublic.h; then
    
  if test "$SYBASE_CT_INCDIR" != "/usr/include"; then
    
  if test -z "$SYBASE_CT_INCDIR" || echo "$SYBASE_CT_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$SYBASE_CT_INCDIR
  else
    
    ep_dir="`echo $SYBASE_CT_INCDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$SYBASE_CT_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  else
    { echo "configure: error: ctpublic.h missing!" 1>&2; exit 1; }
  fi
  
  
  if test "$SYBASE_CT_LIBDIR" != "/usr/lib"; then
    
  if test -z "$SYBASE_CT_LIBDIR" || echo "$SYBASE_CT_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$SYBASE_CT_LIBDIR
  else
    
    ep_dir="`echo $SYBASE_CT_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$SYBASE_CT_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $SYBASE_CT_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

  if test -f $SYBASE_CT_INCDIR/tds.h; then
    
  
  case ct in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lct $SYBASE_CT_SHARED_LIBADD" 
    else
      
  
  case ct in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lct $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    SYBASE_CT_LIBS="-L$SYBASE_CT_LIBDIR -lct"
  else
    
  
  case cs in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lcs $SYBASE_CT_SHARED_LIBADD" 
    else
      
  
  case cs in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lcs $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    
  
  case ct in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lct $SYBASE_CT_SHARED_LIBADD" 
    else
      
  
  case ct in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lct $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    
  
  case comn in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lcomn $SYBASE_CT_SHARED_LIBADD" 
    else
      
  
  case comn in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lcomn $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    
  
  case intl in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lintl $SYBASE_CT_SHARED_LIBADD" 
    else
      
  
  case intl in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lintl $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


  
    SYBASE_CT_LIBS="-L$SYBASE_CT_LIBDIR -lcs -lct -lcomn -lintl"
  
    
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS=" 
      $SYBASE_CT_LIBS 
     $LDFLAGS"
  echo $ac_n "checking for netg_errstr in -ltcl""... $ac_c" 1>&6
echo "configure:71014: checking for netg_errstr in -ltcl" >&5
ac_lib_var=`echo tcl'_'netg_errstr | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ltcl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 71022 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char netg_errstr();

int main() {
netg_errstr()
; return 0; }
EOF
if { (eval echo configure:71033: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
      
  
  case tcl in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-ltcl $SYBASE_CT_SHARED_LIBADD" 
    else
      
  
  case tcl in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-ltcl $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_tcl
     
      
  
  case sybtcl in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-lsybtcl $SYBASE_CT_SHARED_LIBADD" 
    else
      
  
  case sybtcl in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lsybtcl $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


    
  
fi

  
    
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="-L$SYBASE_CT_LIBDIR $LDFLAGS"
  echo $ac_n "checking for insck__getVdate in -linsck""... $ac_c" 1>&6
echo "configure:71114: checking for insck__getVdate in -linsck" >&5
ac_lib_var=`echo insck'_'insck__getVdate | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-linsck  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 71122 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char insck__getVdate();

int main() {
insck__getVdate()
; return 0; }
EOF
if { (eval echo configure:71133: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
  
  case insck in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-linsck $SYBASE_CT_SHARED_LIBADD" 
    else
      
  
  case insck in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-linsck $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_insck
    
  
fi

    
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="-L$SYBASE_CT_LIBDIR $LDFLAGS"
  echo $ac_n "checking for bsd_tcp in -linsck""... $ac_c" 1>&6
echo "configure:71187: checking for bsd_tcp in -linsck" >&5
ac_lib_var=`echo insck'_'bsd_tcp | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-linsck  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 71195 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char bsd_tcp();

int main() {
bsd_tcp()
; return 0; }
EOF
if { (eval echo configure:71206: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
  
  case insck in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        SYBASE_CT_SHARED_LIBADD="-linsck $SYBASE_CT_SHARED_LIBADD" 
    else
      
  
  case insck in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-linsck $LIBS" 
   ;;
  esac


    fi
   ;;
  esac


  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_insck
    
  
fi

  fi
fi




echo $ac_n "checking whether to enable System V IPC support""... $ac_c" 1>&6
echo "configure:71263: checking whether to enable System V IPC support" >&5
# Check whether --enable-sysvmsg or --disable-sysvmsg was given.
if test "${enable_sysvmsg+set}" = set; then
  enableval="$enable_sysvmsg"
  PHP_SYSVMSG=$enableval
else
  
  PHP_SYSVMSG=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_SYSVMSG=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SYSVMSG in
shared,*)
  PHP_SYSVMSG=`echo "$PHP_SYSVMSG"|sed 's/^shared,//'`
  ;;
shared)
  PHP_SYSVMSG=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_SYSVMSG" != "no"; then
  cat >> confdefs.h <<\EOF
#define HAVE_SYSVMSG 1
EOF

  
  ext_builddir=ext/sysvmsg
  ext_srcdir=$abs_srcdir/ext/sysvmsg

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/sysvmsg in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvmsg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvmsg/"; ac_bdir="ext/sysvmsg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sysvmsg.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC sysvmsg"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC sysvmsg"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/sysvmsg in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvmsg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvmsg/"; ac_bdir="ext/sysvmsg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in sysvmsg.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_sysvmsg="$shared_objects_sysvmsg $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/sysvmsg.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvmsg"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/sysvmsg.la: $ext_builddir/sysvmsg.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/sysvmsg.la \$(phplibdir)

$ext_builddir/sysvmsg.la: \$(shared_objects_sysvmsg) \$(SYSVMSG_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_sysvmsg) \$(SYSVMSG_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_SYSVMSG 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/sysvmsg in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvmsg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvmsg/"; ac_bdir="ext/sysvmsg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sysvmsg.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC sysvmsg"
    else
      
  
  case ext/sysvmsg in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvmsg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvmsg/"; ac_bdir="ext/sysvmsg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sysvmsg.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC sysvmsg"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


fi




echo $ac_n "checking whether to enable System V semaphore support""... $ac_c" 1>&6
echo "configure:71525: checking whether to enable System V semaphore support" >&5
# Check whether --enable-sysvsem or --disable-sysvsem was given.
if test "${enable_sysvsem+set}" = set; then
  enableval="$enable_sysvsem"
  PHP_SYSVSEM=$enableval
else
  
  PHP_SYSVSEM=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_SYSVSEM=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SYSVSEM in
shared,*)
  PHP_SYSVSEM=`echo "$PHP_SYSVSEM"|sed 's/^shared,//'`
  ;;
shared)
  PHP_SYSVSEM=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_SYSVSEM" != "no"; then
 
  ext_builddir=ext/sysvsem
  ext_srcdir=$abs_srcdir/ext/sysvsem

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/sysvsem in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvsem"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvsem/"; ac_bdir="ext/sysvsem/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sysvsem.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC sysvsem"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC sysvsem"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/sysvsem in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvsem"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvsem/"; ac_bdir="ext/sysvsem/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in sysvsem.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_sysvsem="$shared_objects_sysvsem $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/sysvsem.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvsem"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/sysvsem.la: $ext_builddir/sysvsem.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/sysvsem.la \$(phplibdir)

$ext_builddir/sysvsem.la: \$(shared_objects_sysvsem) \$(SYSVSEM_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_sysvsem) \$(SYSVSEM_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_SYSVSEM 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/sysvsem in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvsem"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvsem/"; ac_bdir="ext/sysvsem/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sysvsem.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC sysvsem"
    else
      
  
  case ext/sysvsem in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvsem"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvsem/"; ac_bdir="ext/sysvsem/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sysvsem.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC sysvsem"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


 cat >> confdefs.h <<\EOF
#define HAVE_SYSVSEM 1
EOF

 echo $ac_n "checking for union semun""... $ac_c" 1>&6
echo "configure:71782: checking for union semun" >&5
if eval "test \"`echo '$''{'php_cv_semun'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 71787 "configure"
#include "confdefs.h"

#include <sys/types.h>
#include <sys/ipc.h>
#include <sys/sem.h>
   
int main() {
union semun x;
; return 0; }
EOF
if { (eval echo configure:71798: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
     php_cv_semun=yes
   
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
     php_cv_semun=no
   
fi
rm -f conftest*
 
fi

echo "$ac_t""$php_cv_semun" 1>&6
 if test "$php_cv_semun" = "yes"; then
   cat >> confdefs.h <<\EOF
#define HAVE_SEMUN 1
EOF

 else
   cat >> confdefs.h <<\EOF
#define HAVE_SEMUN 0
EOF

 fi
fi




echo $ac_n "checking whether to enable System V shared memory support""... $ac_c" 1>&6
echo "configure:71833: checking whether to enable System V shared memory support" >&5
# Check whether --enable-sysvshm or --disable-sysvshm was given.
if test "${enable_sysvshm+set}" = set; then
  enableval="$enable_sysvshm"
  PHP_SYSVSHM=$enableval
else
  
  PHP_SYSVSHM=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_SYSVSHM=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_SYSVSHM in
shared,*)
  PHP_SYSVSHM=`echo "$PHP_SYSVSHM"|sed 's/^shared,//'`
  ;;
shared)
  PHP_SYSVSHM=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_SYSVSHM" != "no"; then
  cat >> confdefs.h <<\EOF
#define HAVE_SYSVSHM 1
EOF

  
  ext_builddir=ext/sysvshm
  ext_srcdir=$abs_srcdir/ext/sysvshm

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/sysvshm in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvshm"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvshm/"; ac_bdir="ext/sysvshm/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sysvshm.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC sysvshm"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC sysvshm"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/sysvshm in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvshm"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvshm/"; ac_bdir="ext/sysvshm/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in sysvshm.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_sysvshm="$shared_objects_sysvshm $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/sysvshm.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvshm"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/sysvshm.la: $ext_builddir/sysvshm.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/sysvshm.la \$(phplibdir)

$ext_builddir/sysvshm.la: \$(shared_objects_sysvshm) \$(SYSVSHM_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_sysvshm) \$(SYSVSHM_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_SYSVSHM 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/sysvshm in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvshm"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvshm/"; ac_bdir="ext/sysvshm/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sysvshm.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC sysvshm"
    else
      
  
  case ext/sysvshm in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/sysvshm"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/sysvshm/"; ac_bdir="ext/sysvshm/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in sysvshm.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC sysvshm"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


fi





echo $ac_n "checking whether to enable tokenizer support""... $ac_c" 1>&6
echo "configure:72096: checking whether to enable tokenizer support" >&5
# Check whether --enable-tokenizer or --disable-tokenizer was given.
if test "${enable_tokenizer+set}" = set; then
  enableval="$enable_tokenizer"
  PHP_TOKENIZER=$enableval
else
  
  PHP_TOKENIZER=yes

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_TOKENIZER=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_TOKENIZER in
shared,*)
  PHP_TOKENIZER=`echo "$PHP_TOKENIZER"|sed 's/^shared,//'`
  ;;
shared)
  PHP_TOKENIZER=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_TOKENIZER" != "no"; then
  
  ext_builddir=ext/tokenizer
  ext_srcdir=$abs_srcdir/ext/tokenizer

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/tokenizer in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/tokenizer"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/tokenizer/"; ac_bdir="ext/tokenizer/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in tokenizer.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC tokenizer"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC tokenizer"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/tokenizer in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/tokenizer"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/tokenizer/"; ac_bdir="ext/tokenizer/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in tokenizer.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_tokenizer="$shared_objects_tokenizer $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/tokenizer.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_tokenizer"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/tokenizer.la: $ext_builddir/tokenizer.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/tokenizer.la \$(phplibdir)

$ext_builddir/tokenizer.la: \$(shared_objects_tokenizer) \$(TOKENIZER_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_tokenizer) \$(TOKENIZER_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_TOKENIZER 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/tokenizer in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/tokenizer"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/tokenizer/"; ac_bdir="ext/tokenizer/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in tokenizer.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC tokenizer"
    else
      
  
  case ext/tokenizer in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/tokenizer"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/tokenizer/"; ac_bdir="ext/tokenizer/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in tokenizer.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC tokenizer"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


  
  src=$ext_srcdir/Makefile.frag
  ac_srcdir=$ext_srcdir
  ac_builddir=$ext_builddir
  sed -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments

fi




echo $ac_n "checking whether to enable WDDX support""... $ac_c" 1>&6
echo "configure:72360: checking whether to enable WDDX support" >&5
# Check whether --enable-wddx or --disable-wddx was given.
if test "${enable_wddx+set}" = set; then
  enableval="$enable_wddx"
  PHP_WDDX=$enableval
else
  
  PHP_WDDX=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_WDDX=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_WDDX in
shared,*)
  PHP_WDDX=`echo "$PHP_WDDX"|sed 's/^shared,//'`
  ;;
shared)
  PHP_WDDX=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_WDDX" != "no"; then
  if test "$ext_shared" != "yes" && test "$enable_xml" = "no"; then
    echo "configure: warning: Activating XML" 1>&2
    enable_xml=yes
  fi
  cat >> confdefs.h <<\EOF
#define HAVE_WDDX 1
EOF

  
  ext_builddir=ext/wddx
  ext_srcdir=$abs_srcdir/ext/wddx

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/wddx in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/wddx"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/wddx/"; ac_bdir="ext/wddx/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in wddx.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC wddx"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC wddx"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/wddx in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/wddx"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/wddx/"; ac_bdir="ext/wddx/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in wddx.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_wddx="$shared_objects_wddx $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/wddx.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_wddx"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/wddx.la: $ext_builddir/wddx.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/wddx.la \$(phplibdir)

$ext_builddir/wddx.la: \$(shared_objects_wddx) \$(WDDX_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_wddx) \$(WDDX_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_WDDX 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/wddx in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/wddx"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/wddx/"; ac_bdir="ext/wddx/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in wddx.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC wddx"
    else
      
  
  case ext/wddx in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/wddx"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/wddx/"; ac_bdir="ext/wddx/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in wddx.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC wddx"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


fi


echo $ac_n "checking whether byte ordering is bigendian""... $ac_c" 1>&6
echo "configure:72624: checking whether byte ordering is bigendian" >&5
if eval "test \"`echo '$''{'ac_cv_c_bigendian'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_cv_c_bigendian=unknown
# See if sys/param.h defines the BYTE_ORDER macro.
cat > conftest.$ac_ext <<EOF
#line 72631 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/param.h>
int main() {

#if !BYTE_ORDER || !BIG_ENDIAN || !LITTLE_ENDIAN
 bogus endian macros
#endif
; return 0; }
EOF
if { (eval echo configure:72642: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  # It does; now see whether it defined to BIG_ENDIAN or not.
cat > conftest.$ac_ext <<EOF
#line 72646 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/param.h>
int main() {

#if BYTE_ORDER != BIG_ENDIAN
 not big endian
#endif
; return 0; }
EOF
if { (eval echo configure:72657: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_c_bigendian=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_c_bigendian=no
fi
rm -f conftest*
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
if test $ac_cv_c_bigendian = unknown; then
if test "$cross_compiling" = yes; then
    { echo "configure: error: can not run test program while cross compiling" 1>&2; exit 1; }
else
  cat > conftest.$ac_ext <<EOF
#line 72677 "configure"
#include "confdefs.h"
main () {
  /* Are we little or big endian?  From Harbison&Steele.  */
  union
  {
    long l;
    char c[sizeof (long)];
  } u;
  u.l = 1;
  exit (u.c[sizeof (long) - 1] == 1);
}
EOF
if { (eval echo configure:72690: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_c_bigendian=no
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_c_bigendian=yes
fi
rm -fr conftest*
fi

fi
fi

echo "$ac_t""$ac_cv_c_bigendian" 1>&6
if test $ac_cv_c_bigendian = yes; then
  cat >> confdefs.h <<\EOF
#define WORDS_BIGENDIAN 1
EOF

fi


if test "$ac_cv_c_bigendian" = "yes"; then
  order=21
else
  order=12
fi



echo $ac_n "checking whether to enable XML support""... $ac_c" 1>&6
echo "configure:72723: checking whether to enable XML support" >&5
# Check whether --enable-xml or --disable-xml was given.
if test "${enable_xml+set}" = set; then
  enableval="$enable_xml"
  PHP_XML=$enableval
else
  
  PHP_XML=yes

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_XML=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_XML in
shared,*)
  PHP_XML=`echo "$PHP_XML"|sed 's/^shared,//'`
  ;;
shared)
  PHP_XML=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6






echo $ac_n "checking external libexpat install dir""... $ac_c" 1>&6
echo "configure:72769: checking external libexpat install dir" >&5
# Check whether --with-expat-dir or --without-expat-dir was given.
if test "${with_expat_dir+set}" = set; then
  withval="$with_expat_dir"
  PHP_EXPAT_DIR=$withval
else
  
  PHP_EXPAT_DIR=no

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_EXPAT_DIR=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_EXPAT_DIR
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_XML" = "yes"; then
  cat >> confdefs.h <<\EOF
#define HAVE_LIBEXPAT 1
EOF


  if test "$PHP_EXPAT_DIR" = "no"; then
    cat >> confdefs.h <<\EOF
#define HAVE_LIBEXPAT_BUNDLED 1
EOF

    
  ext_builddir=ext/xml
  ext_srcdir=$abs_srcdir/ext/xml

  ac_extra=`echo "-DXML_BYTE_ORDER=$order"|sed s#@ext_srcdir@#$ext_srcdir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/xml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in xml.c expat/xmlparse.c expat/xmlrole.c expat/xmltok.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC xml"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC xml"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/xml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in xml.c expat/xmlparse.c expat/xmlrole.c expat/xmltok.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_xml="$shared_objects_xml $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/xml.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xml"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/xml.la: $ext_builddir/xml.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/xml.la \$(phplibdir)

$ext_builddir/xml.la: \$(shared_objects_xml) \$(XML_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_xml) \$(XML_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_XML 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/xml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in xml.c expat/xmlparse.c expat/xmlrole.c expat/xmltok.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC xml"
    else
      
  
  case ext/xml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in xml.c expat/xmlparse.c expat/xmlrole.c expat/xmltok.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC xml"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


    
  if test "$ext_srcdir/expat" != "/usr/include"; then
    
  if test -z "$ext_srcdir/expat" || echo "$ext_srcdir/expat" | grep '^/' >/dev/null ; then
    ai_p=$ext_srcdir/expat
  else
    
    ep_dir="`echo $ext_srcdir/expat|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ext_srcdir/expat\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    
  BUILD_DIR="$BUILD_DIR $ext_builddir/expat"

  else
    
  ext_builddir=ext/xml
  ext_srcdir=$abs_srcdir/ext/xml

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/xml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in xml.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC xml"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC xml"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/xml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in xml.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_xml="$shared_objects_xml $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/xml.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xml"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/xml.la: $ext_builddir/xml.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/xml.la \$(phplibdir)

$ext_builddir/xml.la: \$(shared_objects_xml) \$(XML_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_xml) \$(XML_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_XML 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/xml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in xml.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC xml"
    else
      
  
  case ext/xml in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in xml.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC xml"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"



    for i in $PHP_XML $PHP_EXPAT_DIR; do
      if test -f $i/lib/libexpat.a -o -f $i/lib/libexpat.$SHLIB_SUFFIX_NAME ; then
        EXPAT_DIR=$i
      fi
    done

    if test -z "$EXPAT_DIR"; then
      { echo "configure: error: not found. Please reinstall the expat distribution." 1>&2; exit 1; }
    fi

    
  if test "$EXPAT_DIR/include" != "/usr/include"; then
    
  if test -z "$EXPAT_DIR/include" || echo "$EXPAT_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$EXPAT_DIR/include
  else
    
    ep_dir="`echo $EXPAT_DIR/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$EXPAT_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    

  if test "$ext_shared" = "yes"; then
    XML_SHARED_LIBADD="-lexpat $XML_SHARED_LIBADD"
    if test -n "$EXPAT_DIR/lib"; then
      
  if test "$EXPAT_DIR/lib" != "/usr/lib"; then
    
  if test -z "$EXPAT_DIR/lib" || echo "$EXPAT_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$EXPAT_DIR/lib
  else
    
    ep_dir="`echo $EXPAT_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$EXPAT_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        XML_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $XML_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$EXPAT_DIR/lib"; then
    
  if test "$EXPAT_DIR/lib" != "/usr/lib"; then
    
  if test -z "$EXPAT_DIR/lib" || echo "$EXPAT_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$EXPAT_DIR/lib
  else
    
    ep_dir="`echo $EXPAT_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$EXPAT_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case expat in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lexpat $LIBS" 
   ;;
  esac




  fi


    
  PHP_VAR_SUBST="$PHP_VAR_SUBST XML_SHARED_LIBADD"

  fi
fi


# Local macros for automake & autoconf














echo $ac_n "checking for XMLRPC-EPI support""... $ac_c" 1>&6
echo "configure:73414: checking for XMLRPC-EPI support" >&5
# Check whether --with-xmlrpc or --without-xmlrpc was given.
if test "${with_xmlrpc+set}" = set; then
  withval="$with_xmlrpc"
  PHP_XMLRPC=$withval
else
  
  PHP_XMLRPC=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_XMLRPC=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_XMLRPC in
shared,*)
  PHP_XMLRPC=`echo "$PHP_XMLRPC"|sed 's/^shared,//'`
  ;;
shared)
  PHP_XMLRPC=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6






echo $ac_n "checking libexpat dir for XMLRPC-EPI""... $ac_c" 1>&6
echo "configure:73460: checking libexpat dir for XMLRPC-EPI" >&5
# Check whether --with-expat-dir or --without-expat-dir was given.
if test "${with_expat_dir+set}" = set; then
  withval="$with_expat_dir"
  PHP_EXPAT_DIR=$withval
else
  
  PHP_EXPAT_DIR=yes

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_EXPAT_DIR=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_EXPAT_DIR
echo "$ac_t""$ext_output" 1>&6






echo $ac_n "checking iconv dir for XMLRPC-EPI""... $ac_c" 1>&6
echo "configure:73485: checking iconv dir for XMLRPC-EPI" >&5
# Check whether --with-iconv-dir or --without-iconv-dir was given.
if test "${with_iconv_dir+set}" = set; then
  withval="$with_iconv_dir"
  PHP_ICONV_DIR=$withval
else
  
  PHP_ICONV_DIR=yes

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_ICONV_DIR=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_ICONV_DIR
echo "$ac_t""$ext_output" 1>&6




if test "$PHP_XMLRPC" != "no"; then

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST XMLRPC_SHARED_LIBADD"

  cat >> confdefs.h <<\EOF
#define HAVE_XMLRPC 1
EOF


  testval=no
  for i in /usr /usr/local $PHP_EXPAT_DIR $XMLRPC_DIR; do
    if test -f $i/lib/libexpat.a -o -f $i/lib/libexpat.$SHLIB_SUFFIX_NAME; then
      cat >> confdefs.h <<\EOF
#define HAVE_LIBEXPAT2 1
EOF

      

  if test "$ext_shared" = "yes"; then
    XMLRPC_SHARED_LIBADD="-lexpat $XMLRPC_SHARED_LIBADD"
    if test -n "$i/lib"; then
      
  if test "$i/lib" != "/usr/lib"; then
    
  if test -z "$i/lib" || echo "$i/lib" | grep '^/' >/dev/null ; then
    ai_p=$i/lib
  else
    
    ep_dir="`echo $i/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$i/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        XMLRPC_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $XMLRPC_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$i/lib"; then
    
  if test "$i/lib" != "/usr/lib"; then
    
  if test -z "$i/lib" || echo "$i/lib" | grep '^/' >/dev/null ; then
    ai_p=$i/lib
  else
    
    ep_dir="`echo $i/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$i/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case expat in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lexpat $LIBS" 
   ;;
  esac




  fi


      
  if test "$i/include" != "/usr/include"; then
    
  if test -z "$i/include" || echo "$i/include" | grep '^/' >/dev/null ; then
    ai_p=$i/include
  else
    
    ep_dir="`echo $i/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$i/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

      testval=yes
    fi
  done

  if test "$testval" = "no"; then
    { echo "configure: error: XML-RPC support requires libexpat. Use --with-expat-dir=<DIR>" 1>&2; exit 1; }
  fi

  if test "$PHP_ICONV_DIR" != "no"; then
    PHP_ICONV=$PHP_ICONV_DIR
  fi
  
  if test "$PHP_ICONV" = "no"; then
    PHP_ICONV=yes
  fi
  
  
  found_iconv=no
  unset ICONV_DIR

        if test "$PHP_ICONV" = "yes"; then
    echo $ac_n "checking for iconv""... $ac_c" 1>&6
echo "configure:73673: checking for iconv" >&5
if eval "test \"`echo '$''{'ac_cv_func_iconv'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 73678 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char iconv(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char iconv();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_iconv) || defined (__stub___iconv)
choke me
#else
iconv();
#endif

; return 0; }
EOF
if { (eval echo configure:73701: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_iconv=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_iconv=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'iconv`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
      
  echo "#define HAVE_ICONV 1" > include/php_have_iconv.h

      found_iconv=yes
    
else
  echo "$ac_t""no" 1>&6

      echo $ac_n "checking for libiconv""... $ac_c" 1>&6
echo "configure:73725: checking for libiconv" >&5
if eval "test \"`echo '$''{'ac_cv_func_libiconv'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 73730 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char libiconv(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char libiconv();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_libiconv) || defined (__stub___libiconv)
choke me
#else
libiconv();
#endif

; return 0; }
EOF
if { (eval echo configure:73753: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_libiconv=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_libiconv=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'libiconv`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
        
  echo "#define HAVE_LIBICONV 1" > include/php_have_libiconv.h

        found_iconv=yes
      
else
  echo "$ac_t""no" 1>&6
fi

    
fi

  fi

        if test "$found_iconv" = "no"; then

    for i in $PHP_ICONV /usr/local /usr; do
      if test -r $i/include/giconv.h; then
        cat >> confdefs.h <<\EOF
#define HAVE_GICONV_H 1
EOF

        ICONV_DIR=$i
        iconv_lib_name=giconv
        break
      elif test -r $i/include/iconv.h; then
        ICONV_DIR=$i
        iconv_lib_name=iconv
        break
      fi
    done

    if test -z "$ICONV_DIR"; then
      { echo "configure: error: Please specify the install prefix of iconv with --with-iconv=<DIR>" 1>&2; exit 1; }
    fi
  
    if test -f $ICONV_DIR/lib/lib$iconv_lib_name.a ||
       test -f $ICONV_DIR/lib/lib$iconv_lib_name.$SHLIB_SUFFIX_NAME
    then
      
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
        -L$ICONV_DIR/lib
       $LDFLAGS"
  echo $ac_n "checking for libiconv in -l$iconv_lib_name""... $ac_c" 1>&6
echo "configure:73813: checking for libiconv in -l$iconv_lib_name" >&5
ac_lib_var=`echo $iconv_lib_name'_'libiconv | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$iconv_lib_name  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 73821 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char libiconv();

int main() {
libiconv()
; return 0; }
EOF
if { (eval echo configure:73832: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
        found_iconv=yes
        
  echo "#define HAVE_LIBICONV 1" > include/php_have_libiconv.h

      
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_$iconv_lib_name
    
        
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
          -L$ICONV_DIR/lib
         $LDFLAGS"
  echo $ac_n "checking for iconv in -l$iconv_lib_name""... $ac_c" 1>&6
echo "configure:73868: checking for iconv in -l$iconv_lib_name" >&5
ac_lib_var=`echo $iconv_lib_name'_'iconv | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$iconv_lib_name  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 73876 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char iconv();

int main() {
iconv()
; return 0; }
EOF
if { (eval echo configure:73887: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
          found_iconv=yes
          
  echo "#define HAVE_ICONV 1" > include/php_have_iconv.h

        
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_$iconv_lib_name
    
  
fi

      
  
fi

    fi
  fi

  if test "$found_iconv" = "yes"; then
    if test -n "$ICONV_DIR"; then
      cat >> confdefs.h <<\EOF
#define HAVE_ICONV 1
EOF

      

  if test "$ext_shared" = "yes"; then
    XMLRPC_SHARED_LIBADD="-l$iconv_lib_name $XMLRPC_SHARED_LIBADD"
    if test -n "$ICONV_DIR/lib"; then
      
  if test "$ICONV_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ICONV_DIR/lib" || echo "$ICONV_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ICONV_DIR/lib
  else
    
    ep_dir="`echo $ICONV_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ICONV_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        XMLRPC_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $XMLRPC_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ICONV_DIR/lib"; then
    
  if test "$ICONV_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ICONV_DIR/lib" || echo "$ICONV_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ICONV_DIR/lib
  else
    
    ep_dir="`echo $ICONV_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ICONV_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case $iconv_lib_name in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$iconv_lib_name $LIBS" 
   ;;
  esac




  fi


      
  if test "$ICONV_DIR/include" != "/usr/include"; then
    
  if test -z "$ICONV_DIR/include" || echo "$ICONV_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$ICONV_DIR/include
  else
    
    ep_dir="`echo $ICONV_DIR/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ICONV_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    fi
    
else 
    { echo "configure: error: iconv not found, in order to build xmlrpc you need the iconv library" 1>&2; exit 1; }
  
  fi

fi


if test "$PHP_XMLRPC" = "yes"; then
  	





cat >> confdefs.h <<\EOF
#define UNDEF_THREADS_HACK 
EOF



echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
echo "configure:74084: checking for ANSI C header files" >&5
if eval "test \"`echo '$''{'ac_cv_header_stdc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 74089 "configure"
#include "confdefs.h"
#include <stdlib.h>
#include <stdarg.h>
#include <string.h>
#include <float.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:74097: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  ac_cv_header_stdc=yes
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

if test $ac_cv_header_stdc = yes; then
  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
cat > conftest.$ac_ext <<EOF
#line 74114 "configure"
#include "confdefs.h"
#include <string.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "memchr" >/dev/null 2>&1; then
  :
else
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
cat > conftest.$ac_ext <<EOF
#line 74132 "configure"
#include "confdefs.h"
#include <stdlib.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "free" >/dev/null 2>&1; then
  :
else
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
if test "$cross_compiling" = yes; then
  :
else
  cat > conftest.$ac_ext <<EOF
#line 74153 "configure"
#include "confdefs.h"
#include <ctype.h>
#define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
#define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
int main () { int i; for (i = 0; i < 256; i++)
if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);
exit (0); }

EOF
if { (eval echo configure:74164: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  :
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_header_stdc=no
fi
rm -fr conftest*
fi

fi
fi

echo "$ac_t""$ac_cv_header_stdc" 1>&6
if test $ac_cv_header_stdc = yes; then
  cat >> confdefs.h <<\EOF
#define STDC_HEADERS 1
EOF

fi

for ac_hdr in xmlparse.h xmltok.h stdlib.h strings.h string.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:74191: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 74196 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:74201: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done






echo $ac_n "checking size of char""... $ac_c" 1>&6
echo "configure:74233: checking size of char" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_char'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_char=1
else
  cat > conftest.$ac_ext <<EOF
#line 74241 "configure"
#include "confdefs.h"
#include <stdio.h>
int main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) return(1);
  fprintf(f, "%d\n", sizeof(char));
  return(0);
}
EOF
if { (eval echo configure:74252: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_char=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_char=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_char" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_CHAR $ac_cv_sizeof_char
EOF



echo $ac_n "checking size of int""... $ac_c" 1>&6
echo "configure:74273: checking size of int" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_int'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_int=4
else
  cat > conftest.$ac_ext <<EOF
#line 74281 "configure"
#include "confdefs.h"
#include <stdio.h>
int main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) return(1);
  fprintf(f, "%d\n", sizeof(int));
  return(0);
}
EOF
if { (eval echo configure:74292: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_int=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_int=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_int" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_INT $ac_cv_sizeof_int
EOF


echo $ac_n "checking size of long""... $ac_c" 1>&6
echo "configure:74312: checking size of long" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_long'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_long=4
else
  cat > conftest.$ac_ext <<EOF
#line 74320 "configure"
#include "confdefs.h"
#include <stdio.h>
int main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) return(1);
  fprintf(f, "%d\n", sizeof(long));
  return(0);
}
EOF
if { (eval echo configure:74331: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_long=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_long=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_long" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_LONG $ac_cv_sizeof_long
EOF


echo $ac_n "checking size of long long""... $ac_c" 1>&6
echo "configure:74351: checking size of long long" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_long_long'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_long_long=8
else
  cat > conftest.$ac_ext <<EOF
#line 74359 "configure"
#include "confdefs.h"
#include <stdio.h>
int main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) return(1);
  fprintf(f, "%d\n", sizeof(long long));
  return(0);
}
EOF
if { (eval echo configure:74370: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_long_long=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_long_long=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_long_long" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_LONG_LONG $ac_cv_sizeof_long_long
EOF


echo $ac_n "checking for size_t""... $ac_c" 1>&6
echo "configure:74390: checking for size_t" >&5
if eval "test \"`echo '$''{'ac_cv_type_size_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 74395 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "(^|[^a-zA-Z_0-9])size_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_size_t=yes
else
  rm -rf conftest*
  ac_cv_type_size_t=no
fi
rm -f conftest*

fi
echo "$ac_t""$ac_cv_type_size_t" 1>&6
if test $ac_cv_type_size_t = no; then
  cat >> confdefs.h <<\EOF
#define size_t unsigned
EOF

fi

echo $ac_n "checking whether time.h and sys/time.h may both be included""... $ac_c" 1>&6
echo "configure:74423: checking whether time.h and sys/time.h may both be included" >&5
if eval "test \"`echo '$''{'ac_cv_header_time'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 74428 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/time.h>
#include <time.h>
int main() {
struct tm *tp;
; return 0; }
EOF
if { (eval echo configure:74437: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_header_time=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_time=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_header_time" 1>&6
if test $ac_cv_header_time = yes; then
  cat >> confdefs.h <<\EOF
#define TIME_WITH_SYS_TIME 1
EOF

fi

echo $ac_n "checking for uid_t in sys/types.h""... $ac_c" 1>&6
echo "configure:74458: checking for uid_t in sys/types.h" >&5
if eval "test \"`echo '$''{'ac_cv_type_uid_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 74463 "configure"
#include "confdefs.h"
#include <sys/types.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "uid_t" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_uid_t=yes
else
  rm -rf conftest*
  ac_cv_type_uid_t=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_type_uid_t" 1>&6
if test $ac_cv_type_uid_t = no; then
  cat >> confdefs.h <<\EOF
#define uid_t int
EOF

  cat >> confdefs.h <<\EOF
#define gid_t int
EOF

fi






# Standard XMLRPC list
for ac_func in \
 strtoul strtoull snprintf \
 strstr strpbrk strerror\
 memcpy memmove
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:74503: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 74508 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:74531: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done




  
  ext_builddir=ext/xmlrpc
  ext_srcdir=$abs_srcdir/ext/xmlrpc

  ac_extra=`echo "-I@ext_srcdir@/libxmlrpc -DVERSION="0.50""|sed s#@ext_srcdir@#$ext_srcdir#g`

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/xmlrpc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in xmlrpc-epi-php.c libxmlrpc/base64.c \
          libxmlrpc/simplestring.c libxmlrpc/xml_to_dandarpc.c \
          libxmlrpc/xmlrpc_introspection.c libxmlrpc/encodings.c \
          libxmlrpc/system_methods.c libxmlrpc/xml_to_xmlrpc.c \
          libxmlrpc/queue.c libxmlrpc/xml_element.c libxmlrpc/xmlrpc.c \
          libxmlrpc/xml_to_soap.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC xmlrpc"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC xmlrpc"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/xmlrpc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in xmlrpc-epi-php.c libxmlrpc/base64.c \
          libxmlrpc/simplestring.c libxmlrpc/xml_to_dandarpc.c \
          libxmlrpc/xmlrpc_introspection.c libxmlrpc/encodings.c \
          libxmlrpc/system_methods.c libxmlrpc/xml_to_xmlrpc.c \
          libxmlrpc/queue.c libxmlrpc/xml_element.c libxmlrpc/xmlrpc.c \
          libxmlrpc/xml_to_soap.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_xmlrpc="$shared_objects_xmlrpc $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/xmlrpc.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlrpc"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/xmlrpc.la: $ext_builddir/xmlrpc.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/xmlrpc.la \$(phplibdir)

$ext_builddir/xmlrpc.la: \$(shared_objects_xmlrpc) \$(XMLRPC_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_xmlrpc) \$(XMLRPC_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_XMLRPC 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/xmlrpc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in xmlrpc-epi-php.c libxmlrpc/base64.c \
          libxmlrpc/simplestring.c libxmlrpc/xml_to_dandarpc.c \
          libxmlrpc/xmlrpc_introspection.c libxmlrpc/encodings.c \
          libxmlrpc/system_methods.c libxmlrpc/xml_to_xmlrpc.c \
          libxmlrpc/queue.c libxmlrpc/xml_element.c libxmlrpc/xmlrpc.c \
          libxmlrpc/xml_to_soap.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC xmlrpc"
    else
      
  
  case ext/xmlrpc in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in xmlrpc-epi-php.c libxmlrpc/base64.c \
          libxmlrpc/simplestring.c libxmlrpc/xml_to_dandarpc.c \
          libxmlrpc/xmlrpc_introspection.c libxmlrpc/encodings.c \
          libxmlrpc/system_methods.c libxmlrpc/xml_to_xmlrpc.c \
          libxmlrpc/queue.c libxmlrpc/xml_element.c libxmlrpc/xmlrpc.c \
          libxmlrpc/xml_to_soap.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC xmlrpc"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


  
  BUILD_DIR="$BUILD_DIR $ext_builddir/libxmlrpc"

  XMLRPC_MODULE_TYPE=builtin

elif test "$PHP_XMLRPC" != "no"; then

  if test -r $PHP_XMLRPC/include/xmlrpc.h; then
    XMLRPC_DIR=$PHP_XMLRPC/include
  elif test -r $PHP_XMLRPC/include/xmlrpc-epi/xmlrpc.h; then
    XMLRPC_DIR=$PHP_XMLRPC/include/xmlrpc-epi
  else
    echo $ac_n "checking for XMLRPC-EPI in default path""... $ac_c" 1>&6
echo "configure:74799: checking for XMLRPC-EPI in default path" >&5
    for i in /usr/local /usr; do
      if test -r $i/include/xmlrpc.h; then
        XMLRPC_DIR=$i/include
        echo "$ac_t""found in $i" 1>&6
      fi
    done
  fi

  if test -z "$XMLRPC_DIR"; then
    echo "$ac_t""not found" 1>&6
    { echo "configure: error: Please reinstall the XMLRPC-EPI distribution" 1>&2; exit 1; }
  fi

  
  if test "$XMLRPC_DIR" != "/usr/include"; then
    
  if test -z "$XMLRPC_DIR" || echo "$XMLRPC_DIR" | grep '^/' >/dev/null ; then
    ai_p=$XMLRPC_DIR
  else
    
    ep_dir="`echo $XMLRPC_DIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$XMLRPC_DIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  

  if test "$ext_shared" = "yes"; then
    XMLRPC_SHARED_LIBADD="-lxmlrpc $XMLRPC_SHARED_LIBADD"
    if test -n "$XMLRPC_DIR/lib"; then
      
  if test "$XMLRPC_DIR/lib" != "/usr/lib"; then
    
  if test -z "$XMLRPC_DIR/lib" || echo "$XMLRPC_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$XMLRPC_DIR/lib
  else
    
    ep_dir="`echo $XMLRPC_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$XMLRPC_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        XMLRPC_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $XMLRPC_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$XMLRPC_DIR/lib"; then
    
  if test "$XMLRPC_DIR/lib" != "/usr/lib"; then
    
  if test -z "$XMLRPC_DIR/lib" || echo "$XMLRPC_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$XMLRPC_DIR/lib
  else
    
    ep_dir="`echo $XMLRPC_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$XMLRPC_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case xmlrpc in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lxmlrpc $LIBS" 
   ;;
  esac




  fi


  
fi






echo $ac_n "checking whether to enable xslt support""... $ac_c" 1>&6
echo "configure:74949: checking whether to enable xslt support" >&5
# Check whether --enable-xslt or --disable-xslt was given.
if test "${enable_xslt+set}" = set; then
  enableval="$enable_xslt"
  PHP_XSLT=$enableval
else
  
  PHP_XSLT=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_XSLT=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_XSLT in
shared,*)
  PHP_XSLT=`echo "$PHP_XSLT"|sed 's/^shared,//'`
  ;;
shared)
  PHP_XSLT=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6






echo $ac_n "checking for XSLT Sablotron backend""... $ac_c" 1>&6
echo "configure:74995: checking for XSLT Sablotron backend" >&5
# Check whether --with-xslt-sablot or --without-xslt-sablot was given.
if test "${with_xslt_sablot+set}" = set; then
  withval="$with_xslt_sablot"
  PHP_XSLT_SABLOT=$withval
else
  
  PHP_XSLT_SABLOT=no

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_XSLT_SABLOT=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_XSLT_SABLOT
echo "$ac_t""$ext_output" 1>&6






echo $ac_n "checking for libexpat dir for Sablotron XSL support""... $ac_c" 1>&6
echo "configure:75020: checking for libexpat dir for Sablotron XSL support" >&5
# Check whether --with-expat-dir or --without-expat-dir was given.
if test "${with_expat_dir+set}" = set; then
  withval="$with_expat_dir"
  PHP_EXPAT_DIR=$withval
else
  
  PHP_EXPAT_DIR=no

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_EXPAT_DIR=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_EXPAT_DIR
echo "$ac_t""$ext_output" 1>&6






echo $ac_n "checking for iconv dir for Sablotron XSL support""... $ac_c" 1>&6
echo "configure:75045: checking for iconv dir for Sablotron XSL support" >&5
# Check whether --with-iconv-dir or --without-iconv-dir was given.
if test "${with_iconv_dir+set}" = set; then
  withval="$with_iconv_dir"
  PHP_ICONV_DIR=$withval
else
  
  PHP_ICONV_DIR=no

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_ICONV_DIR=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_ICONV_DIR
echo "$ac_t""$ext_output" 1>&6






echo $ac_n "checking for JavaScript for Sablotron XSL support""... $ac_c" 1>&6
echo "configure:75070: checking for JavaScript for Sablotron XSL support" >&5
# Check whether --with-sablot-js or --without-sablot-js was given.
if test "${with_sablot_js+set}" = set; then
  withval="$with_sablot_js"
  PHP_SABLOT_JS=$withval
else
  
  PHP_SABLOT_JS=no

  if test "$PHP_ENABLE_ALL" && test "no" = "yes"; then
    PHP_SABLOT_JS=$PHP_ENABLE_ALL
  fi

fi


ext_output=$PHP_SABLOT_JS
echo "$ac_t""$ext_output" 1>&6





if test "$PHP_XSLT" != "no"; then

  
  ext_builddir=ext/xslt
  ext_srcdir=$abs_srcdir/ext/xslt

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/xslt in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xslt"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xslt/"; ac_bdir="ext/xslt/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in xslt.c sablot.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC xslt"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC xslt"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/xslt in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xslt"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xslt/"; ac_bdir="ext/xslt/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in xslt.c sablot.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_xslt="$shared_objects_xslt $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/xslt.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xslt"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/xslt.la: $ext_builddir/xslt.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/xslt.la \$(phplibdir)

$ext_builddir/xslt.la: \$(shared_objects_xslt) \$(XSLT_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_xslt) \$(XSLT_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_XSLT 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/xslt in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xslt"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xslt/"; ac_bdir="ext/xslt/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in xslt.c sablot.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC xslt"
    else
      
  
  case ext/xslt in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/xslt"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/xslt/"; ac_bdir="ext/xslt/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in xslt.c sablot.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC xslt"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST XSLT_SHARED_LIBADD"


  if test "$PHP_XSLT_SABLOT" != "no"; then
    XSLT_CHECK_DIR=$PHP_XSLT_SABLOT
    XSLT_TEST_FILE=/include/sablot.h
    XSLT_BACKEND_NAME=Sablotron
    XSLT_LIBNAME=sablot
  fi

  if test -z "$XSLT_BACKEND_NAME"; then
    { echo "configure: error: No backend specified for XSLT extension." 1>&2; exit 1; }
  fi

  condition="$XSLT_CHECK_DIR$XSLT_TEST_FILE"

  if test -r $condition; then
    XSLT_DIR=$XSLT_CHECK_DIR
  else
    echo $ac_n "checking for $XSLT_BACKEND_NAME libraries in the default path""... $ac_c" 1>&6
echo "configure:75324: checking for $XSLT_BACKEND_NAME libraries in the default path" >&5
    for i in /usr /usr/local; do
      condition="$i$XSLT_TEST_FILE"
      if test -r $condition; then
        XSLT_DIR=$i
      fi
    done
    echo "$ac_t""found in $XSLT_DIR" 1>&6
  fi

  if test -z "$XSLT_DIR"; then
    { echo "configure: error: not found. Please re-install the $XSLT_BACKEND_NAME distribution." 1>&2; exit 1; }
  fi
					
  if test "$PHP_XSLT_SABLOT" != "no"; then
    echo $ac_n "checking for sablot-config""... $ac_c" 1>&6
echo "configure:75340: checking for sablot-config" >&5
    if test -x $XSLT_DIR/bin/sablot-config ; then
       echo "$ac_t""found" 1>&6
       cat >> confdefs.h <<\EOF
#define HAVE_SABLOT_CONFIG 1
EOF

              SABINF_CFLAGS=`$XSLT_DIR/bin/sablot-config --cflags`
       SABINF_LIBS=`$XSLT_DIR/bin/sablot-config --libs`
       SABINF_PREFIX=`$XSLT_DIR/bin/sablot-config --prefix`
       SABINF_ALL="\"Cflags: $SABINF_CFLAGS\nLibs: $SABINF_LIBS\nPrefix: $SABINF_PREFIX\""
       
  echo "#define SAB_INFO "$SABINF_ALL"" > include/php_sab_info.h

    else
       echo "$ac_t""not found" 1>&6
    fi
    echo $ac_n "checking for Sablotron version""... $ac_c" 1>&6
echo "configure:75358: checking for Sablotron version" >&5
    old_CPPFLAGS=$CPPFLAGS
    CPPFLAGS="$CPPFLAGS -I$XSLT_DIR/include"
    if test "$cross_compiling" = yes; then
    { echo "configure: error: can not run test program while cross compiling" 1>&2; exit 1; }
else
  cat > conftest.$ac_ext <<EOF
#line 75365 "configure"
#include "confdefs.h"

#include <stdlib.h>
#include <sablot.h>

int main ()
{
	double version;
	version = atof(SAB_VERSION);
	
	if (version >= 0.96) {
		exit(0);
	}
	exit(255);
}
    
EOF
if { (eval echo configure:75383: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
      echo "$ac_t"">= 0.96" 1>&6
    
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
      { echo "configure: error: Sablotron version 0.96 or greater required." 1>&2; exit 1; }
    
fi
rm -fr conftest*
fi

    CPPFLAGS=$old_CPPFLAGS

    found_expat=no
    for i in $PHP_EXPAT_DIR $XSLT_DIR /usr/local /usr; do
      if test -f $i/lib/libexpat.a -o -f $i/lib/libexpat.$SHLIB_SUFFIX_NAME; then
        cat >> confdefs.h <<\EOF
#define HAVE_LIBEXPAT2 1
EOF

        
  if test "$i/include" != "/usr/include"; then
    
  if test -z "$i/include" || echo "$i/include" | grep '^/' >/dev/null ; then
    ai_p=$i/include
  else
    
    ep_dir="`echo $i/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$i/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

        

  if test "$ext_shared" = "yes"; then
    XSLT_SHARED_LIBADD="-lexpat $XSLT_SHARED_LIBADD"
    if test -n "$i/lib"; then
      
  if test "$i/lib" != "/usr/lib"; then
    
  if test -z "$i/lib" || echo "$i/lib" | grep '^/' >/dev/null ; then
    ai_p=$i/lib
  else
    
    ep_dir="`echo $i/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$i/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        XSLT_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $XSLT_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$i/lib"; then
    
  if test "$i/lib" != "/usr/lib"; then
    
  if test -z "$i/lib" || echo "$i/lib" | grep '^/' >/dev/null ; then
    ai_p=$i/lib
  else
    
    ep_dir="`echo $i/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$i/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case expat in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lexpat $LIBS" 
   ;;
  esac




  fi


        found_expat=yes
        break
      fi
    done

    if test "$found_expat" = "no"; then
      { echo "configure: error: expat not found. To build sablotron you need the expat library." 1>&2; exit 1; }
    fi

    if test "$PHP_ICONV_DIR" != "no"; then
      PHP_ICONV=$PHP_ICONV_DIR
    fi

    if test "$PHP_ICONV" = "no"; then
      PHP_ICONV=yes
    fi

    
  found_iconv=no
  unset ICONV_DIR

        if test "$PHP_ICONV" = "yes"; then
    echo $ac_n "checking for iconv""... $ac_c" 1>&6
echo "configure:75558: checking for iconv" >&5
if eval "test \"`echo '$''{'ac_cv_func_iconv'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 75563 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char iconv(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char iconv();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_iconv) || defined (__stub___iconv)
choke me
#else
iconv();
#endif

; return 0; }
EOF
if { (eval echo configure:75586: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_iconv=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_iconv=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'iconv`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
      
  echo "#define HAVE_ICONV 1" > include/php_have_iconv.h

      found_iconv=yes
    
else
  echo "$ac_t""no" 1>&6

      echo $ac_n "checking for libiconv""... $ac_c" 1>&6
echo "configure:75610: checking for libiconv" >&5
if eval "test \"`echo '$''{'ac_cv_func_libiconv'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 75615 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char libiconv(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char libiconv();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_libiconv) || defined (__stub___libiconv)
choke me
#else
libiconv();
#endif

; return 0; }
EOF
if { (eval echo configure:75638: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_libiconv=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_libiconv=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'libiconv`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
        
  echo "#define HAVE_LIBICONV 1" > include/php_have_libiconv.h

        found_iconv=yes
      
else
  echo "$ac_t""no" 1>&6
fi

    
fi

  fi

        if test "$found_iconv" = "no"; then

    for i in $PHP_ICONV /usr/local /usr; do
      if test -r $i/include/giconv.h; then
        cat >> confdefs.h <<\EOF
#define HAVE_GICONV_H 1
EOF

        ICONV_DIR=$i
        iconv_lib_name=giconv
        break
      elif test -r $i/include/iconv.h; then
        ICONV_DIR=$i
        iconv_lib_name=iconv
        break
      fi
    done

    if test -z "$ICONV_DIR"; then
      { echo "configure: error: Please specify the install prefix of iconv with --with-iconv=<DIR>" 1>&2; exit 1; }
    fi
  
    if test -f $ICONV_DIR/lib/lib$iconv_lib_name.a ||
       test -f $ICONV_DIR/lib/lib$iconv_lib_name.$SHLIB_SUFFIX_NAME
    then
      
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
        -L$ICONV_DIR/lib
       $LDFLAGS"
  echo $ac_n "checking for libiconv in -l$iconv_lib_name""... $ac_c" 1>&6
echo "configure:75698: checking for libiconv in -l$iconv_lib_name" >&5
ac_lib_var=`echo $iconv_lib_name'_'libiconv | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$iconv_lib_name  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 75706 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char libiconv();

int main() {
libiconv()
; return 0; }
EOF
if { (eval echo configure:75717: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
        found_iconv=yes
        
  echo "#define HAVE_LIBICONV 1" > include/php_have_libiconv.h

      
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_$iconv_lib_name
    
        
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
          -L$ICONV_DIR/lib
         $LDFLAGS"
  echo $ac_n "checking for iconv in -l$iconv_lib_name""... $ac_c" 1>&6
echo "configure:75753: checking for iconv in -l$iconv_lib_name" >&5
ac_lib_var=`echo $iconv_lib_name'_'iconv | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$iconv_lib_name  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 75761 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char iconv();

int main() {
iconv()
; return 0; }
EOF
if { (eval echo configure:75772: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
          found_iconv=yes
          
  echo "#define HAVE_ICONV 1" > include/php_have_iconv.h

        
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_$iconv_lib_name
    
  
fi

      
  
fi

    fi
  fi

  if test "$found_iconv" = "yes"; then
    if test -n "$ICONV_DIR"; then
      cat >> confdefs.h <<\EOF
#define HAVE_ICONV 1
EOF

      

  if test "$ext_shared" = "yes"; then
    XSLT_SHARED_LIBADD="-l$iconv_lib_name $XSLT_SHARED_LIBADD"
    if test -n "$ICONV_DIR/lib"; then
      
  if test "$ICONV_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ICONV_DIR/lib" || echo "$ICONV_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ICONV_DIR/lib
  else
    
    ep_dir="`echo $ICONV_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ICONV_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        XSLT_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $XSLT_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ICONV_DIR/lib"; then
    
  if test "$ICONV_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ICONV_DIR/lib" || echo "$ICONV_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$ICONV_DIR/lib
  else
    
    ep_dir="`echo $ICONV_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ICONV_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case $iconv_lib_name in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$iconv_lib_name $LIBS" 
   ;;
  esac




  fi


      
  if test "$ICONV_DIR/include" != "/usr/include"; then
    
  if test -z "$ICONV_DIR/include" || echo "$ICONV_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$ICONV_DIR/include
  else
    
    ep_dir="`echo $ICONV_DIR/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ICONV_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    fi
    
else 
      { echo "configure: error: iconv not found. To build sablotron you need the iconv library." 1>&2; exit 1; }
    
  fi

     
    if test "$PHP_SABLOT_JS" != "no"; then
      for i in /usr/local /usr $PHP_SABLOT_JS; do
        if test -f $i/lib/libjs.a -o -f $i/lib/libjs.$SHLIB_SUFFIX_NAME; then
          PHP_SABLOT_JS_DIR=$i
        fi
      done

      
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
        -L$PHP_SABLOT_JS_DIR/lib
       $LDFLAGS"
  echo $ac_n "checking for JS_GetRuntime in -ljs""... $ac_c" 1>&6
echo "configure:75966: checking for JS_GetRuntime in -ljs" >&5
ac_lib_var=`echo js'_'JS_GetRuntime | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ljs  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 75974 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char JS_GetRuntime();

int main() {
JS_GetRuntime()
; return 0; }
EOF
if { (eval echo configure:75985: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
        

  if test "$ext_shared" = "yes"; then
    XSLT_SHARED_LIBADD="-ljs $XSLT_SHARED_LIBADD"
    if test -n "$PHP_SABLOT_JS_DIR/lib"; then
      
  if test "$PHP_SABLOT_JS_DIR/lib" != "/usr/lib"; then
    
  if test -z "$PHP_SABLOT_JS_DIR/lib" || echo "$PHP_SABLOT_JS_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$PHP_SABLOT_JS_DIR/lib
  else
    
    ep_dir="`echo $PHP_SABLOT_JS_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_SABLOT_JS_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        XSLT_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $XSLT_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$PHP_SABLOT_JS_DIR/lib"; then
    
  if test "$PHP_SABLOT_JS_DIR/lib" != "/usr/lib"; then
    
  if test -z "$PHP_SABLOT_JS_DIR/lib" || echo "$PHP_SABLOT_JS_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$PHP_SABLOT_JS_DIR/lib
  else
    
    ep_dir="`echo $PHP_SABLOT_JS_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_SABLOT_JS_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case js in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-ljs $LIBS" 
   ;;
  esac




  fi


      
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_js
    
        { echo "configure: error: libjs not found. Please check config.log for more information." 1>&2; exit 1; }
      
  
fi

    fi

    
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
      -L$XSLT_DIR/lib
     $LDFLAGS"
  echo $ac_n "checking for SablotSetEncoding in -lsablot""... $ac_c" 1>&6
echo "configure:76120: checking for SablotSetEncoding in -lsablot" >&5
ac_lib_var=`echo sablot'_'SablotSetEncoding | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsablot  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 76128 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char SablotSetEncoding();

int main() {
SablotSetEncoding()
; return 0; }
EOF
if { (eval echo configure:76139: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
      cat >> confdefs.h <<\EOF
#define HAVE_SABLOT_SET_ENCODING 1
EOF

    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_sablot
    
  
fi


        
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
      -L$XSLT_DIR/lib
     $LDFLAGS"
  echo $ac_n "checking for SablotGetOptions in -lsablot""... $ac_c" 1>&6
echo "configure:76179: checking for SablotGetOptions in -lsablot" >&5
ac_lib_var=`echo sablot'_'SablotGetOptions | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsablot  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 76187 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char SablotGetOptions();

int main() {
SablotGetOptions()
; return 0; }
EOF
if { (eval echo configure:76198: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
      cat >> confdefs.h <<\EOF
#define HAVE_SABLOT_GET_OPTIONS 1
EOF

    
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_sablot
    
  
fi


    cat >> confdefs.h <<\EOF
#define HAVE_SABLOT_BACKEND 1
EOF

  fi

  
  if test "$XSLT_DIR/include" != "/usr/include"; then
    
  if test -z "$XSLT_DIR/include" || echo "$XSLT_DIR/include" | grep '^/' >/dev/null ; then
    ai_p=$XSLT_DIR/include
  else
    
    ep_dir="`echo $XSLT_DIR/include|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$XSLT_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

  

  if test "$ext_shared" = "yes"; then
    XSLT_SHARED_LIBADD="-l$XSLT_LIBNAME $XSLT_SHARED_LIBADD"
    if test -n "$XSLT_DIR/lib"; then
      
  if test "$XSLT_DIR/lib" != "/usr/lib"; then
    
  if test -z "$XSLT_DIR/lib" || echo "$XSLT_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$XSLT_DIR/lib
  else
    
    ep_dir="`echo $XSLT_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$XSLT_DIR/lib\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        XSLT_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $XSLT_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$XSLT_DIR/lib"; then
    
  if test "$XSLT_DIR/lib" != "/usr/lib"; then
    
  if test -z "$XSLT_DIR/lib" || echo "$XSLT_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p=$XSLT_DIR/lib
  else
    
    ep_dir="`echo $XSLT_DIR/lib|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$XSLT_DIR/lib\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case $XSLT_LIBNAME in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$XSLT_LIBNAME $LIBS" 
   ;;
  esac




  fi



  cat >> confdefs.h <<\EOF
#define HAVE_XSLT 1
EOF

fi




echo $ac_n "checking for YAZ support""... $ac_c" 1>&6
echo "configure:76376: checking for YAZ support" >&5
# Check whether --with-yaz or --without-yaz was given.
if test "${with_yaz+set}" = set; then
  withval="$with_yaz"
  PHP_YAZ=$withval
else
  
  PHP_YAZ=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_YAZ=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_YAZ in
shared,*)
  PHP_YAZ=`echo "$PHP_YAZ"|sed 's/^shared,//'`
  ;;
shared)
  PHP_YAZ=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6





if test "$PHP_YAZ" != "no"; then
  yazconfig=NONE
  if test "$PHP_YAZ" = "yes"; then
    # Extract the first word of "yaz-config", so it can be a program name with args.
set dummy yaz-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:76426: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_yazconfig'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$yazconfig" in
  /*)
  ac_cv_path_yazconfig="$yazconfig" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_yazconfig="$yazconfig" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_yazconfig="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_yazconfig" && ac_cv_path_yazconfig="NONE"
  ;;
esac
fi
yazconfig="$ac_cv_path_yazconfig"
if test -n "$yazconfig"; then
  echo "$ac_t""$yazconfig" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  else
    if test -r ${PHP_YAZ}/yaz-config; then
      yazconfig=${PHP_YAZ}/yaz-config
    else
      yazconfig=${PHP_YAZ}/bin/yaz-config
    fi
  fi

  if test -f $yazconfig; then
    cat >> confdefs.h <<\EOF
#define HAVE_YAZ 1
EOF

    . $yazconfig

        echo $ac_n "checking for YAZ version""... $ac_c" 1>&6
echo "configure:76475: checking for YAZ version" >&5
    yaz_version=`echo $YAZVERSION | awk 'BEGIN { FS = "."; } { printf "%d", ($1 * 1000 + $2) * 1000 + $3;}'`
    if test "$yaz_version" -ge 1009000; then
      echo "$ac_t""$YAZVERSION" 1>&6
    else
      { echo "configure: error: YAZ version 1.9 or later required." 1>&2; exit 1; }
    fi

    dir=""
    for c in $YAZLIB; do
      case $c in
       -L*)
         dir=`echo $c|cut -c 3-|sed 's%/\.libs%%g'`
        ;;
       -lyaz*)
        ;;
       *)
       
  for ac_i in $c; do
    case $ac_i in
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        YAZ_SHARED_LIBADD="$YAZ_SHARED_LIBADD -l$ac_ii" 
    else
      
  
  case $ac_ii in
  c|c_r|pthread*) ;;
  *) 
      LIBS="$LIBS -l$ac_ii" 
   ;;
  esac


    fi
   ;;
  esac


    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        YAZ_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $YAZ_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    ;;
    esac
  done

        ;;
      esac
    done
    if test -n "$dir"; then
      
  if test "$dir" != "/usr/lib"; then
    
  if test -z "$dir" || echo "$dir" | grep '^/' >/dev/null ; then
    ai_p=$dir
  else
    
    ep_dir="`echo $dir|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$dir\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        YAZ_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $YAZ_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
    
  
  case yaz in
  c|c_r|pthread*) ;;
  *) 
    if test "$ext_shared" = "yes"; then
        YAZ_SHARED_LIBADD="$YAZ_SHARED_LIBADD -lyaz" 
    else
      
  
  case yaz in
  c|c_r|pthread*) ;;
  *) 
      DLIBS="$DLIBS -lyaz" 
   ;;
  esac


    fi
   ;;
  esac


    
  for ac_i in $YAZINC; do
    case $ac_i in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/include"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p=$ac_ii
  else
    
    ep_dir="`echo $ac_ii|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi

    ;;
    esac
  done

    
  PHP_VAR_SUBST="$PHP_VAR_SUBST YAZ_SHARED_LIBADD"

    
  ext_builddir=ext/yaz
  ext_srcdir=$abs_srcdir/ext/yaz

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/yaz in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/yaz"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/yaz/"; ac_bdir="ext/yaz/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_yaz.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC yaz"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC yaz"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/yaz in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/yaz"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/yaz/"; ac_bdir="ext/yaz/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in php_yaz.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_yaz="$shared_objects_yaz $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/yaz.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_yaz"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/yaz.la: $ext_builddir/yaz.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/yaz.la \$(phplibdir)

$ext_builddir/yaz.la: \$(shared_objects_yaz) \$(YAZ_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_yaz) \$(YAZ_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_YAZ 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/yaz in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/yaz"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/yaz/"; ac_bdir="ext/yaz/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_yaz.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC yaz"
    else
      
  
  case ext/yaz in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/yaz"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/yaz/"; ac_bdir="ext/yaz/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_yaz.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC yaz"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


  else
    { echo "configure: error: YAZ not found (missing $yazconfig)" 1>&2; exit 1; }
  fi
fi




echo $ac_n "checking whether to include YP support""... $ac_c" 1>&6
echo "configure:76889: checking whether to include YP support" >&5
# Check whether --enable-yp or --disable-yp was given.
if test "${enable_yp+set}" = set; then
  enableval="$enable_yp"
  PHP_YP=$enableval
else
  
  PHP_YP=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_YP=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_YP in
shared,*)
  PHP_YP=`echo "$PHP_YP"|sed 's/^shared,//'`
  ;;
shared)
  PHP_YP=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_YP" != "no"; then

  echo $ac_n "checking for yp_match in -lnsl""... $ac_c" 1>&6
echo "configure:76935: checking for yp_match in -lnsl" >&5
ac_lib_var=`echo nsl'_'yp_match | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lnsl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 76943 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char yp_match();

int main() {
yp_match()
; return 0; }
EOF
if { (eval echo configure:76954: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
	YP_LIBS=nsl
	YP_CHECK_IN_LIB=nsl
	
else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for yp_match in -lc""... $ac_c" 1>&6
echo "configure:76976: checking for yp_match in -lc" >&5
ac_lib_var=`echo c'_'yp_match | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lc  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 76984 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char yp_match();

int main() {
yp_match()
; return 0; }
EOF
if { (eval echo configure:76995: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
		YP_LIBS=
		YP_CHECK_IN_LIB=c
	
else
  echo "$ac_t""no" 1>&6

		{ echo "configure: error: Unable to find required yp/nis library" 1>&2; exit 1; }
	
fi

  
fi



  cat >> confdefs.h <<\EOF
#define HAVE_YP 1
EOF

  
  ext_builddir=ext/yp
  ext_srcdir=$abs_srcdir/ext/yp

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/yp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/yp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/yp/"; ac_bdir="ext/yp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in yp.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC yp"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC yp"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/yp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/yp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/yp/"; ac_bdir="ext/yp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in yp.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_yp="$shared_objects_yp $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/yp.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_yp"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/yp.la: $ext_builddir/yp.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/yp.la \$(phplibdir)

$ext_builddir/yp.la: \$(shared_objects_yp) \$(YP_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_yp) \$(YP_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_YP 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/yp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/yp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/yp/"; ac_bdir="ext/yp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in yp.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC yp"
    else
      
  
  case ext/yp in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/yp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/yp/"; ac_bdir="ext/yp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in yp.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC yp"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"



  
  PHP_VAR_SUBST="$PHP_VAR_SUBST YP_SHARED_LIBADD"


  if test -n "$YP_LIBS"; then
    

  if test "$ext_shared" = "yes"; then
    YP_SHARED_LIBADD="-l$YP_LIBS $YP_SHARED_LIBADD"
    if test -n "$YP_LIBDIR"; then
      
  if test "$YP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$YP_LIBDIR" || echo "$YP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$YP_LIBDIR
  else
    
    ep_dir="`echo $YP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$YP_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        YP_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $YP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$YP_LIBDIR"; then
    
  if test "$YP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$YP_LIBDIR" || echo "$YP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$YP_LIBDIR
  else
    
    ep_dir="`echo $YP_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$YP_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case $YP_LIBS in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-l$YP_LIBS $LIBS" 
   ;;
  esac




  fi


  fi



  case $host_alias in
  *solaris*)
    cat >> confdefs.h <<\EOF
#define SOLARIS_YP 1
EOF
 ;;
  esac
fi




echo $ac_n "checking for ZIP support""... $ac_c" 1>&6
echo "configure:77357: checking for ZIP support" >&5
# Check whether --with-zip or --without-zip was given.
if test "${with_zip+set}" = set; then
  withval="$with_zip"
  PHP_ZIP=$withval
else
  
  PHP_ZIP=no

  if test "$PHP_ENABLE_ALL" && test "yes" = "yes"; then
    PHP_ZIP=$PHP_ENABLE_ALL
  fi

fi



ext_output="yes, shared"
ext_shared=yes
case $PHP_ZIP in
shared,*)
  PHP_ZIP=`echo "$PHP_ZIP"|sed 's/^shared,//'`
  ;;
shared)
  PHP_ZIP=yes
  ;;
no)
  ext_output=no
  ext_shared=no
  ;;
*)
  ext_output=yes
  ext_shared=no
  ;;
esac



echo "$ac_t""$ext_output" 1>&6




if test "$PHP_ZIP" != "no"; then
  for i in $PHP_ZIP /usr/local /usr ; do
    if test -f $i/include/zzlib/zziplib.h; then
      ZZIPLIB_DIR=$i
      ZZIPLIB_INCDIR=$i/include/zzlib
    elif test -f $i/include/zziplib.h; then
      ZZIPLIB_DIR=$i
      ZZIPLIB_INCDIR=$i/include
    fi
  done

  if test -z "$ZZIPLIB_DIR"; then
    { echo "configure: error: Cannot find libzzip" 1>&2; exit 1; }
  fi

  ZZIPLIB_LIBDIR=$ZZIPLIB_DIR/lib

  
  save_old_LDFLAGS=$LDFLAGS
  LDFLAGS="
    -L$ZZIPLIB_LIBDIR
   $LDFLAGS"
  echo $ac_n "checking for zzip_open in -lzzip""... $ac_c" 1>&6
echo "configure:77423: checking for zzip_open in -lzzip" >&5
ac_lib_var=`echo zzip'_'zzip_open | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lzzip  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 77431 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char zzip_open();

int main() {
zzip_open()
; return 0; }
EOF
if { (eval echo configure:77442: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    LDFLAGS=$save_old_LDFLAGS
    
    cat >> confdefs.h <<\EOF
#define HAVE_ZZIPLIB 1
EOF

  
  
else
  echo "$ac_t""no" 1>&6

    LDFLAGS=$save_old_LDFLAGS
    unset ac_cv_func_zzip
    
    { echo "configure: error: zziplib module requires zzlib >= 0.10.6." 1>&2; exit 1; }
  
  
fi


  

  if test "$ext_shared" = "yes"; then
    ZIP_SHARED_LIBADD="-lzzip $ZIP_SHARED_LIBADD"
    if test -n "$ZZIPLIB_LIBDIR"; then
      
  if test "$ZZIPLIB_LIBDIR" != "/usr/lib"; then
    
  if test -z "$ZZIPLIB_LIBDIR" || echo "$ZZIPLIB_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$ZZIPLIB_LIBDIR
  else
    
    ep_dir="`echo $ZZIPLIB_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ZZIPLIB_LIBDIR\"`"
  fi

    
      if test "$ext_shared" = "yes"; then
        ZIP_SHARED_LIBADD="$ld_runpath_switch$ai_p -L$ai_p $ZIP_SHARED_LIBADD"
      else
        
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


      fi
    
  fi

    fi
  else
    

  if test -n "$ZZIPLIB_LIBDIR"; then
    
  if test "$ZZIPLIB_LIBDIR" != "/usr/lib"; then
    
  if test -z "$ZZIPLIB_LIBDIR" || echo "$ZZIPLIB_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p=$ZZIPLIB_LIBDIR
  else
    
    ep_dir="`echo $ZZIPLIB_LIBDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ZZIPLIB_LIBDIR\"`"
  fi

    
      
  
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
    LDFLAGS="$LDFLAGS -L$ai_p"
    PHP_RPATHS="$PHP_RPATHS $ai_p"
  
  fi


    
  fi

  fi
  
  
  case zzip in
  c|c_r|pthread*) ;;
  *) 
      LIBS="-lzzip $LIBS" 
   ;;
  esac




  fi


  
  if test "$ZZIPLIB_INCDIR" != "/usr/include"; then
    
  if test -z "$ZZIPLIB_INCDIR" || echo "$ZZIPLIB_INCDIR" | grep '^/' >/dev/null ; then
    ai_p=$ZZIPLIB_INCDIR
  else
    
    ep_dir="`echo $ZZIPLIB_INCDIR|sed 's%/*[^/][^/]*/*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ZZIPLIB_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      if test ""; then
        INCLUDES="-I$ai_p $INCLUDES"
      else
        INCLUDES="$INCLUDES -I$ai_p"
      fi
    
  fi

  fi


  
  ext_builddir=ext/zip
  ext_srcdir=$abs_srcdir/ext/zip

  ac_extra=

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then

    
  
  case ext/zip in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/zip"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/zip/"; ac_bdir="ext/zip/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in zip.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    EXT_STATIC="$EXT_STATIC zip"
    if test "$ext_shared" != "nocli"; then
      EXT_CLI_STATIC="$EXT_CLI_STATIC zip"
    fi
  else
    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
      
  case ext/zip in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/zip"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/zip/"; ac_bdir="ext/zip/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$shared_c_pre
  b_cxx_pre=$shared_cxx_pre
  b_c_meta=$shared_c_meta
  b_cxx_meta=$shared_cxx_meta
  b_c_post=$shared_c_post
  b_cxx_post=$shared_cxx_post
  b_lo=$shared_lo


  old_IFS=$IFS
  for ac_src in zip.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      shared_objects_zip="$shared_objects_zip $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done

      
  PHP_MODULES="$PHP_MODULES \$(phplibdir)/zip.la"
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_zip"

  cat >>Makefile.objects<<EOF
\$(phplibdir)/zip.la: $ext_builddir/zip.la
	\$(LIBTOOL) --mode=install cp $ext_builddir/zip.la \$(phplibdir)

$ext_builddir/zip.la: \$(shared_objects_zip) \$(ZIP_SHARED_DEPENDENCIES)
	\$(LIBTOOL) --mode=link \$(CC) \$(COMMON_FLAGS) \$(CFLAGS_CLEAN) \$(EXTRA_CFLAGS) \$(LDFLAGS) -o \$@ -export-dynamic -avoid-version -prefer-pic -module -rpath \$(phplibdir) \$(EXTRA_LDFLAGS) \$(shared_objects_zip) \$(ZIP_SHARED_LIBADD)

EOF

      cat >> confdefs.h <<EOF
#define COMPILE_DL_ZIP 1
EOF

    fi
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
    if test "$PHP_SAPI" = "cgi"; then
      
  
  case ext/zip in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/zip"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/zip/"; ac_bdir="ext/zip/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in zip.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


      EXT_STATIC="$EXT_STATIC zip"
    else
      
  
  case ext/zip in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "ext/zip"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/ext/zip/"; ac_bdir="ext/zip/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in zip.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


    fi
    EXT_CLI_STATIC="$EXT_CLI_STATIC zip"
  fi
  
  BUILD_DIR="$BUILD_DIR $ext_builddir"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST ZIP_SHARED_LIBADD"

fi







# Check whether --enable- or --disable- was given.
if test "${enable_+set}" = set; then
  enableval="$enable_"
  :
fi



echo $ac_n "checking whether to enable versioning""... $ac_c" 1>&6
echo "configure:77834: checking whether to enable versioning" >&5
# Check whether --enable-versioning or --disable-versioning was given.
if test "${enable_versioning+set}" = set; then
  enableval="$enable_versioning"
  
  if test "x$APXS" != "x"; then
    PHP_VERSIONING=$enableval
  else
    PHP_VERSIONING=no
  fi

else
  
  PHP_VERSIONING=no

fi

echo "$ac_t""$PHP_VERSIONING" 1>&6

if test "$PHP_VERSIONING" = "yes"; then
  test -z "$PHP_SYM_FILE" && PHP_SYM_FILE="$abs_srcdir/sapi/$PHP_SAPI/php.sym"
  if test -f "$PHP_SYM_FILE"; then
    EXTRA_LDFLAGS="-export-symbols $PHP_SYM_FILE $EXTRA_LDFLAGS"
  fi
fi

enable_shared=yes
enable_static=yes
unset with_pic

case $php_build_target in
program|static)
    standard_libtool_flag='-prefer-non-pic -static'
    if test -z "$PHP_MODULES"; then
        enable_shared=no
    fi
;;
shared)
    enable_static=no
    standard_libtool_flag=-prefer-pic
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS -avoid-version -module"
;;
esac



if test "$REGEX_TYPE" = "php"; then
  cat >> confdefs.h <<\EOF
#define HSREGEX 1
EOF

  cat >> confdefs.h <<\EOF
#define REGEX 1
EOF

  
  
  case regex in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "regex"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/regex/"; ac_bdir="regex/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in regcomp.c regexec.c regerror.c regfree.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


elif test "$REGEX_TYPE" = "system"; then
  cat >> confdefs.h <<\EOF
#define REGEX 0
EOF

fi

echo $ac_n "checking which regex library to use""... $ac_c" 1>&6
echo "configure:77938: checking which regex library to use" >&5
echo "$ac_t""$REGEX_TYPE" 1>&6


EXTRA_LIBS="$EXTRA_LIBS $DLIBS $LIBS"

if test "$ac_cv_lib_crypt_crypt" = "yes"; then
  EXTRA_LIBS="-lcrypt $EXTRA_LIBS -lcrypt"
fi

unset LIBS LDFLAGS



  echo "$ac_t""" 1>&6
  echo "$ac_t""${T_MD}Configuring Zend${T_ME}" 1>&6











if test "$YACC" != "bison -y"; then
    echo "configure: warning: You will need bison if you want to regenerate the Zend parser." 1>&2
else
    echo $ac_n "checking bison version""... $ac_c" 1>&6
echo "configure:77969: checking bison version" >&5
    set `bison --version| grep 'GNU Bison' | cut -d ' ' -f 4 | sed -e 's/\./ /'`
    if test "${1}" = "1" -a "${2}" -lt "28"; then
        echo "configure: warning: You will need bison 1.28 if you want to regenerate the Zend parser (found ${1}.${2})." 1>&2
    fi
    echo "$ac_t""${1}.${2} (ok)" 1>&6
fi



if test "$CC" = "gcc" -a "$ac_cv_prog_cc_g" = "yes" -a \
   "`uname -sv`" = "AIX 4"; then
	CFLAGS=`echo $CFLAGS | sed -e 's/-g//'`
fi

if test "$ac_cv_prog_gcc" = "yes" -a "`uname -s`" = "Darwin"; then
        CPPFLAGS="$CPPFLAGS -no-cpp-precomp"
fi

for ac_hdr in limits.h \
malloc.h \
string.h \
unistd.h \
stdarg.h \
sys/types.h \
sys/time.h \
signal.h \
unix.h \
dlfcn.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:78001: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 78006 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:78011: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


echo $ac_n "checking for size_t""... $ac_c" 1>&6
echo "configure:78039: checking for size_t" >&5
if eval "test \"`echo '$''{'ac_cv_type_size_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 78044 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "(^|[^a-zA-Z_0-9])size_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_size_t=yes
else
  rm -rf conftest*
  ac_cv_type_size_t=no
fi
rm -f conftest*

fi
echo "$ac_t""$ac_cv_type_size_t" 1>&6
if test $ac_cv_type_size_t = no; then
  cat >> confdefs.h <<\EOF
#define size_t unsigned
EOF

fi

echo $ac_n "checking return type of signal handlers""... $ac_c" 1>&6
echo "configure:78072: checking return type of signal handlers" >&5
if eval "test \"`echo '$''{'ac_cv_type_signal'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 78077 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <signal.h>
#ifdef signal
#undef signal
#endif
#ifdef __cplusplus
extern "C" void (*signal (int, void (*)(int)))(int);
#else
void (*signal ()) ();
#endif

int main() {
int i;
; return 0; }
EOF
if { (eval echo configure:78094: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_type_signal=void
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_type_signal=int
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_type_signal" 1>&6
cat >> confdefs.h <<EOF
#define RETSIGTYPE $ac_cv_type_signal
EOF



echo $ac_n "checking for uint""... $ac_c" 1>&6
echo "configure:78114: checking for uint" >&5
if eval "test \"`echo '$''{'ac_cv_type_uint'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 78119 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "(^|[^a-zA-Z_0-9])uint[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_uint=yes
else
  rm -rf conftest*
  ac_cv_type_uint=no
fi
rm -f conftest*

fi
echo "$ac_t""$ac_cv_type_uint" 1>&6
if test $ac_cv_type_uint = no; then
  cat >> confdefs.h <<\EOF
#define uint unsigned int 
EOF

fi

echo $ac_n "checking for ulong""... $ac_c" 1>&6
echo "configure:78147: checking for ulong" >&5
if eval "test \"`echo '$''{'ac_cv_type_ulong'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 78152 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "(^|[^a-zA-Z_0-9])ulong[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_ulong=yes
else
  rm -rf conftest*
  ac_cv_type_ulong=no
fi
rm -f conftest*

fi
echo "$ac_t""$ac_cv_type_ulong" 1>&6
if test $ac_cv_type_ulong = no; then
  cat >> confdefs.h <<\EOF
#define ulong unsigned long 
EOF

fi



echo $ac_n "checking for vprintf""... $ac_c" 1>&6
echo "configure:78182: checking for vprintf" >&5
if eval "test \"`echo '$''{'ac_cv_func_vprintf'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 78187 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char vprintf(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char vprintf();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_vprintf) || defined (__stub___vprintf)
choke me
#else
vprintf();
#endif

; return 0; }
EOF
if { (eval echo configure:78210: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_vprintf=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_vprintf=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'vprintf`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_VPRINTF 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

if test "$ac_cv_func_vprintf" != yes; then
echo $ac_n "checking for _doprnt""... $ac_c" 1>&6
echo "configure:78234: checking for _doprnt" >&5
if eval "test \"`echo '$''{'ac_cv_func__doprnt'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 78239 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char _doprnt(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char _doprnt();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub__doprnt) || defined (__stub____doprnt)
choke me
#else
_doprnt();
#endif

; return 0; }
EOF
if { (eval echo configure:78262: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func__doprnt=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func__doprnt=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'_doprnt`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_DOPRNT 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

fi

echo $ac_n "checking for 8-bit clean memcmp""... $ac_c" 1>&6
echo "configure:78287: checking for 8-bit clean memcmp" >&5
if eval "test \"`echo '$''{'ac_cv_func_memcmp_clean'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_func_memcmp_clean=no
else
  cat > conftest.$ac_ext <<EOF
#line 78295 "configure"
#include "confdefs.h"

main()
{
  char c0 = 0x40, c1 = 0x80, c2 = 0x81;
  exit(memcmp(&c0, &c2, 1) < 0 && memcmp(&c1, &c2, 1) < 0 ? 0 : 1);
}

EOF
if { (eval echo configure:78305: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_func_memcmp_clean=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_func_memcmp_clean=no
fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_func_memcmp_clean" 1>&6
test $ac_cv_func_memcmp_clean = no && LIBOBJS="$LIBOBJS memcmp.${ac_objext}"

# The Ultrix 4.2 mips builtin alloca declared by alloca.h only works
# for constant arguments.  Useless!
echo $ac_n "checking for working alloca.h""... $ac_c" 1>&6
echo "configure:78325: checking for working alloca.h" >&5
if eval "test \"`echo '$''{'ac_cv_header_alloca_h'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 78330 "configure"
#include "confdefs.h"
#include <alloca.h>
int main() {
char *p = alloca(2 * sizeof(int));
; return 0; }
EOF
if { (eval echo configure:78337: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_header_alloca_h=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_alloca_h=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_header_alloca_h" 1>&6
if test $ac_cv_header_alloca_h = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_ALLOCA_H 1
EOF

fi

echo $ac_n "checking for alloca""... $ac_c" 1>&6
echo "configure:78358: checking for alloca" >&5
if eval "test \"`echo '$''{'ac_cv_func_alloca_works'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 78363 "configure"
#include "confdefs.h"

#ifdef __GNUC__
# define alloca __builtin_alloca
#else
# ifdef _MSC_VER
#  include <malloc.h>
#  define alloca _alloca
# else
#  if HAVE_ALLOCA_H
#   include <alloca.h>
#  else
#   ifdef _AIX
 #pragma alloca
#   else
#    ifndef alloca /* predefined by HP cc +Olibcalls */
char *alloca ();
#    endif
#   endif
#  endif
# endif
#endif

int main() {
char *p = (char *) alloca(1);
; return 0; }
EOF
if { (eval echo configure:78391: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_func_alloca_works=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_func_alloca_works=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_func_alloca_works" 1>&6
if test $ac_cv_func_alloca_works = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_ALLOCA 1
EOF

fi

if test $ac_cv_func_alloca_works = no; then
  # The SVR3 libPW and SVR4 libucb both contain incompatible functions
  # that cause trouble.  Some versions do not even contain alloca or
  # contain a buggy version.  If you still want to use their alloca,
  # use ar to extract alloca.o from them instead of compiling alloca.c.
  ALLOCA=alloca.${ac_objext}
  cat >> confdefs.h <<\EOF
#define C_ALLOCA 1
EOF


echo $ac_n "checking whether alloca needs Cray hooks""... $ac_c" 1>&6
echo "configure:78423: checking whether alloca needs Cray hooks" >&5
if eval "test \"`echo '$''{'ac_cv_os_cray'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 78428 "configure"
#include "confdefs.h"
#if defined(CRAY) && ! defined(CRAY2)
webecray
#else
wenotbecray
#endif

EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "webecray" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_os_cray=yes
else
  rm -rf conftest*
  ac_cv_os_cray=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_os_cray" 1>&6
if test $ac_cv_os_cray = yes; then
for ac_func in _getb67 GETB67 getb67; do
  echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:78453: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 78458 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:78481: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<EOF
#define CRAY_STACKSEG_END $ac_func
EOF

  break
else
  echo "$ac_t""no" 1>&6
fi

done
fi

echo $ac_n "checking stack direction for C alloca""... $ac_c" 1>&6
echo "configure:78508: checking stack direction for C alloca" >&5
if eval "test \"`echo '$''{'ac_cv_c_stack_direction'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_c_stack_direction=0
else
  cat > conftest.$ac_ext <<EOF
#line 78516 "configure"
#include "confdefs.h"
find_stack_direction ()
{
  static char *addr = 0;
  auto char dummy;
  if (addr == 0)
    {
      addr = &dummy;
      return find_stack_direction ();
    }
  else
    return (&dummy > addr) ? 1 : -1;
}
main ()
{
  exit (find_stack_direction() < 0);
}
EOF
if { (eval echo configure:78535: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_c_stack_direction=1
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_c_stack_direction=-1
fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_c_stack_direction" 1>&6
cat >> confdefs.h <<EOF
#define STACK_DIRECTION $ac_cv_c_stack_direction
EOF

fi

for ac_func in memcpy strdup getpid kill strtod strtol finite fpclass
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:78559: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 78564 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:78587: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


  echo $ac_n "checking whether sprintf is broken""... $ac_c" 1>&6
echo "configure:78613: checking whether sprintf is broken" >&5
if eval "test \"`echo '$''{'ac_cv_broken_sprintf'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    if test "$cross_compiling" = yes; then
  
      ac_cv_broken_sprintf=no
    
else
  cat > conftest.$ac_ext <<EOF
#line 78624 "configure"
#include "confdefs.h"
main() {char buf[20];exit(sprintf(buf,"testing 123")!=11); }
EOF
if { (eval echo configure:78628: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
      ac_cv_broken_sprintf=no
    
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
      ac_cv_broken_sprintf=yes
    
fi
rm -fr conftest*
fi

  
fi

echo "$ac_t""$ac_cv_broken_sprintf" 1>&6
  if test "$ac_cv_broken_sprintf" = "yes"; then
    ac_result=1
  else
    ac_result=0
  fi
  cat >> confdefs.h <<EOF
#define ZEND_BROKEN_SPRINTF $ac_result
EOF



for ac_func in finite isfinite isinf isnan
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:78662: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 78667 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:78690: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done



  echo $ac_n "checking whether fp_except is defined""... $ac_c" 1>&6
echo "configure:78717: checking whether fp_except is defined" >&5
if eval "test \"`echo '$''{'ac_cv_type_fp_except'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    cat > conftest.$ac_ext <<EOF
#line 78723 "configure"
#include "confdefs.h"

#include <floatingpoint.h>

int main() {

fp_except x = (fp_except) 0;

; return 0; }
EOF
if { (eval echo configure:78734: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
     ac_cv_type_fp_except=yes

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
     ac_cv_type_fp_except=no

fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_type_fp_except" 1>&6
  if test "$ac_cv_type_fp_except" = "yes"; then
    cat >> confdefs.h <<\EOF
#define HAVE_FP_EXCEPT 1
EOF

  fi

	

for ac_hdr in dlfcn.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:78764: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 78769 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:78774: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done



echo $ac_n "checking whether dlsym() requires a leading underscore in symbol names""... $ac_c" 1>&6
echo "configure:78803: checking whether dlsym() requires a leading underscore in symbol names" >&5
if test "$cross_compiling" = yes; then :
  
else
    lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
  lt_status=$lt_dlunknown
  cat > conftest.$ac_ext <<EOF
#line 78810 "configure"
#include "confdefs.h"

#if HAVE_DLFCN_H
#include <dlfcn.h>
#endif

#include <stdio.h>

#ifdef RTLD_GLOBAL
#  define LT_DLGLOBAL		RTLD_GLOBAL
#else
#  ifdef DL_GLOBAL
#    define LT_DLGLOBAL		DL_GLOBAL
#  else
#    define LT_DLGLOBAL		0
#  endif
#endif

/* We may have to define LT_DLLAZY_OR_NOW in the command line if we
   find out it does not work in some platform. */
#ifndef LT_DLLAZY_OR_NOW
#  ifdef RTLD_LAZY
#    define LT_DLLAZY_OR_NOW		RTLD_LAZY
#  else
#    ifdef DL_LAZY
#      define LT_DLLAZY_OR_NOW		DL_LAZY
#    else
#      ifdef RTLD_NOW
#        define LT_DLLAZY_OR_NOW	RTLD_NOW
#      else
#        ifdef DL_NOW
#          define LT_DLLAZY_OR_NOW	DL_NOW
#        else
#          define LT_DLLAZY_OR_NOW	0
#        endif
#      endif
#    endif
#  endif
#endif

#ifdef __cplusplus
extern "C" void exit (int);
#endif

void fnord() { int i=42;}
int main ()
{
  void *self = dlopen (0, LT_DLGLOBAL|LT_DLLAZY_OR_NOW);
  int status = $lt_dlunknown;

  if (self)
    {
      if (dlsym (self,"fnord"))       status = $lt_dlno_uscore;
      else if (dlsym( self,"_fnord")) status = $lt_dlneed_uscore;
      /* dlclose (self); */
    }

    exit (status);
}
EOF
  if { (eval echo configure:78871: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} 2>/dev/null; then
    (./conftest; exit; ) 2>/dev/null
    lt_status=$?
    case x$lt_status in
      x$lt_dlno_uscore) 
  echo "$ac_t""no" 1>&6
 ;;
      x$lt_dlneed_uscore) 
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define DLSYM_NEEDS_UNDERSCORE 1
EOF

 ;;
      x$lt_unknown|x*) 
  echo "$ac_t""no" 1>&6
 ;;
    esac
  else :
    # compilation failed
    
  echo "$ac_t""no" 1>&6

  fi
fi
rm -fr conftest*




# Check whether --enable-experimental-zts or --disable-experimental-zts was given.
if test "${enable_experimental_zts+set}" = set; then
  enableval="$enable_experimental_zts"
  
  ZEND_EXPERIMENTAL_ZTS=$enableval

else
  
  ZEND_EXPERIMENTAL_ZTS=no

fi
  

# Check whether --enable-inline-optimization or --disable-inline-optimization was given.
if test "${enable_inline_optimization+set}" = set; then
  enableval="$enable_inline_optimization"
  
  ZEND_INLINE_OPTIMIZATION=$enableval

else
  
  ZEND_INLINE_OPTIMIZATION=yes

fi


# Check whether --enable-memory-limit or --disable-memory-limit was given.
if test "${enable_memory_limit+set}" = set; then
  enableval="$enable_memory_limit"
  
  ZEND_MEMORY_LIMIT=$enableval

else
  
  ZEND_MEMORY_LIMIT=no

fi


# Check whether --enable-zend-multibyte or --disable-zend-multibyte was given.
if test "${enable_zend_multibyte+set}" = set; then
  enableval="$enable_zend_multibyte"
  
  ZEND_MULTIBYTE=$enableval

else
  
  ZEND_MULTIBYTE=no

fi


echo $ac_n "checking whether to enable thread-safety""... $ac_c" 1>&6
echo "configure:78954: checking whether to enable thread-safety" >&5
echo "$ac_t""$ZEND_EXPERIMENTAL_ZTS" 1>&6

echo $ac_n "checking whether to enable inline optimization for GCC""... $ac_c" 1>&6
echo "configure:78958: checking whether to enable inline optimization for GCC" >&5
echo "$ac_t""$ZEND_INLINE_OPTIMIZATION" 1>&6

echo $ac_n "checking whether to enable a memory limit""... $ac_c" 1>&6
echo "configure:78962: checking whether to enable a memory limit" >&5
echo "$ac_t""$ZEND_MEMORY_LIMIT" 1>&6

echo $ac_n "checking whether to enable Zend debugging""... $ac_c" 1>&6
echo "configure:78966: checking whether to enable Zend debugging" >&5
echo "$ac_t""$ZEND_DEBUG" 1>&6

echo $ac_n "checking whether to enable Zend multibyte""... $ac_c" 1>&6
echo "configure:78970: checking whether to enable Zend multibyte" >&5
echo "$ac_t""$ZEND_MULTIBYTE" 1>&6

if test "$ZEND_DEBUG" = "yes"; then
  cat >> confdefs.h <<\EOF
#define ZEND_DEBUG 1
EOF

  echo " $CFLAGS" | grep ' -g' >/dev/null || DEBUG_CFLAGS="-g"
  if test "$CFLAGS" = "-g -O2"; then
  	CFLAGS=-g
  fi
  test -n "$GCC" && DEBUG_CFLAGS="$DEBUG_CFLAGS -Wall"
  test -n "$GCC" && test "$USE_MAINTAINER_MODE" = "yes" && \
    DEBUG_CFLAGS="$DEBUG_CFLAGS -Wmissing-prototypes -Wstrict-prototypes -Wmissing-declarations"
else
  cat >> confdefs.h <<\EOF
#define ZEND_DEBUG 0
EOF

fi

test -n "$DEBUG_CFLAGS" && CFLAGS="$CFLAGS $DEBUG_CFLAGS"

if test "$ZEND_EXPERIMENTAL_ZTS" = "yes"; then
  cat >> confdefs.h <<\EOF
#define ZTS 1
EOF

  CFLAGS="$CFLAGS -DZTS"
fi  

if test "$ZEND_MEMORY_LIMIT" = "yes"; then
  cat >> confdefs.h <<\EOF
#define MEMORY_LIMIT 1
EOF

else
  cat >> confdefs.h <<\EOF
#define MEMORY_LIMIT 0
EOF

fi

if test "$ZEND_MULTIBYTE" = "yes"; then
  cat >> confdefs.h <<\EOF
#define ZEND_MULTIBYTE 1
EOF

fi


if test -n "$GCC" && test "$ZEND_INLINE_OPTIMIZATION" != "yes"; then
  INLINE_CFLAGS=`echo $ac_n "$CFLAGS $ac_c" | sed s/-O[0-9s]*//`
else
  INLINE_CFLAGS="$CFLAGS"
fi


echo $ac_n "checking for inline""... $ac_c" 1>&6
echo "configure:79030: checking for inline" >&5
if eval "test \"`echo '$''{'ac_cv_c_inline'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_cv_c_inline=no
for ac_kw in inline __inline__ __inline; do
  cat > conftest.$ac_ext <<EOF
#line 79037 "configure"
#include "confdefs.h"

int main() {
} $ac_kw foo() {
; return 0; }
EOF
if { (eval echo configure:79044: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_c_inline=$ac_kw; break
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
done

fi

echo "$ac_t""$ac_cv_c_inline" 1>&6
case "$ac_cv_c_inline" in
  inline | yes) ;;
  no) cat >> confdefs.h <<\EOF
#define inline 
EOF
 ;;
  *)  cat >> confdefs.h <<EOF
#define inline $ac_cv_c_inline
EOF
 ;;
esac






TSRM_LIB='TSRM/libtsrm.la'
TSRM_DIR=TSRM
CPPFLAGS="$CPPFLAGS -I\$(top_builddir)/TSRM"

if test "$ZEND_EXPERIMENTAL_ZTS" = "yes"; then
  cat >> confdefs.h <<\EOF
#define ZTS 1
EOF

  PHP_THREAD_SAFETY=yes
else
  PHP_THREAD_SAFETY=no
fi

if test "$abs_srcdir" != "$abs_builddir"; then
  INCLUDES="$INCLUDES -I\$(top_srcdir)/main -I\$(top_srcdir)/Zend"
  INCLUDES="$INCLUDES -I\$(top_srcdir)/TSRM"
fi

ZEND_EXTRA_LIBS="$LIBS"
unset LIBS LDFLAGS


  echo "$ac_t""" 1>&6
  echo "$ac_t""${T_MD}Configuring TSRM${T_ME}" 1>&6




for ac_hdr in stdarg.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:79107: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 79112 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:79117: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done



if test "$PHP_THREAD_SAFETY" = "yes"; then
  


# Check whether --with-tsrm-pth or --without-tsrm-pth was given.
if test "${with_tsrm_pth+set}" = set; then
  withval="$with_tsrm_pth"
  
  TSRM_PTH=$withval

else
  
  TSRM_PTH=no

fi


# Check whether --with-tsrm-st or --without-tsrm-st was given.
if test "${with_tsrm_st+set}" = set; then
  withval="$with_tsrm_st"
  
  TSRM_ST=$withval

else
  
  TSRM_ST=no

fi


# Check whether --with-tsrm-pthreads or --without-tsrm-pthreads was given.
if test "${with_tsrm_pthreads+set}" = set; then
  withval="$with_tsrm_pthreads"
  
  TSRM_PTHREADS=$withval

else
  
  TSRM_PTHREADS=yes

fi


test "$TSRM_PTH" = "yes" && TSRM_PTH=pth-config

if test "$TSRM_PTH" != "no"; then
  

echo $ac_n "checking for GNU Pth""... $ac_c" 1>&6
echo "configure:79194: checking for GNU Pth" >&5
PTH_PREFIX="`$TSRM_PTH --prefix`"
if test -z "$PTH_PREFIX"; then
  echo "$ac_t""Please check your Pth installation" 1>&6
fi

CPPFLAGS="$CPPFLAGS `$TSRM_PTH --cflags`"
LDFLAGS="$LDFLAGS `$TSRM_PTH --ldflags`"
LIBS="$LIBS `$TSRM_PTH --libs`"

cat >> confdefs.h <<\EOF
#define GNUPTH 1
EOF

echo "$ac_t""yes - installed in $PTH_PREFIX" 1>&6


elif test "$TSRM_ST" != "no"; then
  
  if test -r "$TSRM_ST/include/st.h"; then
    CPPFLAGS="$CPPFLAGS -I$TSRM_ST/include"
    LDFLAGS="$LDFLAGS -L$TSRM_ST/lib"
  elif test -r "$TSRM_ST/st.h"; then
    CPPFLAGS="$CPPFLAGS -I$TSRM_ST"
    LDFLAGS="$LDFLAGS -L$TSRM_ST"
  fi
  for ac_hdr in st.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:79224: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 79229 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:79234: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: Sorry, I was unable to locate the State Threads header file.  Please specify the prefix using --with-tsrm-st=/prefix" 1>&2; exit 1; }
  
fi
done

  LIBS="$LIBS -lst"
  echo $ac_n "checking for SGI's State Threads""... $ac_c" 1>&6
echo "configure:79264: checking for SGI's State Threads" >&5
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define TSRM_ST 1
EOF


elif test "$TSRM_PTHREADS" != "no"; then
  
		


if test "$beos_threads" = "1"; then
  pthreads_working="yes"
  ac_cv_pthreads_cflags=""
else
  save_CFLAGS=$CFLAGS
  save_LIBS=$LIBS
  
if test -n "$ac_cv_pthreads_lib"; then
  LIBS="$LIBS -l$ac_cv_pthreads_lib"
fi

if test -n "$ac_cv_pthreads_cflags"; then
  CFLAGS="$CFLAGS $ac_cv_pthreads_cflags"
fi

  
if test "$cross_compiling" = yes; then
  pthreads_working=no 
else
  cat > conftest.$ac_ext <<EOF
#line 79296 "configure"
#include "confdefs.h"

#include <pthread.h>
#include <stddef.h>

void *thread_routine(void *data) {
    return data;
}

int main() {
    pthread_t thd;
    pthread_mutexattr_t mattr;
    int data = 1;
    pthread_mutexattr_init(&mattr);
    return pthread_create(&thd, NULL, thread_routine, &data);
} 
EOF
if { (eval echo configure:79314: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
  pthreads_working=yes
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  pthreads_working=no
  
fi
rm -fr conftest*
fi
  
  LIBS=$save_LIBS
  CFLAGS=$save_CFLAGS

  echo $ac_n "checking for pthreads_cflags""... $ac_c" 1>&6
echo "configure:79334: checking for pthreads_cflags" >&5
if eval "test \"`echo '$''{'ac_cv_pthreads_cflags'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  ac_cv_pthreads_cflags=
  if test "$pthreads_working" != "yes"; then
    for flag in -kthread -pthread -pthreads -mthreads -Kthread -threads -mt -qthreaded; do 
      ac_save=$CFLAGS
      CFLAGS="$CFLAGS $flag"
      
if test "$cross_compiling" = yes; then
  pthreads_working=no 
else
  cat > conftest.$ac_ext <<EOF
#line 79349 "configure"
#include "confdefs.h"

#include <pthread.h>
#include <stddef.h>

void *thread_routine(void *data) {
    return data;
}

int main() {
    pthread_t thd;
    pthread_mutexattr_t mattr;
    int data = 1;
    pthread_mutexattr_init(&mattr);
    return pthread_create(&thd, NULL, thread_routine, &data);
} 
EOF
if { (eval echo configure:79367: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
  pthreads_working=yes
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  pthreads_working=no
  
fi
rm -fr conftest*
fi
  
      CFLAGS=$ac_save
      if test "$pthreads_working" = "yes"; then
        ac_cv_pthreads_cflags=$flag
        break
      fi
    done
  fi
fi

fi

echo "$ac_t""$ac_cv_pthreads_cflags" 1>&6

echo $ac_n "checking for pthreads_lib""... $ac_c" 1>&6
echo "configure:79397: checking for pthreads_lib" >&5
if eval "test \"`echo '$''{'ac_cv_pthreads_lib'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
ac_cv_pthreads_lib=
if test "$pthreads_working" != "yes"; then
  for lib in pthread pthreads c_r; do
    ac_save=$LIBS
    LIBS="$LIBS -l$lib"
    
if test "$cross_compiling" = yes; then
  pthreads_working=no 
else
  cat > conftest.$ac_ext <<EOF
#line 79412 "configure"
#include "confdefs.h"

#include <pthread.h>
#include <stddef.h>

void *thread_routine(void *data) {
    return data;
}

int main() {
    pthread_t thd;
    pthread_mutexattr_t mattr;
    int data = 1;
    pthread_mutexattr_init(&mattr);
    return pthread_create(&thd, NULL, thread_routine, &data);
} 
EOF
if { (eval echo configure:79430: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
  pthreads_working=yes
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  pthreads_working=no
  
fi
rm -fr conftest*
fi
  
    LIBS=$ac_save
    if test "$pthreads_working" = "yes"; then
      ac_cv_pthreads_lib=$lib
      break
    fi
  done
fi

fi

echo "$ac_t""$ac_cv_pthreads_lib" 1>&6

if test "$pthreads_working" = "yes"; then
  threads_result="POSIX-Threads found"
else
  threads_result="POSIX-Threads not found"
fi


if test "$beos_threads" = "1"; then 
  cat >> confdefs.h <<\EOF
#define BETHREADS 1
EOF

else		
  if test "$pthreads_working" != "yes"; then
    { echo "configure: error: Your system seems to lack POSIX threads." 1>&2; exit 1; }
  fi

  cat >> confdefs.h <<\EOF
#define PTHREADS 1
EOF


  echo $ac_n "checking for POSIX threads""... $ac_c" 1>&6
echo "configure:79481: checking for POSIX threads" >&5
  echo "$ac_t""yes" 1>&6
fi

fi


fi
EXTRA_LDFLAGS="$EXTRA_LDFLAGS $LDFLAGS"
EXTRA_LIBS="$EXTRA_LIBS $LIBS"
unset LIBS LDFLAGS

test "$prefix" = "NONE" && prefix=/usr/local
test "$exec_prefix" = "NONE" && exec_prefix='${prefix}'

case $libdir in
  '${exec_prefix}/lib')
    libdir=$libdir/php
    ;;
esac
case $datadir in
  '${prefix}/share')
    datadir=$datadir/php
    ;;
  *) ;;
esac

phplibdir=`pwd`/modules
$php_shtool mkdir -p $phplibdir
phptempdir=`pwd`/libs

old_exec_prefix=$exec_prefix
old_libdir=$libdir
old_datadir=$datadir
exec_prefix=`eval echo $exec_prefix`
libdir=`eval echo $libdir`
datadir=`eval echo $datadir`


ZEND_MODULE_API_NO=`egrep '#define ZEND_MODULE_API_NO ' $srcdir/Zend/zend_modules.h|sed 's/#define ZEND_MODULE_API_NO //'`

if test -z "$EXTENSION_DIR"; then
  extbasedir=$ZEND_MODULE_API_NO
  if test "$oldstyleextdir" = "yes"; then
    if test "$PHP_DEBUG" = "1"; then
      part1=debug
    else
      part1=no-debug
    fi
    if test "$enable_experimental_zts" = "yes"; then
      part2=zts
    else
      part2=non-zts
    fi
    extbasedir=$part1-$part2-$extbasedir
    EXTENSION_DIR=$libdir/extensions/$extbasedir
  else
    if test "$enable_experimental_zts" = "yes"; then
      extbasedir=$extbasedir-zts
    fi
    
    if test "$PHP_DEBUG" = "1"; then
      extbasedir=$extbasedir-debug
    fi
    EXTENSION_DIR=$libdir/$extbasedir
  fi
fi

EXPANDED_PEAR_INSTALLDIR=`eval echo $PEAR_INSTALLDIR`
EXPANDED_EXTENSION_DIR=`eval echo $EXTENSION_DIR`
EXPANDED_LOCALSTATEDIR=`eval echo $localstatedir`
EXPANDED_BINDIR=`eval echo $bindir`
EXPANDED_LIBDIR=$libdir
EXPANDED_SYSCONFDIR=`eval echo $sysconfdir`
EXPANDED_DATADIR=$datadir
EXPANDED_PHP_CONFIG_FILE_PATH=`eval echo "$PHP_CONFIG_FILE_PATH"`
EXPANDED_PHP_CONFIG_FILE_SCAN_DIR=`eval echo "$PHP_CONFIG_FILE_SCAN_DIR"`
INCLUDE_PATH=.:$EXPANDED_PEAR_INSTALLDIR

exec_prefix=$old_exec_prefix
libdir=$old_libdir
datadir=$old_datadir












if test -n "$php_ldflags_add_usr_lib"; then
  PHP_RPATHS="$PHP_RPATHS /usr/lib"
fi


  OLD_RPATHS=$PHP_RPATHS
  unset PHP_RPATHS

  for i in $OLD_RPATHS; do
    PHP_LDFLAGS="$PHP_LDFLAGS -L$i"
    PHP_RPATHS="$PHP_RPATHS -R $i"
    NATIVE_RPATHS="$NATIVE_RPATHS $ld_runpath_switch$i"
  done

  if test "$PHP_RPATH" = "no"; then
    unset PHP_RPATHS
    unset NATIVE_RPATHS
  fi


if test -z "$php_ldflags_add_usr_lib"; then
  
  unset ac_new_flags
  for i in $PHP_LDFLAGS; do
    case $i in
    -L/usr/lib|-L/usr/lib/) ;;
    *) ac_new_flags="$ac_new_flags $i" ;;
    esac
  done
  PHP_LDFLAGS=$ac_new_flags

  
  unset ac_new_flags
  for i in $LDFLAGS; do
    case $i in
    -L/usr/lib|-L/usr/lib/) ;;
    *) ac_new_flags="$ac_new_flags $i" ;;
    esac
  done
  LDFLAGS=$ac_new_flags

fi

EXTRA_LDFLAGS="$EXTRA_LDFLAGS $PHP_LDFLAGS"

PHP_BUILD_DATE=`date '+%Y-%m-%d'`
cat >> confdefs.h <<EOF
#define PHP_BUILD_DATE "$PHP_BUILD_DATE"
EOF

PHP_UNAME=`uname -a | xargs`
cat >> confdefs.h <<EOF
#define PHP_UNAME "$PHP_UNAME"
EOF

PHP_OS=`uname | xargs`
cat >> confdefs.h <<EOF
#define PHP_OS "$PHP_OS"
EOF


if test "$disable_cli" != "1"; then
  PHP_CLI_TARGET="\$(SAPI_CLI_PATH)"
  PHP_INSTALL_CLI_TARGET="install-cli"
  
  
  case sapi/cli in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "sapi/cli"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/sapi/cli/"; ac_bdir="sapi/cli/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in php_cli.c getopt.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_CLI_TARGET"


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_SAPI_OBJS"


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_CLI_OBJS"


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_GLOBAL_OBJS"



  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_MODULES"



  PHP_VAR_SUBST="$PHP_VAR_SUBST EXT_LIBS"



  
  PHP_VAR_SUBST="$PHP_VAR_SUBST abs_builddir"

  


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST abs_srcdir"

  


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST php_abs_top_builddir"

  


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST php_abs_top_srcdir"

  



  PHP_VAR_SUBST="$PHP_VAR_SUBST bindir"


  PHP_VAR_SUBST="$PHP_VAR_SUBST exec_prefix"


  PHP_VAR_SUBST="$PHP_VAR_SUBST includedir"


  PHP_VAR_SUBST="$PHP_VAR_SUBST libdir"


  PHP_VAR_SUBST="$PHP_VAR_SUBST mandir"


  PHP_VAR_SUBST="$PHP_VAR_SUBST phplibdir"


  PHP_VAR_SUBST="$PHP_VAR_SUBST phptempdir"


  PHP_VAR_SUBST="$PHP_VAR_SUBST prefix"


  PHP_VAR_SUBST="$PHP_VAR_SUBST localstatedir"


  PHP_VAR_SUBST="$PHP_VAR_SUBST datadir"


  PHP_VAR_SUBST="$PHP_VAR_SUBST sysconfdir"



  PHP_VAR_SUBST="$PHP_VAR_SUBST AWK"


  PHP_VAR_SUBST="$PHP_VAR_SUBST CC"


  PHP_VAR_SUBST="$PHP_VAR_SUBST CFLAGS"


  PHP_VAR_SUBST="$PHP_VAR_SUBST CFLAGS_CLEAN"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST CONFIGURE_COMMAND"

  


  PHP_VAR_SUBST="$PHP_VAR_SUBST CPP"


  PHP_VAR_SUBST="$PHP_VAR_SUBST CPPFLAGS"


  PHP_VAR_SUBST="$PHP_VAR_SUBST CXX"


  PHP_VAR_SUBST="$PHP_VAR_SUBST CXXFLAGS"


  PHP_VAR_SUBST="$PHP_VAR_SUBST CXXFLAGS_CLEAN"


  PHP_VAR_SUBST="$PHP_VAR_SUBST CXX_PHP_COMPILE"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST DEBUG_CFLAGS"

  


  PHP_VAR_SUBST="$PHP_VAR_SUBST DEFS"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST EXTENSION_DIR"

  


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST EXTRA_LDFLAGS"

  


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST EXTRA_LIBS"

  


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST ZEND_EXTRA_LIBS"

  


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST INCLUDES"

  


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST EXTRA_INCLUDES"

  


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST INCLUDE_PATH"

  


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST INSTALL_IT"

  


  PHP_VAR_SUBST="$PHP_VAR_SUBST LEX"


  PHP_VAR_SUBST="$PHP_VAR_SUBST LEX_OUTPUT_ROOT"


  PHP_VAR_SUBST="$PHP_VAR_SUBST LFLAGS"


  PHP_VAR_SUBST="$PHP_VAR_SUBST LIBTOOL"


  PHP_VAR_SUBST="$PHP_VAR_SUBST LN_S"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST NATIVE_RPATHS"

  


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST PEAR_INSTALLDIR"

  


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_BUILD_DATE"


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_COMPILE"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_LDFLAGS"

  


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_LIBS"

  


  PHP_VAR_SUBST="$PHP_VAR_SUBST OVERALL_TARGET"


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_RPATHS"


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_SAPI"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_VERSION"

  


  PHP_VAR_SUBST="$PHP_VAR_SUBST PROG_SENDMAIL"


  PHP_VAR_SUBST="$PHP_VAR_SUBST SHELL"


  PHP_VAR_SUBST="$PHP_VAR_SUBST SHARED_LIBTOOL"


  PHP_VAR_SUBST="$PHP_VAR_SUBST TSRM_DIR"


  PHP_VAR_SUBST="$PHP_VAR_SUBST TSRM_LIB"


  PHP_VAR_SUBST="$PHP_VAR_SUBST WARNING_LEVEL"


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_FRAMEWORKS"


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_FRAMEWORKPATH"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST YACC"

  


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST SHLIB_SUFFIX_NAME"

  


old_CC=$CC

if test "$PHP_THREAD_SAFETY" = "yes" && test -n "$ac_cv_pthreads_cflags"; then
  CXXFLAGS="$CXXFLAGS $ac_cv_pthreads_cflags"
  INLINE_CFLAGS="$INLINE_CFLAGS $ac_cv_pthreads_cflags"
  cat >meta_ccld<<EOF
#! /bin/sh
exec $CC $ac_cv_pthreads_cflags \$@
EOF
  CC="$abs_builddir/meta_ccld"
  chmod +x meta_ccld
fi

if test "$PHP_THREAD_SAFETY" = "yes" && test "$PHP_MYSQL" = "yes"; then
  CPPFLAGS="$CPPFLAGS -DTHREAD=1"
fi



  echo "$ac_t""" 1>&6
  echo "$ac_t""${T_MD}Configuring libtool${T_ME}" 1>&6


LDFLAGS="$LDFLAGS $PHP_AIX_LDFLAGS"
# Find the correct PATH separator.  Usually this is `:', but
# DJGPP uses `;' like DOS.
if test "X${PATH_SEPARATOR+set}" != Xset; then
  UNAME=${UNAME-`uname 2>/dev/null`}
  case X$UNAME in
    *-DOS) lt_cv_sys_path_separator=';' ;;
    *)     lt_cv_sys_path_separator=':' ;;
  esac
  PATH_SEPARATOR=$lt_cv_sys_path_separator
fi

echo $ac_n "checking for Cygwin environment""... $ac_c" 1>&6
echo "configure:79988: checking for Cygwin environment" >&5
if eval "test \"`echo '$''{'ac_cv_cygwin'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 79993 "configure"
#include "confdefs.h"

int main() {

#ifndef __CYGWIN__
#define __CYGWIN__ __CYGWIN32__
#endif
return __CYGWIN__;
; return 0; }
EOF
if { (eval echo configure:80004: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_cygwin=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_cygwin=no
fi
rm -f conftest*
rm -f conftest*
fi

echo "$ac_t""$ac_cv_cygwin" 1>&6
CYGWIN=
test "$ac_cv_cygwin" = yes && CYGWIN=yes
echo $ac_n "checking for mingw32 environment""... $ac_c" 1>&6
echo "configure:80021: checking for mingw32 environment" >&5
if eval "test \"`echo '$''{'ac_cv_mingw32'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 80026 "configure"
#include "confdefs.h"

int main() {
return __MINGW32__;
; return 0; }
EOF
if { (eval echo configure:80033: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_mingw32=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_mingw32=no
fi
rm -f conftest*
rm -f conftest*
fi

echo "$ac_t""$ac_cv_mingw32" 1>&6
MINGW32=
test "$ac_cv_mingw32" = yes && MINGW32=yes
# Check whether --enable-shared or --disable-shared was given.
if test "${enable_shared+set}" = set; then
  enableval="$enable_shared"
  p=${PACKAGE-default}
case $enableval in
yes) enable_shared=yes ;;
no) enable_shared=no ;;
*)
  enable_shared=no
  # Look at the argument we got.  We use all the common list separators.
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:,"
  for pkg in $enableval; do
    if test "X$pkg" = "X$p"; then
      enable_shared=yes
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
else
  enable_shared=yes
fi

# Check whether --enable-static or --disable-static was given.
if test "${enable_static+set}" = set; then
  enableval="$enable_static"
  p=${PACKAGE-default}
case $enableval in
yes) enable_static=yes ;;
no) enable_static=no ;;
*)
  enable_static=no
  # Look at the argument we got.  We use all the common list separators.
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:,"
  for pkg in $enableval; do
    if test "X$pkg" = "X$p"; then
      enable_static=yes
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
else
  enable_static=yes
fi

# Check whether --enable-fast-install or --disable-fast-install was given.
if test "${enable_fast_install+set}" = set; then
  enableval="$enable_fast_install"
  p=${PACKAGE-default}
case $enableval in
yes) enable_fast_install=yes ;;
no) enable_fast_install=no ;;
*)
  enable_fast_install=no
  # Look at the argument we got.  We use all the common list separators.
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:,"
  for pkg in $enableval; do
    if test "X$pkg" = "X$p"; then
      enable_fast_install=yes
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
else
  enable_fast_install=yes
fi

echo $ac_n "checking build system type""... $ac_c" 1>&6
echo "configure:80119: checking build system type" >&5

build_alias=$build
case "$build_alias" in
NONE)
  case $nonopt in
  NONE) build_alias=$host_alias ;;
  *) build_alias=$nonopt ;;
  esac ;;
esac

build=`${CONFIG_SHELL-/bin/sh} $ac_config_sub $build_alias`
build_cpu=`echo $build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
build_vendor=`echo $build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
build_os=`echo $build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
echo "$ac_t""$build" 1>&6

# Check whether --with-gnu-ld or --without-gnu-ld was given.
if test "${with_gnu_ld+set}" = set; then
  withval="$with_gnu_ld"
  test "$withval" = no || with_gnu_ld=yes
else
  with_gnu_ld=no
fi

ac_prog=ld
if test "$GCC" = yes; then
  # Check if gcc -print-prog-name=ld gives a path.
  echo $ac_n "checking for ld used by GCC""... $ac_c" 1>&6
echo "configure:80148: checking for ld used by GCC" >&5
  case $host in
  *-*-mingw*)
    # gcc leaves a trailing carriage return which upsets mingw
    ac_prog=`($CC -print-prog-name=ld) 2>&5 | tr -d '\015'` ;;
  *)
    ac_prog=`($CC -print-prog-name=ld) 2>&5` ;;
  esac
  case $ac_prog in
    # Accept absolute paths.
    [\\/]* | [A-Za-z]:[\\/]*)
      re_direlt='/[^/][^/]*/\.\./'
      # Canonicalize the path of ld
      ac_prog=`echo $ac_prog| sed 's%\\\\%/%g'`
      while echo $ac_prog | grep "$re_direlt" > /dev/null 2>&1; do
	ac_prog=`echo $ac_prog| sed "s%$re_direlt%/%"`
      done
      test -z "$LD" && LD="$ac_prog"
      ;;
  "")
    # If it fails, then pretend we aren't using GCC.
    ac_prog=ld
    ;;
  *)
    # If it is relative, then search for the first ld in PATH.
    with_gnu_ld=unknown
    ;;
  esac
elif test "$with_gnu_ld" = yes; then
  echo $ac_n "checking for GNU ld""... $ac_c" 1>&6
echo "configure:80178: checking for GNU ld" >&5
else
  echo $ac_n "checking for non-GNU ld""... $ac_c" 1>&6
echo "configure:80181: checking for non-GNU ld" >&5
fi
if eval "test \"`echo '$''{'lt_cv_path_LD'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -z "$LD"; then
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=$PATH_SEPARATOR
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f "$ac_dir/$ac_prog" || test -f "$ac_dir/$ac_prog$ac_exeext"; then
      lt_cv_path_LD="$ac_dir/$ac_prog"
      # Check to see if the program is GNU ld.  I'd rather use --version,
      # but apparently some GNU ld's only accept -v.
      # Break only if it was the GNU/non-GNU ld that we prefer.
      if "$lt_cv_path_LD" -v 2>&1 < /dev/null | egrep '(GNU|with BFD)' > /dev/null; then
	test "$with_gnu_ld" != no && break
      else
	test "$with_gnu_ld" != yes && break
      fi
    fi
  done
  IFS="$ac_save_ifs"
else
  lt_cv_path_LD="$LD" # Let the user override the test with a path.
fi
fi

LD="$lt_cv_path_LD"
if test -n "$LD"; then
  echo "$ac_t""$LD" 1>&6
else
  echo "$ac_t""no" 1>&6
fi
test -z "$LD" && { echo "configure: error: no acceptable ld found in \$PATH" 1>&2; exit 1; }
echo $ac_n "checking if the linker ($LD) is GNU ld""... $ac_c" 1>&6
echo "configure:80216: checking if the linker ($LD) is GNU ld" >&5
if eval "test \"`echo '$''{'lt_cv_prog_gnu_ld'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  # I'd rather use --version here, but apparently some GNU ld's only accept -v.
if $LD -v 2>&1 </dev/null | egrep '(GNU|with BFD)' 1>&5; then
  lt_cv_prog_gnu_ld=yes
else
  lt_cv_prog_gnu_ld=no
fi
fi

echo "$ac_t""$lt_cv_prog_gnu_ld" 1>&6
with_gnu_ld=$lt_cv_prog_gnu_ld


echo $ac_n "checking for $LD option to reload object files""... $ac_c" 1>&6
echo "configure:80233: checking for $LD option to reload object files" >&5
if eval "test \"`echo '$''{'lt_cv_ld_reload_flag'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  lt_cv_ld_reload_flag='-r'
fi

echo "$ac_t""$lt_cv_ld_reload_flag" 1>&6
reload_flag=$lt_cv_ld_reload_flag
test -n "$reload_flag" && reload_flag=" $reload_flag"

echo $ac_n "checking for BSD-compatible nm""... $ac_c" 1>&6
echo "configure:80245: checking for BSD-compatible nm" >&5
if eval "test \"`echo '$''{'lt_cv_path_NM'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$NM"; then
  # Let the user override the test.
  lt_cv_path_NM="$NM"
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=$PATH_SEPARATOR
  for ac_dir in $PATH /usr/ccs/bin /usr/ucb /bin; do
    test -z "$ac_dir" && ac_dir=.
    tmp_nm=$ac_dir/${ac_tool_prefix}nm
    if test -f $tmp_nm || test -f $tmp_nm$ac_exeext ; then
      # Check to see if the nm accepts a BSD-compat flag.
      # Adding the `sed 1q' prevents false positives on HP-UX, which says:
      #   nm: unknown option "B" ignored
      # Tru64's nm complains that /dev/null is an invalid object file
      if ($tmp_nm -B /dev/null 2>&1 | sed '1q'; exit 0) | egrep '(/dev/null|Invalid file or object type)' >/dev/null; then
	lt_cv_path_NM="$tmp_nm -B"
	break
      elif ($tmp_nm -p /dev/null 2>&1 | sed '1q'; exit 0) | egrep /dev/null >/dev/null; then
	lt_cv_path_NM="$tmp_nm -p"
	break
      else
	lt_cv_path_NM=${lt_cv_path_NM="$tmp_nm"} # keep the first match, but
	continue # so that we can try to find one that supports BSD flags
      fi
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$lt_cv_path_NM" && lt_cv_path_NM=nm
fi
fi

NM="$lt_cv_path_NM"
echo "$ac_t""$NM" 1>&6

echo $ac_n "checking for a sed that does not truncate output""... $ac_c" 1>&6
echo "configure:80283: checking for a sed that does not truncate output" >&5
if eval "test \"`echo '$''{'lt_cv_path_SED'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  # Loop through the user's path and test for sed and gsed.
# Then use that list of sed's as ones to test for truncation.
as_executable_p="test -f"
as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
for as_dir in $PATH
do
  IFS=$as_save_IFS
  test -z "$as_dir" && as_dir=.
  for ac_prog in sed gsed; do
    for ac_exec_ext in '' $ac_executable_extensions; do
      if $as_executable_p "$as_dir/$ac_prog$ac_exec_ext"; then
        _sed_list="$_sed_list $as_dir/$ac_prog$ac_exec_ext"
      fi
    done
  done
done

  # Create a temporary directory, and hook for its removal unless debugging.
$debug ||
{
  trap 'exit_status=$?; rm -rf $tmp && exit $exit_status' 0
  trap '{ (exit 1); exit 1; }' 1 2 13 15
}

# Create a (secure) tmp directory for tmp files.
: ${TMPDIR=/tmp}
{
  tmp=`(umask 077 && mktemp -d -q "$TMPDIR/sedXXXXXX") 2>/dev/null` &&
  test -n "$tmp" && test -d "$tmp"
}  ||
{
  tmp=$TMPDIR/sed$$-$RANDOM
  (umask 077 && mkdir $tmp)
} ||
{
   echo "$me: cannot create a temporary directory in $TMPDIR" >&2
   { (exit 1); exit 1; }
}
  _max=0
  _count=0
  # Add /usr/xpg4/bin/sed as it is typically found on Solaris
  # along with /bin/sed that truncates output.
  for _sed in $_sed_list /usr/xpg4/bin/sed; do
    test ! -f ${_sed} && break
    cat /dev/null > "$tmp/sed.in"
    _count=0
    echo ${ECHO_N-$ac_n} "0123456789${ECHO_C-$ac_c}" >"$tmp/sed.in"
    # Check for GNU sed and select it if it is found.
    if "${_sed}" --version 2>&1 < /dev/null | egrep '(GNU)' > /dev/null; then
      lt_cv_path_SED=${_sed}
      break
    fi
    while true; do
      cat "$tmp/sed.in" "$tmp/sed.in" >"$tmp/sed.tmp"
      mv "$tmp/sed.tmp" "$tmp/sed.in"
      cp "$tmp/sed.in" "$tmp/sed.nl"
      echo >>"$tmp/sed.nl"
      ${_sed} -e 's/a$//' < "$tmp/sed.nl" >"$tmp/sed.out" || break
      cmp -s "$tmp/sed.out" "$tmp/sed.nl" || break
      # 40000 chars as input seems more than enough
      test $_count -gt 10 && break
      _count=`expr $_count + 1`
      if test $_count -gt $_max; then
        _max=$_count
        lt_cv_path_SED=$_sed
      fi
    done
  done
  rm -rf "$tmp"

fi

if test "X$SED" != "X"; then
  lt_cv_path_SED=$SED
else
  SED=$lt_cv_path_SED
fi
echo "$ac_t""$SED" 1>&6

echo $ac_n "checking how to recognise dependent libraries""... $ac_c" 1>&6
echo "configure:80367: checking how to recognise dependent libraries" >&5
if eval "test \"`echo '$''{'lt_cv_deplibs_check_method'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  lt_cv_file_magic_cmd='$MAGIC_CMD'
lt_cv_file_magic_test_file=
lt_cv_deplibs_check_method='unknown'
# Need to set the preceding variable on all platforms that support
# interlibrary dependencies.
# 'none' -- dependencies not supported.
# `unknown' -- same as none, but documents that we really don't know.
# 'pass_all' -- all dependencies passed with no checks.
# 'test_compile' -- check by making test program.
# 'file_magic [[regex]]' -- check by looking for files in library path
# which responds to the $file_magic_cmd with a given egrep regex.
# If you have `file' or equivalent on your system and you're not sure
# whether `pass_all' will *always* work, you probably want this one.

case $host_os in
aix4* | aix5*)
  lt_cv_deplibs_check_method=pass_all
  ;;

beos*)
  lt_cv_deplibs_check_method=pass_all
  ;;

bsdi4*)
  lt_cv_deplibs_check_method='file_magic ELF [0-9][0-9]*-bit [ML]SB (shared object|dynamic lib)'
  lt_cv_file_magic_cmd='/usr/bin/file -L'
  lt_cv_file_magic_test_file=/shlib/libc.so
  ;;

cygwin* | mingw* | pw32*)
  lt_cv_deplibs_check_method='file_magic file format pei*-i386(.*architecture: i386)?'
  lt_cv_file_magic_cmd='$OBJDUMP -f'
  ;;

darwin* | rhapsody*)
  lt_cv_deplibs_check_method='file_magic Mach-O dynamically linked shared library'
  lt_cv_file_magic_cmd='/usr/bin/file -L'
  case "$host_os" in
  rhapsody* | darwin1.[012])
    lt_cv_file_magic_test_file=`echo /System/Library/Frameworks/System.framework/Versions/*/System | head -1`
    ;;
  *) # Darwin 1.3 on
    lt_cv_file_magic_test_file='/usr/lib/libSystem.dylib'
    ;;
  esac
  ;;

freebsd*)
  if echo __ELF__ | $CC -E - | grep __ELF__ > /dev/null; then
    case $host_cpu in
    i*86 )
      # Not sure whether the presence of OpenBSD here was a mistake.
      # Let's accept both of them until this is cleared up.
      lt_cv_deplibs_check_method='file_magic (FreeBSD|OpenBSD)/i[3-9]86 (compact )?demand paged shared library'
      lt_cv_file_magic_cmd=/usr/bin/file
      lt_cv_file_magic_test_file=`echo /usr/lib/libc.so.*`
      ;;
    esac
  else
    lt_cv_deplibs_check_method=pass_all
  fi
  ;;

gnu*)
  lt_cv_deplibs_check_method=pass_all
  ;;

hpux10.20*|hpux11*)
  lt_cv_deplibs_check_method='file_magic (s[0-9][0-9][0-9]|PA-RISC[0-9].[0-9]) shared library'
  lt_cv_file_magic_cmd=/usr/bin/file
  lt_cv_file_magic_test_file=/usr/lib/libc.sl
  ;;

irix5* | irix6* | nonstopux*)
  case $host_os in
  irix5* | nonstopux*)
    # this will be overridden with pass_all, but let us keep it just in case
    lt_cv_deplibs_check_method="file_magic ELF 32-bit MSB dynamic lib MIPS - version 1"
    ;;
  *)
    case $LD in
    *-32|*"-32 ") libmagic=32-bit;;
    *-n32|*"-n32 ") libmagic=N32;;
    *-64|*"-64 ") libmagic=64-bit;;
    *) libmagic=never-match;;
    esac
    # this will be overridden with pass_all, but let us keep it just in case
    lt_cv_deplibs_check_method="file_magic ELF ${libmagic} MSB mips-[1234] dynamic lib MIPS - version 1"
    ;;
  esac
  lt_cv_file_magic_test_file=`echo /lib${libsuff}/libc.so*`
  lt_cv_deplibs_check_method=pass_all
  ;;

# This must be Linux ELF.
linux-gnu*)
  case $host_cpu in
  alpha* | hppa* | i*86 | mips | mipsel | powerpc* | sparc* | ia64*)
    lt_cv_deplibs_check_method=pass_all ;;
  *)
    # glibc up to 2.1.1 does not perform some relocations on ARM
    lt_cv_deplibs_check_method='file_magic ELF [0-9][0-9]*-bit [LM]SB (shared object|dynamic lib )' ;;
  esac
  lt_cv_file_magic_test_file=`echo /lib/libc.so* /lib/libc-*.so`
  ;;

netbsd*)
  if echo __ELF__ | $CC -E - | grep __ELF__ > /dev/null; then
    lt_cv_deplibs_check_method='match_pattern /lib[^/\.]+\.so\.[0-9]+\.[0-9]+$'
  else
    lt_cv_deplibs_check_method='match_pattern /lib[^/\.]+\.so$'
  fi
  ;;

newos6*)
  lt_cv_deplibs_check_method='file_magic ELF [0-9][0-9]*-bit [ML]SB (executable|dynamic lib)'
  lt_cv_file_magic_cmd=/usr/bin/file
  lt_cv_file_magic_test_file=/usr/lib/libnls.so
  ;;

openbsd*)
  lt_cv_file_magic_cmd=/usr/bin/file
  lt_cv_file_magic_test_file=`echo /usr/lib/libc.so.*`
  if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
    lt_cv_deplibs_check_method='file_magic ELF [0-9][0-9]*-bit [LM]SB shared object'
  else
    lt_cv_deplibs_check_method='file_magic OpenBSD.* shared library'
  fi
  ;;

osf3* | osf4* | osf5*)
  # this will be overridden with pass_all, but let us keep it just in case
  lt_cv_deplibs_check_method='file_magic COFF format alpha shared library'
  lt_cv_file_magic_test_file=/shlib/libc.so
  lt_cv_deplibs_check_method=pass_all
  ;;

sco3.2v5*)
  lt_cv_deplibs_check_method=pass_all
  ;;

solaris*)
  lt_cv_deplibs_check_method=pass_all
  lt_cv_file_magic_test_file=/lib/libc.so
  ;;

sysv5* | sysv4*uw2*)
  lt_cv_archive_cmds_need_lc=no
  lt_cv_deplibs_check_method=pass_all
  ;;

sysv4 | sysv4.2uw2* | sysv4.3* | sysv5*)
  case $host_vendor in
  motorola)
    lt_cv_deplibs_check_method='file_magic ELF [0-9][0-9]*-bit [ML]SB (shared object|dynamic lib) M[0-9][0-9]* Version [0-9]'
    lt_cv_file_magic_test_file=`echo /usr/lib/libc.so*`
    ;;
  ncr)
    lt_cv_deplibs_check_method=pass_all
    ;;
  sequent)
    lt_cv_file_magic_cmd='/bin/file'
    lt_cv_deplibs_check_method='file_magic ELF [0-9][0-9]*-bit [LM]SB (shared object|dynamic lib )'
    ;;
  sni)
    lt_cv_file_magic_cmd='/bin/file'
    lt_cv_deplibs_check_method="file_magic ELF [0-9][0-9]*-bit [LM]SB dynamic lib"
    lt_cv_file_magic_test_file=/lib/libc.so
    ;;
  siemens)
    lt_cv_deplibs_check_method=pass_all
    ;;
  esac
  ;;
esac

fi

echo "$ac_t""$lt_cv_deplibs_check_method" 1>&6
file_magic_cmd=$lt_cv_file_magic_cmd
deplibs_check_method=$lt_cv_deplibs_check_method

echo $ac_n "checking for object suffix""... $ac_c" 1>&6
echo "configure:80554: checking for object suffix" >&5
if eval "test \"`echo '$''{'ac_cv_objext'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  rm -f conftest*
echo 'int i = 1;' > conftest.$ac_ext
if { (eval echo configure:80560: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  for ac_file in conftest.*; do
    case $ac_file in
    *.c) ;;
    *) ac_cv_objext=`echo $ac_file | sed -e s/conftest.//` ;;
    esac
  done
else
  { echo "configure: error: installation or configuration problem; compiler does not work" 1>&2; exit 1; }
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_objext" 1>&6
OBJEXT=$ac_cv_objext
ac_objext=$ac_cv_objext



echo $ac_n "checking for executable suffix""... $ac_c" 1>&6
echo "configure:80580: checking for executable suffix" >&5
if eval "test \"`echo '$''{'ac_cv_exeext'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$CYGWIN" = yes || test "$MINGW32" = yes; then
  ac_cv_exeext=.exe
else
  rm -f conftest*
  echo 'int main () { return 0; }' > conftest.$ac_ext
  ac_cv_exeext=
  if { (eval echo configure:80590: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
    for file in conftest.*; do
      case $file in
      *.c | *.o | *.obj) ;;
      *) ac_cv_exeext=`echo $file | sed -e s/conftest//` ;;
      esac
    done
  else
    { echo "configure: error: installation or configuration problem: compiler cannot create executables." 1>&2; exit 1; }
  fi
  rm -f conftest*
  test x"${ac_cv_exeext}" = x && ac_cv_exeext=no
fi
fi

EXEEXT=""
test x"${ac_cv_exeext}" != xno && EXEEXT=${ac_cv_exeext}
echo "$ac_t""${ac_cv_exeext}" 1>&6
ac_exeext=$EXEEXT

if test $host != $build; then
  ac_tool_prefix=${host_alias}-
else
  ac_tool_prefix=
fi




# Check for command to grab the raw symbol name followed by C symbol from nm.
echo $ac_n "checking command to parse $NM output""... $ac_c" 1>&6
echo "configure:80621: checking command to parse $NM output" >&5
if eval "test \"`echo '$''{'lt_cv_sys_global_symbol_pipe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
# These are sane defaults that work on at least a few old systems.
# [They come from Ultrix.  What could be older than Ultrix?!! ;)]

# Character class describing NM global symbol codes.
symcode='[BCDEGRST]'

# Regexp to match symbols that can be accessed directly from C.
sympat='\([_A-Za-z][_A-Za-z0-9]*\)'

# Transform the above into a raw symbol and a C symbol.
symxfrm='\1 \2\3 \3'

# Transform an extracted symbol line into a proper C declaration
lt_cv_global_symbol_to_cdecl="sed -n -e 's/^. .* \(.*\)$/extern char \1;/p'"

# Transform an extracted symbol line into symbol name and symbol address
lt_cv_global_symbol_to_c_name_address="sed -n -e 's/^: \([^ ]*\) $/  {\\\"\1\\\", (lt_ptr) 0},/p' -e 's/^$symcode \([^ ]*\) \([^ ]*\)$/  {\"\2\", (lt_ptr) \&\2},/p'"

# Define system-specific variables.
case $host_os in
aix*)
  symcode='[BCDT]'
  ;;
cygwin* | mingw* | pw32*)
  symcode='[ABCDGISTW]'
  ;;
hpux*) # Its linker distinguishes data from code symbols
  lt_cv_global_symbol_to_cdecl="sed -n -e 's/^T .* \(.*\)$/extern char \1();/p' -e 's/^$symcode* .* \(.*\)$/extern char \1;/p'"
  lt_cv_global_symbol_to_c_name_address="sed -n -e 's/^: \([^ ]*\) $/  {\\\"\1\\\", (lt_ptr) 0},/p' -e 's/^$symcode* \([^ ]*\) \([^ ]*\)$/  {\"\2\", (lt_ptr) \&\2},/p'"
  ;;
irix* | nonstopux*)
  symcode='[BCDEGRST]'
  ;;
osf*)
  symcode='[BCDEGQRST]'
  ;;
solaris* | sysv5*)
  symcode='[BDT]'
  ;;
sysv4)
  symcode='[DFNSTU]'
  ;;
esac

# Handle CRLF in mingw tool chain
opt_cr=
case $host_os in
mingw*)
  opt_cr=`echo 'x\{0,1\}' | tr x '\015'` # option cr in regexp
  ;;
esac

# If we're using GNU nm, then use its standard symbol codes.
if $NM -V 2>&1 | egrep '(GNU|with BFD)' > /dev/null; then
  symcode='[ABCDGISTW]'
fi

# Try without a prefix undercore, then with it.
for ac_symprfx in "" "_"; do

  # Write the raw and C identifiers.
lt_cv_sys_global_symbol_pipe="sed -n -e 's/^.*[ 	]\($symcode$symcode*\)[ 	][ 	]*\($ac_symprfx\)$sympat$opt_cr$/$symxfrm/p'"

  # Check to see that the pipe works correctly.
  pipe_works=no
  rm -f conftest*
  cat > conftest.$ac_ext <<EOF
#ifdef __cplusplus
extern "C" {
#endif
char nm_test_var;
void nm_test_func(){}
#ifdef __cplusplus
}
#endif
int main(){nm_test_var='a';nm_test_func();return(0);}
EOF

  if { (eval echo configure:80704: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    # Now try to grab the symbols.
    nlist=conftest.nm
    if { (eval echo configure:80707: \"$NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist\") 1>&5; (eval $NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist) 2>&5; } && test -s "$nlist"; then
      # Try sorting and uniquifying the output.
      if sort "$nlist" | uniq > "$nlist"T; then
	mv -f "$nlist"T "$nlist"
      else
	rm -f "$nlist"T
      fi

      # Make sure that we snagged all the symbols we need.
      if egrep ' nm_test_var$' "$nlist" >/dev/null; then
	if egrep ' nm_test_func$' "$nlist" >/dev/null; then
	  cat <<EOF > conftest.$ac_ext
#ifdef __cplusplus
extern "C" {
#endif

EOF
	  # Now generate the symbol file.
	  eval "$lt_cv_global_symbol_to_cdecl"' < "$nlist" >> conftest.$ac_ext'

	  cat <<EOF >> conftest.$ac_ext
#if defined (__STDC__) && __STDC__
# define lt_ptr void *
#else
# define lt_ptr char *
# define const
#endif

/* The mapping between symbol names and symbols. */
const struct {
  const char *name;
  lt_ptr address;
}
lt_preloaded_symbols[] =
{
EOF
	  sed "s/^$symcode$symcode* \(.*\) \(.*\)$/  {\"\2\", (lt_ptr) \&\2},/" < "$nlist" >> conftest.$ac_ext
	  cat <<\EOF >> conftest.$ac_ext
  {0, (lt_ptr) 0}
};

#ifdef __cplusplus
}
#endif
EOF
	  # Now try linking the two files.
	  mv conftest.$ac_objext conftstm.$ac_objext
	  save_LIBS="$LIBS"
	  save_CFLAGS="$CFLAGS"
	  LIBS="conftstm.$ac_objext"
	  CFLAGS="$CFLAGS$no_builtin_flag"
	  if { (eval echo configure:80758: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest$ac_exeext; then
	    pipe_works=yes
	  fi
	  LIBS="$save_LIBS"
	  CFLAGS="$save_CFLAGS"
	else
	  echo "cannot find nm_test_func in $nlist" >&5
	fi
      else
	echo "cannot find nm_test_var in $nlist" >&5
      fi
    else
      echo "cannot run $lt_cv_sys_global_symbol_pipe" >&5
    fi
  else
    echo "$progname: failed program was:" >&5
    cat conftest.$ac_ext >&5
  fi
  rm -f conftest* conftst*

  # Do not use the global_symbol_pipe unless it works.
  if test "$pipe_works" = yes; then
    break
  else
    lt_cv_sys_global_symbol_pipe=
  fi
done

fi

global_symbol_pipe="$lt_cv_sys_global_symbol_pipe"
if test -z "$lt_cv_sys_global_symbol_pipe"; then
  global_symbol_to_cdecl=
  global_symbol_to_c_name_address=
else
  global_symbol_to_cdecl="$lt_cv_global_symbol_to_cdecl"
  global_symbol_to_c_name_address="$lt_cv_global_symbol_to_c_name_address"
fi
if test -z "$global_symbol_pipe$global_symbol_to_cdec$global_symbol_to_c_name_address";
then
  echo "$ac_t""failed" 1>&6
else
  echo "$ac_t""ok" 1>&6
fi





# Only perform the check for file, if the check method requires it
case $deplibs_check_method in
file_magic*)
  if test "$file_magic_cmd" = '$MAGIC_CMD'; then
    echo $ac_n "checking for ${ac_tool_prefix}file""... $ac_c" 1>&6
echo "configure:80812: checking for ${ac_tool_prefix}file" >&5
if eval "test \"`echo '$''{'lt_cv_path_MAGIC_CMD'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case $MAGIC_CMD in
  /*)
  lt_cv_path_MAGIC_CMD="$MAGIC_CMD" # Let the user override the test with a path.
  ;;
  ?:/*)
  lt_cv_path_MAGIC_CMD="$MAGIC_CMD" # Let the user override the test with a dos path.
  ;;
  *)
  ac_save_MAGIC_CMD="$MAGIC_CMD"
  IFS="${IFS=   }"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="/usr/bin:$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/${ac_tool_prefix}file; then
      lt_cv_path_MAGIC_CMD="$ac_dir/${ac_tool_prefix}file"
      if test -n "$file_magic_test_file"; then
	case $deplibs_check_method in
	"file_magic "*)
	  file_magic_regex="`expr \"$deplibs_check_method\" : \"file_magic \(.*\)\"`"
	  MAGIC_CMD="$lt_cv_path_MAGIC_CMD"
	  if eval $file_magic_cmd \$file_magic_test_file 2> /dev/null |
	    egrep "$file_magic_regex" > /dev/null; then
	    :
	  else
	    cat <<EOF 1>&2

*** Warning: the command libtool uses to detect shared libraries,
*** $file_magic_cmd, produces output that libtool cannot recognize.
*** The result is that libtool may fail to recognize shared libraries
*** as such.  This will affect the creation of libtool libraries that
*** depend on shared libraries, but programs linked with such libtool
*** libraries will work regardless of this problem.  Nevertheless, you
*** may want to report the problem to your system manager and/or to
*** bug-libtool@gnu.org

EOF
	  fi ;;
	esac
      fi
      break
    fi
  done
  IFS="$ac_save_ifs"
  MAGIC_CMD="$ac_save_MAGIC_CMD"
  ;;
esac
fi

MAGIC_CMD="$lt_cv_path_MAGIC_CMD"
if test -n "$MAGIC_CMD"; then
  echo "$ac_t""$MAGIC_CMD" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

if test -z "$lt_cv_path_MAGIC_CMD"; then
  if test -n "$ac_tool_prefix"; then
    echo $ac_n "checking for file""... $ac_c" 1>&6
echo "configure:80874: checking for file" >&5
if eval "test \"`echo '$''{'lt_cv_path_MAGIC_CMD'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case $MAGIC_CMD in
  /*)
  lt_cv_path_MAGIC_CMD="$MAGIC_CMD" # Let the user override the test with a path.
  ;;
  ?:/*)
  lt_cv_path_MAGIC_CMD="$MAGIC_CMD" # Let the user override the test with a dos path.
  ;;
  *)
  ac_save_MAGIC_CMD="$MAGIC_CMD"
  IFS="${IFS=   }"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="/usr/bin:$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/file; then
      lt_cv_path_MAGIC_CMD="$ac_dir/file"
      if test -n "$file_magic_test_file"; then
	case $deplibs_check_method in
	"file_magic "*)
	  file_magic_regex="`expr \"$deplibs_check_method\" : \"file_magic \(.*\)\"`"
	  MAGIC_CMD="$lt_cv_path_MAGIC_CMD"
	  if eval $file_magic_cmd \$file_magic_test_file 2> /dev/null |
	    egrep "$file_magic_regex" > /dev/null; then
	    :
	  else
	    cat <<EOF 1>&2

*** Warning: the command libtool uses to detect shared libraries,
*** $file_magic_cmd, produces output that libtool cannot recognize.
*** The result is that libtool may fail to recognize shared libraries
*** as such.  This will affect the creation of libtool libraries that
*** depend on shared libraries, but programs linked with such libtool
*** libraries will work regardless of this problem.  Nevertheless, you
*** may want to report the problem to your system manager and/or to
*** bug-libtool@gnu.org

EOF
	  fi ;;
	esac
      fi
      break
    fi
  done
  IFS="$ac_save_ifs"
  MAGIC_CMD="$ac_save_MAGIC_CMD"
  ;;
esac
fi

MAGIC_CMD="$lt_cv_path_MAGIC_CMD"
if test -n "$MAGIC_CMD"; then
  echo "$ac_t""$MAGIC_CMD" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  else
    MAGIC_CMD=:
  fi
fi

  fi
  ;;
esac

# Extract the first word of "${ac_tool_prefix}ranlib", so it can be a program name with args.
set dummy ${ac_tool_prefix}ranlib; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:80945: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$RANLIB"; then
  ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_RANLIB="${ac_tool_prefix}ranlib"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
RANLIB="$ac_cv_prog_RANLIB"
if test -n "$RANLIB"; then
  echo "$ac_t""$RANLIB" 1>&6
else
  echo "$ac_t""no" 1>&6
fi


if test -z "$ac_cv_prog_RANLIB"; then
if test -n "$ac_tool_prefix"; then
  # Extract the first word of "ranlib", so it can be a program name with args.
set dummy ranlib; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:80977: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$RANLIB"; then
  ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_RANLIB="ranlib"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_prog_RANLIB" && ac_cv_prog_RANLIB=":"
fi
fi
RANLIB="$ac_cv_prog_RANLIB"
if test -n "$RANLIB"; then
  echo "$ac_t""$RANLIB" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

else
  RANLIB=":"
fi
fi

# Extract the first word of "${ac_tool_prefix}strip", so it can be a program name with args.
set dummy ${ac_tool_prefix}strip; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:81012: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_STRIP'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$STRIP"; then
  ac_cv_prog_STRIP="$STRIP" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_STRIP="${ac_tool_prefix}strip"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
STRIP="$ac_cv_prog_STRIP"
if test -n "$STRIP"; then
  echo "$ac_t""$STRIP" 1>&6
else
  echo "$ac_t""no" 1>&6
fi


if test -z "$ac_cv_prog_STRIP"; then
if test -n "$ac_tool_prefix"; then
  # Extract the first word of "strip", so it can be a program name with args.
set dummy strip; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:81044: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_STRIP'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$STRIP"; then
  ac_cv_prog_STRIP="$STRIP" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_STRIP="strip"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_prog_STRIP" && ac_cv_prog_STRIP=":"
fi
fi
STRIP="$ac_cv_prog_STRIP"
if test -n "$STRIP"; then
  echo "$ac_t""$STRIP" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

else
  STRIP=":"
fi
fi


enable_dlopen=no
enable_win32_dll=no

# Check whether --enable-libtool-lock or --disable-libtool-lock was given.
if test "${enable_libtool_lock+set}" = set; then
  enableval="$enable_libtool_lock"
  :
fi

test "x$enable_libtool_lock" != xno && enable_libtool_lock=yes

# Some flags need to be propagated to the compiler or linker for good
# libtool support.
case $host in
*-*-irix6*)
  # Find out which ABI we are using.
  echo '#line 81093 "configure"' > conftest.$ac_ext
  if { (eval echo configure:81094: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    case `/usr/bin/file conftest.$ac_objext` in
    *32-bit*)
      LD="${LD-ld} -32"
      ;;
    *N32*)
      LD="${LD-ld} -n32"
      ;;
    *64-bit*)
      LD="${LD-ld} -64"
      ;;
    esac
  fi
  rm -rf conftest*
  ;;

*-*-sco3.2v5*)
  # On SCO OpenServer 5, we need -belf to get full-featured binaries.
  SAVE_CFLAGS="$CFLAGS"
  CFLAGS="$CFLAGS -belf"
  echo $ac_n "checking whether the C compiler needs -belf""... $ac_c" 1>&6
echo "configure:81115: checking whether the C compiler needs -belf" >&5
if eval "test \"`echo '$''{'lt_cv_cc_needs_belf'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
     ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

     cat > conftest.$ac_ext <<EOF
#line 81128 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:81135: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  lt_cv_cc_needs_belf=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  lt_cv_cc_needs_belf=no
fi
rm -f conftest*
     ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

fi

echo "$ac_t""$lt_cv_cc_needs_belf" 1>&6
  if test x"$lt_cv_cc_needs_belf" != x"yes"; then
    # this is probably gcc 2.8.0, egcs 1.0 or newer; no need for -belf
    CFLAGS="$SAVE_CFLAGS"
  fi
  ;;


esac

# Sed substitution that helps us do robust quoting.  It backslashifies
# metacharacters that are still active within double-quoted strings.
Xsed='sed -e s/^X//'
sed_quote_subst='s/\([\\"\\`$\\\\]\)/\\\1/g'

# Same as above, but do not quote variable references.
double_quote_subst='s/\([\\"\\`\\\\]\)/\\\1/g'

# Sed substitution to delay expansion of an escaped shell variable in a
# double_quote_subst'ed string.
delay_variable_subst='s/\\\\\\\\\\\$/\\\\\\$/g'

# Constants:
rm="rm -f"

# Global variables:
default_ofile=libtool
can_build_shared=yes

# All known linkers require a `.a' archive for static linking (except M$VC,
# which needs '.lib').
libext=a
ltmain="$ac_aux_dir/ltmain.sh"
ofile="$default_ofile"
with_gnu_ld="$lt_cv_prog_gnu_ld"
need_locks="$enable_libtool_lock"

old_CC="$CC"
old_CFLAGS="$CFLAGS"

# Set sane defaults for various variables
test -z "$AR" && AR=ar
test -z "$AR_FLAGS" && AR_FLAGS=cru
test -z "$AS" && AS=as
test -z "$CC" && CC=cc
test -z "$DLLTOOL" && DLLTOOL=dlltool
test -z "$LD" && LD=ld
test -z "$LN_S" && LN_S="ln -s"
test -z "$MAGIC_CMD" && MAGIC_CMD=file
test -z "$NM" && NM=nm
test -z "$OBJDUMP" && OBJDUMP=objdump
test -z "$RANLIB" && RANLIB=:
test -z "$STRIP" && STRIP=:
test -z "$ac_objext" && ac_objext=o

if test x"$host" != x"$build"; then
  ac_tool_prefix=${host_alias}-
else
  ac_tool_prefix=
fi

# Transform linux* to *-*-linux-gnu*, to support old configure scripts.
case $host_os in
linux-gnu*) ;;
linux*) host=`echo $host | sed 's/^\(.*-.*-linux\)\(.*\)$/\1-gnu\2/'`
esac

case $host_os in
aix3*)
  # AIX sometimes has problems with the GCC collect2 program.  For some
  # reason, if we set the COLLECT_NAMES environment variable, the problems
  # vanish in a puff of smoke.
  if test "X${COLLECT_NAMES+set}" != Xset; then
    COLLECT_NAMES=
    export COLLECT_NAMES
  fi
  ;;
esac

# Determine commands to create old-style static archives.
old_archive_cmds='$AR $AR_FLAGS $oldlib$oldobjs$old_deplibs'
old_postinstall_cmds='chmod 644 $oldlib'
old_postuninstall_cmds=

if test -n "$RANLIB"; then
  case $host_os in
  openbsd*)
    old_postinstall_cmds="\$RANLIB -t \$oldlib~$old_postinstall_cmds"
    ;;
  *)
    old_postinstall_cmds="\$RANLIB \$oldlib~$old_postinstall_cmds"
    ;;
  esac
  old_archive_cmds="$old_archive_cmds~\$RANLIB \$oldlib"
fi

# Allow CC to be a program name with arguments.
set dummy $CC
compiler="$2"

echo $ac_n "checking for objdir""... $ac_c" 1>&6
echo "configure:81255: checking for objdir" >&5
rm -f .libs 2>/dev/null
mkdir .libs 2>/dev/null
if test -d .libs; then
  objdir=.libs
else
  # MS-DOS does not allow filenames that begin with a dot.
  objdir=_libs
fi
rmdir .libs 2>/dev/null
echo "$ac_t""$objdir" 1>&6


# Check whether --with-pic or --without-pic was given.
if test "${with_pic+set}" = set; then
  withval="$with_pic"
  pic_mode="$withval"
else
  pic_mode=default
fi

test -z "$pic_mode" && pic_mode=default

# We assume here that the value for lt_cv_prog_cc_pic will not be cached
# in isolation, and that seeing it set (from the cache) indicates that
# the associated values are set (in the cache) correctly too.
echo $ac_n "checking for $compiler option to produce PIC""... $ac_c" 1>&6
echo "configure:81282: checking for $compiler option to produce PIC" >&5
if eval "test \"`echo '$''{'lt_cv_prog_cc_pic'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
   lt_cv_prog_cc_pic=
  lt_cv_prog_cc_shlib=
  lt_cv_prog_cc_wl=
  lt_cv_prog_cc_static=
  lt_cv_prog_cc_no_builtin=
  lt_cv_prog_cc_can_build_shared=$can_build_shared

  if test "$GCC" = yes; then
    lt_cv_prog_cc_wl='-Wl,'
    lt_cv_prog_cc_static='-static'

    case $host_os in
    aix*)
      # Below there is a dirty hack to force normal static linking with -ldl
      # The problem is because libdl dynamically linked with both libc and
      # libC (AIX C++ library), which obviously doesn't included in libraries
      # list by gcc. This cause undefined symbols with -static flags.
      # This hack allows C programs to be linked with "-static -ldl", but
      # not sure about C++ programs.
      lt_cv_prog_cc_static="$lt_cv_prog_cc_static ${lt_cv_prog_cc_wl}-lC"
      ;;
    amigaos*)
      # FIXME: we need at least 68020 code to build shared libraries, but
      # adding the `-m68020' flag to GCC prevents building anything better,
      # like `-m68040'.
      lt_cv_prog_cc_pic='-m68020 -resident32 -malways-restore-a4'
      ;;
    beos* | irix5* | irix6* | nonstopux* | osf3* | osf4* | osf5*)
      # PIC is the default for these OSes.
      ;;
    darwin* | rhapsody*)
      # PIC is the default on this platform
      # Common symbols not allowed in MH_DYLIB files
      lt_cv_prog_cc_pic='-fno-common'
      ;;
    cygwin* | mingw* | pw32* | os2*)
      # This hack is so that the source file can tell whether it is being
      # built for inclusion in a dll (and should export symbols for example).
      lt_cv_prog_cc_pic='-DDLL_EXPORT'
      ;;
    sysv4*MP*)
      if test -d /usr/nec; then
	 lt_cv_prog_cc_pic=-Kconform_pic
      fi
      ;;
    *)
      lt_cv_prog_cc_pic='-fPIC'
      ;;
    esac
  else
    # PORTME Check for PIC flags for the system compiler.
    case $host_os in
    aix3* | aix4* | aix5*)
      lt_cv_prog_cc_wl='-Wl,'
      # All AIX code is PIC.
      if test "$host_cpu" = ia64; then
	# AIX 5 now supports IA64 processor
	lt_cv_prog_cc_static='-Bstatic'
      else
	lt_cv_prog_cc_static='-bnso -bI:/lib/syscalls.exp'
      fi
      ;;

    hpux9* | hpux10* | hpux11*)
      # Is there a better lt_cv_prog_cc_static that works with the bundled CC?
      lt_cv_prog_cc_wl='-Wl,'
      lt_cv_prog_cc_static="${lt_cv_prog_cc_wl}-a ${lt_cv_prog_cc_wl}archive"
      lt_cv_prog_cc_pic='+Z'
      ;;

    irix5* | irix6* | nonstopux*)
      lt_cv_prog_cc_wl='-Wl,'
      lt_cv_prog_cc_static='-non_shared'
      # PIC (with -KPIC) is the default.
      ;;

    cygwin* | mingw* | pw32* | os2*)
      # This hack is so that the source file can tell whether it is being
      # built for inclusion in a dll (and should export symbols for example).
      lt_cv_prog_cc_pic='-DDLL_EXPORT'
      ;;

    newsos6)
      lt_cv_prog_cc_pic='-KPIC'
      lt_cv_prog_cc_static='-Bstatic'
      ;;

    osf3* | osf4* | osf5*)
      # All OSF/1 code is PIC.
      lt_cv_prog_cc_wl='-Wl,'
      lt_cv_prog_cc_static='-non_shared'
      ;;

    sco3.2v5*)
      lt_cv_prog_cc_pic='-Kpic'
      lt_cv_prog_cc_static='-dn'
      lt_cv_prog_cc_shlib='-belf'
      ;;

    solaris*)
      lt_cv_prog_cc_pic='-KPIC'
      lt_cv_prog_cc_static='-Bstatic'
      lt_cv_prog_cc_wl='-Wl,'
      ;;

    sunos4*)
      lt_cv_prog_cc_pic='-PIC'
      lt_cv_prog_cc_static='-Bstatic'
      lt_cv_prog_cc_wl='-Qoption ld '
      ;;

    sysv4 | sysv4.2uw2* | sysv4.3* | sysv5*)
      lt_cv_prog_cc_pic='-KPIC'
      lt_cv_prog_cc_static='-Bstatic'
      lt_cv_prog_cc_wl='-Wl,'
      ;;

    uts4*)
      lt_cv_prog_cc_pic='-pic'
      lt_cv_prog_cc_static='-Bstatic'
      ;;

    sysv4*MP*)
      if test -d /usr/nec ;then
	lt_cv_prog_cc_pic='-Kconform_pic'
	lt_cv_prog_cc_static='-Bstatic'
      fi
      ;;

    *)
      lt_cv_prog_cc_can_build_shared=no
      ;;
    esac
  fi

fi

if test -z "$lt_cv_prog_cc_pic"; then
  echo "$ac_t""none" 1>&6
else
  echo "$ac_t""$lt_cv_prog_cc_pic" 1>&6

  # Check to make sure the pic_flag actually works.
  echo $ac_n "checking if $compiler PIC flag $lt_cv_prog_cc_pic works""... $ac_c" 1>&6
echo "configure:81430: checking if $compiler PIC flag $lt_cv_prog_cc_pic works" >&5
  if eval "test \"`echo '$''{'lt_cv_prog_cc_pic_works'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
      save_CFLAGS="$CFLAGS"
    CFLAGS="$CFLAGS $lt_cv_prog_cc_pic -DPIC"
    cat > conftest.$ac_ext <<EOF
#line 81437 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:81444: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
        case $host_os in
      hpux9* | hpux10* | hpux11*)
	# On HP-UX, both CC and GCC only warn that PIC is supported... then
	# they create non-PIC objects.  So, if there were any warnings, we
	# assume that PIC is not supported.
	if test -s conftest.err; then
	  lt_cv_prog_cc_pic_works=no
	else
	  lt_cv_prog_cc_pic_works=yes
	fi
	;;
      *)
	lt_cv_prog_cc_pic_works=yes
	;;
      esac
    
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
        lt_cv_prog_cc_pic_works=no
    
fi
rm -f conftest*
    CFLAGS="$save_CFLAGS"
  
fi


  if test "X$lt_cv_prog_cc_pic_works" = Xno; then
    lt_cv_prog_cc_pic=
    lt_cv_prog_cc_can_build_shared=no
  else
    lt_cv_prog_cc_pic=" $lt_cv_prog_cc_pic"
  fi

  echo "$ac_t""$lt_cv_prog_cc_pic_works" 1>&6
fi

# Check for any special shared library compilation flags.
if test -n "$lt_cv_prog_cc_shlib"; then
  echo "configure: warning: \`$CC' requires \`$lt_cv_prog_cc_shlib' to build shared libraries" 1>&2
  if echo "$old_CC $old_CFLAGS " | egrep -e "[ 	]$lt_cv_prog_cc_shlib[ 	]" >/dev/null; then :
  else
   echo "configure: warning: add \`$lt_cv_prog_cc_shlib' to the CC or CFLAGS env variable and reconfigure" 1>&2
    lt_cv_prog_cc_can_build_shared=no
  fi
fi

echo $ac_n "checking if $compiler static flag $lt_cv_prog_cc_static works""... $ac_c" 1>&6
echo "configure:81496: checking if $compiler static flag $lt_cv_prog_cc_static works" >&5
if eval "test \"`echo '$''{'lt_cv_prog_cc_static_works'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
    lt_cv_prog_cc_static_works=no
  save_LDFLAGS="$LDFLAGS"
  LDFLAGS="$LDFLAGS $lt_cv_prog_cc_static"
  cat > conftest.$ac_ext <<EOF
#line 81504 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:81511: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  lt_cv_prog_cc_static_works=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
  LDFLAGS="$save_LDFLAGS"

fi


# Belt *and* braces to stop my trousers falling down:
test "X$lt_cv_prog_cc_static_works" = Xno && lt_cv_prog_cc_static=
echo "$ac_t""$lt_cv_prog_cc_static_works" 1>&6

pic_flag="$lt_cv_prog_cc_pic"
special_shlib_compile_flags="$lt_cv_prog_cc_shlib"
wl="$lt_cv_prog_cc_wl"
link_static_flag="$lt_cv_prog_cc_static"
no_builtin_flag="$lt_cv_prog_cc_no_builtin"
can_build_shared="$lt_cv_prog_cc_can_build_shared"


# Check to see if options -o and -c are simultaneously supported by compiler
echo $ac_n "checking if $compiler supports -c -o file.$ac_objext""... $ac_c" 1>&6
echo "configure:81538: checking if $compiler supports -c -o file.$ac_objext" >&5
if eval "test \"`echo '$''{'lt_cv_compiler_c_o'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
$rm -r conftest 2>/dev/null
mkdir conftest
cd conftest
echo "int some_variable = 0;" > conftest.$ac_ext
mkdir out
# According to Tom Tromey, Ian Lance Taylor reported there are C compilers
# that will create temporary files in the current directory regardless of
# the output directory.  Thus, making CWD read-only will cause this test
# to fail, enabling locking or at least warning the user not to do parallel
# builds.
chmod -w .
save_CFLAGS="$CFLAGS"
CFLAGS="$CFLAGS -o out/conftest2.$ac_objext"
compiler_c_o=no
if { (eval echo configure:81557: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>out/conftest.err; } && test -s out/conftest2.$ac_objext; then
  # The compiler can only warn and ignore the option if not recognized
  # So say no if there are warnings
  if test -s out/conftest.err; then
    lt_cv_compiler_c_o=no
  else
    lt_cv_compiler_c_o=yes
  fi
else
  # Append any errors to the config.log.
  cat out/conftest.err 1>&5
  lt_cv_compiler_c_o=no
fi
CFLAGS="$save_CFLAGS"
chmod u+w .
$rm conftest* out/*
rmdir out
cd ..
rmdir conftest
$rm -r conftest 2>/dev/null

fi

compiler_c_o=$lt_cv_compiler_c_o
echo "$ac_t""$compiler_c_o" 1>&6

if test x"$compiler_c_o" = x"yes"; then
  # Check to see if we can write to a .lo
  echo $ac_n "checking if $compiler supports -c -o file.lo""... $ac_c" 1>&6
echo "configure:81586: checking if $compiler supports -c -o file.lo" >&5
  if eval "test \"`echo '$''{'lt_cv_compiler_o_lo'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  lt_cv_compiler_o_lo=no
  save_CFLAGS="$CFLAGS"
  CFLAGS="$CFLAGS -c -o conftest.lo"
  save_objext="$ac_objext"
  ac_objext=lo
  cat > conftest.$ac_ext <<EOF
#line 81597 "configure"
#include "confdefs.h"

int main() {
int some_variable = 0;
; return 0; }
EOF
if { (eval echo configure:81604: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
      # The compiler can only warn and ignore the option if not recognized
    # So say no if there are warnings
    if test -s conftest.err; then
      lt_cv_compiler_o_lo=no
    else
      lt_cv_compiler_o_lo=yes
    fi
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
  ac_objext="$save_objext"
  CFLAGS="$save_CFLAGS"
  
fi

  compiler_o_lo=$lt_cv_compiler_o_lo
  echo "$ac_t""$compiler_o_lo" 1>&6
else
  compiler_o_lo=no
fi

# Check to see if we can do hard links to lock some files if needed
hard_links="nottested"
if test "$compiler_c_o" = no && test "$need_locks" != no; then
  # do not overwrite the value of need_locks provided by the user
  echo $ac_n "checking if we can lock with hard links""... $ac_c" 1>&6
echo "configure:81635: checking if we can lock with hard links" >&5
  hard_links=yes
  $rm conftest*
  ln conftest.a conftest.b 2>/dev/null && hard_links=no
  touch conftest.a
  ln conftest.a conftest.b 2>&5 || hard_links=no
  ln conftest.a conftest.b 2>/dev/null && hard_links=no
  echo "$ac_t""$hard_links" 1>&6
  if test "$hard_links" = no; then
    echo "configure: warning: \`$CC' does not support \`-c -o', so \`make -j' may be unsafe" 1>&2
    need_locks=warn
  fi
else
  need_locks=no
fi

if test "$GCC" = yes; then
  # Check to see if options -fno-rtti -fno-exceptions are supported by compiler
  echo $ac_n "checking if $compiler supports -fno-rtti -fno-exceptions""... $ac_c" 1>&6
echo "configure:81654: checking if $compiler supports -fno-rtti -fno-exceptions" >&5
  echo "int some_variable = 0;" > conftest.$ac_ext
  save_CFLAGS="$CFLAGS"
  CFLAGS="$CFLAGS -fno-rtti -fno-exceptions -c conftest.$ac_ext"
  compiler_rtti_exceptions=no
  cat > conftest.$ac_ext <<EOF
#line 81660 "configure"
#include "confdefs.h"

int main() {
int some_variable = 0;
; return 0; }
EOF
if { (eval echo configure:81667: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
      # The compiler can only warn and ignore the option if not recognized
    # So say no if there are warnings
    if test -s conftest.err; then
      compiler_rtti_exceptions=no
    else
      compiler_rtti_exceptions=yes
    fi
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
  CFLAGS="$save_CFLAGS"
  echo "$ac_t""$compiler_rtti_exceptions" 1>&6

  if test "$compiler_rtti_exceptions" = "yes"; then
    no_builtin_flag=' -fno-builtin -fno-rtti -fno-exceptions'
  else
    no_builtin_flag=' -fno-builtin'
  fi
fi

# See if the linker supports building shared libraries.
echo $ac_n "checking whether the linker ($LD) supports shared libraries""... $ac_c" 1>&6
echo "configure:81694: checking whether the linker ($LD) supports shared libraries" >&5

allow_undefined_flag=
no_undefined_flag=
need_lib_prefix=unknown
need_version=unknown
# when you set need_version to no, make sure it does not cause -set_version
# flags to be left without arguments
archive_cmds=
archive_expsym_cmds=
old_archive_from_new_cmds=
old_archive_from_expsyms_cmds=
export_dynamic_flag_spec=
whole_archive_flag_spec=
thread_safe_flag_spec=
hardcode_into_libs=no
hardcode_libdir_flag_spec=
hardcode_libdir_separator=
hardcode_direct=no
hardcode_minus_L=no
hardcode_shlibpath_var=unsupported
runpath_var=
link_all_deplibs=unknown
always_export_symbols=no
export_symbols_cmds='$NM $libobjs $convenience | $global_symbol_pipe | sed '\''s/.* //'\'' | sort | uniq > $export_symbols'
# include_expsyms should be a list of space-separated symbols to be *always*
# included in the symbol list
include_expsyms=
# exclude_expsyms can be an egrep regular expression of symbols to exclude
# it will be wrapped by ` (' and `)$', so one must not match beginning or
# end of line.  Example: `a|bc|.*d.*' will exclude the symbols `a' and `bc',
# as well as any symbol that contains `d'.
exclude_expsyms="_GLOBAL_OFFSET_TABLE_"
# Although _GLOBAL_OFFSET_TABLE_ is a valid symbol C name, most a.out
# platforms (ab)use it in PIC code, but their linkers get confused if
# the symbol is explicitly referenced.  Since portable code cannot
# rely on this symbol name, it's probably fine to never include it in
# preloaded symbol tables.
extract_expsyms_cmds=

case $host_os in
cygwin* | mingw* | pw32*)
  # FIXME: the MSVC++ port hasn't been tested in a loooong time
  # When not using gcc, we currently assume that we are using
  # Microsoft Visual C++.
  if test "$GCC" != yes; then
    with_gnu_ld=no
  fi
  ;;
openbsd*)
  with_gnu_ld=no
  ;;
esac

ld_shlibs=yes
if test "$with_gnu_ld" = yes; then
  # If archive_cmds runs LD, not CC, wlarc should be empty
  wlarc='${wl}'

  # See if GNU ld supports shared libraries.
  case $host_os in
  aix3* | aix4* | aix5*)
    # On AIX, the GNU linker is very broken
    # Note:Check GNU linker on AIX 5-IA64 when/if it becomes available.
    ld_shlibs=no
    cat <<EOF 1>&2

*** Warning: the GNU linker, at least up to release 2.9.1, is reported
*** to be unable to reliably create shared libraries on AIX.
*** Therefore, libtool is disabling shared libraries support.  If you
*** really care for shared libraries, you may want to modify your PATH
*** so that a non-GNU linker is found, and then restart.

EOF
    ;;

  amigaos*)
    archive_cmds='$rm $output_objdir/a2ixlibrary.data~$echo "#define NAME $libname" > $output_objdir/a2ixlibrary.data~$echo "#define LIBRARY_ID 1" >> $output_objdir/a2ixlibrary.data~$echo "#define VERSION $major" >> $output_objdir/a2ixlibrary.data~$echo "#define REVISION $revision" >> $output_objdir/a2ixlibrary.data~$AR $AR_FLAGS $lib $libobjs~$RANLIB $lib~(cd $output_objdir && a2ixlibrary -32)'
    hardcode_libdir_flag_spec='-L$libdir'
    hardcode_minus_L=yes

    # Samuel A. Falvo II <kc5tja@dolphin.openprojects.net> reports
    # that the semantics of dynamic libraries on AmigaOS, at least up
    # to version 4, is to share data among multiple programs linked
    # with the same dynamic library.  Since this doesn't match the
    # behavior of shared libraries on other platforms, we can use
    # them.
    ld_shlibs=no
    ;;

  beos*)
    if $LD --help 2>&1 | egrep ': supported targets:.* elf' > /dev/null; then
      allow_undefined_flag=unsupported
      # Joseph Beckenbach <jrb3@best.com> says some releases of gcc
      # support --undefined.  This deserves some investigation.  FIXME
      archive_cmds='$CC -nostart $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
    else
      ld_shlibs=no
    fi
    ;;

  cygwin* | mingw* | pw32*)
    # hardcode_libdir_flag_spec is actually meaningless, as there is
    # no search path for DLLs.
    hardcode_libdir_flag_spec='-L$libdir'
    allow_undefined_flag=unsupported
    always_export_symbols=yes

    extract_expsyms_cmds='test -f $output_objdir/impgen.c || \
      sed -e "/^# \/\* impgen\.c starts here \*\//,/^# \/\* impgen.c ends here \*\// { s/^# //;s/^# *$//; p; }" -e d < $''0 > $output_objdir/impgen.c~
      test -f $output_objdir/impgen.exe || (cd $output_objdir && \
      if test "x$HOST_CC" != "x" ; then $HOST_CC -o impgen impgen.c ; \
      else $CC -o impgen impgen.c ; fi)~
      $output_objdir/impgen $dir/$soroot > $output_objdir/$soname-def'

    old_archive_from_expsyms_cmds='$DLLTOOL --as=$AS --dllname $soname --def $output_objdir/$soname-def --output-lib $output_objdir/$newlib'

    # cygwin and mingw dlls have different entry points and sets of symbols
    # to exclude.
    # FIXME: what about values for MSVC?
    dll_entry=__cygwin_dll_entry@12
    dll_exclude_symbols=DllMain@12,_cygwin_dll_entry@12,_cygwin_noncygwin_dll_entry@12~
    case $host_os in
    mingw*)
      # mingw values
      dll_entry=_DllMainCRTStartup@12
      dll_exclude_symbols=DllMain@12,DllMainCRTStartup@12,DllEntryPoint@12~
      ;;
    esac

    # mingw and cygwin differ, and it's simplest to just exclude the union
    # of the two symbol sets.
    dll_exclude_symbols=DllMain@12,_cygwin_dll_entry@12,_cygwin_noncygwin_dll_entry@12,DllMainCRTStartup@12,DllEntryPoint@12

    # recent cygwin and mingw systems supply a stub DllMain which the user
    # can override, but on older systems we have to supply one (in ltdll.c)
    if test "x$lt_cv_need_dllmain" = "xyes"; then
      ltdll_obj='$output_objdir/$soname-ltdll.'"$ac_objext "
      ltdll_cmds='test -f $output_objdir/$soname-ltdll.c || sed -e "/^# \/\* ltdll\.c starts here \*\//,/^# \/\* ltdll.c ends here \*\// { s/^# //; p; }" -e d < $''0 > $output_objdir/$soname-ltdll.c~
	test -f $output_objdir/$soname-ltdll.$ac_objext || (cd $output_objdir && $CC -c $soname-ltdll.c)~'
    else
      ltdll_obj=
      ltdll_cmds=
    fi

    # Extract the symbol export list from an `--export-all' def file,
    # then regenerate the def file from the symbol export list, so that
    # the compiled dll only exports the symbol export list.
    # Be careful not to strip the DATA tag left be newer dlltools.
    export_symbols_cmds="$ltdll_cmds"'
      $DLLTOOL --export-all --exclude-symbols '$dll_exclude_symbols' --output-def $output_objdir/$soname-def '$ltdll_obj'$libobjs $convenience~
      sed -e "1,/EXPORTS/d" -e "s/ @ [0-9]*//" -e "s/ *;.*$//" < $output_objdir/$soname-def > $export_symbols'

    # If the export-symbols file already is a .def file (1st line
    # is EXPORTS), use it as is.
    # If DATA tags from a recent dlltool are present, honour them!
    archive_expsym_cmds='if test "x`sed 1q $export_symbols`" = xEXPORTS; then
	cp $export_symbols $output_objdir/$soname-def;
      else
	echo EXPORTS > $output_objdir/$soname-def;
	_lt_hint=1;
	cat $export_symbols | while read symbol; do
	 set dummy \$symbol;
	 case \$# in
	   2) echo "   \$2 @ \$_lt_hint ; " >> $output_objdir/$soname-def;;
	   4) echo "   \$2 \$3 \$4 ; " >> $output_objdir/$soname-def; _lt_hint=`expr \$_lt_hint - 1`;;
	   *) echo "     \$2 @ \$_lt_hint \$3 ; " >> $output_objdir/$soname-def;;
	 esac;
	 _lt_hint=`expr 1 + \$_lt_hint`;
	done;
      fi~
      '"$ltdll_cmds"'
      $CC -Wl,--base-file,$output_objdir/$soname-base '$lt_cv_cc_dll_switch' -Wl,-e,'$dll_entry' -o $output_objdir/$soname '$ltdll_obj'$libobjs $deplibs $compiler_flags~
      $DLLTOOL --as=$AS --dllname $soname --exclude-symbols '$dll_exclude_symbols' --def $output_objdir/$soname-def --base-file $output_objdir/$soname-base --output-exp $output_objdir/$soname-exp~
      $CC -Wl,--base-file,$output_objdir/$soname-base $output_objdir/$soname-exp '$lt_cv_cc_dll_switch' -Wl,-e,'$dll_entry' -o $output_objdir/$soname '$ltdll_obj'$libobjs $deplibs $compiler_flags~
      $DLLTOOL --as=$AS --dllname $soname --exclude-symbols '$dll_exclude_symbols' --def $output_objdir/$soname-def --base-file $output_objdir/$soname-base --output-exp $output_objdir/$soname-exp --output-lib $output_objdir/$libname.dll.a~
      $CC $output_objdir/$soname-exp '$lt_cv_cc_dll_switch' -Wl,-e,'$dll_entry' -o $output_objdir/$soname '$ltdll_obj'$libobjs $deplibs $compiler_flags'
    ;;

  netbsd*)
    if echo __ELF__ | $CC -E - | grep __ELF__ >/dev/null; then
      archive_cmds='$LD -Bshareable $libobjs $deplibs $linker_flags -o $lib'
      wlarc=
    else
      archive_cmds='$CC -shared -nodefaultlibs $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
      archive_expsym_cmds='$CC -shared -nodefaultlibs $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
    fi
    ;;

  solaris*)
    if $LD -v 2>&1 | egrep 'BFD 2\.8' > /dev/null; then
      ld_shlibs=no
      cat <<EOF 1>&2

*** Warning: The releases 2.8.* of the GNU linker cannot reliably
*** create shared libraries on Solaris systems.  Therefore, libtool
*** is disabling shared libraries support.  We urge you to upgrade GNU
*** binutils to release 2.9.1 or newer.  Another option is to modify
*** your PATH or compiler configuration so that the native linker is
*** used, and then restart.

EOF
    elif $LD --help 2>&1 | egrep ': supported targets:.* elf' > /dev/null; then
      archive_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
      archive_expsym_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
    else
      ld_shlibs=no
    fi
    ;;

  sunos4*)
    archive_cmds='$LD -assert pure-text -Bshareable -o $lib $libobjs $deplibs $linker_flags'
    wlarc=
    hardcode_direct=yes
    hardcode_shlibpath_var=no
    ;;

  *)
    if $LD --help 2>&1 | egrep ': supported targets:.* elf' > /dev/null; then
      archive_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
      archive_expsym_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
    else
      ld_shlibs=no
    fi
    ;;
  esac

  if test "$ld_shlibs" = yes; then
    runpath_var=LD_RUN_PATH
    hardcode_libdir_flag_spec='${wl}--rpath ${wl}$libdir'
    export_dynamic_flag_spec='${wl}--export-dynamic'
    case $host_os in
    cygwin* | mingw* | pw32*)
      # dlltool doesn't understand --whole-archive et. al.
      whole_archive_flag_spec=
      ;;
    *)
      # ancient GNU ld didn't support --whole-archive et. al.
      if $LD --help 2>&1 | egrep 'no-whole-archive' > /dev/null; then
	whole_archive_flag_spec="$wlarc"'--whole-archive$convenience '"$wlarc"'--no-whole-archive'
      else
	whole_archive_flag_spec=
      fi
      ;;
    esac
  fi
else
  # PORTME fill in a description of your system's linker (not GNU ld)
  case $host_os in
  aix3*)
    allow_undefined_flag=unsupported
    always_export_symbols=yes
    archive_expsym_cmds='$LD -o $output_objdir/$soname $libobjs $deplibs $linker_flags -bE:$export_symbols -T512 -H512 -bM:SRE~$AR $AR_FLAGS $lib $output_objdir/$soname'
    # Note: this linker hardcodes the directories in LIBPATH if there
    # are no directories specified by -L.
    hardcode_minus_L=yes
    if test "$GCC" = yes && test -z "$link_static_flag"; then
      # Neither direct hardcoding nor static linking is supported with a
      # broken collect2.
      hardcode_direct=unsupported
    fi
    ;;

  aix4* | aix5*)
    if test "$host_cpu" = ia64; then
      # On IA64, the linker does run time linking by default, so we don't
      # have to do anything special.
      aix_use_runtimelinking=no
      exp_sym_flag='-Bexport'
      no_entry_flag=""
    else
      aix_use_runtimelinking=no

      # Test if we are trying to use run time linking or normal
      # AIX style linking. If -brtl is somewhere in LDFLAGS, we
      # need to do runtime linking.
      case $host_os in aix4.[23]|aix4.[23].*|aix5*)
	for ld_flag in $LDFLAGS; do
	  case $ld_flag in
	  *-brtl*)
	    aix_use_runtimelinking=yes
	    break
	  ;;
	  esac
	done
      esac

      exp_sym_flag='-bexport'
      no_entry_flag='-bnoentry'
    fi

    # When large executables or shared objects are built, AIX ld can
    # have problems creating the table of contents.  If linking a library
    # or program results in "error TOC overflow" add -mminimal-toc to
    # CXXFLAGS/CFLAGS for g++/gcc.  In the cases where that is not
    # enough to fix the problem, add -Wl,-bbigtoc to LDFLAGS.

    hardcode_direct=yes
    archive_cmds=''
    hardcode_libdir_separator=':'
    if test "$GCC" = yes; then
      case $host_os in aix4.[012]|aix4.[012].*)
	collect2name=`${CC} -print-prog-name=collect2`
	if test -f "$collect2name" && \
	  strings "$collect2name" | grep resolve_lib_name >/dev/null
	then
	  # We have reworked collect2
	  hardcode_direct=yes
	else
	  # We have old collect2
	  hardcode_direct=unsupported
	  # It fails to find uninstalled libraries when the uninstalled
	  # path is not listed in the libpath.  Setting hardcode_minus_L
	  # to unsupported forces relinking
	  hardcode_minus_L=yes
	  hardcode_libdir_flag_spec='-L$libdir'
	  hardcode_libdir_separator=
	fi
      esac

      shared_flag='-shared'
    else
      # not using gcc
      if test "$host_cpu" = ia64; then
	shared_flag='${wl}-G'
      else
	if test "$aix_use_runtimelinking" = yes; then
	  shared_flag='${wl}-G'
	else
	  shared_flag='${wl}-bM:SRE'
	fi
      fi
    fi

    # It seems that -bexpall can do strange things, so it is better to
    # generate a list of symbols to export.
    always_export_symbols=yes
    if test "$aix_use_runtimelinking" = yes; then
      # Warning - without using the other runtime loading flags (-brtl),
      # -berok will link without error, but may produce a broken library.
      allow_undefined_flag='-berok'
      hardcode_libdir_flag_spec='${wl}-blibpath:$libdir:/usr/lib:/lib'
      archive_expsym_cmds="\$CC"' -o $output_objdir/$soname $libobjs $deplibs $compiler_flags `if test "x${allow_undefined_flag}" != "x"; then echo "${wl}${allow_undefined_flag}"; else :; fi` '"\${wl}$no_entry_flag \${wl}$exp_sym_flag:\$export_symbols $shared_flag"
    else
      if test "$host_cpu" = ia64; then
	hardcode_libdir_flag_spec='${wl}-R $libdir:/usr/lib:/lib'
	allow_undefined_flag="-z nodefs"
	archive_expsym_cmds="\$CC $shared_flag"' -o $output_objdir/$soname ${wl}-h$soname $libobjs $deplibs $compiler_flags ${wl}${allow_undefined_flag} '"\${wl}$no_entry_flag \${wl}$exp_sym_flag:\$export_symbols"
      else
	hardcode_libdir_flag_spec='${wl}-bnolibpath ${wl}-blibpath:$libdir:/usr/lib:/lib'
	# Warning - without using the other run time loading flags,
	# -berok will link without error, but may produce a broken library.
	allow_undefined_flag='${wl}-berok'
	# This is a bit strange, but is similar to how AIX traditionally builds
	# it's shared libraries.
	archive_expsym_cmds="\$CC $shared_flag"' -o $output_objdir/$soname $libobjs $deplibs $compiler_flags ${allow_undefined_flag} '"\${wl}$no_entry_flag \${wl}$exp_sym_flag:\$export_symbols"' ~$AR -crlo $objdir/$libname$release.a $objdir/$soname'
      fi
    fi
    ;;

  amigaos*)
    archive_cmds='$rm $output_objdir/a2ixlibrary.data~$echo "#define NAME $libname" > $output_objdir/a2ixlibrary.data~$echo "#define LIBRARY_ID 1" >> $output_objdir/a2ixlibrary.data~$echo "#define VERSION $major" >> $output_objdir/a2ixlibrary.data~$echo "#define REVISION $revision" >> $output_objdir/a2ixlibrary.data~$AR $AR_FLAGS $lib $libobjs~$RANLIB $lib~(cd $output_objdir && a2ixlibrary -32)'
    hardcode_libdir_flag_spec='-L$libdir'
    hardcode_minus_L=yes
    # see comment about different semantics on the GNU ld section
    ld_shlibs=no
    ;;

  cygwin* | mingw* | pw32*)
    # When not using gcc, we currently assume that we are using
    # Microsoft Visual C++.
    # hardcode_libdir_flag_spec is actually meaningless, as there is
    # no search path for DLLs.
    hardcode_libdir_flag_spec=' '
    allow_undefined_flag=unsupported
    # Tell ltmain to make .lib files, not .a files.
    libext=lib
    # FIXME: Setting linknames here is a bad hack.
    archive_cmds='$CC -o $lib $libobjs $compiler_flags `echo "$deplibs" | sed -e '\''s/ -lc$//'\''` -link -dll~linknames='
    # The linker will automatically build a .lib file if we build a DLL.
    old_archive_from_new_cmds='true'
    # FIXME: Should let the user specify the lib program.
    old_archive_cmds='lib /OUT:$oldlib$oldobjs$old_deplibs'
    fix_srcfile_path='`cygpath -w "$srcfile"`'
    ;;

  darwin* | rhapsody*)
    case "$host_os" in
    rhapsody* | darwin1.[012])
      allow_undefined_flag='-undefined suppress'
      ;;
    *) # Darwin 1.3 on
      allow_undefined_flag='-flat_namespace -undefined suppress'
      ;;
    esac
    # FIXME: Relying on posixy $() will cause problems for
    #        cross-compilation, but unfortunately the echo tests do not
    #        yet detect zsh echo's removal of \ escapes.  Also zsh mangles
    #	     `"' quotes if we put them in here... so don't!
    archive_cmds='$CC -r -keep_private_externs -nostdlib -o ${lib}-master.o $libobjs && $CC $(test .$module = .yes && echo -bundle || echo -dynamiclib) $allow_undefined_flag -o $lib ${lib}-master.o $deplibs$linker_flags $(test .$module != .yes && echo -install_name $rpath/$soname $verstring)'
    # We need to add '_' to the symbols in $export_symbols first
    #archive_expsym_cmds="$archive_cmds"' && strip -s $export_symbols'
    hardcode_direct=yes
    hardcode_shlibpath_var=no
    whole_archive_flag_spec='-all_load $convenience'
    ;;

  freebsd1*)
    ld_shlibs=no
    ;;

  # FreeBSD 2.2.[012] allows us to include c++rt0.o to get C++ constructor
  # support.  Future versions do this automatically, but an explicit c++rt0.o
  # does not break anything, and helps significantly (at the cost of a little
  # extra space).
  freebsd2.2*)
    archive_cmds='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags /usr/lib/c++rt0.o'
    hardcode_libdir_flag_spec='-R$libdir'
    hardcode_direct=yes
    hardcode_shlibpath_var=no
    ;;

  # Unfortunately, older versions of FreeBSD 2 do not have this feature.
  freebsd2*)
    archive_cmds='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags'
    hardcode_direct=yes
    hardcode_minus_L=yes
    hardcode_shlibpath_var=no
    ;;

  # FreeBSD 3 and greater uses gcc -shared to do shared libraries.
  freebsd*)
    archive_cmds='$CC -shared -o $lib $libobjs $deplibs $compiler_flags'
    hardcode_libdir_flag_spec='-R$libdir'
    hardcode_direct=yes
    hardcode_shlibpath_var=no
    ;;

  hpux9* | hpux10* | hpux11*)
    case $host_os in
    hpux9*) archive_cmds='$rm $output_objdir/$soname~$LD -b +b $install_libdir -o $output_objdir/$soname $libobjs $deplibs $linker_flags~test $output_objdir/$soname = $lib || mv $output_objdir/$soname $lib' ;;
    *) archive_cmds='$LD -b +h $soname +b $install_libdir -o $lib $libobjs $deplibs $linker_flags' ;;
    esac
    hardcode_libdir_flag_spec='${wl}+b ${wl}$libdir'
    hardcode_libdir_separator=:
    hardcode_direct=yes
    hardcode_minus_L=yes # Not in the search PATH, but as the default
			 # location of the library.
    export_dynamic_flag_spec='${wl}-E'
    ;;

  irix5* | irix6* | nonstopux*)
    if test "$GCC" = yes; then
      archive_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && echo ${wl}-set_version ${wl}$verstring` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
      hardcode_libdir_flag_spec='${wl}-rpath ${wl}$libdir'
    else
      archive_cmds='$LD -shared $libobjs $deplibs $linker_flags -soname $soname `test -n "$verstring" && echo -set_version $verstring` -update_registry ${output_objdir}/so_locations -o $lib'
      hardcode_libdir_flag_spec='-rpath $libdir'
    fi
    hardcode_libdir_separator=:
    link_all_deplibs=yes
    ;;

  netbsd*)
    if echo __ELF__ | $CC -E - | grep __ELF__ >/dev/null; then
      archive_cmds='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags'  # a.out
    else
      archive_cmds='$LD -shared -o $lib $libobjs $deplibs $linker_flags'      # ELF
    fi
    hardcode_libdir_flag_spec='-R$libdir'
    hardcode_direct=yes
    hardcode_shlibpath_var=no
    ;;

  newsos6)
    archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
    hardcode_direct=yes
    hardcode_libdir_flag_spec='${wl}-rpath ${wl}$libdir'
    hardcode_libdir_separator=:
    hardcode_shlibpath_var=no
    ;;

  openbsd*)
    hardcode_direct=yes
    hardcode_shlibpath_var=no
    if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
      archive_cmds='$CC -shared $pic_flag -o $lib $libobjs $deplibs $compiler_flags'
      hardcode_libdir_flag_spec='${wl}-rpath,$libdir'
      export_dynamic_flag_spec='${wl}-E'
    else
      case "$host_os" in
      openbsd[01].* | openbsd2.[0-7] | openbsd2.[0-7].*)
	archive_cmds='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags'
	hardcode_libdir_flag_spec='-R$libdir'
        ;;
      *)
        archive_cmds='$CC -shared $pic_flag -o $lib $libobjs $deplibs $compiler_flags'
        hardcode_libdir_flag_spec='${wl}-rpath,$libdir'
        ;;
      esac
    fi
    ;;

  os2*)
    hardcode_libdir_flag_spec='-L$libdir'
    hardcode_minus_L=yes
    allow_undefined_flag=unsupported
    archive_cmds='$echo "LIBRARY $libname INITINSTANCE" > $output_objdir/$libname.def~$echo "DESCRIPTION \"$libname\"" >> $output_objdir/$libname.def~$echo DATA >> $output_objdir/$libname.def~$echo " SINGLE NONSHARED" >> $output_objdir/$libname.def~$echo EXPORTS >> $output_objdir/$libname.def~emxexp $libobjs >> $output_objdir/$libname.def~$CC -Zdll -Zcrtdll -o $lib $libobjs $deplibs $compiler_flags $output_objdir/$libname.def'
    old_archive_from_new_cmds='emximp -o $output_objdir/$libname.a $output_objdir/$libname.def'
    ;;

  osf3*)
    if test "$GCC" = yes; then
      allow_undefined_flag=' ${wl}-expect_unresolved ${wl}\*'
      archive_cmds='$CC -shared${allow_undefined_flag} $libobjs $deplibs $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && echo ${wl}-set_version ${wl}$verstring` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
    else
      allow_undefined_flag=' -expect_unresolved \*'
      archive_cmds='$LD -shared${allow_undefined_flag} $libobjs $deplibs $linker_flags -soname $soname `test -n "$verstring" && echo -set_version $verstring` -update_registry ${output_objdir}/so_locations -o $lib'
    fi
    hardcode_libdir_flag_spec='${wl}-rpath ${wl}$libdir'
    hardcode_libdir_separator=:
    ;;

  osf4* | osf5*)	# as osf3* with the addition of -msym flag
    if test "$GCC" = yes; then
      allow_undefined_flag=' ${wl}-expect_unresolved ${wl}\*'
      archive_cmds='$CC -shared${allow_undefined_flag} $libobjs $deplibs $compiler_flags ${wl}-msym ${wl}-soname ${wl}$soname `test -n "$verstring" && echo ${wl}-set_version ${wl}$verstring` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
      hardcode_libdir_flag_spec='${wl}-rpath ${wl}$libdir'
    else
      allow_undefined_flag=' -expect_unresolved \*'
      archive_cmds='$LD -shared${allow_undefined_flag} $libobjs $deplibs $linker_flags -msym -soname $soname `test -n "$verstring" && echo -set_version $verstring` -update_registry ${output_objdir}/so_locations -o $lib'
      archive_expsym_cmds='for i in `cat $export_symbols`; do printf "-exported_symbol " >> $lib.exp; echo "\$i" >> $lib.exp; done; echo "-hidden">> $lib.exp~
      $LD -shared${allow_undefined_flag} -input $lib.exp $linker_flags $libobjs $deplibs -soname $soname `test -n "$verstring" && echo -set_version $verstring` -update_registry ${objdir}/so_locations -o $lib~$rm $lib.exp'

      #Both c and cxx compiler support -rpath directly
      hardcode_libdir_flag_spec='-rpath $libdir'
    fi
    hardcode_libdir_separator=:
    ;;

  sco3.2v5*)
    archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
    hardcode_shlibpath_var=no
    runpath_var=LD_RUN_PATH
    hardcode_runpath_var=yes
    export_dynamic_flag_spec='${wl}-Bexport'
    ;;

  solaris*)
    # gcc --version < 3.0 without binutils cannot create self contained
    # shared libraries reliably, requiring libgcc.a to resolve some of
    # the object symbols generated in some cases.  Libraries that use
    # assert need libgcc.a to resolve __eprintf, for example.  Linking
    # a copy of libgcc.a into every shared library to guarantee resolving
    # such symbols causes other problems:  According to Tim Van Holder
    # <tim.van.holder@pandora.be>, C++ libraries end up with a separate
    # (to the application) exception stack for one thing.
    no_undefined_flag=' -z defs'
    if test "$GCC" = yes; then
      case `$CC --version 2>/dev/null` in
      [12].*)
	cat <<EOF 1>&2

*** Warning: Releases of GCC earlier than version 3.0 cannot reliably
*** create self contained shared libraries on Solaris systems, without
*** introducing a dependency on libgcc.a.  Therefore, libtool is disabling
*** -no-undefined support, which will at least allow you to build shared
*** libraries.  However, you may find that when you link such libraries
*** into an application without using GCC, you have to manually add
*** \`gcc --print-libgcc-file-name\` to the link command.  We urge you to
*** upgrade to a newer version of GCC.  Another option is to rebuild your
*** current GCC to use the GNU linker from GNU binutils 2.9.1 or newer.

EOF
        no_undefined_flag=
	;;
      esac
    fi
    # $CC -shared without GNU ld will not create a library from C++
    # object files and a static libstdc++, better avoid it by now
    archive_cmds='$LD -G${allow_undefined_flag} -h $soname -o $lib $libobjs $deplibs $linker_flags'
    archive_expsym_cmds='$echo "{ global:" > $lib.exp~cat $export_symbols | sed -e "s/\(.*\)/\1;/" >> $lib.exp~$echo "local: *; };" >> $lib.exp~
		$LD -G${allow_undefined_flag} -M $lib.exp -h $soname -o $lib $libobjs $deplibs $linker_flags~$rm $lib.exp'
    hardcode_libdir_flag_spec='-R$libdir'
    hardcode_shlibpath_var=no
    case $host_os in
    solaris2.[0-5] | solaris2.[0-5].*) ;;
    *) # Supported since Solaris 2.6 (maybe 2.5.1?)
      whole_archive_flag_spec='-z allextract$convenience -z defaultextract' ;;
    esac
    link_all_deplibs=yes
    ;;

  sunos4*)
    if test "x$host_vendor" = xsequent; then
      # Use $CC to link under sequent, because it throws in some extra .o
      # files that make .init and .fini sections work.
      archive_cmds='$CC -G ${wl}-h $soname -o $lib $libobjs $deplibs $compiler_flags'
    else
      archive_cmds='$LD -assert pure-text -Bstatic -o $lib $libobjs $deplibs $linker_flags'
    fi
    hardcode_libdir_flag_spec='-L$libdir'
    hardcode_direct=yes
    hardcode_minus_L=yes
    hardcode_shlibpath_var=no
    ;;

  sysv4)
    case $host_vendor in
      sni)
        archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
        hardcode_direct=yes # is this really true???
        ;;
      siemens)
        ## LD is ld it makes a PLAMLIB
        ## CC just makes a GrossModule.
        archive_cmds='$LD -G -o $lib $libobjs $deplibs $linker_flags'
        reload_cmds='$CC -r -o $output$reload_objs'
        hardcode_direct=no
        ;;
      motorola)
        archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
        hardcode_direct=no #Motorola manual says yes, but my tests say they lie
        ;;
    esac
    runpath_var='LD_RUN_PATH'
    hardcode_shlibpath_var=no
    ;;

  sysv4.3*)
    archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
    hardcode_shlibpath_var=no
    export_dynamic_flag_spec='-Bexport'
    ;;

  uts4*)
    archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
    hardcode_libdir_flag_spec='-L$libdir'
    hardcode_shlibpath_var=no
    ;;

  dgux*)
    archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
    hardcode_libdir_flag_spec='-L$libdir'
    hardcode_shlibpath_var=no
    ;;

  sysv4*MP*)
    if test -d /usr/nec; then
      archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
      hardcode_shlibpath_var=no
      runpath_var=LD_RUN_PATH
      hardcode_runpath_var=yes
      ld_shlibs=yes
    fi
    ;;

  sysv4.2uw2*)
    archive_cmds='$LD -G -o $lib $libobjs $deplibs $linker_flags'
    hardcode_direct=yes
    hardcode_minus_L=no
    hardcode_shlibpath_var=no
    hardcode_runpath_var=yes
    runpath_var=LD_RUN_PATH
    ;;

  sysv5* | unixware7*)
    no_undefined_flag='${wl}-z ${wl}text'
    if test "$GCC" = yes; then
      archive_cmds='$CC -shared ${wl}-h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags'
    else
      archive_cmds='$CC -G ${wl}-h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags'
    fi
    runpath_var='LD_RUN_PATH'
    hardcode_shlibpath_var=no
    ;;

  *)
    ld_shlibs=no
    ;;
  esac
fi
echo "$ac_t""$ld_shlibs" 1>&6
test "$ld_shlibs" = no && can_build_shared=no

# Check hardcoding attributes.
echo $ac_n "checking how to hardcode library paths into programs""... $ac_c" 1>&6
echo "configure:82381: checking how to hardcode library paths into programs" >&5
hardcode_action=
if test -n "$hardcode_libdir_flag_spec" || \
   test -n "$runpath_var"; then

  # We can hardcode non-existant directories.
  if test "$hardcode_direct" != no &&
     # If the only mechanism to avoid hardcoding is shlibpath_var, we
     # have to relink, otherwise we might link with an installed library
     # when we should be linking with a yet-to-be-installed one
     ## test "$hardcode_shlibpath_var" != no &&
     test "$hardcode_minus_L" != no; then
    # Linking always hardcodes the temporary library directory.
    hardcode_action=relink
  else
    # We can link without hardcoding, and we can hardcode nonexisting dirs.
    hardcode_action=immediate
  fi
else
  # We cannot hardcode anything, or else we can only hardcode existing
  # directories.
  hardcode_action=unsupported
fi
echo "$ac_t""$hardcode_action" 1>&6

striplib=
old_striplib=
echo $ac_n "checking whether stripping libraries is possible""... $ac_c" 1>&6
echo "configure:82409: checking whether stripping libraries is possible" >&5
if test -n "$STRIP" && $STRIP -V 2>&1 | grep "GNU strip" >/dev/null; then
  test -z "$old_striplib" && old_striplib="$STRIP --strip-debug"
  test -z "$striplib" && striplib="$STRIP --strip-unneeded"
  echo "$ac_t""yes" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

reload_cmds='$LD$reload_flag -o $output$reload_objs'
test -z "$deplibs_check_method" && deplibs_check_method=unknown

# PORTME Fill in your ld.so characteristics
echo $ac_n "checking dynamic linker characteristics""... $ac_c" 1>&6
echo "configure:82423: checking dynamic linker characteristics" >&5
library_names_spec=
libname_spec='lib$name'
soname_spec=
postinstall_cmds=
postuninstall_cmds=
finish_cmds=
finish_eval=
shlibpath_var=
shlibpath_overrides_runpath=unknown
version_type=none
dynamic_linker="$host_os ld.so"
sys_lib_dlsearch_path_spec="/lib /usr/lib"
sys_lib_search_path_spec="/lib /usr/lib /usr/local/lib"

case $host_os in
aix3*)
  version_type=linux
  library_names_spec='${libname}${release}.so$versuffix $libname.a'
  shlibpath_var=LIBPATH

  # AIX has no versioning support, so we append a major version to the name.
  soname_spec='${libname}${release}.so$major'
  ;;

aix4* | aix5*)
  version_type=linux
  need_lib_prefix=no
  need_version=no
  hardcode_into_libs=yes
  if test "$host_cpu" = ia64; then
    # AIX 5 supports IA64
    library_names_spec='${libname}${release}.so$major ${libname}${release}.so$versuffix $libname.so'
    shlibpath_var=LD_LIBRARY_PATH
  else
    # With GCC up to 2.95.x, collect2 would create an import file
    # for dependence libraries.  The import file would start with
    # the line `#! .'.  This would cause the generated library to
    # depend on `.', always an invalid library.  This was fixed in
    # development snapshots of GCC prior to 3.0.
    case $host_os in
      aix4 | aix4.[01] | aix4.[01].*)
	if { echo '#if __GNUC__ > 2 || (__GNUC__ == 2 && __GNUC_MINOR__ >= 97)'
	     echo ' yes '
	     echo '#endif'; } | ${CC} -E - | grep yes > /dev/null; then
	  :
	else
	  can_build_shared=no
	fi
	;;
    esac
    # AIX (on Power*) has no versioning support, so currently we can
    # not hardcode correct soname into executable. Probably we can
    # add versioning support to collect2, so additional links can
    # be useful in future.
    if test "$aix_use_runtimelinking" = yes; then
      # If using run time linking (on AIX 4.2 or later) use lib<name>.so
      # instead of lib<name>.a to let people know that these are not
      # typical AIX shared libraries.
      library_names_spec='${libname}${release}.so$versuffix ${libname}${release}.so$major $libname.so'
    else
      # We preserve .a as extension for shared libraries through AIX4.2
      # and later when we are not doing run time linking.
      library_names_spec='${libname}${release}.a $libname.a'
      soname_spec='${libname}${release}.so$major'
    fi
    shlibpath_var=LIBPATH
  fi
  hardcode_into_libs=yes
  ;;

amigaos*)
  library_names_spec='$libname.ixlibrary $libname.a'
  # Create ${libname}_ixlibrary.a entries in /sys/libs.
  finish_eval='for lib in `ls $libdir/*.ixlibrary 2>/dev/null`; do libname=`$echo "X$lib" | $Xsed -e '\''s%^.*/\([^/]*\)\.ixlibrary$%\1%'\''`; test $rm /sys/libs/${libname}_ixlibrary.a; $show "(cd /sys/libs && $LN_S $lib ${libname}_ixlibrary.a)"; (cd /sys/libs && $LN_S $lib ${libname}_ixlibrary.a) || exit 1; done'
  ;;

beos*)
  library_names_spec='${libname}.so'
  dynamic_linker="$host_os ld.so"
  shlibpath_var=LIBRARY_PATH
  ;;

bsdi4*)
  version_type=linux
  need_version=no
  library_names_spec='${libname}${release}.so$versuffix ${libname}${release}.so$major $libname.so'
  soname_spec='${libname}${release}.so$major'
  finish_cmds='PATH="\$PATH:/sbin" ldconfig $libdir'
  shlibpath_var=LD_LIBRARY_PATH
  sys_lib_search_path_spec="/shlib /usr/lib /usr/X11/lib /usr/contrib/lib /lib /usr/local/lib"
  sys_lib_dlsearch_path_spec="/shlib /usr/lib /usr/local/lib"
  export_dynamic_flag_spec=-rdynamic
  # the default ld.so.conf also contains /usr/contrib/lib and
  # /usr/X11R6/lib (/usr/X11 is a link to /usr/X11R6), but let us allow
  # libtool to hard-code these into programs
  ;;

cygwin* | mingw* | pw32*)
  version_type=windows
  need_version=no
  need_lib_prefix=no
  case $GCC,$host_os in
  yes,cygwin*)
    library_names_spec='$libname.dll.a'
    soname_spec='`echo ${libname} | sed -e 's/^lib/cyg/'``echo ${release} | sed -e 's/[.]/-/g'`${versuffix}.dll'
    postinstall_cmds='dlpath=`bash 2>&1 -c '\''. $dir/${file}i;echo \$dlname'\''`~
      dldir=$destdir/`dirname \$dlpath`~
      test -d \$dldir || mkdir -p \$dldir~
      $install_prog .libs/$dlname \$dldir/$dlname'
    postuninstall_cmds='dldll=`bash 2>&1 -c '\''. $file; echo \$dlname'\''`~
      dlpath=$dir/\$dldll~
       $rm \$dlpath'
    ;;
  yes,mingw*)
    library_names_spec='${libname}`echo ${release} | sed -e 's/[.]/-/g'`${versuffix}.dll'
    sys_lib_search_path_spec=`$CC -print-search-dirs | grep "^libraries:" | sed -e "s/^libraries://" -e "s/;/ /g" -e "s,=/,/,g"`
    ;;
  yes,pw32*)
    library_names_spec='`echo ${libname} | sed -e 's/^lib/pw/'``echo ${release} | sed -e 's/./-/g'`${versuffix}.dll'
    ;;
  *)
    library_names_spec='${libname}`echo ${release} | sed -e 's/[.]/-/g'`${versuffix}.dll $libname.lib'
    ;;
  esac
  dynamic_linker='Win32 ld.exe'
  # FIXME: first we should search . and the directory the executable is in
  shlibpath_var=PATH
  ;;

darwin* | rhapsody*)
  dynamic_linker="$host_os dyld"
  version_type=darwin
  need_lib_prefix=no
  need_version=no
  # FIXME: Relying on posixy $() will cause problems for
  #        cross-compilation, but unfortunately the echo tests do not
  #        yet detect zsh echo's removal of \ escapes.
  library_names_spec='${libname}${release}${versuffix}.$(test .$module = .yes && echo so || echo dylib) ${libname}${release}${major}.$(test .$module = .yes && echo so || echo dylib) ${libname}.$(test .$module = .yes && echo so || echo dylib)'
  soname_spec='${libname}${release}${major}.$(test .$module = .yes && echo so || echo dylib)'
  shlibpath_overrides_runpath=yes
  shlibpath_var=DYLD_LIBRARY_PATH
  ;;

freebsd1*)
  dynamic_linker=no
  ;;

freebsd*)
  objformat=`test -x /usr/bin/objformat && /usr/bin/objformat || echo aout`
  version_type=freebsd-$objformat
  case $version_type in
    freebsd-elf*)
      library_names_spec='${libname}${release}.so$versuffix ${libname}${release}.so $libname.so'
      need_version=no
      need_lib_prefix=no
      ;;
    freebsd-*)
      library_names_spec='${libname}${release}.so$versuffix $libname.so$versuffix'
      need_version=yes
      ;;
  esac
  shlibpath_var=LD_LIBRARY_PATH
  case $host_os in
  freebsd2*)
    shlibpath_overrides_runpath=yes
    ;;
  *)
    shlibpath_overrides_runpath=no
    hardcode_into_libs=yes
    ;;
  esac
  ;;

gnu*)
  version_type=linux
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}.so$versuffix ${libname}${release}.so${major} ${libname}.so'
  soname_spec='${libname}${release}.so$major'
  shlibpath_var=LD_LIBRARY_PATH
  hardcode_into_libs=yes
  ;;

hpux9* | hpux10* | hpux11*)
  # Give a soname corresponding to the major version so that dld.sl refuses to
  # link against other versions.
  dynamic_linker="$host_os dld.sl"
  version_type=sunos
  need_lib_prefix=no
  need_version=no
  shlibpath_var=SHLIB_PATH
  shlibpath_overrides_runpath=no # +s is required to enable SHLIB_PATH
  library_names_spec='${libname}${release}.sl$versuffix ${libname}${release}.sl$major $libname.sl'
  soname_spec='${libname}${release}.sl$major'
  # HP-UX runs *really* slowly unless shared libraries are mode 555.
  postinstall_cmds='chmod 555 $lib'
  ;;

irix5* | irix6* | nonstopux*)
  case $host_os in
    nonstopux*) version_type=nonstopux ;;
    *)          version_type=irix ;;
  esac
  need_lib_prefix=no
  need_version=no
  soname_spec='${libname}${release}.so$major'
  library_names_spec='${libname}${release}.so$versuffix ${libname}${release}.so$major ${libname}${release}.so $libname.so'
  case $host_os in
  irix5* | nonstopux*)
    libsuff= shlibsuff=
    ;;
  *)
    case $LD in # libtool.m4 will add one of these switches to LD
    *-32|*"-32 ") libsuff= shlibsuff= libmagic=32-bit;;
    *-n32|*"-n32 ") libsuff=32 shlibsuff=N32 libmagic=N32;;
    *-64|*"-64 ") libsuff=64 shlibsuff=64 libmagic=64-bit;;
    *) libsuff= shlibsuff= libmagic=never-match;;
    esac
    ;;
  esac
  shlibpath_var=LD_LIBRARY${shlibsuff}_PATH
  shlibpath_overrides_runpath=no
  sys_lib_search_path_spec="/usr/lib${libsuff} /lib${libsuff} /usr/local/lib${libsuff}"
  sys_lib_dlsearch_path_spec="/usr/lib${libsuff} /lib${libsuff}"
  ;;

# No shared lib support for Linux oldld, aout, or coff.
linux-gnuoldld* | linux-gnuaout* | linux-gnucoff*)
  dynamic_linker=no
  ;;

# This must be Linux ELF.
linux-gnu*)
  version_type=linux
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}.so$versuffix ${libname}${release}.so$major $libname.so'
  soname_spec='${libname}${release}.so$major'
  finish_cmds='PATH="\$PATH:/sbin" ldconfig -n $libdir'
  shlibpath_var=LD_LIBRARY_PATH
  shlibpath_overrides_runpath=no
  # This implies no fast_install, which is unacceptable.
  # Some rework will be needed to allow for fast_install
  # before this can be enabled.
  hardcode_into_libs=yes

  # We used to test for /lib/ld.so.1 and disable shared libraries on
  # powerpc, because MkLinux only supported shared libraries with the
  # GNU dynamic linker.  Since this was broken with cross compilers,
  # most powerpc-linux boxes support dynamic linking these days and
  # people can always --disable-shared, the test was removed, and we
  # assume the GNU/Linux dynamic linker is in use.
  dynamic_linker='GNU/Linux ld.so'
  ;;

netbsd*)
  version_type=sunos
  need_lib_prefix=no
  need_version=no
  if echo __ELF__ | $CC -E - | grep __ELF__ >/dev/null; then
    library_names_spec='${libname}${release}.so$versuffix ${libname}.so$versuffix'
    finish_cmds='PATH="\$PATH:/sbin" ldconfig -m $libdir'
    dynamic_linker='NetBSD (a.out) ld.so'
  else
    library_names_spec='${libname}${release}.so$versuffix ${libname}${release}.so$major ${libname}${release}.so ${libname}.so'
    soname_spec='${libname}${release}.so$major'
    dynamic_linker='NetBSD ld.elf_so'
  fi
  shlibpath_var=LD_LIBRARY_PATH
  shlibpath_overrides_runpath=yes
  hardcode_into_libs=yes
  ;;

newsos6)
  version_type=linux
  library_names_spec='${libname}${release}.so$versuffix ${libname}${release}.so$major $libname.so'
  shlibpath_var=LD_LIBRARY_PATH
  shlibpath_overrides_runpath=yes
  ;;

openbsd*)
  version_type=sunos
  need_lib_prefix=no
  need_version=no
  if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
    case "$host_os" in
    openbsd2.[89] | openbsd2.[89].*)
      shlibpath_overrides_runpath=no
      ;;
    *)
      shlibpath_overrides_runpath=yes
      ;;
    esac
  else
    shlibpath_overrides_runpath=yes
  fi
  library_names_spec='${libname}${release}.so$versuffix ${libname}.so$versuffix'
  finish_cmds='PATH="\$PATH:/sbin" ldconfig -m $libdir'
  shlibpath_var=LD_LIBRARY_PATH
  ;;

os2*)
  libname_spec='$name'
  need_lib_prefix=no
  library_names_spec='$libname.dll $libname.a'
  dynamic_linker='OS/2 ld.exe'
  shlibpath_var=LIBPATH
  ;;

osf3* | osf4* | osf5*)
  version_type=osf
  need_version=no
  soname_spec='${libname}${release}.so$major'
  library_names_spec='${libname}${release}.so$versuffix ${libname}${release}.so$major $libname.so'
  shlibpath_var=LD_LIBRARY_PATH
  sys_lib_search_path_spec="/usr/shlib /usr/ccs/lib /usr/lib/cmplrs/cc /usr/lib /usr/local/lib /var/shlib"
  sys_lib_dlsearch_path_spec="$sys_lib_search_path_spec"
  hardcode_into_libs=yes
  ;;

sco3.2v5*)
  version_type=osf
  soname_spec='${libname}${release}.so$major'
  library_names_spec='${libname}${release}.so$versuffix ${libname}${release}.so$major $libname.so'
  shlibpath_var=LD_LIBRARY_PATH
  ;;

solaris*)
  version_type=linux
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}.so$versuffix ${libname}${release}.so$major $libname.so'
  soname_spec='${libname}${release}.so$major'
  shlibpath_var=LD_LIBRARY_PATH
  shlibpath_overrides_runpath=yes
  hardcode_into_libs=yes
  # ldd complains unless libraries are executable
  postinstall_cmds='chmod +x $lib'
  ;;

sunos4*)
  version_type=sunos
  library_names_spec='${libname}${release}.so$versuffix ${libname}.so$versuffix'
  finish_cmds='PATH="\$PATH:/usr/etc" ldconfig $libdir'
  shlibpath_var=LD_LIBRARY_PATH
  shlibpath_overrides_runpath=yes
  if test "$with_gnu_ld" = yes; then
    need_lib_prefix=no
  fi
  need_version=yes
  ;;

sysv4 | sysv4.2uw2* | sysv4.3* | sysv5*)
  version_type=linux
  library_names_spec='${libname}${release}.so$versuffix ${libname}${release}.so$major $libname.so'
  soname_spec='${libname}${release}.so$major'
  shlibpath_var=LD_LIBRARY_PATH
  case $host_vendor in
    sni)
      shlibpath_overrides_runpath=no
      need_lib_prefix=no
      export_dynamic_flag_spec='${wl}-Blargedynsym'
      runpath_var=LD_RUN_PATH
      ;;
    siemens)
      need_lib_prefix=no
      ;;
    motorola)
      need_lib_prefix=no
      need_version=no
      shlibpath_overrides_runpath=no
      sys_lib_search_path_spec='/lib /usr/lib /usr/ccs/lib'
      ;;
  esac
  ;;

uts4*)
  version_type=linux
  library_names_spec='${libname}${release}.so$versuffix ${libname}${release}.so$major $libname.so'
  soname_spec='${libname}${release}.so$major'
  shlibpath_var=LD_LIBRARY_PATH
  ;;

dgux*)
  version_type=linux
  need_lib_prefix=no
  need_version=no
  library_names_spec='${libname}${release}.so$versuffix ${libname}${release}.so$major $libname.so'
  soname_spec='${libname}${release}.so$major'
  shlibpath_var=LD_LIBRARY_PATH
  ;;

sysv4*MP*)
  if test -d /usr/nec ;then
    version_type=linux
    library_names_spec='$libname.so.$versuffix $libname.so.$major $libname.so'
    soname_spec='$libname.so.$major'
    shlibpath_var=LD_LIBRARY_PATH
  fi
  ;;

*)
  dynamic_linker=no
  ;;
esac
echo "$ac_t""$dynamic_linker" 1>&6
test "$dynamic_linker" = no && can_build_shared=no

# Report the final consequences.
echo $ac_n "checking if libtool supports shared libraries""... $ac_c" 1>&6
echo "configure:82834: checking if libtool supports shared libraries" >&5
echo "$ac_t""$can_build_shared" 1>&6

echo $ac_n "checking whether to build shared libraries""... $ac_c" 1>&6
echo "configure:82838: checking whether to build shared libraries" >&5
test "$can_build_shared" = "no" && enable_shared=no

# On AIX, shared libraries and static libraries use the same namespace, and
# are all built from PIC.
case "$host_os" in
aix3*)
  test "$enable_shared" = yes && enable_static=no
  if test -n "$RANLIB"; then
    archive_cmds="$archive_cmds~\$RANLIB \$lib"
    postinstall_cmds='$RANLIB $lib'
  fi
  ;;

aix4*)
  if test "$host_cpu" != ia64 && test "$aix_use_runtimelinking" = no ; then
    test "$enable_shared" = yes && enable_static=no
  fi
  ;;
esac
echo "$ac_t""$enable_shared" 1>&6

echo $ac_n "checking whether to build static libraries""... $ac_c" 1>&6
echo "configure:82861: checking whether to build static libraries" >&5
# Make sure either enable_shared or enable_static is yes.
test "$enable_shared" = yes || enable_static=yes
echo "$ac_t""$enable_static" 1>&6

if test "$hardcode_action" = relink; then
  # Fast installation is not supported
  enable_fast_install=no
elif test "$shlibpath_overrides_runpath" = yes ||
     test "$enable_shared" = no; then
  # Fast installation is not necessary
  enable_fast_install=needless
fi

variables_saved_for_relink="PATH $shlibpath_var $runpath_var"
if test "$GCC" = yes; then
  variables_saved_for_relink="$variables_saved_for_relink GCC_EXEC_PREFIX COMPILER_PATH LIBRARY_PATH"
fi

if test "x$enable_dlopen" != xyes; then
  enable_dlopen=unknown
  enable_dlopen_self=unknown
  enable_dlopen_self_static=unknown
else
  lt_cv_dlopen=no
  lt_cv_dlopen_libs=

  case $host_os in
  beos*)
    lt_cv_dlopen="load_add_on"
    lt_cv_dlopen_libs=
    lt_cv_dlopen_self=yes
    ;;

  cygwin* | mingw* | pw32*)
    lt_cv_dlopen="LoadLibrary"
    lt_cv_dlopen_libs=
   ;;

  *)
    echo $ac_n "checking for shl_load""... $ac_c" 1>&6
echo "configure:82902: checking for shl_load" >&5
if eval "test \"`echo '$''{'ac_cv_func_shl_load'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 82907 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char shl_load(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char shl_load();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_shl_load) || defined (__stub___shl_load)
choke me
#else
shl_load();
#endif

; return 0; }
EOF
if { (eval echo configure:82930: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_shl_load=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_shl_load=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'shl_load`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  lt_cv_dlopen="shl_load"
else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for shl_load in -ldld""... $ac_c" 1>&6
echo "configure:82948: checking for shl_load in -ldld" >&5
ac_lib_var=`echo dld'_'shl_load | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ldld  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 82956 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char shl_load();

int main() {
shl_load()
; return 0; }
EOF
if { (eval echo configure:82967: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  lt_cv_dlopen="shl_load" lt_cv_dlopen_libs="-dld"
else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for dlopen""... $ac_c" 1>&6
echo "configure:82986: checking for dlopen" >&5
if eval "test \"`echo '$''{'ac_cv_func_dlopen'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 82991 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char dlopen(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dlopen();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_dlopen) || defined (__stub___dlopen)
choke me
#else
dlopen();
#endif

; return 0; }
EOF
if { (eval echo configure:83014: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_dlopen=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_dlopen=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'dlopen`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  lt_cv_dlopen="dlopen"
else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for dlopen in -ldl""... $ac_c" 1>&6
echo "configure:83032: checking for dlopen in -ldl" >&5
ac_lib_var=`echo dl'_'dlopen | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ldl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 83040 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dlopen();

int main() {
dlopen()
; return 0; }
EOF
if { (eval echo configure:83051: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-ldl"
else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for dlopen in -lsvld""... $ac_c" 1>&6
echo "configure:83070: checking for dlopen in -lsvld" >&5
ac_lib_var=`echo svld'_'dlopen | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsvld  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 83078 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dlopen();

int main() {
dlopen()
; return 0; }
EOF
if { (eval echo configure:83089: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-lsvld"
else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for dld_link in -ldld""... $ac_c" 1>&6
echo "configure:83108: checking for dld_link in -ldld" >&5
ac_lib_var=`echo dld'_'dld_link | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ldld  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 83116 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dld_link();

int main() {
dld_link()
; return 0; }
EOF
if { (eval echo configure:83127: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  lt_cv_dlopen="dld_link" lt_cv_dlopen_libs="-dld"
else
  echo "$ac_t""no" 1>&6
fi

	      
fi

	    
fi

	  
fi

	
fi

      
fi

    ;;
  esac

  if test "x$lt_cv_dlopen" != xno; then
    enable_dlopen=yes
  else
    enable_dlopen=no
  fi

  case $lt_cv_dlopen in
  dlopen)
    save_CPPFLAGS="$CPPFLAGS"
        test "x$ac_cv_header_dlfcn_h" = xyes && CPPFLAGS="$CPPFLAGS -DHAVE_DLFCN_H"

    save_LDFLAGS="$LDFLAGS"
    eval LDFLAGS=\"\$LDFLAGS $export_dynamic_flag_spec\"

    save_LIBS="$LIBS"
    LIBS="$lt_cv_dlopen_libs $LIBS"

    echo $ac_n "checking whether a program can dlopen itself""... $ac_c" 1>&6
echo "configure:83183: checking whether a program can dlopen itself" >&5
if eval "test \"`echo '$''{'lt_cv_dlopen_self'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  	  if test "$cross_compiling" = yes; then :
  lt_cv_dlopen_self=cross
else
    lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
  lt_status=$lt_dlunknown
  cat > conftest.$ac_ext <<EOF
#line 83193 "configure"
#include "confdefs.h"

#if HAVE_DLFCN_H
#include <dlfcn.h>
#endif

#include <stdio.h>

#ifdef RTLD_GLOBAL
#  define LT_DLGLOBAL		RTLD_GLOBAL
#else
#  ifdef DL_GLOBAL
#    define LT_DLGLOBAL		DL_GLOBAL
#  else
#    define LT_DLGLOBAL		0
#  endif
#endif

/* We may have to define LT_DLLAZY_OR_NOW in the command line if we
   find out it does not work in some platform. */
#ifndef LT_DLLAZY_OR_NOW
#  ifdef RTLD_LAZY
#    define LT_DLLAZY_OR_NOW		RTLD_LAZY
#  else
#    ifdef DL_LAZY
#      define LT_DLLAZY_OR_NOW		DL_LAZY
#    else
#      ifdef RTLD_NOW
#        define LT_DLLAZY_OR_NOW	RTLD_NOW
#      else
#        ifdef DL_NOW
#          define LT_DLLAZY_OR_NOW	DL_NOW
#        else
#          define LT_DLLAZY_OR_NOW	0
#        endif
#      endif
#    endif
#  endif
#endif

#ifdef __cplusplus
extern "C" void exit (int);
#endif

void fnord() { int i=42;}
int main ()
{
  void *self = dlopen (0, LT_DLGLOBAL|LT_DLLAZY_OR_NOW);
  int status = $lt_dlunknown;

  if (self)
    {
      if (dlsym (self,"fnord"))       status = $lt_dlno_uscore;
      else if (dlsym( self,"_fnord")) status = $lt_dlneed_uscore;
      /* dlclose (self); */
    }

    exit (status);
}
EOF
  if { (eval echo configure:83254: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} 2>/dev/null; then
    (./conftest; exit; ) 2>/dev/null
    lt_status=$?
    case x$lt_status in
      x$lt_dlno_uscore) lt_cv_dlopen_self=yes ;;
      x$lt_dlneed_uscore) lt_cv_dlopen_self=yes ;;
      x$lt_unknown|x*) lt_cv_dlopen_self=no ;;
    esac
  else :
    # compilation failed
    lt_cv_dlopen_self=no
  fi
fi
rm -fr conftest*

    
fi

echo "$ac_t""$lt_cv_dlopen_self" 1>&6

    if test "x$lt_cv_dlopen_self" = xyes; then
      LDFLAGS="$LDFLAGS $link_static_flag"
      echo $ac_n "checking whether a statically linked program can dlopen itself""... $ac_c" 1>&6
echo "configure:83277: checking whether a statically linked program can dlopen itself" >&5
if eval "test \"`echo '$''{'lt_cv_dlopen_self_static'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  	  if test "$cross_compiling" = yes; then :
  lt_cv_dlopen_self_static=cross
else
    lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
  lt_status=$lt_dlunknown
  cat > conftest.$ac_ext <<EOF
#line 83287 "configure"
#include "confdefs.h"

#if HAVE_DLFCN_H
#include <dlfcn.h>
#endif

#include <stdio.h>

#ifdef RTLD_GLOBAL
#  define LT_DLGLOBAL		RTLD_GLOBAL
#else
#  ifdef DL_GLOBAL
#    define LT_DLGLOBAL		DL_GLOBAL
#  else
#    define LT_DLGLOBAL		0
#  endif
#endif

/* We may have to define LT_DLLAZY_OR_NOW in the command line if we
   find out it does not work in some platform. */
#ifndef LT_DLLAZY_OR_NOW
#  ifdef RTLD_LAZY
#    define LT_DLLAZY_OR_NOW		RTLD_LAZY
#  else
#    ifdef DL_LAZY
#      define LT_DLLAZY_OR_NOW		DL_LAZY
#    else
#      ifdef RTLD_NOW
#        define LT_DLLAZY_OR_NOW	RTLD_NOW
#      else
#        ifdef DL_NOW
#          define LT_DLLAZY_OR_NOW	DL_NOW
#        else
#          define LT_DLLAZY_OR_NOW	0
#        endif
#      endif
#    endif
#  endif
#endif

#ifdef __cplusplus
extern "C" void exit (int);
#endif

void fnord() { int i=42;}
int main ()
{
  void *self = dlopen (0, LT_DLGLOBAL|LT_DLLAZY_OR_NOW);
  int status = $lt_dlunknown;

  if (self)
    {
      if (dlsym (self,"fnord"))       status = $lt_dlno_uscore;
      else if (dlsym( self,"_fnord")) status = $lt_dlneed_uscore;
      /* dlclose (self); */
    }

    exit (status);
}
EOF
  if { (eval echo configure:83348: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} 2>/dev/null; then
    (./conftest; exit; ) 2>/dev/null
    lt_status=$?
    case x$lt_status in
      x$lt_dlno_uscore) lt_cv_dlopen_self_static=yes ;;
      x$lt_dlneed_uscore) lt_cv_dlopen_self_static=yes ;;
      x$lt_unknown|x*) lt_cv_dlopen_self_static=no ;;
    esac
  else :
    # compilation failed
    lt_cv_dlopen_self_static=no
  fi
fi
rm -fr conftest*

      
fi

echo "$ac_t""$lt_cv_dlopen_self_static" 1>&6
    fi

    CPPFLAGS="$save_CPPFLAGS"
    LDFLAGS="$save_LDFLAGS"
    LIBS="$save_LIBS"
    ;;
  esac

  case $lt_cv_dlopen_self in
  yes|no) enable_dlopen_self=$lt_cv_dlopen_self ;;
  *) enable_dlopen_self=unknown ;;
  esac

  case $lt_cv_dlopen_self_static in
  yes|no) enable_dlopen_self_static=$lt_cv_dlopen_self_static ;;
  *) enable_dlopen_self_static=unknown ;;
  esac
fi


if test "$enable_shared" = yes && test "$GCC" = yes; then
  case $archive_cmds in
  *'~'*)
    # FIXME: we may have to deal with multi-command sequences.
    ;;
  '$CC '*)
    # Test whether the compiler implicitly links with -lc since on some
    # systems, -lgcc has to come before -lc. If gcc already passes -lc
    # to ld, don't add -lc before -lgcc.
    echo $ac_n "checking whether -lc should be explicitly linked in""... $ac_c" 1>&6
echo "configure:83397: checking whether -lc should be explicitly linked in" >&5
    if eval "test \"`echo '$''{'lt_cv_archive_cmds_need_lc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  $rm conftest*
    echo 'static int dummy;' > conftest.$ac_ext

    if { (eval echo configure:83404: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
      soname=conftest
      lib=conftest
      libobjs=conftest.$ac_objext
      deplibs=
      wl=$lt_cv_prog_cc_wl
      compiler_flags=-v
      linker_flags=-v
      verstring=
      output_objdir=.
      libname=conftest
      save_allow_undefined_flag=$allow_undefined_flag
      allow_undefined_flag=
      if { (eval echo configure:83417: \"$archive_cmds 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1\") 1>&5; (eval $archive_cmds 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1) 2>&5; }
      then
	lt_cv_archive_cmds_need_lc=no
      else
	lt_cv_archive_cmds_need_lc=yes
      fi
      allow_undefined_flag=$save_allow_undefined_flag
    else
      cat conftest.err 1>&5
    fi
fi

    echo "$ac_t""$lt_cv_archive_cmds_need_lc" 1>&6
    ;;
  esac
fi
need_lc=${lt_cv_archive_cmds_need_lc-yes}

# The second clause should only fire when bootstrapping the
# libtool distribution, otherwise you forgot to ship ltmain.sh
# with your package, and you will get complaints that there are
# no rules to generate ltmain.sh.
if test -f "$ltmain"; then
  :
else
  # If there is no Makefile yet, we rely on a make rule to execute
  # `config.status --recheck' to rerun these tests and create the
  # libtool script then.
  test -f Makefile && make "$ltmain"
fi

if test -f "$ltmain"; then
  trap "$rm \"${ofile}T\"; exit 1" 1 2 15
  $rm -f "${ofile}T"

  echo creating $ofile

  # Now quote all the things that may contain metacharacters while being
  # careful not to overquote the AC_SUBSTed values.  We take copies of the
  # variables and quote the copies for generation of the libtool script.
  for var in echo old_CC old_CFLAGS SED \
    AR AR_FLAGS CC LD LN_S NM SHELL \
    reload_flag reload_cmds wl \
    pic_flag link_static_flag no_builtin_flag export_dynamic_flag_spec \
    thread_safe_flag_spec whole_archive_flag_spec libname_spec \
    library_names_spec soname_spec \
    RANLIB old_archive_cmds old_archive_from_new_cmds old_postinstall_cmds \
    old_postuninstall_cmds archive_cmds archive_expsym_cmds postinstall_cmds \
    postuninstall_cmds extract_expsyms_cmds old_archive_from_expsyms_cmds \
    old_striplib striplib file_magic_cmd export_symbols_cmds \
    deplibs_check_method allow_undefined_flag no_undefined_flag \
    finish_cmds finish_eval global_symbol_pipe global_symbol_to_cdecl \
    global_symbol_to_c_name_address \
    hardcode_libdir_flag_spec hardcode_libdir_separator  \
    sys_lib_search_path_spec sys_lib_dlsearch_path_spec \
    compiler_c_o compiler_o_lo need_locks exclude_expsyms include_expsyms; do

    case $var in
    reload_cmds | old_archive_cmds | old_archive_from_new_cmds | \
    old_postinstall_cmds | old_postuninstall_cmds | \
    export_symbols_cmds | archive_cmds | archive_expsym_cmds | \
    extract_expsyms_cmds | old_archive_from_expsyms_cmds | \
    postinstall_cmds | postuninstall_cmds | \
    finish_cmds | sys_lib_search_path_spec | sys_lib_dlsearch_path_spec)
      # Double-quote double-evaled strings.
      eval "lt_$var=\\\"\`\$echo \"X\$$var\" | \$Xsed -e \"\$double_quote_subst\" -e \"\$sed_quote_subst\" -e \"\$delay_variable_subst\"\`\\\""
      ;;
    *)
      eval "lt_$var=\\\"\`\$echo \"X\$$var\" | \$Xsed -e \"\$sed_quote_subst\"\`\\\""
      ;;
    esac
  done

  cat <<__EOF__ > "${ofile}T"
#! $SHELL

# `$echo "$ofile" | sed 's%^.*/%%'` - Provide generalized library-building support services.
# Generated automatically by $PROGRAM (GNU $PACKAGE $VERSION$TIMESTAMP)
# NOTE: Changes made to this file will be lost: look at ltmain.sh.
#
# Copyright (C) 1996-2000 Free Software Foundation, Inc.
# Originally by Gordon Matzigkeit <gord@gnu.ai.mit.edu>, 1996
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful, but
# WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
#
# As a special exception to the GNU General Public License, if you
# distribute this file as part of a program that contains a
# configuration script generated by Autoconf, you may include it under
# the same distribution terms that you use for the rest of that program.

# A sed that does not truncate output.
SED=$lt_SED

# Sed that helps us avoid accidentally triggering echo(1) options like -n.
Xsed="${SED} -e s/^X//"

# The HP-UX ksh and POSIX shell print the target directory to stdout
# if CDPATH is set.
if test "X\${CDPATH+set}" = Xset; then CDPATH=:; export CDPATH; fi

# ### BEGIN LIBTOOL CONFIG

# Libtool was configured on host `(hostname || uname -n) 2>/dev/null | sed 1q`:

# Shell to use when invoking shell scripts.
SHELL=$lt_SHELL

# Whether or not to build shared libraries.
build_libtool_libs=$enable_shared

# Whether or not to build static libraries.
build_old_libs=$enable_static

# Whether or not to add -lc for building shared libraries.
build_libtool_need_lc=$need_lc

# Whether or not to optimize for fast installation.
fast_install=$enable_fast_install

# The host system.
host_alias=$host_alias
host=$host

# An echo program that does not interpret backslashes.
echo=$lt_echo

# The archiver.
AR=$lt_AR
AR_FLAGS=$lt_AR_FLAGS

# The default C compiler.
CC=$lt_CC

# Is the compiler the GNU C compiler?
with_gcc=$GCC

# The linker used to build libraries.
LD=$lt_LD

# Whether we need hard or soft links.
LN_S=$lt_LN_S

# A BSD-compatible nm program.
NM=$lt_NM

# A symbol stripping program
STRIP=$STRIP

# Used to examine libraries when file_magic_cmd begins "file"
MAGIC_CMD=$MAGIC_CMD

# Used on cygwin: DLL creation program.
DLLTOOL="$DLLTOOL"

# Used on cygwin: object dumper.
OBJDUMP="$OBJDUMP"

# Used on cygwin: assembler.
AS="$AS"

# The name of the directory that contains temporary libtool files.
objdir=$objdir

# How to create reloadable object files.
reload_flag=$lt_reload_flag
reload_cmds=$lt_reload_cmds

# How to pass a linker flag through the compiler.
wl=$lt_wl

# Object file suffix (normally "o").
objext="$ac_objext"

# Old archive suffix (normally "a").
libext="$libext"

# Executable file suffix (normally "").
exeext="$exeext"

# Additional compiler flags for building library objects.
pic_flag=$lt_pic_flag
pic_mode=$pic_mode

# Does compiler simultaneously support -c and -o options?
compiler_c_o=$lt_compiler_c_o

# Can we write directly to a .lo ?
compiler_o_lo=$lt_compiler_o_lo

# Must we lock files when doing compilation ?
need_locks=$lt_need_locks

# Do we need the lib prefix for modules?
need_lib_prefix=$need_lib_prefix

# Do we need a version for libraries?
need_version=$need_version

# Whether dlopen is supported.
dlopen_support=$enable_dlopen

# Whether dlopen of programs is supported.
dlopen_self=$enable_dlopen_self

# Whether dlopen of statically linked programs is supported.
dlopen_self_static=$enable_dlopen_self_static

# Compiler flag to prevent dynamic linking.
link_static_flag=$lt_link_static_flag

# Compiler flag to turn off builtin functions.
no_builtin_flag=$lt_no_builtin_flag

# Compiler flag to allow reflexive dlopens.
export_dynamic_flag_spec=$lt_export_dynamic_flag_spec

# Compiler flag to generate shared objects directly from archives.
whole_archive_flag_spec=$lt_whole_archive_flag_spec

# Compiler flag to generate thread-safe objects.
thread_safe_flag_spec=$lt_thread_safe_flag_spec

# Library versioning type.
version_type=$version_type

# Format of library name prefix.
libname_spec=$lt_libname_spec

# List of archive names.  First name is the real one, the rest are links.
# The last name is the one that the linker finds with -lNAME.
library_names_spec=$lt_library_names_spec

# The coded name of the library, if different from the real name.
soname_spec=$lt_soname_spec

# Commands used to build and install an old-style archive.
RANLIB=$lt_RANLIB
old_archive_cmds=$lt_old_archive_cmds
old_postinstall_cmds=$lt_old_postinstall_cmds
old_postuninstall_cmds=$lt_old_postuninstall_cmds

# Create an old-style archive from a shared archive.
old_archive_from_new_cmds=$lt_old_archive_from_new_cmds

# Create a temporary old-style archive to link instead of a shared archive.
old_archive_from_expsyms_cmds=$lt_old_archive_from_expsyms_cmds

# Commands used to build and install a shared archive.
archive_cmds=$lt_archive_cmds
archive_expsym_cmds=$lt_archive_expsym_cmds
postinstall_cmds=$lt_postinstall_cmds
postuninstall_cmds=$lt_postuninstall_cmds

# Commands to strip libraries.
old_striplib=$lt_old_striplib
striplib=$lt_striplib

# Method to check whether dependent libraries are shared objects.
deplibs_check_method=$lt_deplibs_check_method

# Command to use when deplibs_check_method == file_magic.
file_magic_cmd=$lt_file_magic_cmd

# Flag that allows shared libraries with undefined symbols to be built.
allow_undefined_flag=$lt_allow_undefined_flag

# Flag that forces no undefined symbols.
no_undefined_flag=$lt_no_undefined_flag

# Commands used to finish a libtool library installation in a directory.
finish_cmds=$lt_finish_cmds

# Same as above, but a single script fragment to be evaled but not shown.
finish_eval=$lt_finish_eval

# Take the output of nm and produce a listing of raw symbols and C names.
global_symbol_pipe=$lt_global_symbol_pipe

# Transform the output of nm in a proper C declaration
global_symbol_to_cdecl=$lt_global_symbol_to_cdecl

# Transform the output of nm in a C name address pair
global_symbol_to_c_name_address=$lt_global_symbol_to_c_name_address

# This is the shared library runtime path variable.
runpath_var=$runpath_var

# This is the shared library path variable.
shlibpath_var=$shlibpath_var

# Is shlibpath searched before the hard-coded library search path?
shlibpath_overrides_runpath=$shlibpath_overrides_runpath

# How to hardcode a shared library path into an executable.
hardcode_action=$hardcode_action

# Whether we should hardcode library paths into libraries.
hardcode_into_libs=$hardcode_into_libs

# Flag to hardcode \$libdir into a binary during linking.
# This must work even if \$libdir does not exist.
hardcode_libdir_flag_spec=$lt_hardcode_libdir_flag_spec

# Whether we need a single -rpath flag with a separated argument.
hardcode_libdir_separator=$lt_hardcode_libdir_separator

# Set to yes if using DIR/libNAME.so during linking hardcodes DIR into the
# resulting binary.
hardcode_direct=$hardcode_direct

# Set to yes if using the -LDIR flag during linking hardcodes DIR into the
# resulting binary.
hardcode_minus_L=$hardcode_minus_L

# Set to yes if using SHLIBPATH_VAR=DIR during linking hardcodes DIR into
# the resulting binary.
hardcode_shlibpath_var=$hardcode_shlibpath_var

# Variables whose values should be saved in libtool wrapper scripts and
# restored at relink time.
variables_saved_for_relink="$variables_saved_for_relink"

# Whether libtool must link a program against all its dependency libraries.
link_all_deplibs=$link_all_deplibs

# Compile-time system search path for libraries
sys_lib_search_path_spec=$lt_sys_lib_search_path_spec

# Run-time system search path for libraries
sys_lib_dlsearch_path_spec=$lt_sys_lib_dlsearch_path_spec

# Fix the shell variable \$srcfile for the compiler.
fix_srcfile_path="$fix_srcfile_path"

# Set to yes if exported symbols are required.
always_export_symbols=$always_export_symbols

# The commands to list exported symbols.
export_symbols_cmds=$lt_export_symbols_cmds

# The commands to extract the exported symbol list from a shared archive.
extract_expsyms_cmds=$lt_extract_expsyms_cmds

# Symbols that should not be listed in the preloaded symbols.
exclude_expsyms=$lt_exclude_expsyms

# Symbols that must always be exported.
include_expsyms=$lt_include_expsyms

# ### END LIBTOOL CONFIG

__EOF__

  case $host_os in
  aix3*)
    cat <<\EOF >> "${ofile}T"

# AIX sometimes has problems with the GCC collect2 program.  For some
# reason, if we set the COLLECT_NAMES environment variable, the problems
# vanish in a puff of smoke.
if test "X${COLLECT_NAMES+set}" != Xset; then
  COLLECT_NAMES=
  export COLLECT_NAMES
fi
EOF
    ;;
  esac

  case $host_os in
  cygwin* | mingw* | pw32* | os2*)
    cat <<'EOF' >> "${ofile}T"
      # This is a source program that is used to create dlls on Windows
      # Don't remove nor modify the starting and closing comments
# /* ltdll.c starts here */
# #define WIN32_LEAN_AND_MEAN
# #include <windows.h>
# #undef WIN32_LEAN_AND_MEAN
# #include <stdio.h>
#
# #ifndef __CYGWIN__
# #  ifdef __CYGWIN32__
# #    define __CYGWIN__ __CYGWIN32__
# #  endif
# #endif
#
# #ifdef __cplusplus
# extern "C" {
# #endif
# BOOL APIENTRY DllMain (HINSTANCE hInst, DWORD reason, LPVOID reserved);
# #ifdef __cplusplus
# }
# #endif
#
# #ifdef __CYGWIN__
# #include <cygwin/cygwin_dll.h>
# DECLARE_CYGWIN_DLL( DllMain );
# #endif
# HINSTANCE __hDllInstance_base;
#
# BOOL APIENTRY
# DllMain (HINSTANCE hInst, DWORD reason, LPVOID reserved)
# {
#   __hDllInstance_base = hInst;
#   return TRUE;
# }
# /* ltdll.c ends here */
	# This is a source program that is used to create import libraries
	# on Windows for dlls which lack them. Don't remove nor modify the
	# starting and closing comments
# /* impgen.c starts here */
# /*   Copyright (C) 1999-2000 Free Software Foundation, Inc.
#
#  This file is part of GNU libtool.
#
#  This program is free software; you can redistribute it and/or modify
#  it under the terms of the GNU General Public License as published by
#  the Free Software Foundation; either version 2 of the License, or
#  (at your option) any later version.
#
#  This program is distributed in the hope that it will be useful,
#  but WITHOUT ANY WARRANTY; without even the implied warranty of
#  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#  GNU General Public License for more details.
#
#  You should have received a copy of the GNU General Public License
#  along with this program; if not, write to the Free Software
#  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
#  */
#
# #include <stdio.h>		/* for printf() */
# #include <unistd.h>		/* for open(), lseek(), read() */
# #include <fcntl.h>		/* for O_RDONLY, O_BINARY */
# #include <string.h>		/* for strdup() */
#
# /* O_BINARY isn't required (or even defined sometimes) under Unix */
# #ifndef O_BINARY
# #define O_BINARY 0
# #endif
#
# static unsigned int
# pe_get16 (fd, offset)
#      int fd;
#      int offset;
# {
#   unsigned char b[2];
#   lseek (fd, offset, SEEK_SET);
#   read (fd, b, 2);
#   return b[0] + (b[1]<<8);
# }
#
# static unsigned int
# pe_get32 (fd, offset)
#     int fd;
#     int offset;
# {
#   unsigned char b[4];
#   lseek (fd, offset, SEEK_SET);
#   read (fd, b, 4);
#   return b[0] + (b[1]<<8) + (b[2]<<16) + (b[3]<<24);
# }
#
# static unsigned int
# pe_as32 (ptr)
#      void *ptr;
# {
#   unsigned char *b = ptr;
#   return b[0] + (b[1]<<8) + (b[2]<<16) + (b[3]<<24);
# }
#
# int
# main (argc, argv)
#     int argc;
#     char *argv[];
# {
#     int dll;
#     unsigned long pe_header_offset, opthdr_ofs, num_entries, i;
#     unsigned long export_rva, export_size, nsections, secptr, expptr;
#     unsigned long name_rvas, nexp;
#     unsigned char *expdata, *erva;
#     char *filename, *dll_name;
#
#     filename = argv[1];
#
#     dll = open(filename, O_RDONLY|O_BINARY);
#     if (dll < 1)
# 	return 1;
#
#     dll_name = filename;
#
#     for (i=0; filename[i]; i++)
# 	if (filename[i] == '/' || filename[i] == '\\'  || filename[i] == ':')
# 	    dll_name = filename + i +1;
#
#     pe_header_offset = pe_get32 (dll, 0x3c);
#     opthdr_ofs = pe_header_offset + 4 + 20;
#     num_entries = pe_get32 (dll, opthdr_ofs + 92);
#
#     if (num_entries < 1) /* no exports */
# 	return 1;
#
#     export_rva = pe_get32 (dll, opthdr_ofs + 96);
#     export_size = pe_get32 (dll, opthdr_ofs + 100);
#     nsections = pe_get16 (dll, pe_header_offset + 4 +2);
#     secptr = (pe_header_offset + 4 + 20 +
# 	      pe_get16 (dll, pe_header_offset + 4 + 16));
#
#     expptr = 0;
#     for (i = 0; i < nsections; i++)
#     {
# 	char sname[8];
# 	unsigned long secptr1 = secptr + 40 * i;
# 	unsigned long vaddr = pe_get32 (dll, secptr1 + 12);
# 	unsigned long vsize = pe_get32 (dll, secptr1 + 16);
# 	unsigned long fptr = pe_get32 (dll, secptr1 + 20);
# 	lseek(dll, secptr1, SEEK_SET);
# 	read(dll, sname, 8);
# 	if (vaddr <= export_rva && vaddr+vsize > export_rva)
# 	{
# 	    expptr = fptr + (export_rva - vaddr);
# 	    if (export_rva + export_size > vaddr + vsize)
# 		export_size = vsize - (export_rva - vaddr);
# 	    break;
# 	}
#     }
#
#     expdata = (unsigned char*)malloc(export_size);
#     lseek (dll, expptr, SEEK_SET);
#     read (dll, expdata, export_size);
#     erva = expdata - export_rva;
#
#     nexp = pe_as32 (expdata+24);
#     name_rvas = pe_as32 (expdata+32);
#
#     printf ("EXPORTS\n");
#     for (i = 0; i<nexp; i++)
#     {
# 	unsigned long name_rva = pe_as32 (erva+name_rvas+i*4);
# 	printf ("\t%s @ %ld ;\n", erva+name_rva, 1+ i);
#     }
#
#     return 0;
# }
# /* impgen.c ends here */

EOF
    ;;
  esac

  # We use sed instead of cat because bash on DJGPP gets confused if
  # if finds mixed CR/LF and LF-only lines.  Since sed operates in
  # text mode, it properly converts lines to CR/LF.  This bash problem
  # is reportedly fixed, but why not run on old versions too?
  sed '$q' "$ltmain" >> "${ofile}T" || (rm -f "${ofile}T"; exit 1)

  mv -f "${ofile}T" "$ofile" || \
    (rm -f "$ofile" && cp "${ofile}T" "$ofile" && rm -f "${ofile}T")
  chmod +x "$ofile"
fi





# This can be used to rebuild libtool when needed
LIBTOOL_DEPS="$ac_aux_dir/ltmain.sh"

# Always use our own libtool.
LIBTOOL='$(SHELL) $(top_builddir)/libtool'

# Prevent multiple expansion


if test "$enable_debug" != "yes"; then
  
  if test -z "$LIBTOOL"; then
    LIBTOOL='$(SHELL) $(top_builddir)/libtool --silent'
  else
    LIBTOOL="$LIBTOOL --silent"
  fi

fi


  if test -z "$LIBTOOL"; then
    LIBTOOL='$(SHELL) $(top_builddir)/libtool --preserve-dup-deps'
  else
    LIBTOOL="$LIBTOOL --preserve-dup-deps"
  fi


test -z "$PHP_COMPILE" && PHP_COMPILE='$(LIBTOOL) --mode=compile $(COMPILE) -c $<'
test -z "$CXX_PHP_COMPILE" && CXX_PHP_COMPILE='$(LIBTOOL) --mode=compile $(CXX_COMPILE) -c $<'
SHARED_LIBTOOL='$(LIBTOOL)'

CC=$old_CC


  echo "$ac_t""" 1>&6
  echo "$ac_t""${T_MD}Generating files${T_ME}" 1>&6


CXXFLAGS_CLEAN=$CXXFLAGS
CFLAGS_CLEAN=$CFLAGS
CFLAGS="\$(CFLAGS_CLEAN) $standard_libtool_flag"
INLINE_CFLAGS="$INLINE_CFLAGS $standard_libtool_flag"
CXXFLAGS="$CXXFLAGS $standard_libtool_flag"

all_targets='$(OVERALL_TARGET) $(PHP_MODULES) $(PHP_CLI_TARGET)'
install_targets="install-sapi install-modules $install_pear install-build install-headers install-programs"
if test "$PHP_SAPI" != "cgi"; then
  install_targets="$PHP_INSTALL_CLI_TARGET $install_targets"
fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST all_targets"


  PHP_VAR_SUBST="$PHP_VAR_SUBST install_targets"



  
  case TSRM in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "TSRM"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/TSRM/"; ac_bdir="TSRM/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in TSRM.c tsrm_strtok_r.c tsrm_virtual_cwd.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




  
  case main in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "main"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/main/"; ac_bdir="main/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in main.c snprintf.c spprintf.c php_sprintf.c \
       safe_mode.c fopen_wrappers.c alloca.c  php_scandir.c \
       php_ini.c SAPI.c rfc1867.c php_content_types.c strlcpy.c \
       strlcat.c mergesort.c reentrancy.c php_variables.c php_ticks.c \
       streams.c network.c php_open_temporary_file.c php_logos.c \
       output.c memory_streams.c user_streams.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



  
  case /main in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "/main"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir//main/"; ac_bdir="/main/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in internal_functions.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_SAPI_OBJS="$PHP_SAPI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



  
  case /main in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "/main"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir//main/"; ac_bdir="/main/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in internal_functions_cli.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




  
  case /Zend in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "/Zend"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir//Zend/"; ac_bdir="/Zend/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in zend_language_parser.c zend_language_scanner.c \
    zend_ini_parser.c zend_ini_scanner.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done




  
  case Zend in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "Zend"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/Zend/"; ac_bdir="Zend/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in \
    zend_alloc.c zend_compile.c zend_constants.c zend_dynamic_array.c \
    zend_execute_API.c zend_highlight.c zend_llist.c \
    zend_opcode.c zend_operators.c zend_ptr_stack.c zend_stack.c \
    zend_variables.c zend.c zend_API.c zend_extensions.c zend_hash.c \
    zend_list.c zend_indent.c zend_builtin_functions.c zend_sprintf.c \
    zend_ini.c zend_qsort.c zend_multibyte.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



if test -r "$abs_srcdir/Zend/zend_objects.c"; then
  
  
  case Zend in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "Zend"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/Zend/"; ac_bdir="Zend/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in zend_objects.c zend_object_handlers.c zend_objects_API.c zend_mm.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done


fi

if test -n "$GCC" && test "$ZEND_INLINE_OPTIMIZATION" != "yes"; then
  flag=-O0
else
  flag=
fi


  case Zend in
  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
  /*) ac_srcdir=`echo "Zend"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
  *) ac_srcdir="$abs_srcdir/Zend/"; ac_bdir="Zend/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
  esac
  
  

  b_c_pre=$php_c_pre
  b_cxx_pre=$php_cxx_pre
  b_c_meta=$php_c_meta
  b_cxx_meta=$php_cxx_meta
  b_c_post=$php_c_post
  b_cxx_post=$php_cxx_post
  b_lo=$php_lo


  old_IFS=$IFS
  for ac_src in zend_execute.c; do
  
      IFS=.
      set $ac_src
      ac_obj=$1
      IFS=$old_IFS
      
      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"

      case $ac_src in
	  *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $flag$b_c_post" ;;
	  *.cpp) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $flag$b_cxx_post" ;;
      esac

	  cat >>Makefile.objects<<EOF
$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
	$ac_comp
EOF
  done



  BUILD_DIR="$BUILD_DIR main"


  BUILD_DIR="$BUILD_DIR regex"


  BUILD_DIR="$BUILD_DIR sapi/$PHP_SAPI sapi/cli"


  BUILD_DIR="$BUILD_DIR TSRM"


  BUILD_DIR="$BUILD_DIR Zend"



  src=$abs_srcdir/scripts/Makefile.frag
  ac_srcdir=$abs_srcdir/scripts
  ac_builddir=scripts
  sed -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments


  src=$abs_srcdir/pear/Makefile.frag
  ac_srcdir=$abs_srcdir/pear
  ac_builddir=pear
  sed -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments


  src=$abs_srcdir/Makefile.frag
  ac_srcdir=$abs_srcdir/Zend
  ac_builddir=Zend
  sed -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments



  $php_shtool mkdir -p $BUILD_DIR


  cat >Makefile <<EOF
srcdir = $abs_srcdir
builddir = $abs_builddir
top_srcdir = $abs_srcdir
top_builddir = $abs_builddir
EOF
  for i in $PHP_VAR_SUBST; do
    eval echo "$i = \$$i" >> Makefile
  done

  cat $abs_srcdir/Makefile.global Makefile.fragments Makefile.objects >> Makefile


cat >> confdefs.h <<\EOF
#define HAVE_BUILD_DEFS_H 1
EOF


$php_shtool mkdir -p pear/scripts
$php_shtool mkdir -p scripts

ALL_OUTPUT_FILES="php4.spec main/build-defs.h \
scripts/phpize scripts/php-config \
$PHP_OUTPUT_FILES"

trap '' 1 2 15
cat > confcache <<\EOF
# This file is a shell script that caches the results of configure
# tests run on this system so they can be shared between configure
# scripts and configure runs.  It is not useful on other systems.
# If it contains results you don't want to keep, you may remove or edit it.
#
# By default, configure uses ./config.cache as the cache file,
# creating it if it does not exist already.  You can give configure
# the --cache-file=FILE option to use a different cache file; that is
# what configure does when it calls configure scripts in
# subdirectories, so they share the cache.
# Giving --cache-file=/dev/null disables caching, for debugging configure.
# config.status only pays attention to the cache file if you give it the
# --recheck option to rerun configure.
#
EOF
# The following way of writing the cache mishandles newlines in values,
# but we know of no workaround that is simple, portable, and efficient.
# So, don't put newlines in cache variables' values.
# Ultrix sh set writes to stderr and can't be redirected directly,
# and sets the high bit in the cache file unless we assign to the vars.
(set) 2>&1 |
  case `(ac_space=' '; set | grep ac_space) 2>&1` in
  *ac_space=\ *)
    # `set' does not quote correctly, so add quotes (double-quote substitution
    # turns \\\\ into \\, and sed turns \\ into \).
    sed -n \
      -e "s/'/'\\\\''/g" \
      -e "s/^\\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\\)=\\(.*\\)/\\1=\${\\1='\\2'}/p"
    ;;
  *)
    # `set' quotes correctly as required by POSIX, so do not add quotes.
    sed -n -e 's/^\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\)=\(.*\)/\1=${\1=\2}/p'
    ;;
  esac >> confcache
if cmp -s $cache_file confcache; then
  :
else
  if test -w $cache_file; then
    echo "updating cache $cache_file"
    cat confcache > $cache_file
  else
    echo "not updating unwritable cache $cache_file"
  fi
fi
rm -f confcache

trap 'rm -fr conftest* confdefs* core core.* *.core $ac_clean_files; exit 1' 1 2 15

test "x$prefix" = xNONE && prefix=$ac_default_prefix
# Let make expand exec_prefix.
test "x$exec_prefix" = xNONE && exec_prefix='${prefix}'

# Any assignment to VPATH causes Sun make to only execute
# the first set of double-colon rules, so remove it if not needed.
# If there is a colon in the path, we need to keep it.
if test "x$srcdir" = x.; then
  ac_vpsub='/^[ 	]*VPATH[ 	]*=[^:]*$/d'
fi

trap 'rm -f $CONFIG_STATUS conftest*; exit 1' 1 2 15

DEFS=-DHAVE_CONFIG_H

# Without the "./", some shells look in PATH for config.status.
: ${CONFIG_STATUS=./config.status}

echo creating $CONFIG_STATUS
rm -f $CONFIG_STATUS
cat > $CONFIG_STATUS <<EOF
#! /bin/sh
# Generated automatically by configure.
# Run this file to recreate the current configuration.
# This directory was configured as follows,
# on host `(hostname || uname -n) 2>/dev/null | sed 1q`:
#
# $0 $ac_configure_args
#
# Compiler output produced by configure, useful for debugging
# configure, is in ./config.log if it exists.

ac_cs_usage="Usage: $CONFIG_STATUS [--recheck] [--version] [--help]"
for ac_option
do
  case "\$ac_option" in
  -recheck | --recheck | --rechec | --reche | --rech | --rec | --re | --r)
    echo "running \${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion"
    exec \${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion ;;
  -version | --version | --versio | --versi | --vers | --ver | --ve | --v)
    echo "$CONFIG_STATUS generated by autoconf version 2.13"
    exit 0 ;;
  -help | --help | --hel | --he | --h)
    echo "\$ac_cs_usage"; exit 0 ;;
  *) echo "\$ac_cs_usage"; exit 1 ;;
  esac
done

ac_given_srcdir=$srcdir

trap 'rm -fr `echo "$ALL_OUTPUT_FILES main/php_config.h" | sed "s/:[^ ]*//g"` conftest*; exit 1' 1 2 15
EOF
cat >> $CONFIG_STATUS <<EOF

# Protect against being on the right side of a sed subst in config.status.
sed 's/%@/@@/; s/@%/@@/; s/%g\$/@g/; /@g\$/s/[\\\\&%]/\\\\&/g;
 s/@@/%@/; s/@@/@%/; s/@g\$/%g/' > conftest.subs <<\\CEOF
$ac_vpsub
$extrasub
s%@SHELL@%$SHELL%g
s%@CFLAGS@%$CFLAGS%g
s%@CPPFLAGS@%$CPPFLAGS%g
s%@CXXFLAGS@%$CXXFLAGS%g
s%@FFLAGS@%$FFLAGS%g
s%@DEFS@%$DEFS%g
s%@LDFLAGS@%$LDFLAGS%g
s%@LIBS@%$LIBS%g
s%@exec_prefix@%$exec_prefix%g
s%@prefix@%$prefix%g
s%@program_transform_name@%$program_transform_name%g
s%@bindir@%$bindir%g
s%@sbindir@%$sbindir%g
s%@libexecdir@%$libexecdir%g
s%@datadir@%$datadir%g
s%@sysconfdir@%$sysconfdir%g
s%@sharedstatedir@%$sharedstatedir%g
s%@localstatedir@%$localstatedir%g
s%@libdir@%$libdir%g
s%@includedir@%$includedir%g
s%@oldincludedir@%$oldincludedir%g
s%@infodir@%$infodir%g
s%@mandir@%$mandir%g
s%@host@%$host%g
s%@host_alias@%$host_alias%g
s%@host_cpu@%$host_cpu%g
s%@host_vendor@%$host_vendor%g
s%@host_os@%$host_os%g
s%@CC@%$CC%g
s%@CPP@%$CPP%g
s%@RANLIB@%$RANLIB%g
s%@LN_S@%$LN_S%g
s%@AWK@%$AWK%g
s%@YACC@%$YACC%g
s%@LEX@%$LEX%g
s%@LEXLIB@%$LEXLIB%g
s%@LEX_OUTPUT_ROOT@%$LEX_OUTPUT_ROOT%g
s%@PTHREAD_CC@%$PTHREAD_CC%g
s%@PTHREAD_LIBS@%$PTHREAD_LIBS%g
s%@PTHREAD_CFLAGS@%$PTHREAD_CFLAGS%g
s%@THREADED@%$THREADED%g
s%@LIBOBJS@%$LIBOBJS%g
s%@PROG_SENDMAIL@%$PROG_SENDMAIL%g
s%@ALLOCA@%$ALLOCA%g
s%@OPENSSL_INCDIR_OPT@%$OPENSSL_INCDIR_OPT%g
s%@FRIBIDI_CONFIG@%$FRIBIDI_CONFIG%g
s%@CXX@%$CXX%g
s%@CXXCPP@%$CXXCPP%g
s%@MYSQL_MODULE_TYPE@%$MYSQL_MODULE_TYPE%g
s%@MYSQL_LIBS@%$MYSQL_LIBS%g
s%@MYSQL_INCLUDE@%$MYSQL_INCLUDE%g
s%@OCI8_SHARED_LIBADD@%$OCI8_SHARED_LIBADD%g
s%@OCI8_DIR@%$OCI8_DIR%g
s%@OCI8_VERSION@%$OCI8_VERSION%g
s%@ODBC_INCLUDE@%$ODBC_INCLUDE%g
s%@ODBC_LIBS@%$ODBC_LIBS%g
s%@ODBC_LFLAGS@%$ODBC_LFLAGS%g
s%@ODBC_TYPE@%$ODBC_TYPE%g
s%@ORACLE_SHARED_LIBADD@%$ORACLE_SHARED_LIBADD%g
s%@ORACLE_DIR@%$ORACLE_DIR%g
s%@ORACLE_VERSION@%$ORACLE_VERSION%g
s%@SNMP_CONFIG@%$SNMP_CONFIG%g
s%@yazconfig@%$yazconfig%g
s%@INLINE_CFLAGS@%$INLINE_CFLAGS%g
s%@INCLUDE_PATH@%$INCLUDE_PATH%g
s%@EXPANDED_PEAR_INSTALLDIR@%$EXPANDED_PEAR_INSTALLDIR%g
s%@EXPANDED_EXTENSION_DIR@%$EXPANDED_EXTENSION_DIR%g
s%@EXPANDED_BINDIR@%$EXPANDED_BINDIR%g
s%@EXPANDED_LIBDIR@%$EXPANDED_LIBDIR%g
s%@EXPANDED_DATADIR@%$EXPANDED_DATADIR%g
s%@EXPANDED_SYSCONFDIR@%$EXPANDED_SYSCONFDIR%g
s%@EXPANDED_LOCALSTATEDIR@%$EXPANDED_LOCALSTATEDIR%g
s%@EXPANDED_PHP_CONFIG_FILE_PATH@%$EXPANDED_PHP_CONFIG_FILE_PATH%g
s%@EXPANDED_PHP_CONFIG_FILE_SCAN_DIR@%$EXPANDED_PHP_CONFIG_FILE_SCAN_DIR%g
s%@abs_builddir@%$abs_builddir%g
s%@abs_srcdir@%$abs_srcdir%g
s%@php_abs_top_builddir@%$php_abs_top_builddir%g
s%@php_abs_top_srcdir@%$php_abs_top_srcdir%g
s%@CONFIGURE_COMMAND@%$CONFIGURE_COMMAND%g
s%@DEBUG_CFLAGS@%$DEBUG_CFLAGS%g
s%@EXTENSION_DIR@%$EXTENSION_DIR%g
s%@EXTRA_LDFLAGS@%$EXTRA_LDFLAGS%g
s%@EXTRA_LIBS@%$EXTRA_LIBS%g
s%@ZEND_EXTRA_LIBS@%$ZEND_EXTRA_LIBS%g
s%@INCLUDES@%$INCLUDES%g
s%@EXTRA_INCLUDES@%$EXTRA_INCLUDES%g
s%@INSTALL_IT@%$INSTALL_IT%g
s%@NATIVE_RPATHS@%$NATIVE_RPATHS%g
s%@PEAR_INSTALLDIR@%$PEAR_INSTALLDIR%g
s%@PHP_LDFLAGS@%$PHP_LDFLAGS%g
s%@PHP_LIBS@%$PHP_LIBS%g
s%@PHP_VERSION@%$PHP_VERSION%g
s%@SHLIB_SUFFIX_NAME@%$SHLIB_SUFFIX_NAME%g
s%@build@%$build%g
s%@build_alias@%$build_alias%g
s%@build_cpu@%$build_cpu%g
s%@build_vendor@%$build_vendor%g
s%@build_os@%$build_os%g
s%@OBJEXT@%$OBJEXT%g
s%@EXEEXT@%$EXEEXT%g
s%@ECHO@%$ECHO%g
s%@STRIP@%$STRIP%g
s%@LIBTOOL@%$LIBTOOL%g

CEOF
EOF

cat >> $CONFIG_STATUS <<\EOF

# Split the substitutions into bite-sized pieces for seds with
# small command number limits, like on Digital OSF/1 and HP-UX.
ac_max_sed_cmds=90 # Maximum number of lines to put in a sed script.
ac_file=1 # Number of current file.
ac_beg=1 # First line for current file.
ac_end=$ac_max_sed_cmds # Line after last line for current file.
ac_more_lines=:
ac_sed_cmds=""
while $ac_more_lines; do
  if test $ac_beg -gt 1; then
    sed "1,${ac_beg}d; ${ac_end}q" conftest.subs > conftest.s$ac_file
  else
    sed "${ac_end}q" conftest.subs > conftest.s$ac_file
  fi
  if test ! -s conftest.s$ac_file; then
    ac_more_lines=false
    rm -f conftest.s$ac_file
  else
    if test -z "$ac_sed_cmds"; then
      ac_sed_cmds="sed -f conftest.s$ac_file"
    else
      ac_sed_cmds="$ac_sed_cmds | sed -f conftest.s$ac_file"
    fi
    ac_file=`expr $ac_file + 1`
    ac_beg=$ac_end
    ac_end=`expr $ac_end + $ac_max_sed_cmds`
  fi
done
if test -z "$ac_sed_cmds"; then
  ac_sed_cmds=cat
fi
EOF

cat >> $CONFIG_STATUS <<EOF

CONFIG_FILES=\${CONFIG_FILES-"$ALL_OUTPUT_FILES"}
EOF
cat >> $CONFIG_STATUS <<\EOF
for ac_file in .. $CONFIG_FILES; do if test "x$ac_file" != x..; then
  # Support "outfile[:infile[:infile...]]", defaulting infile="outfile.in".
  case "$ac_file" in
  *:*) ac_file_in=`echo "$ac_file"|sed 's%[^:]*:%%'`
       ac_file=`echo "$ac_file"|sed 's%:.*%%'` ;;
  *) ac_file_in="${ac_file}.in" ;;
  esac

  # Adjust a relative srcdir, top_srcdir, and INSTALL for subdirectories.

  # Remove last slash and all that follows it.  Not all systems have dirname.
  ac_dir=`echo $ac_file|sed 's%/[^/][^/]*$%%'`
  if test "$ac_dir" != "$ac_file" && test "$ac_dir" != .; then
    # The file is in a subdirectory.
    test ! -d "$ac_dir" && mkdir "$ac_dir"
    ac_dir_suffix="/`echo $ac_dir|sed 's%^\./%%'`"
    # A "../" for each directory in $ac_dir_suffix.
    ac_dots=`echo $ac_dir_suffix|sed 's%/[^/]*%../%g'`
  else
    ac_dir_suffix= ac_dots=
  fi

  case "$ac_given_srcdir" in
  .)  srcdir=.
      if test -z "$ac_dots"; then top_srcdir=.
      else top_srcdir=`echo $ac_dots|sed 's%/$%%'`; fi ;;
  /*) srcdir="$ac_given_srcdir$ac_dir_suffix"; top_srcdir="$ac_given_srcdir" ;;
  *) # Relative path.
    srcdir="$ac_dots$ac_given_srcdir$ac_dir_suffix"
    top_srcdir="$ac_dots$ac_given_srcdir" ;;
  esac


  echo creating "$ac_file"
  rm -f "$ac_file"
  configure_input="Generated automatically from `echo $ac_file_in|sed 's%.*/%%'` by configure."
  case "$ac_file" in
  *Makefile*) ac_comsub="1i\\
# $configure_input" ;;
  *) ac_comsub= ;;
  esac

  ac_file_inputs=`echo $ac_file_in|sed -e "s%^%$ac_given_srcdir/%" -e "s%:% $ac_given_srcdir/%g"`
  sed -e "$ac_comsub
s%@configure_input@%$configure_input%g
s%@srcdir@%$srcdir%g
s%@top_srcdir@%$top_srcdir%g
" $ac_file_inputs | (eval "$ac_sed_cmds") > $ac_file
fi; done
rm -f conftest.s*

# These sed commands are passed to sed as "A NAME B NAME C VALUE D", where
# NAME is the cpp macro being defined and VALUE is the value it is being given.
#
# ac_d sets the value in "#define NAME VALUE" lines.
ac_dA='s%^\([ 	]*\)#\([ 	]*define[ 	][ 	]*\)'
ac_dB='\([ 	][ 	]*\)[^ 	]*%\1#\2'
ac_dC='\3'
ac_dD='%g'
# ac_u turns "#undef NAME" with trailing blanks into "#define NAME VALUE".
ac_uA='s%^\([ 	]*\)#\([ 	]*\)undef\([ 	][ 	]*\)'
ac_uB='\([ 	]\)%\1#\2define\3'
ac_uC=' '
ac_uD='\4%g'
# ac_e turns "#undef NAME" without trailing blanks into "#define NAME VALUE".
ac_eA='s%^\([ 	]*\)#\([ 	]*\)undef\([ 	][ 	]*\)'
ac_eB='$%\1#\2define\3'
ac_eC=' '
ac_eD='%g'

if test "${CONFIG_HEADERS+set}" != set; then
EOF
cat >> $CONFIG_STATUS <<EOF
  CONFIG_HEADERS="main/php_config.h"
EOF
cat >> $CONFIG_STATUS <<\EOF
fi
for ac_file in .. $CONFIG_HEADERS; do if test "x$ac_file" != x..; then
  # Support "outfile[:infile[:infile...]]", defaulting infile="outfile.in".
  case "$ac_file" in
  *:*) ac_file_in=`echo "$ac_file"|sed 's%[^:]*:%%'`
       ac_file=`echo "$ac_file"|sed 's%:.*%%'` ;;
  *) ac_file_in="${ac_file}.in" ;;
  esac

  echo creating $ac_file

  rm -f conftest.frag conftest.in conftest.out
  ac_file_inputs=`echo $ac_file_in|sed -e "s%^%$ac_given_srcdir/%" -e "s%:% $ac_given_srcdir/%g"`
  cat $ac_file_inputs > conftest.in

EOF

# Transform confdefs.h into a sed script conftest.vals that substitutes
# the proper values into config.h.in to produce config.h.  And first:
# Protect against being on the right side of a sed subst in config.status.
# Protect against being in an unquoted here document in config.status.
rm -f conftest.vals
cat > conftest.hdr <<\EOF
s/[\\&%]/\\&/g
s%[\\$`]%\\&%g
s%#define \([A-Za-z_][A-Za-z0-9_]*\) *\(.*\)%${ac_dA}\1${ac_dB}\1${ac_dC}\2${ac_dD}%gp
s%ac_d%ac_u%gp
s%ac_u%ac_e%gp
EOF
sed -n -f conftest.hdr confdefs.h > conftest.vals
rm -f conftest.hdr

# This sed command replaces #undef with comments.  This is necessary, for
# example, in the case of _POSIX_SOURCE, which is predefined and required
# on some systems where configure will not decide to define it.
cat >> conftest.vals <<\EOF
s%^[ 	]*#[ 	]*undef[ 	][ 	]*[a-zA-Z_][a-zA-Z_0-9]*%/* & */%
EOF

# Break up conftest.vals because some shells have a limit on
# the size of here documents, and old seds have small limits too.

rm -f conftest.tail
while :
do
  ac_lines=`grep -c . conftest.vals`
  # grep -c gives empty output for an empty file on some AIX systems.
  if test -z "$ac_lines" || test "$ac_lines" -eq 0; then break; fi
  # Write a limited-size here document to conftest.frag.
  echo '  cat > conftest.frag <<CEOF' >> $CONFIG_STATUS
  sed ${ac_max_here_lines}q conftest.vals >> $CONFIG_STATUS
  echo 'CEOF
  sed -f conftest.frag conftest.in > conftest.out
  rm -f conftest.in
  mv conftest.out conftest.in
' >> $CONFIG_STATUS
  sed 1,${ac_max_here_lines}d conftest.vals > conftest.tail
  rm -f conftest.vals
  mv conftest.tail conftest.vals
done
rm -f conftest.vals

cat >> $CONFIG_STATUS <<\EOF
  rm -f conftest.frag conftest.h
  echo "/* $ac_file.  Generated automatically by configure.  */" > conftest.h
  cat conftest.in >> conftest.h
  rm -f conftest.in
  if cmp -s $ac_file conftest.h 2>/dev/null; then
    echo "$ac_file is unchanged"
    rm -f conftest.h
  else
    # Remove last slash and all that follows it.  Not all systems have dirname.
      ac_dir=`echo $ac_file|sed 's%/[^/][^/]*$%%'`
      if test "$ac_dir" != "$ac_file" && test "$ac_dir" != .; then
      # The file is in a subdirectory.
      test ! -d "$ac_dir" && mkdir "$ac_dir"
    fi
    rm -f $ac_file
    mv conftest.h $ac_file
  fi
fi; done

EOF
cat >> $CONFIG_STATUS <<EOF


if test "\$CONFIG_FILES" = "$ALL_OUTPUT_FILES" || test "\$CONFIG_FILES" = " $ALL_OUTPUT_FILES" || test -z "\$CONFIG_FILES"; then
  REDO_ALL=yes
fi

if test ! -f $srcdir/ext/bcmath/number.c; then
  echo "creating number.c"
  echo "/* Dummy File */" > $srcdir/ext/bcmath/number.c
  echo "creating number.h"
  echo "/* Dummy File */" > $srcdir/ext/bcmath/number.h
fi

################################################################
# Create configuration headers
#

test -d TSRM || $php_shtool mkdir TSRM
echo '#include "../main/php_config.h"' > TSRM/tsrm_config.h

test -d Zend || $php_shtool mkdir Zend

cat >Zend/zend_config.h <<FEO
#include "../main/php_config.h"
#if defined(APACHE) && defined(PHP_API_VERSION)
#undef HAVE_DLFCN_H
#endif
FEO

# run this only when generating all the files?
if test -n "\$REDO_ALL"; then
  # Hacking while airborne considered harmful.
  #
  echo "creating main/internal_functions.c"
  extensions="$EXT_STATIC"
  sh $srcdir/build/genif.sh $srcdir/main/internal_functions.c.in $srcdir "$EXTRA_MODULE_PTRS" $AWK \$extensions > main/internal_functions.c

  echo "creating main/internal_functions_cli.c"
  cli_extensions="$EXT_CLI_STATIC"
  sh $srcdir/build/genif.sh $srcdir/main/internal_functions.c.in $srcdir "$EXTRA_MODULE_PTRS" $AWK \$cli_extensions > main/internal_functions_cli.c


  if test "$UNAME" = "FreeBSD" && test "$PHP_SAPI" = "apache2filter" && test "$TSRM_PTH" != "pth-config" ; then
    echo "+--------------------------------------------------------------------+"
    echo "|                        *** WARNING ***                             |"
    echo "|                                                                    |"
    echo "| In order to build PHP as a Apache2 module on FreeBSD, you have to  |"
    echo "| add  --with-tsrm-pth to your ./configure line. Therefore you need  |"
    echo "| to install gnu-pth from /usr/ports/devel/pth.                      |"
  fi

  if test -n "$PHP_APXS_BROKEN"; then
    echo "+--------------------------------------------------------------------+"
    echo "| WARNING: Your $APXS script is most likely broken."
    echo "|                                                                    |"
    echo "| Please go read http://www.php.net/faq.build#faq.build.apxs         |"
    echo "| and make the changes described there and try again.                |"
  fi

  # Warn about CGI version with no extra security options.
  if test "$PHP_SAPI" = "cgi"; then
    if test "$REDIRECT" = "0"; then
      if test "$DISCARD_PATH" = "0"; then
        echo "+--------------------------------------------------------------------+"
        echo "|                        *** WARNING ***                             |"
        echo "|                                                                    |"
        echo "| You will be compiling the CGI version of PHP without any           |"
        echo "| redirection checking.  By putting this cgi binary somewhere in     |"
        echo "| your web space, users may be able to circumvent existing .htaccess |"
        echo "| security by loading files directly through the parser.  See        |"
        echo "| http://www.php.net/manual/security.php for more details.           |"
      fi
    fi
  fi


  if test -n "$DEBUG_LOG"; then
    rm -f config.cache
cat <<X
+--------------------------------------------------------------------+
|                       *** ATTENTION ***                            |
|                                                                    |
| Something is likely to be messed up here, because the configure    |
| script was not able to detect a simple feature on your platform.   |
| This is often caused by incorrect configuration parameters. Please |
| see the file debug.log for error messages.                         |
|                                                                    |
| If you are unable to fix this, send the file debug.log to the      |
| php-install@lists.php.net mailing list and include appropiate      |
| information about your setup.                                      |
X
  fi

  if test "$PHP_DB" != "no"; then
cat <<X
+--------------------------------------------------------------------+
|                        *** WARNING ***                             |
|                                                                    |
| You chose to compile PHP with DB extension. This extension is      |
| deprecated and does not support database locking correctly. Please |
| use DBA extension which is a fully operational superset.           |
X
  fi

  if test "$MYSQL_MODULE_TYPE" = "builtin" && test "$PHP_SAPI" != "cgi" && test "$PHP_SAPI" != "cli" && test "$php_multiple_shlib_versions_ok" != "yes"; then
cat <<X
+--------------------------------------------------------------------+
|                        *** WARNING ***                             |
|                                                                    |
| You chose to compile PHP with the built-in MySQL support.  If you  |
| are compiling a server module, and intend to use other server      |
| modules that also use MySQL (e.g, mod_auth_mysql, PHP 3.0,         |
| mod_perl) you must NOT rely on PHP's built-in MySQL support, and   |
| instead build it with your local MySQL support files, by adding    |
| --with-mysql=/path/to/mysql to your configure line.                |
X
  fi

  # Warn about linking Apache with libpthread if oci8 extension is enabled on linux.
  if test "$PHP_OCI8" != "no" -o "$PHP_ORACLE" != "no"; then
    if test "$PHP_SAPI" = "apache"; then
      if test `uname` = "Linux"; then
cat <<X
+--------------------------------------------------------------------+
|                        *** WARNING ***                             |
|                                                                    |
| Please check that your Apache (httpd) is linked with libpthread.   |
| If not, you have to recompile Apache with pthread. For more        |
| details, see this page: http://www.php.net/manual/ref.oci8.php     |
X
      fi
    fi

    if test "$PHP_SIGCHILD" != "yes"; then
cat <<X
+--------------------------------------------------------------------+
| Notice:                                                            |
| If you encounter <defunc> processes when using a local Oracle-DB   |
| please recompile PHP and specify --enable-sigchild when configuring|
| (This problem has been reported under Linux using Oracle >= 8.1.5) |
X
    fi
  fi

cat <<X
+--------------------------------------------------------------------+
| License:                                                           |
| This software is subject to the PHP License, available in this     |
| distribution in the file LICENSE.  By continuing this installation |
| process, you are bound by the terms of this license agreement.     |
| If you do not agree with the terms of this license, you must abort |
| the installation process at this point.                            |
+--------------------------------------------------------------------+
|                          *** NOTE ***                              |
|            The default for register_globals is now OFF!            |
|                                                                    |
| If your application relies on register_globals being ON, you       |
| should explicitly set it to on in your php.ini file.               |
| Note that you are strongly encouraged to read                      |
| http://www.php.net/manual/en/security.registerglobals.php          |
| about the implications of having register_globals set to on, and   |
| avoid using it if possible.                                        |
+--------------------------------------------------------------------+

Thank you for using PHP.

X

fi

EOF
cat >> $CONFIG_STATUS <<\EOF

exit 0
EOF
chmod +x $CONFIG_STATUS
rm -fr confdefs* $ac_clean_files
test "$no_create" = yes || ${CONFIG_SHELL-/bin/sh} $CONFIG_STATUS || exit 1


